!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=196)}([function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,i;o=r(33),t.graph=o.graph,t.Graph=o.Graph,t.journal=o.journal,t.Journal=o.Journal,t.Network=r(114).Network,t.isBrowser=r(56).isBrowser,t.ComponentLoader=r(79).ComponentLoader,t.Component=r(134).Component,t.helpers=r(393),i=r(135),t.InPorts=i.InPorts,t.OutPorts=i.OutPorts,t.InPort=r(136),t.OutPort=r(138),t.internalSocket=r(55),t.IP=r(25),t.createNetwork=function(e,r,o){var i,s;return"object"!==n(o)&&(o={delay:o}),"function"!=typeof r&&(r=function(e){if(e)throw e}),i=new t.Network(e,o),s=function(e){return e.start(function(t){return t?r(t):r(null,e)})},i.loader.listComponents(function(t){return t?r(t):0===e.nodes.length?s(i):o.delay?void r(null,i):i.connect(function(e){return e?r(e):s(i)})}),i},t.loadFile=function(e,r,o){return o||(o=r,null),o&&"object"!==n(r)&&(r={baseDir:r}),t.graph.loadFile(e,function(e,n){return e?o(e):(r.baseDir&&(n.baseDir=r.baseDir),t.createNetwork(n,o,r))})},t.saveFile=function(e,t,r){return e.save(t,r)},t.asCallback=r(394).asCallback,t.asComponent=r(395).asComponent},function(e,t,r){"use strict";var n=function(e){};e.exports=function(e,t,r,o,i,s,a,c){if(n(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[r,o,i,s,a,c],l=0;(u=new Error(t.replace(/%s/g,function(){return p[l++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var c,u=[],p=!1,l=-1;function h(){p&&c&&(p=!1,c.length?u=c.concat(u):l=-1,u.length&&d())}function d(){if(!p){var e=a(h);p=!0;for(var t=u.length;t;){for(c=u,u=[];++l<t;)c&&c[l].run();l=-1,t=u.length}c=null,p=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new f(e,t)),1!==u.length||p||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){"use strict";e.exports=function(e){for(var t=arguments.length-1,r="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,n=0;n<t;n++)r+="&args[]="+encodeURIComponent(arguments[n+1]);r+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var o=new Error(r);throw o.name="Invariant Violation",o.framesToPop=1,o}},function(e,t,r){"use strict";var n=r(19);e.exports=n},function(e,t,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function s(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,a,c=s(e),u=1;u<arguments.length;u++){for(var p in r=Object(arguments[u]))o.call(r,p)&&(c[p]=r[p]);if(n){a=n(r);for(var l=0;l<a.length;l++)i.call(r,a[l])&&(c[a[l]]=r[a[l]])}}return c}},function(e,t,r){"use strict";var n=r(3),o=r(40),i=r(159),s=(r(1),o.ID_ATTRIBUTE_NAME),a=i,c="__reactInternalInstance$"+Math.random().toString(36).slice(2);function u(e,t){return 1===e.nodeType&&e.getAttribute(s)===String(t)||8===e.nodeType&&e.nodeValue===" react-text: "+t+" "||8===e.nodeType&&e.nodeValue===" react-empty: "+t+" "}function p(e){for(var t;t=e._renderedComponent;)e=t;return e}function l(e,t){var r=p(e);r._hostNode=t,t[c]=r}function h(e,t){if(!(e._flags&a.hasCachedChildNodes)){var r=e._renderedChildren,o=t.firstChild;e:for(var i in r)if(r.hasOwnProperty(i)){var s=r[i],c=p(s)._domID;if(0!==c){for(;null!==o;o=o.nextSibling)if(u(o,c)){l(s,o);continue e}n("32",c)}}e._flags|=a.hasCachedChildNodes}}function d(e){if(e[c])return e[c];for(var t,r,n=[];!e[c];){if(n.push(e),!e.parentNode)return null;e=e.parentNode}for(;e&&(r=e[c]);e=n.pop())t=r,n.length&&h(r,e);return t}var f={getClosestInstanceFromNode:d,getInstanceFromNode:function(e){var t=d(e);return null!=t&&t._hostNode===e?t:null},getNodeFromInstance:function(e){if(void 0===e._hostNode&&n("33"),e._hostNode)return e._hostNode;for(var t=[];!e._hostNode;)t.push(e),e._hostParent||n("34"),e=e._hostParent;for(;t.length;e=t.pop())h(e,e._hostNode);return e._hostNode},precacheChildNodes:h,precacheNode:l,uncacheNode:function(e){var t=e._hostNode;t&&(delete t[c],e._hostNode=null)}};e.exports=f},function(e,t,r){"use strict";e.exports=r(38)},function(e,t,r){"use strict";var n,o="object"==typeof Reflect?Reflect:null,i=o&&"function"==typeof o.apply?o.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function p(e,t,r,n){var o,i,s,a;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),s=i[t]),void 0===s)s=i[t]=r,++e._eventsCount;else if("function"==typeof s?s=i[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(o=u(e))>0&&s.length>o&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return e}function l(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,i(this.listener,this.target,e))}.bind(n);return o.listener=r,n.wrapFn=o,o}function h(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):f(o,o.length)}function d(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var u=c.length,p=f(c,u);for(r=0;r<u;++r)i(p[r],this,t)}return!0},a.prototype.addListener=function(e,t){return p(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return p(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,l(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,l(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,i,s;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return h(this,e,!0)},a.prototype.rawListeners=function(e){return h(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},a.prototype.listenerCount=d,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,r){"use strict";var n=r(46),o=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],i=["scalar","sequence","mapping"];e.exports=function(e,t){var r,s;if(t=t||{},Object.keys(t).forEach(function(t){if(-1===o.indexOf(t))throw new n('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=(r=t.styleAliases||null,s={},null!==r&&Object.keys(r).forEach(function(e){r[e].forEach(function(t){s[String(t)]=e})}),s),-1===i.indexOf(this.kind))throw new n('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}},function(e,t,r){"use strict";var n=r(7),o=r(157);if(void 0===n)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var i=(new n.Component).updater;e.exports=o(n.Component,n.isValidElement,i)},function(e,t){},function(e,t,r){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};e.exports=o},function(e,t,r){"use strict";e.exports=r(492)},function(e,t,r){(function(n){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(o=n))}),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(252)(t);const{formatters:o}=e.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,r(2))},function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var s=i>=0?arguments[i]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,o="/"===s.charAt(0))}return(o?"/":"")+(t=r(n(t.split("/"),function(e){return!!e}),!o).join("/"))||"."},t.normalize=function(e){var i=t.isAbsolute(e),s="/"===o(e,-1);return(e=r(n(e.split("/"),function(e){return!!e}),!i).join("/"))||i||(e="."),e&&s&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var o=n(e.split("/")),i=n(r.split("/")),s=Math.min(o.length,i.length),a=s,c=0;c<s;c++)if(o[c]!==i[c]){a=c;break}var u=[];for(c=a;c<o.length;c++)u.push("..");return(u=u.concat(i.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,o=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!o){n=i;break}}else o=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,n=-1,o=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!o){r=t+1;break}}else-1===n&&(o=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,n=-1,o=!0,i=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===n&&(o=!1,n=s+1),46===a?-1===t?t=s:1!==i&&(i=1):-1!==t&&(i=-1);else if(!o){r=s+1;break}}return-1===t||-1===n||0===i||1===i&&t===n-1&&t===r+1?"":e.slice(t,n)};var o="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(2))},function(e,t,r){(function(n){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(406)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,r(2))},function(e,t,r){"use strict";e.exports={debugTool:null}},function(e,t){
/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t,r){var n=e.__flags||(e.__flags=Object.create(null));if(3!==arguments.length)return n[t];n[t]=r}},function(e,t,r){"use strict";function n(e){return function(){return e}}var o=function(){};o.thatReturns=n,o.thatReturnsFalse=n(!1),o.thatReturnsTrue=n(!0),o.thatReturnsNull=n(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,r){"use strict";var n=r(3),o=r(5),i=r(163),s=r(32),a=r(164),c=r(41),u=r(71),p=r(1),l=[],h=0,d=i.getPooled(),f=!1,m=null;function g(){x.ReactReconcileTransaction&&m||n("123")}var y=[{initialize:function(){this.dirtyComponentsLength=l.length},close:function(){this.dirtyComponentsLength!==l.length?(l.splice(0,this.dirtyComponentsLength),E()):l.length=0}},{initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}}];function v(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=i.getPooled(),this.reconcileTransaction=x.ReactReconcileTransaction.getPooled(!0)}function b(e,t){return e._mountOrder-t._mountOrder}function w(e){var t=e.dirtyComponentsLength;t!==l.length&&n("124",t,l.length),l.sort(b),h++;for(var r=0;r<t;r++){var o,i=l[r],s=i._pendingCallbacks;if(i._pendingCallbacks=null,a.logTopLevelRenders){var u=i;i._currentElement.type.isReactTopLevelWrapper&&(u=i._renderedComponent),o="React update: "+u.getName(),console.time(o)}if(c.performUpdateIfNecessary(i,e.reconcileTransaction,h),o&&console.timeEnd(o),s)for(var p=0;p<s.length;p++)e.callbackQueue.enqueue(s[p],i.getPublicInstance())}}o(v.prototype,u,{getTransactionWrappers:function(){return y},destructor:function(){this.dirtyComponentsLength=null,i.release(this.callbackQueue),this.callbackQueue=null,x.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,r){return u.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,r)}}),s.addPoolingTo(v);var E=function(){for(;l.length||f;){if(l.length){var e=v.getPooled();e.perform(w,null,e),v.release(e)}if(f){f=!1;var t=d;d=i.getPooled(),t.notifyAll(),i.release(t)}}};var x={ReactReconcileTransaction:null,batchedUpdates:function(e,t,r,n,o,i){return g(),m.batchedUpdates(e,t,r,n,o,i)},enqueueUpdate:function e(t){g(),m.isBatchingUpdates?(l.push(t),null==t._updateBatchNumber&&(t._updateBatchNumber=h+1)):m.batchedUpdates(e,t)},flushBatchedUpdates:E,injection:{injectReconcileTransaction:function(e){e||n("126"),x.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e||n("127"),"function"!=typeof e.batchedUpdates&&n("128"),"boolean"!=typeof e.isBatchingUpdates&&n("129"),m=e}},asap:function(e,t){p(m.isBatchingUpdates,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."),d.enqueue(e,t),f=!0}};e.exports=x},function(e,t,r){e.exports=r(211)},function(e,t,r){"use strict";e.exports={current:null}},function(e,t,r){"use strict";var n=r(5),o=r(32),i=r(19),s=(r(4),["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),a={type:null,target:null,currentTarget:i.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function c(e,t,r,n){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=r;var o=this.constructor.Interface;for(var s in o)if(o.hasOwnProperty(s)){0;var a=o[s];a?this[s]=a(r):"target"===s?this.target=n:this[s]=r[s]}var c=null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue;return this.isDefaultPrevented=c?i.thatReturnsTrue:i.thatReturnsFalse,this.isPropagationStopped=i.thatReturnsFalse,this}n(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=i.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=i.thatReturnsTrue)},persist:function(){this.isPersistent=i.thatReturnsTrue},isPersistent:i.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;for(var r=0;r<s.length;r++)this[s[r]]=null}}),c.Interface=a,c.augmentClass=function(e,t){var r=function(){};r.prototype=this.prototype;var i=new r;n(i,e.prototype),e.prototype=i,e.prototype.constructor=e,e.Interface=n({},this.Interface,t),e.augmentClass=this.augmentClass,o.addPoolingTo(e,o.fourArgumentPooler)},o.addPoolingTo(c,o.fourArgumentPooler),e.exports=c},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}e.exports=function(){var e=function(){function e(){var t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(t in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=n,this.data=o,this._isIP=!0,this.scope=null,this.owner=null,this.clonable=!1,this.index=null,this.schema=null,this.datatype="all",i)r=i[t],this[t]=r}return o(e,null,[{key:"isIP",value:function(e){return e&&"object"===r(e)&&!0===e._isIP}}]),o(e,[{key:"clone",value:function(){var t,n,o;for(n in t=new e(this.type),this,this)o=this[n],-1===["owner"].indexOf(n)&&null!==o&&("object"===r(o)?t[n]=JSON.parse(JSON.stringify(o)):t[n]=o);return t}},{key:"move",value:function(e){this.owner=e}},{key:"drop",value:function(){var e,t;for(e in this,t=[],this)this[e],t.push(delete this[e]);return t}}]),e}();return e.types=["data","openBracket","closeBracket"],e}.call(this)},function(e,t,r){var n=r(207),o=r(117),i=o;i.v1=n,i.v4=o,e.exports=i},function(e,t,r){"use strict";var n=r(217),o=r(218);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){o.isString(e)&&(e=b(e));return e instanceof i?e.format():i.prototype.format.call(e)},t.Url=i;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),p=["'"].concat(u),l=["%","/","?",";","#"].concat(p),h=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=r(59);function b(e,t,r){if(e&&o.isObject(e)&&e instanceof i)return e;var n=new i;return n.parse(e,t,r),n}i.prototype.parse=function(e,t,r){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),a=-1!==i&&i<e.indexOf("#")?"?":"#",u=e.split(a);u[0]=u[0].replace(/\\/g,"/");var b=e=u.join(a);if(b=b.trim(),!r&&1===e.split("#").length){var w=c.exec(b);if(w)return this.path=b,this.href=b,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var E=s.exec(b);if(E){var x=(E=E[0]).toLowerCase();this.protocol=x,b=b.substr(E.length)}if(r||E||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var C="//"===b.substr(0,2);!C||E&&g[E]||(b=b.substr(2),this.slashes=!0)}if(!g[E]&&(C||E&&!y[E])){for(var S,k,P=-1,_=0;_<h.length;_++){-1!==(A=b.indexOf(h[_]))&&(-1===P||A<P)&&(P=A)}-1!==(k=-1===P?b.lastIndexOf("@"):b.lastIndexOf("@",P))&&(S=b.slice(0,k),b=b.slice(k+1),this.auth=decodeURIComponent(S)),P=-1;for(_=0;_<l.length;_++){var A;-1!==(A=b.indexOf(l[_]))&&(-1===P||A<P)&&(P=A)}-1===P&&(P=b.length),this.host=b.slice(0,P),b=b.slice(P),this.parseHost(),this.hostname=this.hostname||"";var D="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!D)for(var O=this.hostname.split(/\./),T=(_=0,O.length);_<T;_++){var N=O[_];if(N&&!N.match(d)){for(var I="",R=0,j=N.length;R<j;R++)N.charCodeAt(R)>127?I+="x":I+=N[R];if(!I.match(d)){var F=O.slice(0,_),M=O.slice(_+1),L=N.match(f);L&&(F.push(L[1]),M.unshift(L[2])),M.length&&(b="/"+M.join(".")+b),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=n.toASCII(this.hostname));var G=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+G,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!m[x])for(_=0,T=p.length;_<T;_++){var U=p[_];if(-1!==b.indexOf(U)){var $=encodeURIComponent(U);$===U&&($=escape(U)),b=b.split(U).join($)}}var q=b.indexOf("#");-1!==q&&(this.hash=b.substr(q),b=b.slice(0,q));var z=b.indexOf("?");if(-1!==z?(this.search=b.substr(z),this.query=b.substr(z+1),t&&(this.query=v.parse(this.query)),b=b.slice(0,z)):t&&(this.search="",this.query={}),b&&(this.pathname=b),y[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var H=this.search||"";this.path=G+H}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),t+i+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(a=a.replace("#","%23"))+n},i.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(o.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var r=new i,n=Object.keys(this),s=0;s<n.length;s++){var a=n[s];r[a]=this[a]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0;u<c.length;u++){var p=c[u];"protocol"!==p&&(r[p]=e[p])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!y[e.protocol]){for(var l=Object.keys(e),h=0;h<l.length;h++){var d=l[h];r[d]=e[d]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||g[e.protocol])r.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var m=r.pathname||"",v=r.search||"";r.path=m+v}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),E=w||b||r.host&&e.pathname,x=E,C=r.pathname&&r.pathname.split("/")||[],S=(f=e.pathname&&e.pathname.split("/")||[],r.protocol&&!y[r.protocol]);if(S&&(r.hostname="",r.port=null,r.host&&(""===C[0]?C[0]=r.host:C.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),E=E&&(""===f[0]||""===C[0])),w)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,C=f;else if(f.length)C||(C=[]),C.pop(),C=C.concat(f),r.search=e.search,r.query=e.query;else if(!o.isNullOrUndefined(e.search)){if(S)r.hostname=r.host=C.shift(),(D=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=D.shift(),r.host=r.hostname=D.shift());return r.search=e.search,r.query=e.query,o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!C.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var k=C.slice(-1)[0],P=(r.host||e.host||C.length>1)&&("."===k||".."===k)||""===k,_=0,A=C.length;A>=0;A--)"."===(k=C[A])?C.splice(A,1):".."===k?(C.splice(A,1),_++):_&&(C.splice(A,1),_--);if(!E&&!x)for(;_--;_)C.unshift("..");!E||""===C[0]||C[0]&&"/"===C[0].charAt(0)||C.unshift(""),P&&"/"!==C.join("/").substr(-1)&&C.push("");var D,O=""===C[0]||C[0]&&"/"===C[0].charAt(0);S&&(r.hostname=r.host=O?"":C.length?C.shift():"",(D=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=D.shift(),r.host=r.hostname=D.shift()));return(E=E||r.host&&C.length)&&!O&&C.unshift(""),C.length?r.pathname=C.join("/"):(r.pathname=null,r.path=null),o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},i.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){const n=r(33),o=e=>({name:e.id,type:e.type,description:e.type,addressable:e.addressable,schema:e.schema});t.componentForLibrary=e=>({name:e.name,icon:e.icon||"cog",description:e.description||"",subgraph:e.subgraph,inports:e.inPorts.map(o),outports:e.outPorts.map(o)}),t.getGraphType=e=>{const t=e;return(null!=t.properties.environment?t.properties.environment.type:void 0)||"html"!==(null!=t.properties.environment?t.properties.environment.runtime:void 0)||(t.properties.environment.type="noflo-browser"),(null!=t.properties.environment?t.properties.environment.type:void 0)?t.properties.environment.type:null},t.getComponentType=e=>{const t=e.code.match(/@runtime ([a-z-]+)/);return t?t[1]:null},t.getRemoteNodes=(e,r)=>{const n=r;return n.remote.reduce((r,o)=>r.then(r=>{if(!(null!=r.nodes?r.nodes.length:void 0))return Promise.reject(new Error(`Node ${r.name} doesn't contain child nodes`));const[i]=r.nodes.filter(e=>e.id===o);return i?e.protocol.component.getsource({name:i.component}).catch(t=>-1!==i.component.indexOf("/")?Promise.reject(t):e.definition.namespace?e.protocol.component.getsource({name:`${e.definition.namespace}/${i.component}`}):Promise.reject(t)).then(e=>["json","fbp"].includes(e.language)?t.loadGraph(e).then(e=>(n.graphs.push(e),Promise.resolve(e))):(n.component=e,Promise.resolve(e))):Promise.reject(new Error(`Node ${o} not found in graph ${r.name||r.properties.id}`))}),Promise.resolve(n.graphs[n.graphs.length-1])).then(()=>(n.remote=[],n))},t.loadGraph=e=>new Promise((t,r)=>{let o;switch(e.language){case"json":o="loadJSON";break;case"fbp":o="loadFBP";break;default:return r(new Error(`Unknown format ${e.language} for graph ${e.name}`))}return o="json"===e.language?"loadJSON":"loadFBP",n.graph[o](e.code,(n,o)=>{if(n)return r(n);const i=o;return i.name=e.name,t(i)})}),t.isDefaultRuntime=e=>"iframe"===e.protocol&&"https://noflojs.org/noflo-browser/everything.html?fbp_noload=true&fbp_protocol=iframe"===e.address,t.ensureIframe=(e,t)=>{const r=e;if("iframe"!==r.definition.protocol)return Promise.resolve();r.definition.querySelector=`iframe[data-runtime='${r.definition.id}']`;let n=document.body.querySelector(r.definition.querySelector);return n||((n=document.createElement("iframe")).setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),n.setAttribute("data-runtime",r.definition.id),n.setAttribute("data-project",t.id),n.className="iframe-runtime",document.body.appendChild(n)),r.transport.iframe?r.transport.iframe===n?Promise.resolve():r.disconnect().then(()=>(r.transport.iframe=n,Promise.resolve())):(r.transport.iframe=n,Promise.resolve())}},function(e,t,r){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=[];
/*!
 * Chai version
 */t.version="4.1.2",
/*!
 * Assertion Error
 */
t.AssertionError=r(145);
/*!
 * Utils for plugins (not exported)
 */
var o=r(437);t.use=function(e){return~n.indexOf(e)||(e(t,o),n.push(e)),t},
/*!
 * Utility Functions
 */
t.util=o;
/*!
 * Configuration
 */
var i=r(30);t.config=i;
/*!
 * Primary `Assertion` prototype
 */
var s=r(454);t.use(s);
/*!
 * Core Assertions
 */
var a=r(455);t.use(a);
/*!
 * Expect interface
 */
var c=r(456);t.use(c);
/*!
 * Should interface
 */
var u=r(457);t.use(u);
/*!
 * Assert interface
 */
var p=r(458);t.use(p)},function(e,t){e.exports={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","inspect","toJSON"]}},function(e,t){
/*!
 * Chai - transferFlags utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t,r){var n=e.__flags||(e.__flags=Object.create(null));for(var o in t.__flags||(t.__flags=Object.create(null)),r=3!==arguments.length||r,n)(r||"object"!==o&&"ssfi"!==o&&"lockSsfi"!==o&&"message"!=o)&&(t.__flags[o]=n[o])}},function(e,t,r){"use strict";var n=r(3),o=(r(1),function(e){if(this.instancePool.length){var t=this.instancePool.pop();return this.call(t,e),t}return new this(e)}),i=function(e){e instanceof this||n("25"),e.destructor(),this.instancePool.length<this.poolSize&&this.instancePool.push(e)},s=o,a={addPoolingTo:function(e,t){var r=e;return r.instancePool=[],r.getPooled=t||s,r.poolSize||(r.poolSize=10),r.release=i,r},oneArgumentPooler:o,twoArgumentPooler:function(e,t){if(this.instancePool.length){var r=this.instancePool.pop();return this.call(r,e,t),r}return new this(e,t)},threeArgumentPooler:function(e,t,r){if(this.instancePool.length){var n=this.instancePool.pop();return this.call(n,e,t,r),n}return new this(e,t,r)},fourArgumentPooler:function(e,t,r,n){if(this.instancePool.length){var o=this.instancePool.pop();return this.call(o,e,t,r,n),o}return new this(e,t,r,n)}};e.exports=a},function(e,t,r){t.graph=r(197),t.Graph=t.graph.Graph,t.journal=r(203),t.Journal=t.journal.Journal},function(e,t){e.exports={component:{title:"Component protocol",description:"Protocol for handling the component registry.",output:{error:{id:"output/error",description:"Error response to a command on component protocol",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["component"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}}]},component:{id:"output/component",description:"Transmit the metadata about a component instance.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["component"]},command:{enum:["component"]},payload:{required:["name","subgraph","inPorts","outPorts"],additionalProperties:!1,properties:{name:{type:"string",description:"component name in format that can be used in graphs. Should contain the component library prefix.",example:"my-project/MyComponent"},description:{type:"string",description:"textual description on what the component does"},icon:{type:"string",description:'Visual icon for the component, matching icon names in <a href="http://fortawesome.github.io/Font-Awesome/icons/">Font Awesome</a>'},subgraph:{type:"boolean",description:"boolean telling whether the component is a subgraph"},inPorts:{description:"list of input ports of the component",$ref:"/shared/port_definition"},outPorts:{description:"list of output ports of the component",$ref:"/shared/port_definition"}}}}}]},componentsready:{id:"output/componentsready",description:"Indication that a component listing has finished",properties:{protocol:{enum:["component"],type:"string",description:"type of protocol"},command:{enum:["componentsready"],description:"command to be executed",example:"addnode"},payload:{type:"integer",description:"number of components transmitted in this batch",example:42}}},source:{id:"output/source",description:"Source code for a component. In cases where a runtime receives a `source` message, it should do whatever operations are needed for making that component available for graphs, including possible compilation.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["component"]},command:{enum:["source"]},payload:{required:["name","language","code"],additionalProperties:!1,properties:{name:{type:"string",description:"Name of the component. Must not contain library prefix",example:"MyComponent"},language:{type:"string",description:"The programming language used for the component code",example:"c++"},library:{type:"string",description:"Component library identifier",example:"components-common"},code:{type:"string",description:"Component source code"},tests:{type:"string",description:"unit tests for the component"}}}}}]}},input:{list:{id:"input/list",description:"Request a list of currently available components. Will be responded with a set of `component` messages.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["component"]},command:{enum:["list"]},payload:{required:[],properties:{secret:{type:"string",description:"access token to authorize user"}}}}}]},getsource:{id:"input/getsource",description:"Request for the source code of a given component. Will be responded with a `source` message.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["component"]},command:{enum:["getsource"]},payload:{required:["name"],additionalProperties:!1,properties:{name:{type:"string",description:"Name of the component to for which to get source code. Should contain the library prefix",example:"my-project/SomeComponent"},secret:{type:"string",description:"access token to authorize user"}}}}}]},source:{id:"input/source",description:"Source code for a component. In cases where a runtime receives a `source` message, it should do whatever operations are needed for making that component available for graphs, including possible compilation.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["component"]},command:{enum:["source"]},payload:{required:["name","language","code"],additionalProperties:!1,properties:{name:{type:"string",description:"Name of the component. Must not contain library prefix.",example:"SomeComponent"},language:{type:"string",description:"The programming language used for the component code",example:"c++"},library:{type:"string",description:"Component library identifier",example:"my-project"},code:{type:"string",description:"Component source code"},tests:{type:"string",description:"Unit tests for the component"},secret:{type:"string"}}}}}]}}},graph:{$schema:"http://json-schema.org/draft-04/schema#",title:"Graph protocol",description:"This protocol is utilized for communicating about graph changes in both directions.",output:{error:{id:"output/error",description:"Error response to a command on graph protocol",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}}]},clear:{id:"output/clear",description:"An empty graph was initialized",$ref:"../input/clear"},addnode:{id:"output/addnode",description:"Add node to a graph.",$ref:"../input/addnode"},removenode:{id:"output/removenode",description:"Remove a node from a graph.",$ref:"../input/removenode"},renamenode:{id:"output/renamenode",description:"Change the ID of a node in the graph",$ref:"../input/renamenode"},changenode:{id:"output/changenode",description:"Change the metadata associated to a node in the graph",$ref:"../input/changenode"},addedge:{id:"output/addedge",description:"Add an edge to the graph",$ref:"../input/addedge"},removeedge:{id:"output/removeedge",description:"Remove an edge from the graph",$ref:"../input/removeedge"},changeedge:{id:"output/changeedge",description:"Change an edge's metadata",$ref:"../input/changeedge"},addinitial:{id:"output/addinitial",description:"Add an IIP to the graph",$ref:"../input/addinitial"},removeinitial:{id:"output/removeinitial",description:"Remove an IIP from the graph",$ref:"../input/removeinitial"},addinport:{id:"output/addinport",description:"Add an exported inport to the graph.",$ref:"../input/addinport"},removeinport:{id:"output/removeinport",description:"Remove an exported port from the graph",$ref:"../input/removeinport"},renameinport:{id:"output/renameinport",description:"Rename an exported port in the graph",$ref:"../input/renameinport"},addoutport:{id:"output/addoutport",description:"Add an exported outport to the graph.",$ref:"../input/addoutport"},removeoutport:{id:"output/removeoutport",description:"Remove an exported port from the graph",$ref:"../input/removeoutport"},renameoutport:{id:"output/renameoutport",description:"Rename an exported port in the graph",$ref:"../input/renameoutport"},addgroup:{id:"output/addgroup",description:"Add a group to the graph",$ref:"../input/addgroup"},removegroup:{id:"output/removegroup",description:"Remove a group from the graph",$ref:"../input/removegroup"},renamegroup:{id:"output/renamegroup",description:"Rename a group in the graph.",$ref:"../input/renamegroup"},changegroup:{id:"output/changegroup",description:"Change a group's metadata",$ref:"../input/changegroup"}},input:{clear:{id:"input/clear",description:"Initialize an empty graph.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["clear"]},payload:{required:["id"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the graph being created. Used for all subsequent messages related to the graph instance"},name:{type:"string",description:"Human-readable label for the graph"},library:{type:"string",description:"Component library identifier"},main:{type:"boolean",description:"Identifies the graph as a main graph of a project that should not be registered as a component\nGraphs registered in this way should also be available for use as subgraphs in other graphs. Therefore a graph registration and later changes to it may cause component messages of the Component protocol to be sent back to the client informing of possible changes in the ports of the subgraph component."},icon:{type:"string",description:"Icon to use for the graph when used as a component"},description:{type:"string",description:"Description to use for the graph when used as a component"},secret:{type:"string",description:"access token to authorize user"}}}}}]},addnode:{id:"input/addnode",description:"Add node to a graph.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["addnode"]},payload:{required:["id","component","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},component:{type:"string",description:"component name used for the node"},metadata:{description:"structure of key-value pairs for node metadata",$ref:"/shared/metadata_node"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},removenode:{id:"input/removenode",description:"Remove a node from a graph.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["removenode"]},payload:{required:["id","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},renamenode:{id:"input/renamenode",description:"Change the ID of a node in the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["renamenode"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{type:"string",description:"original identifier for the node"},to:{type:"string",description:"new identifier for the node"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},changenode:{id:"input/changenode",description:"Change the metadata associated to a node in the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["changenode"]},payload:{required:["id","metadata","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},metadata:{description:"structure of key-value pairs for node metadata",$ref:"/shared/metadata_node"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},addedge:{id:"input/addedge",description:"Add an edge to the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["addedge"]},payload:{required:["src","tgt","graph"],additionalProperties:!1,properties:{src:{$ref:"/shared/port",description:"source node for the edge"},tgt:{$ref:"/shared/port",description:"target node for the edge"},metadata:{description:"Structure of key-value pairs for edge metadata",$ref:"/shared/metadata_edge"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},removeedge:{id:"input/removeedge",description:"Remove an edge from the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["removeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{graph:{type:"string",description:"graph the action targets"},src:{description:"source node for the edge",$ref:"/shared/port"},tgt:{description:"target node for the edge",$ref:"/shared/port"},secret:{type:"string",description:"access token to authorize user"}}}}}]},changeedge:{id:"input/changeedge",description:"Change an edge's metadata",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["changeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{graph:{type:"string",description:"graph the action targets"},metadata:{description:"struct of key-value pairs for edge metadata",$ref:"/shared/metadata_edge"},src:{description:"source node for the edge",$ref:"/shared/port"},tgt:{description:"target node for the edge",$ref:"/shared/port"},secret:{type:"string",description:"access token to authorize user"}}}}}]},addinitial:{id:"input/addinitial",description:"Add an IIP to the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["addinitial"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{graph:{type:"string",description:"graph the action targets"},metadata:{type:"object",description:"structure of key-value pairs for IIP metadata",$ref:"/shared/metadata_edge"},src:{description:"source data for the edge",$ref:"/shared/iip"},tgt:{description:"target node/port for the edge",$ref:"/shared/port"},secret:{type:"string",description:"access token to authorize user"}}}}}]},removeinitial:{id:"input/removeinitial",description:"Remove an IIP from the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["removeinitial"]},payload:{required:["tgt","graph"],additionalProperties:!1,properties:{src:{description:"IIP data",$ref:"/shared/iip"},tgt:{$ref:"/shared/port",description:"target node/port for the edge"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},addinport:{id:"input/addinport",description:"Add an exported inport to the graph.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["addinport"]},payload:{additionalProperties:!1,required:["public","port","node","graph"],properties:{public:{type:"string",description:"the exported name of the port"},node:{type:"string",description:"node identifier"},port:{type:"string",description:"internal port name"},metadata:{description:"structure of key-value pairs for node metadata",$ref:"/shared/metadata_node"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},removeinport:{id:"input/removeinport",description:"Remove an exported port from the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["removeinport"]},payload:{required:["public","graph"],additionalProperties:!1,properties:{public:{type:"string",description:"the exported name of the port to remove"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},renameinport:{id:"input/renameinport",description:"Rename an exported port in the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["renameinport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{type:"string",description:"original exported port name"},to:{type:"string",description:"new exported port name"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},addoutport:{id:"input/addoutport",description:"Add an exported outport to the graph.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["addoutport"]},payload:{required:["public","node","port","graph"],additionalProperties:!1,properties:{public:{type:"string",description:"the exported name of the port"},node:{type:"string",description:"node identifier"},port:{type:"string",description:"internal port name"},metadata:{description:"structure of key-value pairs for port metadata",$ref:"/shared/metadata_node"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},removeoutport:{id:"input/removeoutport",description:"Remove an exported port from the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["removeoutport"]},payload:{required:["public"],additionalProperties:!1,properties:{public:{type:"string",description:"the exported name of the port to remove"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},renameoutport:{id:"input/renameoutport",description:"Rename an exported port in the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["renameoutport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{type:"string",description:"original exported port name"},to:{type:"string",description:"new exported port name"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},addgroup:{id:"input/addgroup",description:"Add a group to the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["addgroup"]},payload:{required:["name","nodes","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},nodes:{type:"array",description:"an array of node ids part of the group"},metadata:{description:"structure of key-value pairs for group metadata",$ref:"/shared/metadata_group"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},removegroup:{id:"input/removegroup",description:"Remove a group from the graph",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["removegroup"]},payload:{required:["name","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},renamegroup:{id:"input/renamegroup",description:"Rename a group in the graph.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["renamegroup"]},payload:{required:["from","to","graph"],properties:{from:{type:"string",description:"original group name"},to:{type:"string",description:"new group name"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},changegroup:{id:"input/changegroup",description:"Change a group's metadata",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["graph"]},command:{enum:["changegroup"]},payload:{required:["name","metadata","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},metadata:{description:"structure of key-value pairs for group metadata",$ref:"/shared/metadata_group"},graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]}}},network:{$schema:"http://json-schema.org/draft-04/schema#",title:"Network protocol",description:"Protocol for starting and stopping FBP networks, and finding out about their state.",output:{stopped:{id:"output/stopped",description:"Inform that a given network has stopped.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["stopped"]},payload:{required:["graph"],additionalProperties:!1,properties:{time:{type:"string",format:"date-time",description:"time when the network was stopped"},uptime:{type:"number",description:"time the network was running, in seconds"},graph:{type:"string",description:"graph the action targets"},running:{type:"boolean",description:"whether or not network is currently running"},started:{type:"boolean",description:"whether or not network has been started"},debug:{type:"boolean",description:"whether or not network is in debug mode"}}}}}]},started:{id:"output/started",description:"Inform that a given network has been started.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["started"]},payload:{required:["graph"],additionalProperties:!1,properties:{time:{type:"string",format:"date-time",description:"time when the network was started"},graph:{type:"string",description:"graph the action targets"},started:{type:"boolean",description:"whether or not network has started running"},running:{type:"boolean",description:"whether or not network is currently running"},debug:{type:"boolean",description:"whether or not network is in debug mode"}}}}}]},status:{id:"output/status",description:"Response to a getstatus message.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["status"]},payload:{required:["running","graph"],additionalProperties:!1,properties:{graph:{type:"string",description:"graph the action targets"},uptime:{type:"number",description:"time the network has been running, in seconds"},started:{type:"boolean",description:"whether or not network has started running"},running:{type:"boolean",description:"boolean tells whether the network is running or not"},debug:{type:"boolean",description:"whether or not network is in debug mode"}}}}}]},output:{id:"output/output",description:"An output message from a running network, roughly similar to STDOUT output of a Unix process, or a line of console.log in JavaScript. Output can also be used for passing images from the runtime to the UI.'",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["output"]},payload:{required:["message"],additionalProperties:!1,properties:{message:{type:"string",description:"contents of the output line"},type:{type:"string",enum:["message","previewurl"],description:"type of output, either message or previewurl"},url:{type:"string",format:"uri",description:"URL for an image generated by the runtime"}}}}}]},error:{id:"output/error",description:"An error from a running network, roughly similar to STDERR output of a Unix process, or a line of console.error in JavaScript.'",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["error"]},payload:{required:["message"],additionalProperties:!1,properties:{message:{description:"contents of the error message",type:"string"},stack:{description:"stack trace",type:"string"},graph:{type:"string",description:"graph the action targets"}}}}}]},processerror:{id:"output/processerror",description:"When in debug mode, a network can signal an error happening inside a process.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["processerror"]},payload:{required:["id","error","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier of the node"},error:{type:"string",description:"error from the component"},graph:{type:"string",description:"graph the action targets"}}}}}]},icon:{id:"output/icon",description:"Icon of a component instance has changed.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["icon"]},payload:{required:["id","icon","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier of the node"},icon:{type:"string",description:"new icon for the component instance"},graph:{type:"string",description:"graph the action targets"}}}}}]},connect:{id:"output/connect",description:"Beginning of transmission on an edge.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["connect"]},payload:{$ref:"/shared/network_event",additionalProperties:!1}}}]},begingroup:{id:"output/begingroup",description:"Beginning of a group (bracket IP) on an edge.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["begingroup"]},payload:{allOf:[{$ref:"/shared/network_event"},{required:["group"],properties:{group:{description:"group name",type:"string"}}},{additionalProperties:!1,properties:{group:!0,id:!0,tgt:!0,src:!0,graph:!0,subgraph:!0}}]}}}]},data:{id:"output/data",description:"Data transmission on an edge.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["data"]},payload:{allOf:[{$ref:"/shared/network_event"},{required:["data"],properties:{data:{description:"actual data being transmitted, encoded in a way that can be carried over the protocol transport"},type:{type:"string",description:"The basic datatype sent",example:"array"},schema:{type:"string",format:"uri",description:"Link to JSON schema describing the format of the data",example:"https://example.net/schemas/person.json"}}},{additionalProperties:!1,properties:{data:!0,id:!0,src:!0,tgt:!0,graph:!0,subgraph:!0}}]}}}]},endgroup:{id:"output/endgroup",description:"Ending of a group (bracket IP) on an edge.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["endgroup"]},payload:{allOf:[{$ref:"/shared/network_event"},{required:["group"],properties:{group:{description:"group name",type:"string"}}},{additionalProperties:!1,properties:{group:!0,id:!0,src:!0,tgt:!0,graph:!0,subgraph:!0}}]}}}]},disconnect:{id:"output/disconnect",description:"End of transmission on an edge.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["disconnect"]},payload:{$ref:"/shared/network_event",additionalProperties:!1}}}]},edges:{id:"output/edges",description:"List of edges user has selected for inspection in a user interface or debugger, sent from runtime to UI.",$ref:"../input/edges"}},input:{start:{id:"input/start",description:"Start execution of a FBP network based on a given graph.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["start"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},getstatus:{id:"input/getstatus",description:"Get the current status of the runtime. The runtime should respond with a status message.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["getstatus"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},stop:{id:"input/stop",description:"Stop execution of a FBP network based on a given graph.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["stop"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{type:"string",description:"graph the action targets"},secret:{type:"string",description:"access token to authorize user"}}}}}]},persist:{id:"input/persist",description:"Tells the runtime to persist the current state of graphs and components so that they are available between restarts. Requires the network:persist capability.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["persist"]},payload:{required:[],additionalProperties:!1,properties:{secret:{type:"string",description:"access token to authorize user"}}}}}]},debug:{id:"input/debug",description:"Set a network into debug mode",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["debug"]},payload:{additionalProperties:!1,required:["enable","graph"],properties:{enable:{description:"tells whether to put the network in debug mode",type:"boolean"},graph:{description:"graph the action targets",type:"string"},secret:{description:"access token to authorize the user",type:"string"}}}}}]},edges:{id:"input/edges",description:"List of edges user has selected for inspection in a user interface or debugger, sent from UI to a runtime.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["network"]},command:{enum:["edges"]},payload:{required:["graph","edges"],additionalProperties:!1,properties:{graph:{description:"graph the action targets",type:"string"},edges:{type:"array",description:"list of selected edges",items:{type:"object",required:["src","tgt"],additionalProperties:!1,properties:{src:{description:"source node for the edge",$ref:"/shared/port"},tgt:{description:"target node for the edge",$ref:"/shared/port"}}}},secret:{type:"string",description:"access token to authorize user"}}}}}]}}},runtime:{title:"Runtime protocol",description:"When a client connects to a FBP procotol it may choose to discover the capabilities and other information about the runtime.",input:{getruntime:{id:"input/getruntime",description:"Request the information about the runtime. When receiving this message the runtime should response with a runtime message. If the runtime is currently running a graph and it is able to speak the full Runtime protocol, it should follow up with a ports message.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["runtime"]},command:{enum:["getruntime"]},payload:{required:[],properties:{secret:{type:"string",description:"access token to authorize user"}}}}}]},packet:{id:"input/packet",description:"Runtimes that can be used as remote subgraphs (i.e. ones that have reported supporting the protocol:runtime capability) need to be able to receive and transmit information packets at their exposed ports.\nThese packets can be send from the client to the runtimes input ports, or from runtimes output ports to the client.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["runtime"]},command:{enum:["packet"]},payload:{required:["port","event","graph"],additionalProperties:!1,properties:{port:{type:"string",description:"port name for the input or output port"},event:{type:"string",enum:["connect","begingroup","data","endgroup","disconnect"],description:"packet event"},type:{type:"string",description:"The basic datatype sent",example:"array"},schema:{type:"string",format:"uri",description:"Link to JSON schema describing the format of the data",example:"https://example.net/schemas/person.json"},graph:{type:"string",description:"graph the action targets"},payload:{description:"payload for the packet. Used only with begingroup (for group names) and data packets"},secret:{type:"string",description:"access token to authorize user"}}}}}]}},output:{error:{id:"output/error",description:"Error response to a command on runtime protocol",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["runtime"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}}]},ports:{id:"output/ports",description:"Message sent by the runtime to signal its available ports. The runtime is responsible for sending the up-to-date list of available ports back to client whenever it changes.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["runtime"]},command:{enum:["ports"]},payload:{required:["graph","inPorts","outPorts"],additionalProperties:!1,properties:{graph:{type:"string",description:"ID of the currently configured main graph running on the runtime"},inPorts:{description:"list of input ports of the runtime",$ref:"/shared/port_definition"},outPorts:{description:"list of output ports of the runtime",$ref:"/shared/port_definition"}}}}}]},runtime:{id:"output/runtime",description:"Response from the runtime to the getruntime request.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["runtime"]},command:{enum:["runtime"]},payload:{required:["version","capabilities","type"],additionalProperties:!1,properties:{id:{type:"string",description:"unique runtime ID. Must be a UUID, version 4",example:"f18a4924-9d4f-414d-a37c-cd24b39bba10"},label:{description:"Human-readable description of the runtime",type:"string"},version:{description:"version of the runtime protocol that the runtime supports",type:"string",example:"0.6"},allCapabilities:{description:"<a href='#capabilities'>capability strings</a> for things the runtime is able to do. May include things not permitted for this client.",$ref:"/shared/capabilities"},capabilities:{description:"<a href='#capabilities'>capability strings</a> for things the runtime is able to do for this client.",$ref:"/shared/capabilities"},graph:{description:"ID of the currently configured main graph running on the runtime, if any",type:"string",example:"service-main"},type:{description:"type of the runtime",type:"string",example:"microflo"},namespace:{description:"Library namespace of the project running on the runtime, if any. Must match that of components belonging to the (top-level) of project.",type:"string",example:"my-project-foo"},repository:{description:"Source-code repository URL of the project running on the runtime, if any",type:"string",example:"https://github.com/flowbased/fbp-protocol.git"},repositoryVersion:{description:"Unique version identifier of the source code of the project, if known. The version should be available in @repository.",type:"string",example:"0.6.3-8-g90edcfc"}}}}}]},packetsent:{id:"output/packetsent",description:"Confirmation that a packet has been sent",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["runtime"]},command:{enum:["packetsent"]},payload:{required:["port","event","graph"],additionalProperties:!1,properties:{port:{type:"string",description:"port name for the input port"},event:{type:"string",enum:["connect","begingroup","data","endgroup","disconnect"],description:"packet event"},type:{type:"string",description:"The basic datatype sent",example:"array"},schema:{type:"string",format:"uri",description:"Link to JSON schema describing the format of the data",example:"https://example.net/schemas/person.json"},graph:{type:"string",description:"graph the action targeted"},payload:{description:"payload for the packet. Used only with begingroup (for group names) and data packets"}}}}}]},packet:{id:"output/packet",description:"Runtimes that can be used as remote subgraphs (i.e. ones that have reported supporting the protocol:runtime capability) need to be able to receive and transmit information packets at their exposed ports.\nThese packets can be send from the client to the runtimes input ports, or from runtimes output ports to the client.",$ref:"../input/packet"}}},shared:{$schema:"http://json-schema.org/draft-04/schema#",title:"Shared",description:"Shared schema fragments",secret:{id:"secret",description:"access token to authorize the client",type:"string"},graph_id:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},message:{id:"message",description:"protocol message",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"}}},metadata_node:{id:"metadata_node",description:"structure of key-value pairs for graph node metadata",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},metadata_edge:{id:"metadata_edge",description:"structure of key-value pairs for graph edge metadata",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},metadata_group:{id:"metadata_group",description:"structure of key-value pairs for graph group metadata",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},port:{id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{type:"string",description:"node identifier"},port:{type:"string",description:"port name"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},port_definition:{id:"port_definition",type:"array",items:{type:"object",required:["id","type"],additionalProperties:!1,properties:{id:{type:"string",description:"port name"},type:{description:"port datatype",type:"string",example:"boolean"},schema:{type:"string",format:"uri",description:"Link to JSON schema for data on this port",example:"https://example.net/schemas/person.json"},required:{description:"whether the port needs to be connected for the component to work",type:"boolean",example:!0},addressable:{type:"boolean",description:"whether the port is an ArrayPort",example:!1},description:{type:"string",description:"textual description of the port"},values:{type:"array",description:"list of values accepted for the port"},default:{description:"default value for the port"}}}},iip:{id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},network_event:{id:"network_event",required:["id","tgt","graph"],properties:{id:{type:"string",description:"textual edge identifier, usually in form of a FBP language line"},src:{description:"source node for the edge",$ref:"/shared/port"},tgt:{description:"target node for the edge",$ref:"/shared/port"},graph:{type:"string",description:"graph the action targets"},subgraph:{type:"array",description:"Subgraph identifier for the event. An array of node IDs.",items:{type:"string"}}}},capabilities:{id:"capabilities",type:"array",items:{type:"string",enums:["protocol:network","network:persist","network:status","network:data","network:control","protocol:component","component:getsource","component:setsource","protocol:runtime","protocol:graph","graph:readonly","protocol:trace"],_enumDescriptions:[{name:"protocol:network",description:"can control and introspect its running networks using the Network protocol. DEPRECATED. Instead the individual network:... capabilities should be used. Implies capabilities network:status, network:data, network:control. Does not imply capability network:persist.",inputs:["network:start","network:getstatus","network:stop","network:debug","network:edges"],outputs:["network:stopped","network:started","network:status","network:output","network:error","network:processerror","network:icon","network:connect","network:begingroup","network:data","network:endgroup","network:disconnect","network:edges"]},{name:"network:persist",description:"can *flash* a running graph setup to the runtime, making it persistent across restarts",inputs:["network:persist"],outputs:["network:persist","network:error"]},{name:"network:status",description:"can get and follow changes to network status",inputs:["network:getstatus"],outputs:["network:status","network:started","network:stopped","network:error"]},{name:"network:data",description:"can listen to data flowing through the network and processes",inputs:["network:edges"],outputs:["network:edges","network:output","network:error","network:data","network:begingroup","network:endgroup","network:connect","network:disconnect","network:icon","network:processerror","network:error"]},{name:"network:control",description:"can start and stop networks",inputs:["network:start","network:stop","network:getstatus","network:debug"],outputs:["network:started","network:stopped","network:status","network:error"]},{name:"protocol:component",description:"can list components of the runtime using the component:list message.",inputs:["component:list"],outputs:["component:component","component:componentsready","component:error"]},{name:"component:getsource",description:"read and send component source code back to client",inputs:["component:getsource"],outputs:["component:source","component:error"]},{name:"component:setsource",description:"runtime is able to compile and run custom components sent as source code strings",inputs:["component:source"],outputs:["component:component","component:error"]},{name:"protocol:runtime",description:"can expose ports of main graph and transmit packet information to/from them",inputs:["runtime:packet"],outputs:["runtime:ports","runtime:packetsent","runtime:packet","runtime:error"]},{name:"graph:readonly",description:"read and follow changes to runtime graphs (but not modify)",inputs:[],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"]},{name:"protocol:graph",description:"read & modify runtime graphs using the Graph protocol.",inputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup","graph:error"]},{name:"protocol:trace",description:"runtime is able to record and send over flowtraces, used for retroactive debugging.",inputs:["trace:start","trace:stop","trace:clear","trace:dump"],outputs:["trace:start","trace:stop","trace:clear","trace:dump","trace:error"]}]}}},trace:{$schema:"http://json-schema.org/draft-04/schema#",title:"Trace protocol",description:"This protocol is utilized for triggering and transmitting [Flowtrace](https://github.com/flowbased/flowtrace)s",output:{start:{id:"output/start",description:"Tracing was started",$ref:"../input/start"},stop:{id:"output/stop",description:"Tracing was stopped",$ref:"../input/stop"},clear:{id:"output/clear",description:"Tracing buffer was cleared",$ref:"../input/clear"},dump:{id:"output/dump",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["trace"]},command:{enum:["dump"]},payload:{required:["graph","type","flowtrace"],additionalProperties:!1,properties:{graph:{$ref:"/shared/graph_id"},type:{description:"String describing type of trace.",type:"string",enum:["flowtrace.json"]},flowtrace:{description:"A Flowtrace file of `type`",type:"string"}}}}}]},error:{id:"output/error",description:"Error response to a command on trace protocol",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["trace"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}}]}},input:{start:{id:"input/start",description:"Enable/start tracing of a network.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["trace"]},command:{enum:["start"]},payload:{required:["secret","graph"],additionalProperties:!1,properties:{secret:{$ref:"/shared/secret"},graph:{$ref:"/shared/graph_id"},buffersize:{description:"Size of tracing buffer to keep. In bytes",type:"integer"}}}}}]},stop:{description:"Stop/disable tracing of a network.",id:"input/stop",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["trace"]},command:{enum:["stop"]},payload:{required:["secret","graph"],additionalProperties:!1,properties:{secret:{$ref:"/shared/secret"},graph:{$ref:"/shared/graph_id"}}}}}]},dump:{id:"input/dump",description:"Trigger dumping of the current tracing buffer, to return it back to server.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["trace"]},command:{enum:["dump"]},payload:{required:["secret","graph","type"],additionalProperties:!1,properties:{secret:{$ref:"/shared/secret"},graph:{$ref:"/shared/graph_id"},type:{description:"Type/format of trace to output",type:"string",enum:["flowtrace.json"]}}}}}]},clear:{id:"input/clear",description:"Clear current tracing buffer.",allOf:[{$ref:"/shared/message"},{properties:{protocol:{enum:["trace"]},command:{enum:["clear"]},payload:{required:["secret","graph"],additionalProperties:!1,properties:{secret:{$ref:"/shared/secret"},graph:{$ref:"/shared/graph_id"}}}}}]}}}}},function(e,t,r){"use strict";function n(e,t,r){var n=r?" !== ":" === ",o=r?" || ":" && ",i=r?"!":"",s=r?"":"!";switch(e){case"null":return t+n+"null";case"array":return i+"Array.isArray("+t+")";case"object":return"("+i+t+o+"typeof "+t+n+'"object"'+o+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+n+'"number"'+o+s+"("+t+" % 1)"+o+t+n+t+")";default:return"typeof "+t+n+'"'+e+'"'}}e.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:n,checkDataTypes:function(e,t){switch(e.length){case 1:return n(e[0],t,!0);default:var r="",o=i(e);for(var s in o.array&&o.object&&(r=o.null?"(":"(!"+t+" || ",r+="typeof "+t+' !== "object")',delete o.null,delete o.array,delete o.object),o.number&&delete o.integer,o)r+=(r?" && ":"")+n(s,t,!0);return r}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++){var i=t[n];o[i]?r[r.length]=i:"array"===e&&"array"===i&&(r[r.length]=i)}if(r.length)return r}else{if(o[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:i,getProperty:c,escapeQuotes:u,equal:r(83),ucs2length:r(307),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},cleanUpCode:function(e){return e.replace(p,"").replace(l,"").replace(h,"if (!($1))")},finalCleanUpCode:function(e,t){var r=e.match(d);r&&2==r.length&&(e=t?e.replace(m,"").replace(v,b):e.replace(f,"").replace(g,y));return(r=e.match(w))&&3===r.length?e.replace(E,""):e},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var n in e)if(n!=r&&t[n])return!0},toQuotedString:x,getPathExpr:function(e,t,r,n){return k(e,r?"'/' + "+t+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var n=x(r?"/"+P(t):c(t));return k(e,n)},getData:function(e,t,r){var n,o,i,s;if(""===e)return"rootData";if("/"==e[0]){if(!C.test(e))throw new Error("Invalid JSON-pointer: "+e);o=e,i="rootData"}else{if(!(s=e.match(S)))throw new Error("Invalid JSON-pointer: "+e);if(n=+s[1],"#"==(o=s[2])){if(n>=t)throw new Error("Cannot access property/index "+n+" levels up, current level is "+t);return r[t-n]}if(n>t)throw new Error("Cannot access data "+n+" levels up, current level is "+t);if(i="data"+(t-n||""),!o)return i}for(var a=i,u=o.split("/"),p=0;p<u.length;p++){var l=u[p];l&&(i+=c(_(l)),a+=" && "+i)}return a},unescapeFragment:function(e){return _(decodeURIComponent(e))},unescapeJsonPointer:_,escapeFragment:function(e){return encodeURIComponent(P(e))},escapeJsonPointer:P};var o=i(["string","number","integer","boolean","null"]);function i(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var s=/^[a-z$_][a-z$_0-9]*$/i,a=/'|\\/g;function c(e){return"number"==typeof e?"["+e+"]":s.test(e)?"."+e:"['"+u(e)+"']"}function u(e){return e.replace(a,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var p=/else\s*{\s*}/g,l=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,h=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;var d=/[^v.]errors/g,f=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,m=/var errors = 0;|var vErrors = null;/g,g="return errors === 0;",y="validate.errors = null; return true;",v=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,b="return data;",w=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,E=/if \(rootData === undefined\) rootData = data;/;function x(e){return"'"+u(e)+"'"}var C=/^\/(?:[^~]|~0|~1)*$/,S=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function k(e,t){return'""'==e?t:(e+" + "+t).replace(/' \+ '/g,"")}function P(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function _(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},function(e,t,r){"use strict";function n(e){return null==e}e.exports.isNothing=n,e.exports.isObject=function(e){return"object"==typeof e&&null!==e},e.exports.toArray=function(e){return Array.isArray(e)?e:n(e)?[]:[e]},e.exports.repeat=function(e,t){var r,n="";for(r=0;r<t;r+=1)n+=e;return n},e.exports.isNegativeZero=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},e.exports.extend=function(e,t){var r,n,o,i;if(t)for(r=0,n=(i=Object.keys(t)).length;r<n;r+=1)e[o=i[r]]=t[o];return e}},function(e,t,r){"use strict";var n=r(36),o=r(46),i=r(9);function s(e,t,r){var n=[];return e.include.forEach(function(e){r=s(e,t,r)}),e[t].forEach(function(e){r.forEach(function(t,r){t.tag===e.tag&&t.kind===e.kind&&n.push(r)}),r.push(e)}),r.filter(function(e,t){return-1===n.indexOf(t)})}function a(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new o("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=s(this,"implicit",[]),this.compiledExplicit=s(this,"explicit",[]),this.compiledTypeMap=function(){var e,t,r={scalar:{},sequence:{},mapping:{},fallback:{}};function n(e){r[e.kind][e.tag]=r.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(n);return r}(this.compiledImplicit,this.compiledExplicit)}a.DEFAULT=null,a.create=function(){var e,t;switch(arguments.length){case 1:e=a.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new o("Wrong number of arguments for Schema.create function")}if(e=n.toArray(e),t=n.toArray(t),!e.every(function(e){return e instanceof a}))throw new o("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every(function(e){return e instanceof i}))throw new o("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new a({include:e,explicit:t})},e.exports=a},function(e,t,r){"use strict";var n=r(5),o=r(152),i=r(476),s=r(481),a=r(39),c=r(482),u=r(488),p=r(489),l=r(490),h=a.createElement,d=a.createFactory,f=a.cloneElement,m=n,g={Children:{map:i.map,forEach:i.forEach,count:i.count,toArray:i.toArray,only:l},Component:o.Component,PureComponent:o.PureComponent,createElement:h,cloneElement:f,isValidElement:a.isValidElement,PropTypes:c,createClass:p,createFactory:d,createMixin:function(e){return e},DOM:s,version:u,__spread:m};e.exports=g},function(e,t,r){"use strict";var n=r(5),o=r(22),i=(r(4),r(154),Object.prototype.hasOwnProperty),s=r(155),a={key:!0,ref:!0,__self:!0,__source:!0};function c(e){return void 0!==e.ref}function u(e){return void 0!==e.key}var p=function(e,t,r,n,o,i,a){return{$$typeof:s,type:e,key:t,ref:r,props:a,_owner:i}};p.createElement=function(e,t,r){var n,s={},l=null,h=null;if(null!=t)for(n in c(t)&&(h=t.ref),u(t)&&(l=""+t.key),void 0===t.__self?null:t.__self,void 0===t.__source?null:t.__source,t)i.call(t,n)&&!a.hasOwnProperty(n)&&(s[n]=t[n]);var d=arguments.length-2;if(1===d)s.children=r;else if(d>1){for(var f=Array(d),m=0;m<d;m++)f[m]=arguments[m+2];0,s.children=f}if(e&&e.defaultProps){var g=e.defaultProps;for(n in g)void 0===s[n]&&(s[n]=g[n])}return p(e,l,h,0,0,o.current,s)},p.createFactory=function(e){var t=p.createElement.bind(null,e);return t.type=e,t},p.cloneAndReplaceKey=function(e,t){return p(e.type,t,e.ref,e._self,e._source,e._owner,e.props)},p.cloneElement=function(e,t,r){var s,l,h=n({},e.props),d=e.key,f=e.ref,m=(e._self,e._source,e._owner);if(null!=t)for(s in c(t)&&(f=t.ref,m=o.current),u(t)&&(d=""+t.key),e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)i.call(t,s)&&!a.hasOwnProperty(s)&&(void 0===t[s]&&void 0!==l?h[s]=l[s]:h[s]=t[s]);var g=arguments.length-2;if(1===g)h.children=r;else if(g>1){for(var y=Array(g),v=0;v<g;v++)y[v]=arguments[v+2];h.children=y}return p(e.type,d,f,0,0,m,h)},p.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===s},e.exports=p},function(e,t,r){"use strict";var n=r(3);r(1);function o(e,t){return(e&t)===t}var i={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(e){var t=i,r=e.Properties||{},s=e.DOMAttributeNamespaces||{},c=e.DOMAttributeNames||{},u=e.DOMPropertyNames||{},p=e.DOMMutationMethods||{};for(var l in e.isCustomAttribute&&a._isCustomAttributeFunctions.push(e.isCustomAttribute),r){a.properties.hasOwnProperty(l)&&n("48",l);var h=l.toLowerCase(),d=r[l],f={attributeName:h,attributeNamespace:null,propertyName:l,mutationMethod:null,mustUseProperty:o(d,t.MUST_USE_PROPERTY),hasBooleanValue:o(d,t.HAS_BOOLEAN_VALUE),hasNumericValue:o(d,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:o(d,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:o(d,t.HAS_OVERLOADED_BOOLEAN_VALUE)};if(f.hasBooleanValue+f.hasNumericValue+f.hasOverloadedBooleanValue<=1||n("50",l),c.hasOwnProperty(l)){var m=c[l];f.attributeName=m}s.hasOwnProperty(l)&&(f.attributeNamespace=s[l]),u.hasOwnProperty(l)&&(f.propertyName=u[l]),p.hasOwnProperty(l)&&(f.mutationMethod=p[l]),a.properties[l]=f}}},s=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",a={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:s,ATTRIBUTE_NAME_CHAR:s+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<a._isCustomAttributeFunctions.length;t++){if((0,a._isCustomAttributeFunctions[t])(e))return!0}return!1},injection:i};e.exports=a},function(e,t,r){"use strict";var n=r(500);r(17),r(4);function o(){n.attachRefs(this,this._currentElement)}var i={mountComponent:function(e,t,r,n,i,s){var a=e.mountComponent(t,r,n,i,s);return e._currentElement&&null!=e._currentElement.ref&&t.getReactMountReady().enqueue(o,e),a},getHostNode:function(e){return e.getHostNode()},unmountComponent:function(e,t){n.detachRefs(e,e._currentElement),e.unmountComponent(t)},receiveComponent:function(e,t,r,i){var s=e._currentElement;if(t!==s||i!==e._context){0;var a=n.shouldUpdateRefs(s,t);a&&n.detachRefs(e,s),e.receiveComponent(t,r,i),a&&e._currentElement&&null!=e._currentElement.ref&&r.getReactMountReady().enqueue(o,e)}},performUpdateIfNecessary:function(e,t,r){e._updateBatchNumber===r&&e.performUpdateIfNecessary(t)}};e.exports=i},function(e,t,r){"use strict";var n=r(97),o=r(73),i=r(98),s=r(168),a="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent);function c(e){if(a){var t=e.node,r=e.children;if(r.length)for(var n=0;n<r.length;n++)u(t,r[n],null);else null!=e.html?o(t,e.html):null!=e.text&&s(t,e.text)}}var u=i(function(e,t,r){11===t.node.nodeType||1===t.node.nodeType&&"object"===t.node.nodeName.toLowerCase()&&(null==t.node.namespaceURI||t.node.namespaceURI===n.html)?(c(t),e.insertBefore(t.node,r)):(e.insertBefore(t.node,r),c(t))});function p(){return this.node.nodeName}function l(e){return{node:e,children:[],html:null,text:null,toString:p}}l.insertTreeBefore=u,l.replaceChildWithTree=function(e,t){e.parentNode.replaceChild(t.node,e),c(t)},l.queueChild=function(e,t){a?e.children.push(t):e.node.appendChild(t.node)},l.queueHTML=function(e,t){a?e.html=t:o(e.node,t)},l.queueText=function(e,t){a?e.text=t:s(e.node,t)},e.exports=l},function(e,t,r){"use strict";var n,o,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();o=r(121),n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.definition=e,r.definition.capabilities||(r.definition.capabilities=[]),r.graph=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.EventEmitter),i(t,[{key:"setMain",value:function(e){this.graph=e}},{key:"getType",value:function(){return this.definition.protocol}},{key:"getAddress",value:function(){return this.definition.address}},{key:"canDo",value:function(e){return-1!==this.definition.capabilities.indexOf(e)}},{key:"isConnected",value:function(){return!1}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"reconnect",value:function(){return this.disconnect(),this.connect()}},{key:"start",value:function(){if(!this.graph)throw new Error("No graph defined for execution");return this.sendNetwork("start",{graph:this.graph.name||this.graph.properties.id})}},{key:"stop",value:function(){if(!this.graph)throw new Error("No graph defined for execution");return this.sendNetwork("stop",{graph:this.graph.name||this.graph.properties.id})}},{key:"setParentElement",value:function(e){}},{key:"getElement",value:function(){}},{key:"recvMessage",value:function(e){switch(this.emit("message",e),e.protocol){case"runtime":return this.recvRuntime(e.command,e.payload);case"graph":return this.recvGraph(e.command,e.payload);case"network":return this.recvNetwork(e.command,e.payload);case"component":return this.recvComponent(e.command,e.payload);case"trace":return this.recvTrace(e.command,e.payload)}}},{key:"recvRuntime",value:function(e,t){var r,n;if("runtime"===e){for(r in t)n=t[r],this.definition[r]=n;this.emit("capabilities",t.capabilities||[])}return this.emit("runtime",{command:e,payload:t})}},{key:"recvComponent",value:function(e,t){switch(e){case"error":return this.emit("network",{command:e,payload:t});default:return this.emit("component",{command:e,payload:t})}}},{key:"recvGraph",value:function(e,t){return this.emit("graph",{command:e,payload:t})}},{key:"recvNetwork",value:function(e,t){switch(e){case"started":return this.emit("execution",{running:null==t||null==t.running||t.running,started:null==t||!t.started||t.started});case"stopped":return this.emit("execution",{running:null!=t&&null!=t.running&&t.running,started:!(null==t||!t.started)&&t.started});case"status":return this.emit("execution",{running:t.running,started:t.started});case"icon":return this.emit("icon",t);default:return this.emit("network",{command:e,payload:t})}}},{key:"recvTrace",value:function(e,t){return this.emit("trace",{command:e,payload:t})}},{key:"sendRuntime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.secret=this.definition.secret,this.send("runtime",e,t)}},{key:"sendGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.secret=this.definition.secret,this.send("graph",e,t)}},{key:"sendNetwork",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.secret=this.definition.secret,this.send("network",e,t)}},{key:"sendComponent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.secret=this.definition.secret,this.send("component",e,t)}},{key:"sendTrace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.secret=this.definition.secret,this.send("trace",e,t)}},{key:"send",value:function(e,t,r){}}]),t}(),e.exports=n},function(e,t,r){"use strict";(function(n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":o(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(o=n))}),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(339)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,r(2))},function(e,t,r){"use strict";(function(e){var n,o;n=r(86),t.isBrowser=function(){return void 0===e||!e.execPath||!e.execPath.match(/node|iojs/)},t.randomString=function(e){var t,r,n,o,i;for(i="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0,o=e;0<=o?r<o:r>o;0<=o?++r:--r)t=Math.floor(Math.random()*n.length),i+=n.charAt(t);return i},t.asyncSeries=function(e,t,r){var n,o;return e=e.slice(0),o=[],(n=function(){var i;return 0===e.length?r(null,o):(i=e.shift(),t(i,function(e,t){return e?r(e):(o.push(t),n())}))})()},t.isArray=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},t.startsWith=function(e,t){return 0===e.indexOf(t)},o=function(e){return function(t){return new n(function(r,n){return setTimeout(n.bind(null,t),e)})}},t.retryUntil=function(e,t){var r,i,s,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;for(i=n.reject(new Error("retry starter")),r=0,s=c;0<=s?r<=s:r>=s;0<=s?++r:--r)i=i.catch(e).then(t).catch(o(a));return i}}).call(this,r(2))},function(e,t,r){"use strict";function n(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.toString=function(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t},e.exports=n},function(e,t,r){"use strict";var n=r(37);e.exports=new n({include:[r(141)],implicit:[r(419),r(420)],explicit:[r(421),r(422),r(423),r(424)]})},function(e,t,r){"use strict";e.exports=function(e){for(var t=arguments.length-1,r="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,n=0;n<t;n++)r+="&args[]="+encodeURIComponent(arguments[n+1]);r+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var o=new Error(r);throw o.name="Invariant Violation",o.framesToPop=1,o}},function(e,t,r){"use strict";var n=r(50),o=r(91),i=r(160),s=r(161),a=(r(4),n.getListener);function c(e,t,r){var n=function(e,t,r){var n=t.dispatchConfig.phasedRegistrationNames[r];return a(e,n)}(e,r,t);n&&(r._dispatchListeners=i(r._dispatchListeners,n),r._dispatchInstances=i(r._dispatchInstances,e))}function u(e){e&&e.dispatchConfig.phasedRegistrationNames&&o.traverseTwoPhase(e._targetInst,c,e)}function p(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst,r=t?o.getParentInstance(t):null;o.traverseTwoPhase(r,c,e)}}function l(e,t,r){if(r&&r.dispatchConfig.registrationName){var n=r.dispatchConfig.registrationName,o=a(e,n);o&&(r._dispatchListeners=i(r._dispatchListeners,o),r._dispatchInstances=i(r._dispatchInstances,e))}}function h(e){e&&e.dispatchConfig.registrationName&&l(e._targetInst,0,e)}var d={accumulateTwoPhaseDispatches:function(e){s(e,u)},accumulateTwoPhaseDispatchesSkipTarget:function(e){s(e,p)},accumulateDirectDispatches:function(e){s(e,h)},accumulateEnterLeaveDispatches:function(e,t,r,n){o.traverseEnterLeave(r,n,l,e,t)}};e.exports=d},function(e,t,r){"use strict";var n=r(3),o=r(90),i=r(91),s=r(92),a=r(160),c=r(161),u=(r(1),{}),p=null,l=function(e,t){e&&(i.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},h=function(e){return l(e,!0)},d=function(e){return l(e,!1)},f=function(e){return"."+e._rootNodeID};var m={injection:{injectEventPluginOrder:o.injectEventPluginOrder,injectEventPluginsByName:o.injectEventPluginsByName},putListener:function(e,t,r){"function"!=typeof r&&n("94",t,typeof r);var i=f(e);(u[t]||(u[t]={}))[i]=r;var s=o.registrationNameModules[t];s&&s.didPutListener&&s.didPutListener(e,t,r)},getListener:function(e,t){var r=u[t];if(function(e,t,r){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!r.disabled||(n=t,"button"!==n&&"input"!==n&&"select"!==n&&"textarea"!==n));default:return!1}var n}(t,e._currentElement.type,e._currentElement.props))return null;var n=f(e);return r&&r[n]},deleteListener:function(e,t){var r=o.registrationNameModules[t];r&&r.willDeleteListener&&r.willDeleteListener(e,t);var n=u[t];n&&delete n[f(e)]},deleteAllListeners:function(e){var t=f(e);for(var r in u)if(u.hasOwnProperty(r)&&u[r][t]){var n=o.registrationNameModules[r];n&&n.willDeleteListener&&n.willDeleteListener(e,r),delete u[r][t]}},extractEvents:function(e,t,r,n){for(var i,s=o.plugins,c=0;c<s.length;c++){var u=s[c];if(u){var p=u.extractEvents(e,t,r,n);p&&(i=a(i,p))}}return i},enqueueEvents:function(e){e&&(p=a(p,e))},processEventQueue:function(e){var t=p;p=null,c(t,e?h:d),p&&n("95"),s.rethrowCaughtError()},__purge:function(){u={}},__getListenerBank:function(){return u}};e.exports=m},function(e,t,r){"use strict";var n=r(23),o=r(93),i={view:function(e){if(e.view)return e.view;var t=o(e);if(t.window===t)return t;var r=t.ownerDocument;return r?r.defaultView||r.parentWindow:window},detail:function(e){return e.detail||0}};function s(e,t,r,o){return n.call(this,e,t,r,o)}n.augmentClass(s,i),e.exports=s},function(e,t,r){"use strict";var n={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};e.exports=n},function(e,t,r){(function(t){var r=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var r,n,o;try{r=Map}catch(e){r=function(){}}try{n=Set}catch(e){n=function(){}}try{o=Promise}catch(e){o=function(){}}function i(s,c,u,p,l){"object"==typeof c&&(u=c.depth,p=c.prototype,l=c.includeNonEnumerable,c=c.circular);var h=[],d=[],f=void 0!==t;return void 0===c&&(c=!0),void 0===u&&(u=1/0),function s(u,m){if(null===u)return null;if(0===m)return u;var g,y;if("object"!=typeof u)return u;if(e(u,r))g=new r;else if(e(u,n))g=new n;else if(e(u,o))g=new o(function(e,t){u.then(function(t){e(s(t,m-1))},function(e){t(s(e,m-1))})});else if(i.__isArray(u))g=[];else if(i.__isRegExp(u))g=new RegExp(u.source,a(u)),u.lastIndex&&(g.lastIndex=u.lastIndex);else if(i.__isDate(u))g=new Date(u.getTime());else{if(f&&t.isBuffer(u))return g=t.allocUnsafe?t.allocUnsafe(u.length):new t(u.length),u.copy(g),g;e(u,Error)?g=Object.create(u):void 0===p?(y=Object.getPrototypeOf(u),g=Object.create(y)):(g=Object.create(p),y=p)}if(c){var v=h.indexOf(u);if(-1!=v)return d[v];h.push(u),d.push(g)}for(var b in e(u,r)&&u.forEach(function(e,t){var r=s(t,m-1),n=s(e,m-1);g.set(r,n)}),e(u,n)&&u.forEach(function(e){var t=s(e,m-1);g.add(t)}),u){var w;y&&(w=Object.getOwnPropertyDescriptor(y,b)),w&&null==w.set||(g[b]=s(u[b],m-1))}if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(u);for(b=0;b<E.length;b++){var x=E[b];(!(S=Object.getOwnPropertyDescriptor(u,x))||S.enumerable||l)&&(g[x]=s(u[x],m-1),S.enumerable||Object.defineProperty(g,x,{enumerable:!1}))}}if(l){var C=Object.getOwnPropertyNames(u);for(b=0;b<C.length;b++){var S,k=C[b];(S=Object.getOwnPropertyDescriptor(u,k))&&S.enumerable||(g[k]=s(u[k],m-1),Object.defineProperty(g,k,{enumerable:!1}))}}return g}(s,u)}function s(e){return Object.prototype.toString.call(e)}function a(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=s,i.__isDate=function(e){return"object"==typeof e&&"[object Date]"===s(e)},i.__isArray=function(e){return"object"==typeof e&&"[object Array]"===s(e)},i.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===s(e)},i.__getRegExpFlags=a,i}();e.exports&&(e.exports=r)}).call(this,r(54).Buffer)},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=r(198),o=r(199),i=r(200);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return u(this,e,t,r)}function u(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=h(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(t,r),o=(e=a(e,n)).write(t,r);o!==n&&(e=e.slice(0,o));return e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r=0|d(t.length);return 0===(e=a(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?a(e,0):h(e,t);if("Buffer"===t.type&&i(t.data))return h(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function p(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t){if(p(t),e=a(e,t<0?0:0|d(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|d(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function f(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(e).length;default:if(n)return U(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,r);case"utf8":case"utf-8":return P(this,t,r);case"ascii":return A(this,t,r);case"latin1":case"binary":return D(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,o);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,o){var i,s=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var p=-1;for(i=r;i<a;i++)if(u(e,i)===u(t,-1===p?0:i-p)){if(-1===p&&(p=i),i-p+1===c)return p*s}else-1!==p&&(i-=i-p),p=-1}else for(r+c>a&&(r=a-c),i=r;i>=0;i--){for(var l=!0,h=0;h<c;h++)if(u(e,i+h)!==u(t,h)){l=!1;break}if(l)return i}return-1}function b(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function w(e,t,r,n){return q(U(t,e.length-r),e,r,n)}function E(e,t,r,n){return q(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function x(e,t,r,n){return E(e,t,r,n)}function C(e,t,r,n){return q($(t),e,r,n)}function S(e,t,r,n){return q(function(e,t){for(var r,n,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function k(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function P(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,s,a,c,u=e[o],p=null,l=u>239?4:u>223?3:u>191?2:1;if(o+l<=r)switch(l){case 1:u<128&&(p=u);break;case 2:128==(192&(i=e[o+1]))&&(c=(31&u)<<6|63&i)>127&&(p=c);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&(c=(15&u)<<12|(63&i)<<6|63&s)>2047&&(c<55296||c>57343)&&(p=c);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(c=(15&u)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(p=c)}null===p?(p=65533,l=1):p>65535&&(p-=65536,n.push(p>>>10&1023|55296),p=56320|1023&p),n.push(p),o+=l}return function(e){var t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=_));return r}(n)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return u(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return function(e,t,r,n){return p(t),t<=0?a(e,t):void 0!==r?"string"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}(null,e,t,r)},c.allocUnsafe=function(e){return l(null,e)},c.allocUnsafeSlow=function(e){return l(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=c.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var s=e[r];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o),o+=s.length}return n},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):m.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,n,o){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(i,s),u=this.slice(n,o),p=e.slice(t,r),l=0;l<a;++l)if(u[l]!==p[l]){i=u[l],s=p[l];break}return i<s?-1:s<i?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return E(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return C(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function A(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function D(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function O(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=B(e[i]);return o}function T(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function N(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,r,n,o,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function R(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function j(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function F(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(e,t,r,n,i){return i||F(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function L(e,t,r,n,i){return i||F(e,0,r,8),o.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var o=t-e;r=new c(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},c.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||I(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||I(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);I(this,e,t,r,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);I(this,e,t,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return M(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return M(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return L(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return L(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,i=n-r;if(this===e&&r<t&&t<n)for(o=i-1;o>=0;--o)e[o+t]=this[o+r];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var s=c.isBuffer(e)?e:U(new c(e,n).toString()),a=s.length;for(i=0;i<r-t;++i)this[i+t]=s[i%a]}return this};var G=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function $(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(G,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}}).call(this,r(24))},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u,p,l;u=r(8).EventEmitter,p=r(25),l=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=o(this,i(t).call(this))).metadata=r,e.brackets=[],e.connected=!1,e.dataDelegate=null,e.debug=!1,e.emitEvent=e.regularEmitEvent,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,u),a(t,[{key:"regularEmitEvent",value:function(e,t){return this.emit(e,t)}},{key:"debugEmitEvent",value:function(e,t){var r;try{return this.emit(e,t)}catch(e){if((r=e).id&&r.metadata&&r.error){if(0===this.listeners("error").length)throw r.error;return void this.emit("error",r)}if(0===this.listeners("error").length)throw r;return this.emit("error",{id:this.to.process.id,error:r,metadata:this.metadata})}}}]),a(t,[{key:"connect",value:function(){if(!this.connected)return this.connected=!0,this.emitEvent("connect",null)}},{key:"disconnect",value:function(){if(this.connected)return this.connected=!1,this.emitEvent("disconnect",null)}},{key:"isConnected",value:function(){return this.connected}},{key:"send",value:function(e){return void 0===e&&"function"==typeof this.dataDelegate&&(e=this.dataDelegate()),this.handleSocketEvent("data",e)}},{key:"post",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0===e&&"function"==typeof this.dataDelegate&&(e=this.dataDelegate()),this.isConnected()||0!==this.brackets.length||this.connect(),this.handleSocketEvent("ip",e,!1),t&&this.isConnected()&&0===this.brackets.length)return this.disconnect()}},{key:"beginGroup",value:function(e){return this.handleSocketEvent("begingroup",e)}},{key:"endGroup",value:function(){return this.handleSocketEvent("endgroup")}},{key:"setDataDelegate",value:function(e){if("function"!=typeof e)throw Error("A data delegate must be a function.");return this.dataDelegate=e}},{key:"setDebug",value:function(e){return this.debug=e,this.emitEvent=this.debug?this.debugEmitEvent:this.regularEmitEvent}},{key:"getId",value:function(){var e,t;return e=function(e){return"".concat(e.process.id,"() ").concat(e.port.toUpperCase())},t=function(e){return"".concat(e.port.toUpperCase()," ").concat(e.process.id,"()")},this.from||this.to?this.from&&!this.to?"".concat(e(this.from)," -> ANON"):this.from?"".concat(e(this.from)," -> ").concat(t(this.to)):"DATA -> ".concat(t(this.to)):"UNDEFINED"}},{key:"legacyToIp",value:function(e,t){if(p.isIP(t))return t;switch(e){case"begingroup":return new p("openBracket",t);case"endgroup":return new p("closeBracket");case"data":return new p("data",t);default:return null}}},{key:"ipToLegacy",value:function(e){switch(e.type){case"openBracket":return{event:"begingroup",payload:e.data};case"data":return{event:"data",payload:e.data};case"closeBracket":return{event:"endgroup",payload:e.data}}}},{key:"handleSocketEvent",value:function(e,t){var r,n,o,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(r=(n="ip"===e&&p.isIP(t))?t:this.legacyToIp(e,t)){if(!this.isConnected()&&i&&0===this.brackets.length&&this.connect(),"begingroup"===e&&this.brackets.push(t),n&&"openBracket"===r.type&&this.brackets.push(r.data),"endgroup"===e){if(0===this.brackets.length)return;r.data=this.brackets.pop(),t=r.data}if(n&&"closeBracket"===t.type){if(0===this.brackets.length)return;this.brackets.pop()}if(this.emitEvent("ip",r),r&&r.type)return n&&(e=(o=this.ipToLegacy(r)).event,t=o.payload),"connect"===e&&(this.connected=!0),"disconnect"===e&&(this.connected=!1),this.emitEvent(e,t)}}}]),t}(),t.InternalSocket=l,t.createSocket=function(){return new l}},function(e,t,r){(function(e){t.isBrowser=function(){return void 0===e||!e.execPath||!e.execPath.match(/node|iojs/)},t.deprecated=function(r){if(!t.isBrowser()){if(e.env.NOFLO_FATAL_DEPRECATED)throw new Error(r);return console.warn(r)}if(window.NOFLO_FATAL_DEPRECATED)throw new Error(r);console.warn(r)}}).call(this,r(2))},function(e,t){t.sortByName=(e,t)=>{const r=(null!=e.properties?e.properties.name:void 0)||e.name||e.id||"Unknown",n=(null!=t.properties?t.properties.name:void 0)||t.name||t.id||"Unknown";return r.localeCompare(n)},t.sortBySeen=(e,t)=>{const r=e,n=t;return r.seen?n.seen?(r.seen="object"==typeof r.seen?r.seen:new Date(r.seen),n.seen="object"==typeof n.seen?n.seen:new Date(n.seen),r.seen>n.seen?-1:n.seen>r.seen?1:0):-1:1},t.addToList=(e,r,n=t.sortByName)=>{let o=!1;e.forEach(e=>{if(e===r)return void(o=!0);if(((null!=e.properties?e.properties.id:void 0)||e.id||e.name)===((null!=r.properties?r.properties.id:void 0)||r.id||r.name)){const t=e;Object.keys(r).forEach(e=>{t[e]=r[e]}),o=!0}}),o||(e.push(r),e.sort(n))},t.removeFromList=(e,t)=>{const r=e.find(e=>{if(e===t)return!0;return((null!=e.properties?e.properties.id:void 0)||e.id)===((null!=t.properties?t.properties.id:void 0)||t.id)});r&&e.splice(e.indexOf(r),1)}},function(e,t){t.findMainGraph=e=>{if(!e.graphs.length)return null;if(e.main){if(e.graphs.find(t=>t.properties.id===e.main))return e.main}const t=e.graphs.find(e=>"main"===e.name||!!e.properties.main);return t?t.properties.id:e.graphs[0].properties.id},t.getProjectHash=(e,r)=>{if(!e.graphs.length)return e.components.length?void r(null,["project",e.id,"component",e.components[0].name]):void setTimeout(()=>e.graphs.length||e.components.length?t.getProjectHash(e,r):r(new Error(`Project ${e.id} has no graphs or components`)),100);const n=e.main||e.graphs[0].properties.id;n?r(null,["project",e.id,n]):r(new Error(`Unable find a main graph for project ${e.id}`))}},function(e,t,r){"use strict";t.decode=t.parse=r(219),t.encode=t.stringify=r(220)},function(e,t){var r=1e3,n=60*r,o=60*n,i=24*o,s=7*i,a=365.25*i;function c(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}e.exports=function(e,t){t=t||{};var u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*o;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===u&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=i)return c(e,t,i,"day");if(t>=o)return c(e,t,o,"hour");if(t>=n)return c(e,t,n,"minute");if(t>=r)return c(e,t,r,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=i)return Math.round(e/i)+"d";if(t>=o)return Math.round(e/o)+"h";if(t>=n)return Math.round(e/n)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){(function(e){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},o=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(a(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,s=String(e).replace(o,function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),c=n[r];r<i;c=n[++r])m(c)||!w(c)?s+=" "+c:s+=" "+a(c);return s},t.deprecate=function(r,n){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,n).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),o=!0}return r.apply(this,arguments)}};var i,s={};function a(e,r){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),f(r)?n.showHidden=r:r&&t._extend(n,r),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),p(n,e,n.depth)}function c(e,t){var r=a.styles[t];return r?"["+a.colors[r][0]+"m"+e+"["+a.colors[r][1]+"m":e}function u(e,t){return e}function p(e,r,n){if(e.customInspect&&r&&C(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,e);return y(o)||(o=p(e,o,n)),o}var i=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(g(t))return e.stylize(""+t,"number");if(f(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,r);if(i)return i;var s=Object.keys(r),a=function(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),x(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(r);if(0===s.length){if(C(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(b(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(E(r))return e.stylize(Date.prototype.toString.call(r),"date");if(x(r))return l(r)}var u,w="",S=!1,k=["{","}"];(d(r)&&(S=!0,k=["[","]"]),C(r))&&(w=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(w=" "+RegExp.prototype.toString.call(r)),E(r)&&(w=" "+Date.prototype.toUTCString.call(r)),x(r)&&(w=" "+l(r)),0!==s.length||S&&0!=r.length?n<0?b(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=S?function(e,t,r,n,o){for(var i=[],s=0,a=t.length;s<a;++s)A(t,String(s))?i.push(h(e,t,r,n,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(h(e,t,r,n,o,!0))}),i}(e,r,n,a,s):s.map(function(t){return h(e,r,n,a,t,S)}),e.seen.pop(),function(e,t,r){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(u,w,k)):k[0]+w+k[1]}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,r,n,o,i){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),A(n,o)||(s="["+o+"]"),a||(e.seen.indexOf(c.value)<0?(a=m(r)?p(e,c.value,null):p(e,c.value,r-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),v(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function d(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return"number"==typeof e}function y(e){return"string"==typeof e}function v(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===S(e)}function w(e){return"object"==typeof e&&null!==e}function E(e){return w(e)&&"[object Date]"===S(e)}function x(e){return w(e)&&("[object Error]"===S(e)||e instanceof Error)}function C(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(r){if(v(i)&&(i=e.env.NODE_DEBUG||""),r=r.toUpperCase(),!s[r])if(new RegExp("\\b"+r+"\\b","i").test(i)){var n=e.pid;s[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,n,e)}}else s[r]=function(){};return s[r]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=f,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=y,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=b,t.isObject=w,t.isDate=E,t.isError=x,t.isFunction=C,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(360);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function _(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",_(),t.format.apply(t,arguments))},t.inherits=r(361),t._extend=function(e,t){if(!t||!w(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var D="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function O(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(D&&e[D]){var t;if("function"!=typeof(t=e[D]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,D,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise(function(e,n){t=e,r=n}),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push(function(e,n){e?r(e):t(n)});try{e.apply(this,o)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),D&&Object.defineProperty(t,D,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=D,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var o=r.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return o.apply(i,arguments)};t.apply(this,r).then(function(t){e.nextTick(s,null,t)},function(t){e.nextTick(O,t,s)})}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,n(t)),r}}).call(this,r(2))},function(e,t,r){"use strict";(function(n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":o(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(o=n))}),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(392)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,r(2))},function(e,t,r){"use strict";var n=r(37);e.exports=n.DEFAULT=new n({include:[r(47)],explicit:[r(425),r(426),r(427)]})},function(e,t,r){var n=r(147),o=r(148),i=r(442),s=r(30);e.exports=function(e,t,r,n){return c({showHidden:t,seen:[],stylize:function(e){return e}},e,void 0===r?2:r)};var a=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&"nodeType"in e&&1===e.nodeType&&"string"==typeof e.nodeName};function c(e,r,m){if(r&&"function"==typeof r.inspect&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var g=r.inspect(m,e);return"string"!=typeof g&&(g=c(e,g,m)),g}var y=function(e,t){switch(typeof t){case"undefined":return e.stylize("undefined","undefined");case"string":var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string");case"number":return 0===t&&1/t==-1/0?e.stylize("-0","number"):e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean");case"symbol":return e.stylize(t.toString(),"symbol")}if(null===t)return e.stylize("null","null")}(e,r);if(y)return y;if(a(r)){if("outerHTML"in r)return r.outerHTML;try{if(document.xmlVersion)return(new XMLSerializer).serializeToString(r);var v=document.createElementNS("http://www.w3.org/1999/xhtml","_");v.appendChild(r.cloneNode(!1));var b=v.innerHTML.replace("><",">"+r.innerHTML+"<");return v.innerHTML="",b}catch(e){}}var w,E,x=i(r),C=e.showHidden?o(r):x;if(0===C.length||d(r)&&(1===C.length&&"stack"===C[0]||2===C.length&&"description"===C[0]&&"stack"===C[1])){if("function"==typeof r)return E=(w=n(r))?": "+w:"",e.stylize("[Function"+E+"]","special");if(l(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(h(r))return e.stylize(Date.prototype.toUTCString.call(r),"date");if(d(r))return u(r)}var S,k,P="",_=!1,A=!1,D=["{","}"];if("object"==typeof(S=r)&&/\w+Array]$/.test(f(S))&&(A=!0,D=["[","]"]),function(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===f(e)}(r)&&(_=!0,D=["[","]"]),"function"==typeof r&&(P=" [Function"+(E=(w=n(r))?": "+w:"")+"]"),l(r)&&(P=" "+RegExp.prototype.toString.call(r)),h(r)&&(P=" "+Date.prototype.toUTCString.call(r)),d(r))return u(r);if(0===C.length&&(!_||0==r.length))return D[0]+P+D[1];if(m<0)return l(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");if(e.seen.push(r),_)k=function(e,t,r,n,o){for(var i=[],s=0,a=t.length;s<a;++s)Object.prototype.hasOwnProperty.call(t,String(s))?i.push(p(e,t,r,n,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(p(e,t,r,n,o,!0))}),i}(e,r,m,x,C);else{if(A)return function(e){for(var t="[ ",r=0;r<e.length;++r){if(t.length>=s.truncateThreshold-7){t+="...";break}t+=e[r]+", "}-1!==(t+=" ]").indexOf(",  ]")&&(t=t.replace(",  ]"," ]"));return t}(r);k=C.map(function(t){return p(e,r,m,x,t,_)})}return e.seen.pop(),function(e,t,r){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.length+1},0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(k,P,D)}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,n,o,i){var s,a,u=Object.getOwnPropertyDescriptor(t,o);if(u&&(u.get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special"))),n.indexOf(o)<0&&(s="["+o+"]"),a||(e.seen.indexOf(t[o])<0?(a=c(e,t[o],null===r?null:r-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),void 0===s){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function l(e){return"object"==typeof e&&"[object RegExp]"===f(e)}function h(e){return"object"==typeof e&&"[object Date]"===f(e)}function d(e){return"object"==typeof e&&"[object Error]"===f(e)}function f(e){return Object.prototype.toString.call(e)}},function(e,t,r){var n=r(30);
/*!
 * Chai - isProxyEnabled helper
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(){return n.useProxy&&"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect}},function(e,t,r){r(30);var n=Object.getOwnPropertyDescriptor(function(){},"length");
/*!
 * Chai - addLengthGuard utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t,r){return n.configurable?(Object.defineProperty(e,"length",{get:function(){if(r)throw Error("Invalid Chai property: "+t+'.length. Due to a compatibility issue, "length" cannot directly follow "'+t+'". Use "'+t+'.lengthOf" instead.');throw Error("Invalid Chai property: "+t+'.length. See docs for proper usage of "'+t+'".')}}),e):e}},function(e,t,r){var n=r(30),o=r(18),i=r(148),s=r(65),a=["__flags","__methods","_obj","assert"];function c(e,t,r){if(!r){r=[];for(var n=0;n<=e.length;n++)r[n]=[]}return r[e.length]&&r[e.length][t.length]||(0===e.length||0===t.length?r[e.length][t.length]=Math.max(e.length,t.length):r[e.length][t.length]=Math.min(c(e.slice(0,-1),t,r)+1,c(e,t.slice(0,-1),r)+1,c(e.slice(0,-1),t.slice(0,-1),r)+(e.slice(-1)===t.slice(-1)?0:1))),r[e.length][t.length]}e.exports=function(e,t){return s()?new Proxy(e,{get:function e(r,s){if("string"==typeof s&&-1===n.proxyExcludedKeys.indexOf(s)&&!Reflect.has(r,s)){if(t)throw Error("Invalid Chai property: "+t+"."+s+'. See docs for proper usage of "'+t+'".');var u=i(r).filter(function(e){return!Object.prototype.hasOwnProperty(e)&&-1===a.indexOf(e)}).sort(function(e,t){return c(s,e)-c(s,t)});throw u.length&&c(u[0],s)<4?Error("Invalid Chai property: "+s+'. Did you mean "'+u[0]+'"?'):Error("Invalid Chai property: "+s)}return-1!==a.indexOf(s)||o(r,"lockSsfi")||o(r,"ssfi",e),Reflect.get(r,s)}}):e}},function(e,t,r){var n=r(7),o=r(158);t.createGroup=function(e,t){var r=["g",e];return Array.isArray(t)&&(r=r.concat(t)),n.createElement.apply(n,r)},t.createRect=function(e){return n.createElement("rect",e)},t.createText=function(e){return n.createElement("text",e)},t.createCircle=function(e){return n.createElement("circle",e)},t.createPath=function(e){return n.createElement("path",e)},t.createPolygon=function(e){return n.createElement("polygon",e)},t.createImg=function(e){return o(e)},t.createCanvas=function(e){return n.createElement("canvas",e)},t.createSvg=function(e,t){var r=["svg",e];return Array.isArray(t)&&(r=r.concat(t)),n.createElement.apply(n,r)}},function(e,t,r){"use strict";e.exports={}},function(e,t){e.exports=function(e,t,r){if(Array.isArray(e)||Array.isArray(t)||"object"!=typeof e||"object"!=typeof t)return t;for(var n in r=r||!1,e)"function"==typeof e[n]||t[n]&&!r||(t[n]=e[n]);return t}},function(e,t,r){"use strict";var n=r(3),o=(r(1),{}),i={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,r,o,i,s,a,c){var u,p;this.isInTransaction()&&n("27");try{this._isInTransaction=!0,u=!0,this.initializeAll(0),p=e.call(t,r,o,i,s,a,c),u=!1}finally{try{if(u)try{this.closeAll(0)}catch(e){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return p},initializeAll:function(e){for(var t=this.transactionWrappers,r=e;r<t.length;r++){var n=t[r];try{this.wrapperInitData[r]=o,this.wrapperInitData[r]=n.initialize?n.initialize.call(this):null}finally{if(this.wrapperInitData[r]===o)try{this.initializeAll(r+1)}catch(e){}}}},closeAll:function(e){this.isInTransaction()||n("28");for(var t=this.transactionWrappers,r=e;r<t.length;r++){var i,s=t[r],a=this.wrapperInitData[r];try{i=!0,a!==o&&s.close&&s.close.call(this,a),i=!1}finally{if(i)try{this.closeAll(r+1)}catch(e){}}}this.wrapperInitData.length=0}};e.exports=i},function(e,t,r){"use strict";var n=r(51),o=r(167),i={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:r(95),button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+o.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+o.currentScrollTop}};function s(e,t,r,o){return n.call(this,e,t,r,o)}n.augmentClass(s,i),e.exports=s},function(e,t,r){"use strict";var n,o=r(12),i=r(97),s=/^[ \r\n\t\f]/,a=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,c=r(98)(function(e,t){if(e.namespaceURI!==i.svg||"innerHTML"in e)e.innerHTML=t;else{(n=n||document.createElement("div")).innerHTML="<svg>"+t+"</svg>";for(var r=n.firstChild;r.firstChild;)e.appendChild(r.firstChild)}});if(o.canUseDOM){var u=document.createElement("div");u.innerHTML=" ",""===u.innerHTML&&(c=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),s.test(t)||"<"===t[0]&&a.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var r=e.firstChild;1===r.data.length?e.removeChild(r):r.deleteData(0,1)}else e.innerHTML=t}),u=null}e.exports=c},function(e,t,r){"use strict";var n=/["'&<>]/;e.exports=function(e){return"boolean"==typeof e||"number"==typeof e?""+e:function(e){var t,r=""+e,o=n.exec(r);if(!o)return r;var i="",s=0,a=0;for(s=o.index;s<r.length;s++){switch(r.charCodeAt(s)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}a!==s&&(i+=r.substring(a,s)),a=s+1,i+=t}return a!==s?i+r.substring(a,s):i}(e)}},function(e,t,r){"use strict";var n,o=r(5),i=r(90),s=r(521),a=r(167),c=r(522),u=r(94),p={},l=!1,h=0,d={topAbort:"abort",topAnimationEnd:c("animationend")||"animationend",topAnimationIteration:c("animationiteration")||"animationiteration",topAnimationStart:c("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:c("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},f="_reactListenersID"+String(Math.random()).slice(2);var m=o({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(m.handleTopLevel),m.ReactEventListener=e}},setEnabled:function(e){m.ReactEventListener&&m.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!m.ReactEventListener||!m.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var r=t,n=function(e){return Object.prototype.hasOwnProperty.call(e,f)||(e[f]=h++,p[e[f]]={}),p[e[f]]}(r),o=i.registrationNameDependencies[e],s=0;s<o.length;s++){var a=o[s];n.hasOwnProperty(a)&&n[a]||("topWheel"===a?u("wheel")?m.ReactEventListener.trapBubbledEvent("topWheel","wheel",r):u("mousewheel")?m.ReactEventListener.trapBubbledEvent("topWheel","mousewheel",r):m.ReactEventListener.trapBubbledEvent("topWheel","DOMMouseScroll",r):"topScroll"===a?u("scroll",!0)?m.ReactEventListener.trapCapturedEvent("topScroll","scroll",r):m.ReactEventListener.trapBubbledEvent("topScroll","scroll",m.ReactEventListener.WINDOW_HANDLE):"topFocus"===a||"topBlur"===a?(u("focus",!0)?(m.ReactEventListener.trapCapturedEvent("topFocus","focus",r),m.ReactEventListener.trapCapturedEvent("topBlur","blur",r)):u("focusin")&&(m.ReactEventListener.trapBubbledEvent("topFocus","focusin",r),m.ReactEventListener.trapBubbledEvent("topBlur","focusout",r)),n.topBlur=!0,n.topFocus=!0):d.hasOwnProperty(a)&&m.ReactEventListener.trapBubbledEvent(a,d[a],r),n[a]=!0)}},trapBubbledEvent:function(e,t,r){return m.ReactEventListener.trapBubbledEvent(e,t,r)},trapCapturedEvent:function(e,t,r){return m.ReactEventListener.trapCapturedEvent(e,t,r)},supportsEventPageXY:function(){if(!document.createEvent)return!1;var e=document.createEvent("MouseEvent");return null!=e&&"pageX"in e},ensureScrollValueMonitoring:function(){if(void 0===n&&(n=m.supportsEventPageXY()),!n&&!l){var e=a.refreshScrollValues;m.ReactEventListener.monitorScrollValue(e),l=!0}}});e.exports=m},function(e,t){var r=function(e,t){var r,n;if(void 0===t&&(t=e.nodes.map(function(e){return e.id}),r=e.inports,n=e.outports),!(t.length<1)){for(var o,i,s=1/0,a=1/0,c=-1/0,u=-1/0,p=t.length,l=0;l<p;l++){var h=t[l],d=e.getNode(h);if(d&&d.metadata){d.metadata.x<s&&(s=d.metadata.x),d.metadata.y<a&&(a=d.metadata.y);var f=d.metadata.x+d.metadata.width,m=d.metadata.y+d.metadata.height;f>c&&(c=f),m>u&&(u=m)}}if(r)for(p=(o=Object.keys(r)).length,l=0;l<p;l++)(i=r[o[l]]).metadata&&(i.metadata.x<s&&(s=i.metadata.x),i.metadata.y<a&&(a=i.metadata.y),i.metadata.x>c&&(c=i.metadata.x),i.metadata.y>u&&(u=i.metadata.y));if(n)for(p=(o=Object.keys(n)).length,l=0;l<p;l++)(i=n[o[l]]).metadata&&(i.metadata.x<s&&(s=i.metadata.x),i.metadata.y<a&&(a=i.metadata.y),i.metadata.x>c&&(c=i.metadata.x),i.metadata.y>u&&(u=i.metadata.y));return isFinite(s)&&isFinite(a)&&isFinite(c)&&isFinite(u)?{minX:s,minY:a,maxX:c,maxY:u}:null}};e.exports={findMinMax:r,findNodeFit:function(e,t,r,n){var o,i,s,a=e.metadata.x-n,c=e.metadata.y-n,u=e.metadata.x+2*n-a,p=e.metadata.y+2*n-c,l=t/u,h=r/p;return l<h?(i=0-a*(o=l),s=0-c*o+(r-p*o)/2):(i=0-a*(o=h)+(t-u*o)/2,s=0-c*o),{x:i,y:s,scale:o}},findFit:function(e,t,n,o){var i=r(e);if(!i)return{x:0,y:0,scale:1};i.minX-=o,i.minY-=o,i.maxX+=2*o,i.maxY+=2*o;var s,a,c,u=i.maxX-i.minX,p=i.maxY-i.minY,l=t/u,h=n/p;return l<h?(s=l,a=0-i.minX*s,c=0-i.minY*s+(n-p*s)/2):(s=h,a=0-i.minX*s+(t-u*s)/2,c=0-i.minY*s),{x:a,y:c,scale:s,graphWidth:u,graphHeight:p}}}},function(e,t,r){var n=r(13),o={showTooltip:function(e){if(this.shouldShowTooltip()){var t=new CustomEvent("the-graph-tooltip",{detail:{tooltip:this.props.label,x:e.clientX,y:e.clientY},bubbles:!0});n.findDOMNode(this).dispatchEvent(t)}},hideTooltip:function(e){if(this.shouldShowTooltip()){var t=new CustomEvent("the-graph-tooltip-hide",{bubbles:!0});this.mounted&&n.findDOMNode(this).dispatchEvent(t)}},componentDidMount:function(){if(this.mounted=!0,!navigator||-1===navigator.userAgent.indexOf("Firefox")){var e=this.getTooltipTrigger();e.addEventListener("tap",this.showTooltip),e.addEventListener("mouseenter",this.showTooltip),e.addEventListener("mouseleave",this.hideTooltip)}},componentWillUnmount:function(){this.mounted=!1}};e.exports={Tooltip:o}},function(e,t,r){e.exports=function(){"use strict";function e(t,r,n,o){this.message=t,this.expected=r,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),{SyntaxError:e,parse:function(t){var n,o,i=arguments.length>1?arguments[1]:{},s=this,a={},c={start:cr},u=cr,p=function(){return s.getResult()},l="INPORT=",h={type:"literal",value:"INPORT=",description:'"INPORT="'},d=".",f={type:"literal",value:".",description:'"."'},m=":",g={type:"literal",value:":",description:'":"'},y=function(e,t,r){return s.registerInports(e,t,r)},v="OUTPORT=",b={type:"literal",value:"OUTPORT=",description:'"OUTPORT="'},w=function(e,t,r){return s.registerOutports(e,t,r)},E="DEFAULT_INPORT=",x={type:"literal",value:"DEFAULT_INPORT=",description:'"DEFAULT_INPORT="'},C=function(e){Mr=e},S="DEFAULT_OUTPORT=",k={type:"literal",value:"DEFAULT_OUTPORT=",description:'"DEFAULT_OUTPORT="'},P=function(e){Lr=e},_=function(e){return s.registerAnnotation(e[0],e[1])},A=function(e){return s.registerEdges(e)},D=",",O={type:"literal",value:",",description:'","'},T=/^[\n\r\u2028\u2029]/,N={type:"class",value:"[\\n\\r\\u2028\\u2029]",description:"[\\n\\r\\u2028\\u2029]"},I="#",R={type:"literal",value:"#",description:'"#"'},j="->",F={type:"literal",value:"->",description:'"->"'},M=function(e,t){return[e,t]},L=function(e,t,r){return[{tgt:Hr(t,e)},{src:Vr(t,r)}]},G=function(e,t){return{src:Vr(e,t)}},B=function(e,t){return{tgt:Hr(t,e)}},U="'",$={type:"literal",value:"'",description:'"\'"'},q=function(e){return{data:e.join("")}},z=function(e){return{data:e}},H=function(e){return e},V=/^[a-zA-Z_]/,X={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},W=/^[a-zA-Z0-9_\-]/,J={type:"class",value:"[a-zA-Z0-9_\\-]",description:"[a-zA-Z0-9_\\-]"},Y=function(e){return qr(e)},K=function(e,t){return s.addNode(e,t),e},Q=function(e){return s.addAnonymousNode(e,ir(Zt,Qt).start.offset)},Z="(",ee={type:"literal",value:"(",description:'"("'},te=/^[a-zA-Z\/\-0-9_]/,re={type:"class",value:"[a-zA-Z/\\-0-9_]",description:"[a-zA-Z/\\-0-9_]"},ne=")",oe={type:"literal",value:")",description:'")"'},ie=function(e,t){var r={};return r.comp=e?e.join(""):"",t&&(r.meta=t.join("").split(",")),r},se=/^[a-zA-Z\/=_,0-9]/,ae={type:"class",value:"[a-zA-Z/=_,0-9]",description:"[a-zA-Z/=_,0-9]"},ce=function(e){return e},ue="@",pe={type:"literal",value:"@",description:'"@"'},le=/^[a-zA-Z0-9\-_]/,he={type:"class",value:"[a-zA-Z0-9\\-_]",description:"[a-zA-Z0-9\\-_]"},de=/^[a-zA-Z0-9\-_ .]/,fe={type:"class",value:"[a-zA-Z0-9\\-_ \\.]",description:"[a-zA-Z0-9\\-_ \\.]"},me=function(e,t){return[e.join(""),t.join("")]},ge=function(e,t){return{port:i.caseSensitive?e:e.toLowerCase(),index:null!=t?t:void 0}},ye=function(e){return e},ve=/^[a-zA-Z.0-9_]/,be={type:"class",value:"[a-zA-Z.0-9_]",description:"[a-zA-Z.0-9_]"},we=function(e){return qr(e)},Ee="[",xe={type:"literal",value:"[",description:'"["'},Ce=/^[0-9]/,Se={type:"class",value:"[0-9]",description:"[0-9]"},ke="]",Pe={type:"literal",value:"]",description:'"]"'},_e=function(e){return parseInt(e.join(""))},Ae=/^[^\n\r\u2028\u2029]/,De={type:"class",value:"[^\\n\\r\\u2028\\u2029]",description:"[^\\n\\r\\u2028\\u2029]"},Oe=/^[\\]/,Te={type:"class",value:"[\\\\]",description:"[\\\\]"},Ne=/^[']/,Ie={type:"class",value:"[']",description:"[']"},Re=function(){return"'"},je=/^[^']/,Fe={type:"class",value:"[^']",description:"[^']"},Me=" ",Le={type:"literal",value:" ",description:'" "'},Ge=function(e){return e},Be="{",Ue={type:"literal",value:"{",description:'"{"'},$e="}",qe={type:"literal",value:"}",description:'"}"'},ze={type:"other",description:"whitespace"},He=/^[ \t\n\r]/,Ve={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},Xe="false",We={type:"literal",value:"false",description:'"false"'},Je=function(){return!1},Ye="null",Ke={type:"literal",value:"null",description:'"null"'},Qe=function(){return null},Ze="true",et={type:"literal",value:"true",description:'"true"'},tt=function(){return!0},rt=function(e,t){return t},nt=function(e,t){var r,n={};for(n[e.name]=e.value,r=0;r<t.length;r++)n[t[r].name]=t[r].value;return n},ot=function(e){return null!==e?e:{}},it=function(e,t){return{name:e,value:t}},st=function(e,t){return t},at=function(e,t){return[e].concat(t)},ct=function(e){return null!==e?e:[]},ut={type:"other",description:"number"},pt=function(){return parseFloat(t.substring(Zt,Qt))},lt=/^[1-9]/,ht={type:"class",value:"[1-9]",description:"[1-9]"},dt=/^[eE]/,ft={type:"class",value:"[eE]",description:"[eE]"},mt="-",gt={type:"literal",value:"-",description:'"-"'},yt="+",vt={type:"literal",value:"+",description:'"+"'},bt="0",wt={type:"literal",value:"0",description:'"0"'},Et={type:"other",description:"string"},xt=function(e){return e.join("")},Ct='"',St={type:"literal",value:'"',description:'"\\""'},kt="\\",Pt={type:"literal",value:"\\",description:'"\\\\"'},_t="/",At={type:"literal",value:"/",description:'"/"'},Dt="b",Ot={type:"literal",value:"b",description:'"b"'},Tt=function(){return"\b"},Nt="f",It={type:"literal",value:"f",description:'"f"'},Rt=function(){return"\f"},jt="n",Ft={type:"literal",value:"n",description:'"n"'},Mt=function(){return"\n"},Lt="r",Gt={type:"literal",value:"r",description:'"r"'},Bt=function(){return"\r"},Ut="t",$t={type:"literal",value:"t",description:'"t"'},qt=function(){return"\t"},zt="u",Ht={type:"literal",value:"u",description:'"u"'},Vt=function(e){return String.fromCharCode(parseInt(e,16))},Xt=function(e){return e},Wt=/^[^\0-\x1F"\\]/,Jt={type:"class",value:"[^\\0-\\x1F\\x22\\x5C]",description:"[^\\0-\\x1F\\x22\\x5C]"},Yt=/^[0-9a-f]/i,Kt={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},Qt=0,Zt=0,er=[{line:1,column:1,seenCR:!1}],tr=0,rr=[],nr=0;if("startRule"in i){if(!(i.startRule in c))throw new Error("Can't start parsing from rule \""+i.startRule+'".');u=c[i.startRule]}function or(e){var r,n,o=er[e];if(o)return o;for(r=e-1;!er[r];)r--;for(o={line:(o=er[r]).line,column:o.column,seenCR:o.seenCR};r<e;)"\n"===(n=t.charAt(r))?(o.seenCR||o.line++,o.column=1,o.seenCR=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(o.line++,o.column=1,o.seenCR=!0):(o.column++,o.seenCR=!1),r++;return er[e]=o,o}function ir(e,t){var r=or(e),n=or(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function sr(e){Qt<tr||(Qt>tr&&(tr=Qt,rr=[]),rr.push(e))}function ar(t,r,n,o){return null!==r&&function(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(r),new e(null!==t?t:function(e,t){var r,n=new Array(e.length);for(r=0;r<e.length;r++)n[r]=e[r].description;return"Expected "+(e.length>1?n.slice(0,-1).join(", ")+" or "+n[e.length-1]:n[0])+" but "+(t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+t(e)})}(t)+'"':"end of input")+" found."}(r,n),r,n,o)}function cr(){var e,t,r;for(e=Qt,t=[],r=ur();r!==a;)t.push(r),r=ur();return t!==a&&(Zt=e,t=p()),e=t}function ur(){var e,r,n,o,i,s,c,u,p;return e=Qt,(r=kr())!==a?(t.substr(Qt,7)===l?(n=l,Qt+=7):(n=a,0===nr&&sr(h)),n!==a&&(o=fr())!==a?(46===t.charCodeAt(Qt)?(i=d,Qt++):(i=a,0===nr&&sr(f)),i!==a&&(s=xr())!==a?(58===t.charCodeAt(Qt)?(c=m,Qt++):(c=a,0===nr&&sr(g)),c!==a&&(u=xr())!==a&&kr()!==a?((p=pr())===a&&(p=null),p!==a?(Zt=e,e=r=y(o,s,u)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a),e===a&&(e=Qt,(r=kr())!==a?(t.substr(Qt,8)===v?(n=v,Qt+=8):(n=a,0===nr&&sr(b)),n!==a&&(o=fr())!==a?(46===t.charCodeAt(Qt)?(i=d,Qt++):(i=a,0===nr&&sr(f)),i!==a&&(s=xr())!==a?(58===t.charCodeAt(Qt)?(c=m,Qt++):(c=a,0===nr&&sr(g)),c!==a&&(u=xr())!==a&&kr()!==a?((p=pr())===a&&(p=null),p!==a?(Zt=e,e=r=w(o,s,u)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a),e===a&&(e=Qt,(r=kr())!==a?(t.substr(Qt,15)===E?(n=E,Qt+=15):(n=a,0===nr&&sr(x)),n!==a&&(o=xr())!==a&&(i=kr())!==a?((s=pr())===a&&(s=null),s!==a?(Zt=e,e=r=C(o)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a),e===a&&(e=Qt,(r=kr())!==a?(t.substr(Qt,16)===S?(n=S,Qt+=16):(n=a,0===nr&&sr(k)),n!==a&&(o=xr())!==a&&(i=kr())!==a?((s=pr())===a&&(s=null),s!==a?(Zt=e,e=r=P(o)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a),e===a&&(e=Qt,(r=function(){var e,r,n,o,i,s,c;e=Qt,35===t.charCodeAt(Qt)?(r=I,Qt++):(r=a,0===nr&&sr(R));if(r!==a)if(Pr()!==a)if(64===t.charCodeAt(Qt)?(n=ue,Qt++):(n=a,0===nr&&sr(pe)),n!==a){if(o=[],le.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=a,0===nr&&sr(he)),i!==a)for(;i!==a;)o.push(i),le.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=a,0===nr&&sr(he));else o=a;if(o!==a)if((i=Pr())!==a){if(s=[],de.test(t.charAt(Qt))?(c=t.charAt(Qt),Qt++):(c=a,0===nr&&sr(fe)),c!==a)for(;c!==a;)s.push(c),de.test(t.charAt(Qt))?(c=t.charAt(Qt),Qt++):(c=a,0===nr&&sr(fe));else s=a;s!==a?(Zt=e,r=me(o,s),e=r):(Qt=e,e=a)}else Qt=e,e=a;else Qt=e,e=a}else Qt=e,e=a;else Qt=e,e=a;else Qt=e,e=a;return e}())!==a&&(n=lr())!==a?(Zt=e,e=r=_(r)):(Qt=e,e=a),e===a&&(e=Qt,(r=hr())!==a?((n=lr())===a&&(n=null),n!==a?e=r=[r,n]:(Qt=e,e=a)):(Qt=e,e=a),e===a&&(e=Qt,(r=kr())!==a&&(n=lr())!==a?e=r=[r,n]:(Qt=e,e=a),e===a&&(e=Qt,(r=kr())!==a&&(n=function e(){var r,n,o,i;r=Qt;n=function(){var e;(e=dr())===a&&(e=function(){var e,t,r;e=Qt,(t=fr())!==a?((r=Er())===a&&(r=null),r!==a?(Zt=e,t=G(t,r),e=t):(Qt=e,e=a)):(Qt=e,e=a);return e}())===a&&(e=function(){var e,r,n,o;e=Qt,39===t.charCodeAt(Qt)?(r=U,Qt++):(r=a,0===nr&&sr($));if(r!==a){for(n=[],o=Sr();o!==a;)n.push(o),o=Sr();n!==a?(39===t.charCodeAt(Qt)?(o=U,Qt++):(o=a,0===nr&&sr($)),o!==a?(Zt=e,r=q(n),e=r):(Qt=e,e=a)):(Qt=e,e=a)}else Qt=e,e=a;e===a&&(e=Qt,(r=function(){var e,t,r;e=Qt,(t=Ar())!==a&&(r=Dr())!==a&&Ar()!==a?(Zt=e,t=Ge(r),e=t):(Qt=e,e=a);return e}())!==a&&(Zt=e,r=z(r)),e=r);return e}());return e}();n!==a&&kr()!==a?(t.substr(Qt,2)===j?(o=j,Qt+=2):(o=a,0===nr&&sr(F)),o!==a&&kr()!==a&&(i=e())!==a?(Zt=r,n=M(n,i),r=n):(Qt=r,r=a)):(Qt=r,r=a);r===a&&(r=function(){var e;(e=function(){var e,t,r;e=Qt,(t=wr())===a&&(t=null);t!==a&&(r=fr())!==a?(Zt=e,t=B(t,r),e=t):(Qt=e,e=a);return e}())===a&&(e=dr());return e}());return r}())!==a&&(o=kr())!==a?((i=pr())===a&&(i=null),i!==a?(Zt=e,e=r=A(n)):(Qt=e,e=a)):(Qt=e,e=a)))))))),e}function pr(){var e,r,n,o,i;return e=Qt,(r=kr())!==a?(44===t.charCodeAt(Qt)?(n=D,Qt++):(n=a,0===nr&&sr(O)),n===a&&(n=null),n!==a?((o=hr())===a&&(o=null),o!==a?((i=lr())===a&&(i=null),i!==a?e=r=[r,n,o,i]:(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a),e}function lr(){var e;return T.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&sr(N)),e}function hr(){var e,r,n,o,i;if(e=Qt,(r=kr())!==a)if(35===t.charCodeAt(Qt)?(n=I,Qt++):(n=a,0===nr&&sr(R)),n!==a){for(o=[],i=Cr();i!==a;)o.push(i),i=Cr();o!==a?e=r=[r,n,o]:(Qt=e,e=a)}else Qt=e,e=a;else Qt=e,e=a;return e}function dr(){var e,t,r,n;return e=Qt,(t=wr())!==a&&(r=fr())!==a&&(n=Er())!==a?(Zt=e,e=t=L(t,r,n)):(Qt=e,e=a),e===a&&(e=Qt,(t=wr())===a&&(t=null),t!==a&&(r=function(){var e;(e=gr())===a&&(e=yr());return e}())!==a?((n=Er())===a&&(n=null),n!==a?(Zt=e,e=t=L(t,r,n)):(Qt=e,e=a)):(Qt=e,e=a)),e}function fr(){var e,t;return e=Qt,(t=gr())!==a&&(Zt=e,t=H(t)),(e=t)===a&&(e=Qt,(t=mr())!==a&&(Zt=e,t=H(t)),(e=t)===a&&(e=Qt,(t=yr())!==a&&(Zt=e,t=H(t)),e=t)),e}function mr(){var e,r,n,o,i;if(e=Qt,r=Qt,V.test(t.charAt(Qt))?(n=t.charAt(Qt),Qt++):(n=a,0===nr&&sr(X)),n!==a){for(o=[],W.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=a,0===nr&&sr(J));i!==a;)o.push(i),W.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=a,0===nr&&sr(J));o!==a?r=n=[n,o]:(Qt=r,r=a)}else Qt=r,r=a;return r!==a&&(Zt=e,r=Y(r)),e=r}function gr(){var e,t,r;return e=Qt,(t=mr())!==a&&(r=vr())!==a?(Zt=e,e=t=K(t,r)):(Qt=e,e=a),e}function yr(){var e,t;return e=Qt,(t=vr())!==a&&(Zt=e,t=Q(t)),e=t}function vr(){var e,r,n,o,i;if(e=Qt,40===t.charCodeAt(Qt)?(r=Z,Qt++):(r=a,0===nr&&sr(ee)),r!==a){for(n=[],te.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=a,0===nr&&sr(re));o!==a;)n.push(o),te.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=a,0===nr&&sr(re));n===a&&(n=null),n!==a?((o=function(){var e,r,n,o;e=Qt,58===t.charCodeAt(Qt)?(r=m,Qt++):(r=a,0===nr&&sr(g));if(r!==a){if(n=[],se.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=a,0===nr&&sr(ae)),o!==a)for(;o!==a;)n.push(o),se.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=a,0===nr&&sr(ae));else n=a;n!==a?(Zt=e,r=ce(n),e=r):(Qt=e,e=a)}else Qt=e,e=a;return e}())===a&&(o=null),o!==a?(41===t.charCodeAt(Qt)?(i=ne,Qt++):(i=a,0===nr&&sr(oe)),i!==a?(Zt=e,e=r=ie(n,o)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a)}else Qt=e,e=a;return e}function br(){var e,r,n;return e=Qt,(r=xr())!==a?((n=function(){var e,r,n,o;e=Qt,91===t.charCodeAt(Qt)?(r=Ee,Qt++):(r=a,0===nr&&sr(xe));if(r!==a){if(n=[],Ce.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=a,0===nr&&sr(Se)),o!==a)for(;o!==a;)n.push(o),Ce.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=a,0===nr&&sr(Se));else n=a;n!==a?(93===t.charCodeAt(Qt)?(o=ke,Qt++):(o=a,0===nr&&sr(Pe)),o!==a?(Zt=e,r=_e(n),e=r):(Qt=e,e=a)):(Qt=e,e=a)}else Qt=e,e=a;return e}())===a&&(n=null),n!==a?(Zt=e,e=r=ge(r,n)):(Qt=e,e=a)):(Qt=e,e=a),e}function wr(){var e,t;return e=Qt,(t=br())!==a&&Pr()!==a?(Zt=e,e=t=ye(t)):(Qt=e,e=a),e}function Er(){var e,t;return e=Qt,Pr()!==a&&(t=br())!==a?(Zt=e,e=ye(t)):(Qt=e,e=a),e}function xr(){var e,r,n,o,i;if(e=Qt,r=Qt,V.test(t.charAt(Qt))?(n=t.charAt(Qt),Qt++):(n=a,0===nr&&sr(X)),n!==a){for(o=[],ve.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=a,0===nr&&sr(be));i!==a;)o.push(i),ve.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=a,0===nr&&sr(be));o!==a?r=n=[n,o]:(Qt=r,r=a)}else Qt=r,r=a;return r!==a&&(Zt=e,r=we(r)),e=r}function Cr(){var e;return Ae.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&sr(De)),e}function Sr(){var e,r,n;return e=Qt,Oe.test(t.charAt(Qt))?(r=t.charAt(Qt),Qt++):(r=a,0===nr&&sr(Te)),r!==a?(Ne.test(t.charAt(Qt))?(n=t.charAt(Qt),Qt++):(n=a,0===nr&&sr(Ie)),n!==a?(Zt=e,e=r=Re()):(Qt=e,e=a)):(Qt=e,e=a),e===a&&(je.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&sr(Fe))),e}function kr(){var e,r;for(e=[],32===t.charCodeAt(Qt)?(r=Me,Qt++):(r=a,0===nr&&sr(Le));r!==a;)e.push(r),32===t.charCodeAt(Qt)?(r=Me,Qt++):(r=a,0===nr&&sr(Le));return e===a&&(e=null),e}function Pr(){var e,r;if(e=[],32===t.charCodeAt(Qt)?(r=Me,Qt++):(r=a,0===nr&&sr(Le)),r!==a)for(;r!==a;)e.push(r),32===t.charCodeAt(Qt)?(r=Me,Qt++):(r=a,0===nr&&sr(Le));else e=a;return e}function _r(){var e,r,n,o;return e=Qt,(r=Ar())!==a?(44===t.charCodeAt(Qt)?(n=D,Qt++):(n=a,0===nr&&sr(O)),n!==a&&(o=Ar())!==a?e=r=[r,n,o]:(Qt=e,e=a)):(Qt=e,e=a),e}function Ar(){var e,r;for(nr++,e=[],He.test(t.charAt(Qt))?(r=t.charAt(Qt),Qt++):(r=a,0===nr&&sr(Ve));r!==a;)e.push(r),He.test(t.charAt(Qt))?(r=t.charAt(Qt),Qt++):(r=a,0===nr&&sr(Ve));return nr--,e===a&&(r=a,0===nr&&sr(ze)),e}function Dr(){var e;return(e=function(){var e,r;e=Qt,t.substr(Qt,5)===Xe?(r=Xe,Qt+=5):(r=a,0===nr&&sr(We));r!==a&&(Zt=e,r=Je());return e=r}())===a&&(e=function(){var e,r;e=Qt,t.substr(Qt,4)===Ye?(r=Ye,Qt+=4):(r=a,0===nr&&sr(Ke));r!==a&&(Zt=e,r=Qe());return e=r}())===a&&(e=function(){var e,r;e=Qt,t.substr(Qt,4)===Ze?(r=Ze,Qt+=4):(r=a,0===nr&&sr(et));r!==a&&(Zt=e,r=tt());return e=r}())===a&&(e=function(){var e,r,n,o,i,s,c,u;if(e=Qt,(r=function(){var e,r,n,o;return e=Qt,(r=Ar())!==a?(123===t.charCodeAt(Qt)?(n=Be,Qt++):(n=a,0===nr&&sr(Ue)),n!==a&&(o=Ar())!==a?e=r=[r,n,o]:(Qt=e,e=a)):(Qt=e,e=a),e}())!==a){if(n=Qt,(o=Or())!==a){for(i=[],s=Qt,(c=_r())!==a&&(u=Or())!==a?(Zt=s,c=rt(o,u),s=c):(Qt=s,s=a);s!==a;)i.push(s),s=Qt,(c=_r())!==a&&(u=Or())!==a?(Zt=s,c=rt(o,u),s=c):(Qt=s,s=a);i!==a?(Zt=n,o=nt(o,i),n=o):(Qt=n,n=a)}else Qt=n,n=a;n===a&&(n=null),n!==a&&(o=function(){var e,r,n,o;return e=Qt,(r=Ar())!==a?(125===t.charCodeAt(Qt)?(n=$e,Qt++):(n=a,0===nr&&sr(qe)),n!==a&&(o=Ar())!==a?e=r=[r,n,o]:(Qt=e,e=a)):(Qt=e,e=a),e}())!==a?(Zt=e,r=ot(n),e=r):(Qt=e,e=a)}else Qt=e,e=a;return e}())===a&&(e=function(){var e,r,n,o,i,s,c,u;if(e=Qt,(r=function(){var e,r,n,o;return e=Qt,(r=Ar())!==a?(91===t.charCodeAt(Qt)?(n=Ee,Qt++):(n=a,0===nr&&sr(xe)),n!==a&&(o=Ar())!==a?e=r=[r,n,o]:(Qt=e,e=a)):(Qt=e,e=a),e}())!==a){if(n=Qt,(o=Dr())!==a){for(i=[],s=Qt,(c=_r())!==a&&(u=Dr())!==a?(Zt=s,c=st(o,u),s=c):(Qt=s,s=a);s!==a;)i.push(s),s=Qt,(c=_r())!==a&&(u=Dr())!==a?(Zt=s,c=st(o,u),s=c):(Qt=s,s=a);i!==a?(Zt=n,o=at(o,i),n=o):(Qt=n,n=a)}else Qt=n,n=a;n===a&&(n=null),n!==a&&(o=function(){var e,r,n,o;return e=Qt,(r=Ar())!==a?(93===t.charCodeAt(Qt)?(n=ke,Qt++):(n=a,0===nr&&sr(Pe)),n!==a&&(o=Ar())!==a?e=r=[r,n,o]:(Qt=e,e=a)):(Qt=e,e=a),e}())!==a?(Zt=e,r=ct(n),e=r):(Qt=e,e=a)}else Qt=e,e=a;return e}())===a&&(e=function(){var e,r,n,o;nr++,e=Qt,(r=Tr())===a&&(r=null);r!==a&&function(){var e,r,n,o;if((e=function(){var e;48===t.charCodeAt(Qt)?(e=bt,Qt++):(e=a,0===nr&&sr(wt));return e}())===a)if(e=Qt,(r=function(){var e;lt.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&sr(ht));return e}())!==a){for(n=[],o=jr();o!==a;)n.push(o),o=jr();n!==a?e=r=[r,n]:(Qt=e,e=a)}else Qt=e,e=a;return e}()!==a?((n=function(){var e,r,n,o;if(e=Qt,(r=function(){var e;46===t.charCodeAt(Qt)?(e=d,Qt++):(e=a,0===nr&&sr(f));return e}())!==a){if(n=[],(o=jr())!==a)for(;o!==a;)n.push(o),o=jr();else n=a;n!==a?e=r=[r,n]:(Qt=e,e=a)}else Qt=e,e=a;return e}())===a&&(n=null),n!==a?((o=function(){var e,r,n,o,i;if(e=Qt,(r=function(){var e;dt.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&sr(ft));return e}())!==a)if((n=Tr())===a&&(n=function(){var e;43===t.charCodeAt(Qt)?(e=yt,Qt++):(e=a,0===nr&&sr(vt));return e}()),n===a&&(n=null),n!==a){if(o=[],(i=jr())!==a)for(;i!==a;)o.push(i),i=jr();else o=a;o!==a?e=r=[r,n,o]:(Qt=e,e=a)}else Qt=e,e=a;else Qt=e,e=a;return e}())===a&&(o=null),o!==a?(Zt=e,r=pt(),e=r):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a);nr--,e===a&&(r=a,0===nr&&sr(ut));return e}())===a&&(e=Nr()),e}function Or(){var e,r,n;return e=Qt,(r=Nr())!==a&&function(){var e,r,n,o;return e=Qt,(r=Ar())!==a?(58===t.charCodeAt(Qt)?(n=m,Qt++):(n=a,0===nr&&sr(g)),n!==a&&(o=Ar())!==a?e=r=[r,n,o]:(Qt=e,e=a)):(Qt=e,e=a),e}()!==a&&(n=Dr())!==a?(Zt=e,e=r=it(r,n)):(Qt=e,e=a),e}function Tr(){var e;return 45===t.charCodeAt(Qt)?(e=mt,Qt++):(e=a,0===nr&&sr(gt)),e}function Nr(){var e,t,r;if(nr++,e=Qt,Rr()!==a){for(t=[],r=Ir();r!==a;)t.push(r),r=Ir();t!==a&&(r=Rr())!==a?(Zt=e,e=xt(t)):(Qt=e,e=a)}else Qt=e,e=a;return nr--,e===a&&(a,0===nr&&sr(Et)),e}function Ir(){var e,r,n,o,i,s,c,u,p;return(e=function(){var e;Wt.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&sr(Jt));return e}())===a&&(e=Qt,function(){var e;92===t.charCodeAt(Qt)?(e=kt,Qt++):(e=a,0===nr&&sr(Pt));return e}()!==a?(34===t.charCodeAt(Qt)?(r=Ct,Qt++):(r=a,0===nr&&sr(St)),r===a&&(92===t.charCodeAt(Qt)?(r=kt,Qt++):(r=a,0===nr&&sr(Pt)),r===a&&(47===t.charCodeAt(Qt)?(r=_t,Qt++):(r=a,0===nr&&sr(At)),r===a&&(r=Qt,98===t.charCodeAt(Qt)?(n=Dt,Qt++):(n=a,0===nr&&sr(Ot)),n!==a&&(Zt=r,n=Tt()),(r=n)===a&&(r=Qt,102===t.charCodeAt(Qt)?(n=Nt,Qt++):(n=a,0===nr&&sr(It)),n!==a&&(Zt=r,n=Rt()),(r=n)===a&&(r=Qt,110===t.charCodeAt(Qt)?(n=jt,Qt++):(n=a,0===nr&&sr(Ft)),n!==a&&(Zt=r,n=Mt()),(r=n)===a&&(r=Qt,114===t.charCodeAt(Qt)?(n=Lt,Qt++):(n=a,0===nr&&sr(Gt)),n!==a&&(Zt=r,n=Bt()),(r=n)===a&&(r=Qt,116===t.charCodeAt(Qt)?(n=Ut,Qt++):(n=a,0===nr&&sr($t)),n!==a&&(Zt=r,n=qt()),(r=n)===a&&(r=Qt,117===t.charCodeAt(Qt)?(n=zt,Qt++):(n=a,0===nr&&sr(Ht)),n!==a?(o=Qt,i=Qt,(s=Fr())!==a&&(c=Fr())!==a&&(u=Fr())!==a&&(p=Fr())!==a?i=s=[s,c,u,p]:(Qt=i,i=a),(o=i!==a?t.substring(o,Qt):i)!==a?(Zt=r,r=n=Vt(o)):(Qt=r,r=a)):(Qt=r,r=a))))))))),r!==a?(Zt=e,e=Xt(r)):(Qt=e,e=a)):(Qt=e,e=a)),e}function Rr(){var e;return 34===t.charCodeAt(Qt)?(e=Ct,Qt++):(e=a,0===nr&&sr(St)),e}function jr(){var e;return Ce.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&sr(Se)),e}function Fr(){var e;return Yt.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&sr(Kt)),e}var Mr="IN",Lr="OUT";delete(s=this).properties,delete s.inports,delete s.outports,delete s.groups,s.edges=[],o={};var Gr=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};s.validateContents=function(e,t){e.processes&&Object.keys(e.processes).forEach(function(t){if(!e.processes[t].component)throw new Error('Node "'+t+'" does not have a component defined')}),e.inports&&Object.keys(e.inports).forEach(function(t){var r=e.inports[t];if(!e.processes[r.process])throw new Error('Inport "'+t+'" is connected to an undefined target node "'+r.process+'"')}),e.outports&&Object.keys(e.outports).forEach(function(t){var r=e.outports[t];if(!e.processes[r.process])throw new Error('Outport "'+t+'" is connected to an undefined source node "'+r.process+'"')}),e.connections&&e.connections.forEach(function(t){if(t.tgt&&!e.processes[t.tgt.process]){if(t.data)throw new Error('IIP containing "'+t.data+'" is connected to an undefined target node "'+t.tgt.process+'"');throw new Error('Edge from "'+t.src.process+'" port "'+t.src.port+'" is connected to an undefined target node "'+t.tgt.process+'"')}if(t.src&&!e.processes[t.src.process])throw new Error('Edge to "'+t.tgt.process+'" port "'+t.tgt.port+'" is connected to an undefined source node "'+t.src.process+'"')})},s.serialize=function(e){var t,r,n,o,s,a,c,u,p,l,h,d,f,m,g,y,v,b,w,E,x,C,S;for(u in null==i&&(i={}),a="string"==typeof e?JSON.parse(e):e,p=[],h="",n=function(e){return null!=a.processes[e].metadata&&(e=a.processes[e].metadata.label),e.indexOf("/")>-1&&(e=e.split("/").pop()),e},r=function(e,t){return null!=t.process&&null!=a.processes[t.process].metadata?e=a.processes[t.process].metadata.label:null!=t.process&&(e=t.process),e.indexOf("/")>-1&&(e=e.split("/").pop()),e},a.properties&&(a.properties.environment&&a.properties.environment.type&&(h+="# @runtime "+a.properties.environment.type+"\n"),Object.keys(a.properties).forEach(function(e){if(e.match(/^[a-zA-Z0-9\-_]+$/)){var t=a.properties[e];"string"==typeof t&&t.match(/^[a-zA-Z0-9\-_\s\.]+$/)&&(h+="# @"+e+" "+t+"\n")}})),f=a.inports)d=r(u,s=f[u]),u=a.caseSensitive?u:u.toUpperCase(),s.port=a.caseSensitive?s.port:s.port.toUpperCase(),h+="INPORT="+d+"."+s.port+":"+u+"\n";for(u in m=a.outports)l=m[u],d=r(u,s),u=a.caseSensitive?u:u.toUpperCase(),l.port=a.caseSensitive?l.port:l.port.toUpperCase(),h+="OUTPORT="+d+"."+l.port+":"+u+"\n";for(h+="\n",o=0,c=(g=a.connections).length;o<c;o++)null!=(t=g[o]).data?(C=a.caseSensitive?t.tgt.port:t.tgt.port.toUpperCase(),x=t.tgt.process,S=a.processes[x].component,E=n(x),Gr.call(p,S)<0&&(E+="("+S+")",p.push(S)),h+='"'+t.data+'" -> '+C+" "+E+"\n"):(b=a.caseSensitive?t.src.port:t.src.port.toUpperCase(),v=t.src.process,w=a.processes[v].component,y=n(v),Gr.call(p,w)<0&&(y+="("+w+")",p.push(w)),C=a.caseSensitive?t.tgt.port:t.tgt.port.toUpperCase(),x=t.tgt.process,S=a.processes[x].component,E=n(x),Gr.call(p,S)<0&&(E+="("+S+")",p.push(S)),h+=y+" "+b+" -> "+C+" "+E+"\n");return h},s.addNode=function(e,t){if(o[e]||(o[e]={}),t.comp&&(o[e].component=t.comp),t.meta){for(var r={},n=0;n<t.meta.length;n++){var i=t.meta[n].split("=");1===i.length&&(i=["routes",i[0]]);var s=i[0],a=i[1];"x"!==s&&"y"!==s||(a=parseFloat(a)),r[s]=a}o[e].metadata=r}};var Br={},Ur={};s.addAnonymousNode=function(e,t){if(!Ur[t]){var r=e.comp.replace(/[^a-zA-Z0-9]+/,"_");Br[r]=(Br[r]||0)+1,Ur[t]="_"+r+"_"+Br[r],this.addNode(Ur[t],e)}return Ur[t]},s.getResult=function(){var e={inports:s.inports||{},outports:s.outports||{},groups:s.groups||[],processes:o||{},connections:s.processEdges()};s.properties&&(e.properties=s.properties),e.caseSensitive=i.caseSensitive||!1;var t=s.validateSchema;if(void 0!==i.validateSchema&&(t=i.validateSchema),t){if(void 0===n)var n=r(113);var a=r(202),c=n.validateMultiple(e,a);if(!c.valid)throw new Error("fbp: Did not validate againt graph schema:\n"+JSON.stringify(c.errors,null,2))}return(void 0===i.validateContents||i.validateContents)&&s.validateContents(e),e};var $r=function(e,t){for(var r=-1,n=e?e.length:0,o=[];++r<n;){var i=e[r];i instanceof Array?Array.prototype.push.apply(o,t?i:$r(i)):o.push(i)}return o};function qr(e){return e[0]+e[1].join("")}function zr(e,t,r){i.caseSensitive||(r=r.toLowerCase());var n={process:e,port:t?t.port:r};return t&&null!=t.index&&(n.index=t.index),n}function Hr(e,t){return zr(e,t,Mr)}function Vr(e,t){return zr(e,t,Lr)}if(s.registerAnnotation=function(e,t){if(s.properties||(s.properties={}),"runtime"===e)return s.properties.environment={},void(s.properties.environment.type=t);s.properties[e]=t},s.registerInports=function(e,t,r){s.inports||(s.inports={}),i.caseSensitive||(r=r.toLowerCase(),t=t.toLowerCase()),s.inports[r]={process:e,port:t}},s.registerOutports=function(e,t,r){s.outports||(s.outports={}),i.caseSensitive||(r=r.toLowerCase(),t=t.toLowerCase()),s.outports[r]={process:e,port:t}},s.registerEdges=function(e){Array.isArray(e)&&e.forEach(function(e,t){s.edges.push(e)})},s.processEdges=function(){var e,t;e=$r(s.edges),t=[];for(var r=1;r<e.length;r+=1)("src"in e[r-1]||"data"in e[r-1])&&"tgt"in e[r]&&(e[r-1].tgt=e[r].tgt,t.push(e[r-1]),r++);return t},(n=u())!==a&&Qt===t.length)return n;throw n!==a&&Qt<t.length&&sr({type:"end",description:"end of input"}),ar(null,rr,tr<t.length?t.charAt(tr):null,tr<t.length?ir(tr,tr+1):ir(tr,tr))}}}()},function(e,t,r){(function(e){function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u,p,l,h,d;l=r(33),p=r(8).EventEmitter,d=r(204),h=r(56),u=function(t){function r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=s(this,a(r).call(this))).baseDir=e,t.options=n,t.components=null,t.libraryIcons={},t.processing=!1,t.ready=!1,t.setMaxListeners(0),t}var u,f,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(r,p),u=r,(f=[{key:"getModulePrefix",value:function(e){return e?"noflo"===e?"":("@"===e[0]&&(e=e.replace(/\@[a-z\-]+\//,"")),e.replace(/^noflo-/,"")):""}},{key:"listComponents",value:function(e){var t=this;if(this.processing)this.once("ready",function(){return e(null,t.components)});else{if(this.components)return e(null,this.components);this.ready=!1,this.processing=!0,this.components={},d.register(this,function(r){if(r){if(e)return e(r);throw r}if(t.processing=!1,t.ready=!0,t.emit("ready",!0),e)return e(null,t.components)})}}},{key:"load",value:function(t,r,n){var o,i,s=this;if(this.ready){if(!(o=this.components[t])){for(i in this.components)if(i.split("/")[1]===t){o=this.components[i];break}if(!o)return void r(new Error("Component ".concat(t," not available with base ").concat(this.baseDir)))}if(!this.isGraph(o))return this.createComponent(t,o,n,function(e,n){return e?r(e):n?("Graph"===t&&(n.baseDir=s.baseDir),"string"==typeof t&&(n.componentName=t),n.isLegacy()&&h.deprecated("Component ".concat(t," uses legacy NoFlo APIs. Please port to Process API")),s.setIcon(t,n),r(null,n)):void r(new Error("Component ".concat(t," could not be loaded.")))});h.isBrowser()?setTimeout(function(){return s.loadGraph(t,o,r,n)},0):e.nextTick(function(){return s.loadGraph(t,o,r,n)})}else this.listComponents(function(e){return e?r(e):s.load(t,r,n)})}},{key:"createComponent",value:function(e,t,r,n){var i,s;if(!(i=t))return n(new Error("Component ".concat(e," not available")));if("string"==typeof i)return"function"==typeof d.dynamicLoad?void d.dynamicLoad(e,i,r,n):n(Error("Dynamic loading of ".concat(i," for component ").concat(e," not available on this platform.")));if("function"==typeof i.getComponent)try{s=i.getComponent(r)}catch(e){return n(e)}else{if("function"!=typeof i)return void n(new Error("Invalid type ".concat(o(i)," for component ").concat(e,".")));try{s=i(r)}catch(e){return n(e)}}return n(null,s)}},{key:"isGraph",value:function(e){return"object"===o(e)&&e instanceof l.Graph||(!("object"!==o(e)||!e.processes||!e.connections)||"string"==typeof e&&(-1!==e.indexOf(".fbp")||-1!==e.indexOf(".json")))}},{key:"loadGraph",value:function(e,t,r,n){var o=this;this.createComponent(e,this.components.Graph,n,function(n,i){if(n)return r(n);i.loader=o,i.baseDir=o.baseDir,i.inPorts.remove("graph"),i.setGraph(t,function(t){return t?r(t):(o.setIcon(e,i),r(null,i))})})}},{key:"setIcon",value:function(e,t){var r;if(t.getIcon&&!t.getIcon()){var o=n(e.split("/"),2);r=o[0],o[1]&&this.getLibraryIcon(r)?t.setIcon(this.getLibraryIcon(r)):t.isSubgraph()?t.setIcon("sitemap"):t.setIcon("gear")}}},{key:"getLibraryIcon",value:function(e){return this.libraryIcons[e]?this.libraryIcons[e]:null}},{key:"setLibraryIcon",value:function(e,t){return this.libraryIcons[e]=t}},{key:"normalizeName",value:function(e,t){var r,n;return n=this.getModulePrefix(e),r="".concat(n,"/").concat(t),e||(r=t),r}},{key:"registerComponent",value:function(e,t,r,n){var o;if(o=this.normalizeName(e,t),this.components[o]=r,n)return n()}},{key:"registerGraph",value:function(e,t,r,n){return this.registerComponent(e,t,r,n)}},{key:"registerLoader",value:function(e,t){return e(this,t)}},{key:"setSource",value:function(e,t,r,n,o){var i=this;return d.setSource?this.ready?d.setSource(this,e,t,r,n,o):void this.listComponents(function(s){return s?o(s):i.setSource(e,t,r,n,o)}):o(new Error("setSource not allowed"))}},{key:"getSource",value:function(e,t){var r=this;return d.getSource?this.ready?d.getSource(this,e,t):void this.listComponents(function(n){return n?t(n):r.getSource(e,t)}):t(new Error("getSource not allowed"))}},{key:"clear",value:function(){return this.components=null,this.ready=!1,this.processing=!1}}])&&i(u.prototype,f),m&&i(u,m),r}(),t.ComponentLoader=u}).call(this,r(2))},function(e,t,r){var n=r(238),o={host:"https://api.flowhub.io"};Object.defineProperty(t,"PING_INTERVAL",{value:6e5,enumerable:!0}),t.Runtime=function(e,t){if("object"!=typeof e)throw new Error("Runtime options expected");if(!e.id)throw new Error("Runtime requires an UUID");this.runtime=e,this.options={},Object.keys(o).forEach(function(e){this.options[e]=o[e]}.bind(this)),t&&Object.keys(t).forEach(function(e){this.options[e]=t[e]}.bind(this))},t.Runtime.prototype.register=function(e,t){"function"==typeof e&&(t=e,e=null),this.runtime.user?this.runtime.address?this.runtime.protocol?this.runtime.type?e?n.put(this.options.host+"/runtimes/"+this.runtime.id).set("Authorization","Bearer "+e).send(this.runtime).end(t):n.put(this.options.host+"/runtimes/"+this.runtime.id).send(this.runtime).end(t):t(new Error("Runtime registration requires a type")):t(new Error("Runtime registration requires a protocol")):t(new Error("Runtime registration requires an address URL")):t(new Error("Runtime registration requires a user UUID"))},t.Runtime.prototype.ping=function(e){n.post(this.options.host+"/runtimes/"+this.runtime.id).send({}).end(function(t,r){e&&e(t)})},t.Runtime.prototype.get=function(e,t){if(!e)return t(new Error("API token required for fetching"));n.get(this.options.host+"/runtimes/"+this.runtime.id).set("Authorization","Bearer "+e).end(function(e,r){e?t(e):200===r.status?(Object.keys(r.body).forEach(function(e){this.runtime[e]="seen"!=e&&"registered"!=e?r.body[e]:new Date(r.body[e])}.bind(this)),t(null,this.runtime)):t(new Error("Request returned "+r.status))}.bind(this))},t.Runtime.prototype.del=function(e,t){if(!e)return t(new Error("API token required for deletion"));n.del(this.options.host+"/runtimes/"+this.runtime.id).set("Authorization","Bearer "+e).end(function(e,r){e&&404===e.status?t():t(e,r)})},t.list=function(e,r,i){if(!e)return i(new Error("API token required for fetching"));i||(i=r,r={}),Object.keys(o).forEach(function(e){r[e]||(r[e]=o[e])}.bind(this)),n.get(r.host+"/runtimes/").set("Authorization","Bearer "+e).end(function(e,n){if(e)i(e);else if(200===n.status){var o=[];n.body.forEach(function(e){e.registered=new Date(e.registered),e.seen=new Date(e.seen),o.push(new t.Runtime(e,r))}),i(null,o)}else i(new Error("Request returned "+n.status))})}},function(e,t,r){"use strict";(function(n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":o(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(o=n))}),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(294)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,r(2))},function(e,t,r){"use strict";var n=r(27),o=r(83),i=r(35),s=r(123),a=r(308);function c(e,t,r){var n=this._refs[r];if("string"==typeof n){if(!this._refs[n])return c.call(this,e,t,n);n=this._refs[n]}if((n=n||this._schemas[r])instanceof s)return d(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var o,i,a,p=u.call(this,t,r);return p&&(o=p.schema,t=p.root,a=p.baseId),o instanceof s?i=o.validate||e.call(this,o.schema,t,void 0,a):void 0!==o&&(i=d(o,this._opts.inlineRefs)?o:e.call(this,o,t,void 0,a)),i}function u(e,t){var r=n.parse(t,!1,!0),o=m(r),i=f(this._getId(e.schema));if(o!==i){var a=y(o),c=this._refs[a];if("string"==typeof c)return function(e,t,r){var n=u.call(this,e,t);if(n){var o=n.schema,i=n.baseId;e=n.root;var s=this._getId(o);return s&&(i=v(i,s)),l.call(this,r,i,o,e)}}.call(this,e,c,r);if(c instanceof s)c.validate||this._compile(c),e=c;else{if(!((c=this._schemas[a])instanceof s))return;if(c.validate||this._compile(c),a==y(t))return{schema:c,root:e,baseId:i};e=c}if(!e.schema)return;i=f(this._getId(e.schema))}return l.call(this,r,i,e.schema,e)}e.exports=c,c.normalizeId=y,c.fullPath=f,c.url=v,c.ids=function(e){var t=y(this._getId(e)),r={"":t},s={"":f(t,!1)},c={},u=this;return a(e,{allKeys:!0},function(e,t,a,p,l,h,d){if(""!==t){var f=u._getId(e),m=r[p],g=s[p]+"/"+l;if(void 0!==d&&(g+="/"+("number"==typeof d?d:i.escapeFragment(d))),"string"==typeof f){f=m=y(m?n.resolve(m,f):f);var v=u._refs[f];if("string"==typeof v&&(v=u._refs[v]),v&&v.schema){if(!o(e,v.schema))throw new Error('id "'+f+'" resolves to more than one schema')}else if(f!=y(g))if("#"==f[0]){if(c[f]&&!o(e,c[f]))throw new Error('id "'+f+'" resolves to more than one schema');c[f]=e}else u._refs[f]=g}r[t]=m,s[t]=g}}),c},c.inlineRef=d,c.schema=u;var p=i.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function l(e,t,r,n){if(e.hash=e.hash||"","#/"==e.hash.slice(0,2)){for(var o=e.hash.split("/"),s=1;s<o.length;s++){var a=o[s];if(a){if(void 0===(r=r[a=i.unescapeFragment(a)]))break;var c;if(!p[a]&&((c=this._getId(r))&&(t=v(t,c)),r.$ref)){var l=v(t,r.$ref),h=u.call(this,n,l);h&&(r=h.schema,n=h.root,t=h.baseId)}}}return void 0!==r&&r!==n.schema?{schema:r,root:n,baseId:t}:void 0}}var h=i.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function d(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if("object"==typeof(r=t[n])&&!e(r))return!1}else for(var o in t){if("$ref"==o)return!1;if("object"==typeof(r=t[o])&&!e(r))return!1}return!0}(e):t?function e(t){var r,n=0;if(Array.isArray(t)){for(var o=0;o<t.length;o++)if("object"==typeof(r=t[o])&&(n+=e(r)),n==1/0)return 1/0}else for(var i in t){if("$ref"==i)return 1/0;if(h[i])n++;else if("object"==typeof(r=t[i])&&(n+=e(r)+1),n==1/0)return 1/0}return n}(e)<=t:void 0)}function f(e,t){return!1!==t&&(e=y(e)),m(n.parse(e,!1,!0))}function m(e){var t=e.protocol||"//"==e.href.slice(0,2)?"//":"";return(e.protocol||"")+t+(e.host||"")+(e.path||"")+"#"}var g=/#\/?$/;function y(e){return e?e.replace(g,""):""}function v(e,t){return t=y(t),n.resolve(e,t)}},function(e,t,r){"use strict";var n=Array.isArray,o=Object.keys,i=Object.prototype.hasOwnProperty;e.exports=function e(t,r){if(t===r)return!0;var s,a,c,u=n(t),p=n(r);if(u&&p){if((a=t.length)!=r.length)return!1;for(s=0;s<a;s++)if(!e(t[s],r[s]))return!1;return!0}if(u!=p)return!1;var l=t instanceof Date,h=r instanceof Date;if(l!=h)return!1;if(l&&h)return t.getTime()==r.getTime();var d=t instanceof RegExp,f=r instanceof RegExp;if(d!=f)return!1;if(d&&f)return t.toString()==r.toString();if(t instanceof Object&&r instanceof Object){var m=o(t);if((a=m.length)!==o(r).length)return!1;for(s=0;s<a;s++)if(!i.call(r,m[s]))return!1;for(s=0;s<a;s++)if(!e(t[c=m[s]],r[c]))return!1;return!0}return!1}},function(e,t,r){"use strict";var n=r(82);function o(e,t,r){this.message=r||o.message(e,t),this.missingRef=n.url(e,t),this.missingSchema=n.normalizeId(n.fullPath(this.missingRef))}function i(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:i(function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}),MissingRef:i(o)},o.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},function(e,t){e.exports=function(e){return[":~:",e,":~:"].join("")}},function(e,t,r){(function(t,r,n){var o;o=function(){var e,o,i;return function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var c="function"==typeof _dereq_&&_dereq_;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var p=r[s]={exports:{}};t[s][0].call(p.exports,function(e){var r=t[s][1][e];return o(r||e)},p,p.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof _dereq_&&_dereq_,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){"use strict";t.exports=function(e){var t=e._SomePromiseArray;function r(e){var r=new t(e),n=r.promise();return r.setHowMany(1),r.setUnwrap(),r.init(),n}e.any=function(e){return r(e)},e.prototype.any=function(){return r(this)}}},{}],2:[function(e,r,n){"use strict";var o;try{throw new Error}catch(e){o=e}var i=e("./schedule"),s=e("./queue"),a=e("./util");function c(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new s(16),this._normalQueue=new s(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=i}function u(e,t,r){this._lateQueue.push(e,t,r),this._queueTick()}function p(e,t,r){this._normalQueue.push(e,t,r),this._queueTick()}function l(e){this._normalQueue._pushOne(e),this._queueTick()}function h(e){for(;e.length()>0;)d(e)}function d(e){var t=e.shift();if("function"!=typeof t)t._settlePromises();else{var r=e.shift(),n=e.shift();t.call(r,n)}}c.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},c.prototype.hasCustomScheduler=function(){return this._customScheduler},c.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},c.prototype.disableTrampolineIfNecessary=function(){a.hasDevTools&&(this._trampolineEnabled=!1)},c.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},c.prototype.fatalError=function(e,r){r?(t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),t.exit(2)):this.throwLater(e)},c.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.hasDevTools?(c.prototype.invokeLater=function(e,t,r){this._trampolineEnabled?u.call(this,e,t,r):this._schedule(function(){setTimeout(function(){e.call(t,r)},100)})},c.prototype.invoke=function(e,t,r){this._trampolineEnabled?p.call(this,e,t,r):this._schedule(function(){e.call(t,r)})},c.prototype.settlePromises=function(e){this._trampolineEnabled?l.call(this,e):this._schedule(function(){e._settlePromises()})}):(c.prototype.invokeLater=u,c.prototype.invoke=p,c.prototype.settlePromises=l),c.prototype._drainQueues=function(){h(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,h(this._lateQueue)},c.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},c.prototype._reset=function(){this._isTickUsed=!1},r.exports=c,r.exports.firstLineError=o},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){var o=!1,i=function(e,t){this._reject(t)},s=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(i,i,null,this,e)},a=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},c=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(i){o||(o=!0,e.prototype._propagateFrom=n.propagateFromFunction(),e.prototype._boundValue=n.boundValueFunction());var u=r(i),p=new e(t);p._propagateFrom(this,1);var l=this._target();if(p._setBoundTo(u),u instanceof e){var h={promiseRejectionQueued:!1,promise:p,target:l,bindingPromise:u};l._then(t,s,void 0,p,h),u._then(a,c,void 0,p,h),p._setOnCancel(u)}else p._resolveCallback(l);return p},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,r){return e.resolve(r).bind(t)}}},{}],4:[function(e,t,r){"use strict";var n;"undefined"!=typeof Promise&&(n=Promise);var o=e("./promise")();o.noConflict=function(){try{Promise===o&&(Promise=n)}catch(e){}return o},t.exports=o},{"./promise":22}],5:[function(e,t,r){"use strict";var n=Object.create;if(n){var o=n(null),i=n(null);o[" size"]=i[" size"]=0}t.exports=function(t){var r=e("./util"),n=r.canEvaluate;r.isIdentifier;function o(e){return function(e,n){var o;if(null!=e&&(o=e[n]),"function"!=typeof o){var i="Object "+r.classString(e)+" has no method '"+r.toString(n)+"'";throw new t.TypeError(i)}return o}(e,this.pop()).apply(e,this)}function i(e){return e[this]}function s(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(o,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t;if("number"==typeof e)t=s;else if(n){var r=(void 0)(e);t=null!==r?r:i}else t=i;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){var i=e("./util"),s=i.tryCatch,a=i.errorObj,c=t._async;t.prototype.break=t.prototype.cancel=function(){if(!o.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var r=e._cancellationParent;if(null==r||!r._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=r}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(i.isArray(e))for(var r=0;r<e.length;++r)this._doInvokeOnCancel(e[r],t);else if(void 0!==e)if("function"==typeof e){if(!t){var n=s(e).call(this._boundValue());n===a&&(this._attachExtraTrace(n.e),c.throwLater(n.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,r){"use strict";t.exports=function(t){var r=e("./util"),n=e("./es5").keys,o=r.tryCatch,i=r.errorObj;return function(e,s,a){return function(c){var u=a._boundValue();e:for(var p=0;p<e.length;++p){var l=e[p];if(l===Error||null!=l&&l.prototype instanceof Error){if(c instanceof l)return o(s).call(u,c)}else if("function"==typeof l){var h=o(l).call(u,c);if(h===i)return h;if(h)return o(s).call(u,c)}else if(r.isObject(c)){for(var d=n(l),f=0;f<d.length;++f){var m=d[f];if(l[m]!=c[m])continue e}return o(s).call(u,c)}}return t}}}},{"./es5":13,"./util":36}],8:[function(e,t,r){"use strict";t.exports=function(e){var t=!1,r=[];function n(){this._trace=new n.CapturedTrace(o())}function o(){var e=r.length-1;if(e>=0)return r[e]}return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},n.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,r.push(this._trace))},n.prototype._popContext=function(){if(void 0!==this._trace){var e=r.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},n.CapturedTrace=null,n.create=function(){if(t)return new n},n.deactivateLongStackTraces=function(){},n.activateLongStackTraces=function(){var r=e.prototype._pushContext,i=e.prototype._popContext,s=e._peekContext,a=e.prototype._peekContext,c=e.prototype._promiseCreated;n.deactivateLongStackTraces=function(){e.prototype._pushContext=r,e.prototype._popContext=i,e._peekContext=s,e.prototype._peekContext=a,e.prototype._promiseCreated=c,t=!1},t=!0,e.prototype._pushContext=n.prototype._pushContext,e.prototype._popContext=n.prototype._popContext,e._peekContext=e.prototype._peekContext=o,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},n}},{}],9:[function(e,r,n){"use strict";r.exports=function(r,n){var o,i,s,a=r._getDomain,c=r._async,u=e("./errors").Warning,p=e("./util"),l=e("./es5"),h=p.canAttachTrace,d=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,f=/\((?:timers\.js):\d+:\d+\)/,m=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,g=null,y=null,v=!1,b=!(0==p.env("BLUEBIRD_DEBUG")),w=!(0==p.env("BLUEBIRD_WARNINGS")||!b&&!p.env("BLUEBIRD_WARNINGS")),E=!(0==p.env("BLUEBIRD_LONG_STACK_TRACES")||!b&&!p.env("BLUEBIRD_LONG_STACK_TRACES")),x=0!=p.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(w||!!p.env("BLUEBIRD_W_FORGOTTEN_RETURN"));r.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},r.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout(function(){e._notifyUnhandledRejection()},1)}},r.prototype._notifyUnhandledRejectionIsHandled=function(){H("rejectionHandled",o,void 0,this)},r.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},r.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},r.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),H("unhandledRejection",i,e,this)}},r.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},r.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},r.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},r.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},r.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},r.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},r.prototype._warn=function(e,t,r){return U(e,t,r||this)},r.onPossiblyUnhandledRejection=function(e){var t=a();i="function"==typeof e?null===t?e:p.domainBind(t,e):void 0},r.onUnhandledRejectionHandled=function(e){var t=a();o="function"==typeof e?null===t?e:p.domainBind(t,e):void 0};var C=function(){};r.longStackTraces=function(){if(c.haveItemsQueued()&&!Z.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!Z.longStackTraces&&X()){var e=r.prototype._captureStackTrace,t=r.prototype._attachExtraTrace,o=r.prototype._dereferenceTrace;Z.longStackTraces=!0,C=function(){if(c.haveItemsQueued()&&!Z.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");r.prototype._captureStackTrace=e,r.prototype._attachExtraTrace=t,r.prototype._dereferenceTrace=o,n.deactivateLongStackTraces(),c.enableTrampoline(),Z.longStackTraces=!1},r.prototype._captureStackTrace=L,r.prototype._attachExtraTrace=G,r.prototype._dereferenceTrace=B,n.activateLongStackTraces(),c.disableTrampolineIfNecessary()}},r.hasLongStackTraces=function(){return Z.longStackTraces&&X()};var S=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return p.global.dispatchEvent(e),function(e,t){var r={detail:t,cancelable:!0};l.defineProperty(r,"promise",{value:t.promise}),l.defineProperty(r,"reason",{value:t.reason});var n=new CustomEvent(e.toLowerCase(),r);return!p.global.dispatchEvent(n)}}if("function"==typeof Event){e=new Event("CustomEvent");return p.global.dispatchEvent(e),function(e,t){var r=new Event(e.toLowerCase(),{cancelable:!0});return r.detail=t,l.defineProperty(r,"promise",{value:t.promise}),l.defineProperty(r,"reason",{value:t.reason}),!p.global.dispatchEvent(r)}}return(e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),p.global.dispatchEvent(e),function(e,t){var r=document.createEvent("CustomEvent");return r.initCustomEvent(e.toLowerCase(),!1,!0,t),!p.global.dispatchEvent(r)}}catch(e){}return function(){return!1}}(),k=p.isNode?function(){return t.emit.apply(t,arguments)}:p.global?function(e){var t="on"+e.toLowerCase(),r=p.global[t];return!!r&&(r.apply(p.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function P(e,t){return{promise:t}}var _={promiseCreated:P,promiseFulfilled:P,promiseRejected:P,promiseResolved:P,promiseCancelled:P,promiseChained:function(e,t,r){return{promise:t,child:r}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,r){return{reason:t,promise:r}},rejectionHandled:P},A=function(e){var t=!1;try{t=k.apply(null,arguments)}catch(e){c.throwLater(e),t=!0}var r=!1;try{r=S(e,_[e].apply(null,arguments))}catch(e){c.throwLater(e),r=!0}return r||t};function D(){return!1}function O(e,t,r){var n=this;try{e(t,r,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+p.toString(e));n._attachCancellationCallback(e)})}catch(e){return e}}function T(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?p.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function N(){return this._onCancelField}function I(e){this._onCancelField=e}function R(){this._cancellationParent=void 0,this._onCancelField=void 0}function j(e,t){if(0!=(1&t)){this._cancellationParent=e;var r=e._branchesRemainingToCancel;void 0===r&&(r=0),e._branchesRemainingToCancel=r+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}r.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?r.longStackTraces():!e.longStackTraces&&r.hasLongStackTraces()&&C()),"warnings"in e){var t=e.warnings;Z.warnings=!!t,x=Z.warnings,p.isObject(t)&&"wForgottenReturn"in t&&(x=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!Z.cancellation){if(c.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");r.prototype._clearCancellationData=R,r.prototype._propagateFrom=j,r.prototype._onCancel=N,r.prototype._setOnCancel=I,r.prototype._attachCancellationCallback=T,r.prototype._execute=O,F=j,Z.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!Z.monitoring?(Z.monitoring=!0,r.prototype._fireEvent=A):!e.monitoring&&Z.monitoring&&(Z.monitoring=!1,r.prototype._fireEvent=D)),r},r.prototype._fireEvent=D,r.prototype._execute=function(e,t,r){try{e(t,r)}catch(e){return e}},r.prototype._onCancel=function(){},r.prototype._setOnCancel=function(e){},r.prototype._attachCancellationCallback=function(e){},r.prototype._captureStackTrace=function(){},r.prototype._attachExtraTrace=function(){},r.prototype._dereferenceTrace=function(){},r.prototype._clearCancellationData=function(){},r.prototype._propagateFrom=function(e,t){};var F=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)};function M(){var e=this._boundTo;return void 0!==e&&e instanceof r?e.isFulfilled()?e.value():void 0:e}function L(){this._trace=new K(this._peekContext())}function G(e,t){if(h(e)){var r=this._trace;if(void 0!==r&&t&&(r=r._parent),void 0!==r)r.attachExtraTrace(e);else if(!e.__stackCleaned__){var n=q(e);p.notEnumerableProp(e,"stack",n.message+"\n"+n.stack.join("\n")),p.notEnumerableProp(e,"__stackCleaned__",!0)}}}function B(){this._trace=void 0}function U(e,t,n){if(Z.warnings){var o,i=new u(e);if(t)n._attachExtraTrace(i);else if(Z.longStackTraces&&(o=r._peekContext()))o.attachExtraTrace(i);else{var s=q(i);i.stack=s.message+"\n"+s.stack.join("\n")}A("warning",i)||z(i,"",!0)}}function $(e){for(var t=[],r=0;r<e.length;++r){var n=e[r],o="    (No stack trace)"===n||g.test(n),i=o&&W(n);o&&!i&&(v&&" "!==n.charAt(0)&&(n="    "+n),t.push(n))}return t}function q(e){var t=e.stack,r=e.toString();return t="string"==typeof t&&t.length>0?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),r=0;r<t.length;++r){var n=t[r];if("    (No stack trace)"===n||g.test(n))break}return r>0&&"SyntaxError"!=e.name&&(t=t.slice(r)),t}(e):["    (No stack trace)"],{message:r,stack:"SyntaxError"==e.name?t:$(t)}}function z(e,t,r){if("undefined"!=typeof console){var n;if(p.isObject(e)){var o=e.stack;n=t+y(o,e)}else n=t+String(e);"function"==typeof s?s(n,r):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(n)}}function H(e,t,r,n){var o=!1;try{"function"==typeof t&&(o=!0,"rejectionHandled"===e?t(n):t(r,n))}catch(e){c.throwLater(e)}"unhandledRejection"===e?A(e,r,n)||o||z(r,"Unhandled rejection "):A(e,n)}function V(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():p.toString(e);if(/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+function(e){if(e.length<41)return e;return e.substr(0,38)+"..."}(t)+">, no stack trace)"}function X(){return"function"==typeof Q}var W=function(){return!1},J=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Y(e){var t=e.match(J);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function K(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);Q(this,K),t>32&&this.uncycle()}p.inherits(K,Error),n.CapturedTrace=K,K.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],r={},n=0,o=this;void 0!==o;++n)t.push(o),o=o._parent;for(n=(e=this._length=n)-1;n>=0;--n){var i=t[n].stack;void 0===r[i]&&(r[i]=n)}for(n=0;n<e;++n){var s=r[t[n].stack];if(void 0!==s&&s!==n){s>0&&(t[s-1]._parent=void 0,t[s-1]._length=1),t[n]._parent=void 0,t[n]._length=1;var a=n>0?t[n-1]:this;s<e-1?(a._parent=t[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var c=a._length+1,u=n-2;u>=0;--u)t[u]._length=c,c++;return}}}},K.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=q(e),r=t.message,n=[t.stack],o=this;void 0!==o;)n.push($(o.stack.split("\n"))),o=o._parent;!function(e){for(var t=e[0],r=1;r<e.length;++r){for(var n=e[r],o=t.length-1,i=t[o],s=-1,a=n.length-1;a>=0;--a)if(n[a]===i){s=a;break}for(a=s;a>=0;--a){var c=n[a];if(t[o]!==c)break;t.pop(),o--}t=n}}(n),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(n),p.notEnumerableProp(e,"stack",function(e,t){for(var r=0;r<t.length-1;++r)t[r].push("From previous event:"),t[r]=t[r].join("\n");return r<t.length&&(t[r]=t[r].join("\n")),e+"\n"+t.join("\n")}(r,n)),p.notEnumerableProp(e,"__stackCleaned__",!0)}};var Q=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():V(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,g=e,y=t;var r=Error.captureStackTrace;return W=function(e){return d.test(e)},function(e,t){Error.stackTraceLimit+=6,r(e,t),Error.stackTraceLimit-=6}}var n,o=new Error;if("string"==typeof o.stack&&o.stack.split("\n")[0].indexOf("stackDetection@")>=0)return g=/@/,y=t,v=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){n="stack"in e}return"stack"in o||!n||"number"!=typeof Error.stackTraceLimit?(y=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?V(t):t.toString()},null):(g=e,y=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(s=function(e){console.warn(e)},p.isNode&&t.stderr.isTTY?s=function(e,t){var r=t?"[33m":"[31m";console.warn(r+e+"[0m\n")}:p.isNode||"string"!=typeof(new Error).stack||(s=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var Z={warnings:w,longStackTraces:!1,cancellation:!1,monitoring:!1};return E&&r.longStackTraces(),{longStackTraces:function(){return Z.longStackTraces},warnings:function(){return Z.warnings},cancellation:function(){return Z.cancellation},monitoring:function(){return Z.monitoring},propagateFromFunction:function(){return F},boundValueFunction:function(){return M},checkForgottenReturns:function(e,t,r,n,o){if(void 0===e&&null!==t&&x){if(void 0!==o&&o._returnedNonUndefined())return;if(0==(65535&n._bitField))return;r&&(r+=" ");var i="",s="";if(t._trace){for(var a=t._trace.stack.split("\n"),c=$(a),u=c.length-1;u>=0;--u){var p=c[u];if(!f.test(p)){var l=p.match(m);l&&(i="at "+l[1]+":"+l[2]+":"+l[3]+" ");break}}if(c.length>0){var h=c[0];for(u=0;u<a.length;++u)if(a[u]===h){u>0&&(s="\n"+a[u-1]);break}}}var d="a promise was created in a "+r+"handler "+i+"but was not returned from it, see http://goo.gl/rRqMUw"+s;n._warn(d,!0,t)}},setBounds:function(e,t){if(X()){for(var r,n,o=(e.stack||"").split("\n"),i=(t.stack||"").split("\n"),s=-1,a=-1,c=0;c<o.length;++c){if(u=Y(o[c])){r=u.fileName,s=u.line;break}}for(c=0;c<i.length;++c){var u;if(u=Y(i[c])){n=u.fileName,a=u.line;break}}s<0||a<0||!r||!n||r!==n||s>=a||(W=function(e){if(d.test(e))return!0;var t=Y(e);return!!(t&&t.fileName===r&&s<=t.line&&t.line<=a)})}},warn:U,deprecated:function(e,t){var r=e+" is deprecated and will be removed in a future version.";return t&&(r+=" Use "+t+" instead."),U(r)},CapturedTrace:K,fireDomEvent:S,fireGlobalEvent:k}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(e,t,r){"use strict";t.exports=function(e){function t(){return this.value}function r(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(r){return r instanceof e&&r.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:r},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(r,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,r,void 0,{reason:e},void 0);var t=arguments[1],n=function(){throw t};return this.caught(e,n)},e.prototype.catchReturn=function(r){if(arguments.length<=1)return r instanceof e&&r.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:r},void 0);var n=arguments[1];n instanceof e&&n.suppressUnhandledRejections();var o=function(){return n};return this.caught(r,o)}}},{}],11:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e.reduce,n=e.all;function o(){return n(this)}e.prototype.each=function(e){return r(this,e,t,0)._then(o,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return r(this,e,t,t)},e.each=function(e,n){return r(e,n,t,0)._then(o,void 0,void 0,e,void 0)},e.mapSeries=function(e,n){return r(e,n,t,t)}}},{}],12:[function(e,t,r){"use strict";var n,o,i=e("./es5"),s=i.freeze,a=e("./util"),c=a.inherits,u=a.notEnumerableProp;function p(e,t){function r(n){if(!(this instanceof r))return new r(n);u(this,"message","string"==typeof n?n:t),u(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(r,Error),r}var l=p("Warning","warning"),h=p("CancellationError","cancellation error"),d=p("TimeoutError","timeout error"),f=p("AggregateError","aggregate error");try{n=TypeError,o=RangeError}catch(e){n=p("TypeError","type error"),o=p("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<m.length;++g)"function"==typeof Array.prototype[m[g]]&&(f.prototype[m[g]]=Array.prototype[m[g]]);i.defineProperty(f.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),f.prototype.isOperational=!0;var y=0;function v(e){if(!(this instanceof v))return new v(e);u(this,"name","OperationalError"),u(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(u(this,"message",e.message),u(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}f.prototype.toString=function(){var e=Array(4*y+1).join(" "),t="\n"+e+"AggregateError of:\n";y++,e=Array(4*y+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",o=n.split("\n"),i=0;i<o.length;++i)o[i]=e+o[i];t+=(n=o.join("\n"))+"\n"}return y--,t},c(v,Error);var b=Error.__BluebirdErrorTypes__;b||(b=s({CancellationError:h,TimeoutError:d,OperationalError:v,RejectionError:v,AggregateError:f}),i.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:n,RangeError:o,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:l}},{"./es5":13,"./util":36}],13:[function(e,t,r){var n=function(){"use strict";return void 0===this}();if(n)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!(r&&!r.writable&&!r.set)}};else{var o={}.hasOwnProperty,i={}.toString,s={}.constructor.prototype,a=function(e){var t=[];for(var r in e)o.call(e,r)&&t.push(r);return t};t.exports={isArray:function(e){try{return"[object Array]"===i.call(e)}catch(e){return!1}},keys:a,names:a,defineProperty:function(e,t,r){return e[t]=r.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return s}},isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e.map;e.prototype.filter=function(e,n){return r(this,e,n,t)},e.filter=function(e,n,o){return r(e,n,o,t)}}},{}],15:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o=e("./util"),i=t.CancellationError,s=o.errorObj,a=e("./catch_filter")(n);function c(e,t,r){this.promise=e,this.type=t,this.handler=r,this.called=!1,this.cancelPromise=null}function u(e){this.finallyHandler=e}function p(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function l(){return d.call(this,this.promise._target()._settledValue())}function h(e){if(!p(this,e))return s.e=e,s}function d(e){var o=this.promise,a=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?a.call(o._boundValue()):a.call(o._boundValue(),e);if(c===n)return c;if(void 0!==c){o._setReturnedNonUndefined();var d=r(c,o);if(d instanceof t){if(null!=this.cancelPromise){if(d._isCancelled()){var f=new i("late cancellation observer");return o._attachExtraTrace(f),s.e=f,s}d.isPending()&&d._attachCancellationCallback(new u(this))}return d._then(l,h,void 0,this,void 0)}}}return o.isRejected()?(p(this),s.e=e,s):(p(this),e)}return c.prototype.isFinallyHandler=function(){return 0===this.type},u.prototype._resultCancelled=function(){p(this.finallyHandler)},t.prototype._passThrough=function(e,t,r,n){return"function"!=typeof e?this.then():this._then(r,n,void 0,new c(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,d,d)},t.prototype.tap=function(e){return this._passThrough(e,1,d)},t.prototype.tapCatch=function(e){var r=arguments.length;if(1===r)return this._passThrough(e,1,void 0,d);var n,i=new Array(r-1),s=0;for(n=0;n<r-1;++n){var c=arguments[n];if(!o.isObject(c))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+o.classString(c)));i[s++]=c}i.length=s;var u=arguments[n];return this._passThrough(a(i,u,this),1,void 0,d)},c}},{"./catch_filter":7,"./util":36}],16:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,s){var a=e("./errors").TypeError,c=e("./util"),u=c.errorObj,p=c.tryCatch,l=[];function h(e,r,o,i){if(s.cancellation()){var a=new t(n),c=this._finallyPromise=new t(n);this._promise=a.lastly(function(){return c}),a._captureStackTrace(),a._setOnCancel(this)}else{(this._promise=new t(n))._captureStackTrace()}this._stack=i,this._generatorFunction=e,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof o?[o].concat(l):l,this._yieldedPromise=null,this._cancellationPhase=!1}c.inherits(h,i),h.prototype._isResolved=function(){return null===this._promise},h.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},h.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if(void 0!==this._generator.return)this._promise._pushContext(),e=p(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),e=p(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},h.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=p(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},h.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=p(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},h.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},h.prototype.promise=function(){return this._promise},h.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},h.prototype._continue=function(e){var r=this._promise;if(e===u)return this._cleanup(),this._cancellationPhase?r.cancel():r._rejectCallback(e.e,!1);var n=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?r.cancel():r._resolveCallback(n);var i=o(n,this._promise);if(i instanceof t||null!==(i=function(e,r,n){for(var i=0;i<r.length;++i){n._pushContext();var s=p(r[i])(e);if(n._popContext(),s===u){n._pushContext();var a=t.reject(u.e);return n._popContext(),a}var c=o(s,n);if(c instanceof t)return c}return null}(i,this._yieldHandlers,this._promise))){var s=(i=i._target())._bitField;0==(50397184&s)?(this._yieldedPromise=i,i._proxy(this,null)):0!=(33554432&s)?t._async.invoke(this._promiseFulfilled,this,i._value()):0!=(16777216&s)?t._async.invoke(this._promiseRejected,this,i._reason()):this._promiseCancelled()}else this._promiseRejected(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},t.coroutine=function(e,t){if("function"!=typeof e)throw new a("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=Object(t).yieldHandler,n=h,o=(new Error).stack;return function(){var t=e.apply(this,arguments),i=new n(void 0,void 0,r,o),s=i.promise();return i._generator=t,i._promiseFulfilled(void 0),s}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new a("expecting a function but got "+c.classString(e));l.push(e)},t.spawn=function(e){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return r("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new h(e,this),o=n.promise();return n._run(t.spawn),o}}},{"./errors":12,"./util":36}],17:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,s){var a=e("./util");a.canEvaluate,a.tryCatch,a.errorObj;t.join=function(){var e,t=arguments.length-1;t>0&&"function"==typeof arguments[t]&&(e=arguments[t]);var n=[].slice.call(arguments);e&&n.pop();var o=new r(n).promise();return void 0!==e?o.spread(e):o}}},{"./util":36}],18:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,s){var a=t._getDomain,c=e("./util"),u=c.tryCatch,p=c.errorObj,l=t._async;function h(e,t,r,n){this.constructor$(e),this._promise._captureStackTrace();var o=a();this._callback=null===o?t:c.domainBind(o,t),this._preservedValues=n===i?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=[],l.invoke(this._asyncInit,this,void 0)}function d(e,r,o,i){if("function"!=typeof r)return n("expecting a function but got "+c.classString(r));var s=0;if(void 0!==o){if("object"!=typeof o||null===o)return t.reject(new TypeError("options argument must be an object but it is "+c.classString(o)));if("number"!=typeof o.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(o.concurrency)));s=o.concurrency}return new h(e,r,s="number"==typeof s&&isFinite(s)&&s>=1?s:0,i).promise()}c.inherits(h,r),h.prototype._asyncInit=function(){this._init$(void 0,-2)},h.prototype._init=function(){},h.prototype._promiseFulfilled=function(e,r){var n=this._values,i=this.length(),a=this._preservedValues,c=this._limit;if(r<0){if(n[r=-1*r-1]=e,c>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(c>=1&&this._inFlight>=c)return n[r]=e,this._queue.push(r),!1;null!==a&&(a[r]=e);var l=this._promise,h=this._callback,d=l._boundValue();l._pushContext();var f=u(h).call(d,e,r,i),m=l._popContext();if(s.checkForgottenReturns(f,m,null!==a?"Promise.filter":"Promise.map",l),f===p)return this._reject(f.e),!0;var g=o(f,this._promise);if(g instanceof t){var y=(g=g._target())._bitField;if(0==(50397184&y))return c>=1&&this._inFlight++,n[r]=g,g._proxy(this,-1*(r+1)),!1;if(0==(33554432&y))return 0!=(16777216&y)?(this._reject(g._reason()),!0):(this._cancel(),!0);f=g._value()}n[r]=f}return++this._totalResolved>=i&&(null!==a?this._filter(n,a):this._resolve(n),!0)},h.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,r=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var n=e.pop();this._promiseFulfilled(r[n],n)}},h.prototype._filter=function(e,t){for(var r=t.length,n=new Array(r),o=0,i=0;i<r;++i)e[i]&&(n[o++]=t[i]);n.length=o,this._resolve(n)},h.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return d(this,e,t,null)},t.map=function(e,t,r,n){return d(e,t,r,n)}}},{"./util":36}],19:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i){var s=e("./util"),a=s.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+s.classString(e));return function(){var n=new t(r);n._captureStackTrace(),n._pushContext();var o=a(e).apply(this,arguments),s=n._popContext();return i.checkForgottenReturns(o,s,"Promise.method",n),n._resolveFromSyncValue(o),n}},t.attempt=t.try=function(e){if("function"!=typeof e)return o("expecting a function but got "+s.classString(e));var n,c=new t(r);if(c._captureStackTrace(),c._pushContext(),arguments.length>1){i.deprecated("calling Promise.try with more than 1 argument");var u=arguments[1],p=arguments[2];n=s.isArray(u)?a(e).apply(p,u):a(e).call(p,u)}else n=a(e)();var l=c._popContext();return i.checkForgottenReturns(n,l,"Promise.try",c),c._resolveFromSyncValue(n),c},t.prototype._resolveFromSyncValue=function(e){e===s.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,r){"use strict";var n=e("./util"),o=n.maybeWrapAsError,i=e("./errors").OperationalError,s=e("./es5");var a=/^(?:name|message|stack|cause)$/;function c(e){var t;if(function(e){return e instanceof Error&&s.getPrototypeOf(e)===Error.prototype}(e)){(t=new i(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var r=s.keys(e),o=0;o<r.length;++o){var c=r[o];a.test(c)||(t[c]=e[c])}return t}return n.markAsOriginatingFromRejection(e),e}t.exports=function(e,t){return function(r,n){if(null!==e){if(r){var i=c(o(r));e._attachExtraTrace(i),e._reject(i)}else if(t){var s=[].slice.call(arguments,1);e._fulfill(s)}else e._fulfill(n);e=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,r){"use strict";t.exports=function(t){var r=e("./util"),n=t._async,o=r.tryCatch,i=r.errorObj;function s(e,t){if(!r.isArray(e))return a.call(this,e,t);var s=o(t).apply(this._boundValue(),[null].concat(e));s===i&&n.throwLater(s.e)}function a(e,t){var r=this._boundValue(),s=void 0===e?o(t).call(r,null):o(t).call(r,null,e);s===i&&n.throwLater(s.e)}function c(e,t){if(!e){var r=new Error(e+"");r.cause=e,e=r}var s=o(t).call(this._boundValue(),e);s===i&&n.throwLater(s.e)}t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var r=a;void 0!==t&&Object(t).spread&&(r=s),this._then(r,c,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,r,n){"use strict";r.exports=function(){var n=function(){return new f("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},o=function(){return new D.PromiseInspection(this._target())},i=function(e){return D.reject(new f(e))};function s(){}var a,c={},u=e("./util");a=u.isNode?function(){var e=t.domain;return void 0===e&&(e=null),e}:function(){return null},u.notEnumerableProp(D,"_getDomain",a);var p=e("./es5"),l=e("./async"),h=new l;p.defineProperty(D,"_async",{value:h});var d=e("./errors"),f=D.TypeError=d.TypeError;D.RangeError=d.RangeError;var m=D.CancellationError=d.CancellationError;D.TimeoutError=d.TimeoutError,D.OperationalError=d.OperationalError,D.RejectionError=d.OperationalError,D.AggregateError=d.AggregateError;var g=function(){},y={},v={},b=e("./thenables")(D,g),w=e("./promise_array")(D,g,b,i,s),E=e("./context")(D),x=E.create,C=e("./debuggability")(D,E),S=(C.CapturedTrace,e("./finally")(D,b,v)),k=e("./catch_filter")(v),P=e("./nodeback"),_=u.errorObj,A=u.tryCatch;function D(e){e!==g&&function(e,t){if(null==e||e.constructor!==D)throw new f("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new f("expecting a function but got "+u.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function O(e){this.promise._resolveCallback(e)}function T(e){this.promise._rejectCallback(e,!1)}function N(e){var t=new D(g);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return D.prototype.toString=function(){return"[object Promise]"},D.prototype.caught=D.prototype.catch=function(e){var t=arguments.length;if(t>1){var r,n=new Array(t-1),o=0;for(r=0;r<t-1;++r){var s=arguments[r];if(!u.isObject(s))return i("Catch statement predicate: expecting an object but got "+u.classString(s));n[o++]=s}if(n.length=o,"function"!=typeof(e=arguments[r]))throw new f("The last argument to .catch() must be a function, got "+u.toString(e));return this.then(void 0,k(n,e,this))}return this.then(void 0,e)},D.prototype.reflect=function(){return this._then(o,o,void 0,this,void 0)},D.prototype.then=function(e,t){if(C.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var r=".then() only accepts functions but was passed: "+u.classString(e);arguments.length>1&&(r+=", "+u.classString(t)),this._warn(r)}return this._then(e,t,void 0,void 0,void 0)},D.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},D.prototype.spread=function(e){return"function"!=typeof e?i("expecting a function but got "+u.classString(e)):this.all()._then(e,void 0,void 0,y,void 0)},D.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},D.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new w(this).promise()},D.prototype.error=function(e){return this.caught(u.originatesFromRejection,e)},D.getNewLibraryCopy=r.exports,D.is=function(e){return e instanceof D},D.fromNode=D.fromCallback=function(e){var t=new D(g);t._captureStackTrace();var r=arguments.length>1&&!!Object(arguments[1]).multiArgs,n=A(e)(P(t,r));return n===_&&t._rejectCallback(n.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},D.all=function(e){return new w(e).promise()},D.cast=function(e){var t=b(e);return t instanceof D||((t=new D(g))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},D.resolve=D.fulfilled=D.cast,D.reject=D.rejected=function(e){var t=new D(g);return t._captureStackTrace(),t._rejectCallback(e,!0),t},D.setScheduler=function(e){if("function"!=typeof e)throw new f("expecting a function but got "+u.classString(e));return h.setScheduler(e)},D.prototype._then=function(e,t,r,n,o){var i=void 0!==o,s=i?o:new D(g),c=this._target(),p=c._bitField;i||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===n&&0!=(2097152&this._bitField)&&(n=0!=(50397184&p)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var l=a();if(0!=(50397184&p)){var d,f,y=c._settlePromiseCtx;0!=(33554432&p)?(f=c._rejectionHandler0,d=e):0!=(16777216&p)?(f=c._fulfillmentHandler0,d=t,c._unsetRejectionIsUnhandled()):(y=c._settlePromiseLateCancellationObserver,f=new m("late cancellation observer"),c._attachExtraTrace(f),d=t),h.invoke(y,c,{handler:null===l?d:"function"==typeof d&&u.domainBind(l,d),promise:s,receiver:n,value:f})}else c._addCallbacks(e,t,s,n,l);return s},D.prototype._length=function(){return 65535&this._bitField},D.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},D.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},D.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},D.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},D.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},D.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},D.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},D.prototype._isFinal=function(){return(4194304&this._bitField)>0},D.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},D.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},D.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},D.prototype._setAsyncGuaranteed=function(){h.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},D.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==c)return void 0===t&&this._isBound()?this._boundValue():t},D.prototype._promiseAt=function(e){return this[4*e-4+2]},D.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},D.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},D.prototype._boundValue=function(){},D.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,r=e._rejectionHandler0,n=e._promise0,o=e._receiverAt(0);void 0===o&&(o=c),this._addCallbacks(t,r,n,o,null)},D.prototype._migrateCallbackAt=function(e,t){var r=e._fulfillmentHandlerAt(t),n=e._rejectionHandlerAt(t),o=e._promiseAt(t),i=e._receiverAt(t);void 0===i&&(i=c),this._addCallbacks(r,n,o,i,null)},D.prototype._addCallbacks=function(e,t,r,n,o){var i=this._length();if(i>=65531&&(i=0,this._setLength(0)),0===i)this._promise0=r,this._receiver0=n,"function"==typeof e&&(this._fulfillmentHandler0=null===o?e:u.domainBind(o,e)),"function"==typeof t&&(this._rejectionHandler0=null===o?t:u.domainBind(o,t));else{var s=4*i-4;this[s+2]=r,this[s+3]=n,"function"==typeof e&&(this[s+0]=null===o?e:u.domainBind(o,e)),"function"==typeof t&&(this[s+1]=null===o?t:u.domainBind(o,t))}return this._setLength(i+1),i},D.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},D.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(n(),!1);var r=b(e,this);if(!(r instanceof D))return this._fulfill(e);t&&this._propagateFrom(r,2);var o=r._target();if(o!==this){var i=o._bitField;if(0==(50397184&i)){var s=this._length();s>0&&o._migrateCallback0(this);for(var a=1;a<s;++a)o._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(o)}else if(0!=(33554432&i))this._fulfill(o._value());else if(0!=(16777216&i))this._reject(o._reason());else{var c=new m("late cancellation observer");o._attachExtraTrace(c),this._reject(c)}}else this._reject(n())}},D.prototype._rejectCallback=function(e,t,r){var n=u.ensureErrorObject(e),o=n===e;if(!o&&!r&&C.warnings()){var i="a promise was rejected with a non-error: "+u.classString(e);this._warn(i,!0)}this._attachExtraTrace(n,!!t&&o),this._reject(e)},D.prototype._resolveFromExecutor=function(e){if(e!==g){var t=this;this._captureStackTrace(),this._pushContext();var r=!0,n=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,r)});r=!1,this._popContext(),void 0!==n&&t._rejectCallback(n,!0)}},D.prototype._settlePromiseFromHandler=function(e,t,r,n){var o=n._bitField;if(0==(65536&o)){var i;n._pushContext(),t===y?r&&"number"==typeof r.length?i=A(e).apply(this._boundValue(),r):(i=_).e=new f("cannot .spread() a non-array: "+u.classString(r)):i=A(e).call(t,r);var s=n._popContext();0==(65536&(o=n._bitField))&&(i===v?n._reject(r):i===_?n._rejectCallback(i.e,!1):(C.checkForgottenReturns(i,s,"",n,this),n._resolveCallback(i)))}},D.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},D.prototype._followee=function(){return this._rejectionHandler0},D.prototype._setFollowee=function(e){this._rejectionHandler0=e},D.prototype._settlePromise=function(e,t,r,n){var i=e instanceof D,a=this._bitField,c=0!=(134217728&a);0!=(65536&a)?(i&&e._invokeInternalOnCancel(),r instanceof S&&r.isFinallyHandler()?(r.cancelPromise=e,A(t).call(r,n)===_&&e._reject(_.e)):t===o?e._fulfill(o.call(r)):r instanceof s?r._promiseCancelled(e):i||e instanceof w?e._cancel():r.cancel()):"function"==typeof t?i?(c&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,r,n,e)):t.call(r,n,e):r instanceof s?r._isResolved()||(0!=(33554432&a)?r._promiseFulfilled(n,e):r._promiseRejected(n,e)):i&&(c&&e._setAsyncGuaranteed(),0!=(33554432&a)?e._fulfill(n):e._reject(n))},D.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,r=e.promise,n=e.receiver,o=e.value;"function"==typeof t?r instanceof D?this._settlePromiseFromHandler(t,n,o,r):t.call(n,o,r):r instanceof D&&r._reject(o)},D.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},D.prototype._settlePromise0=function(e,t,r){var n=this._promise0,o=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,e,o,t)},D.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},D.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var r=n();return this._attachExtraTrace(r),this._reject(r)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():h.settlePromises(this),this._dereferenceTrace())}},D.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return h.fatalError(e,u.isNode);(65535&t)>0?h.settlePromises(this):this._ensurePossibleRejectionHandled()}},D.prototype._fulfillPromises=function(e,t){for(var r=1;r<e;r++){var n=this._fulfillmentHandlerAt(r),o=this._promiseAt(r),i=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(o,n,i,t)}},D.prototype._rejectPromises=function(e,t){for(var r=1;r<e;r++){var n=this._rejectionHandlerAt(r),o=this._promiseAt(r),i=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(o,n,i,t)}},D.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var r=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,r,e),this._rejectPromises(t,r)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,e),this._fulfillPromises(t,n)}this._setLength(0)}this._clearCancellationData()},D.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&p.defineProperty(D.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),D.defer=D.pending=function(){return C.deprecated("Promise.defer","new Promise"),{promise:new D(g),resolve:O,reject:T}},u.notEnumerableProp(D,"_makeSelfResolutionError",n),e("./method")(D,g,b,i,C),e("./bind")(D,g,b,C),e("./cancel")(D,w,i,C),e("./direct_resolve")(D),e("./synchronous_inspection")(D),e("./join")(D,w,b,g,h,a),D.Promise=D,D.version="3.5.5",e("./call_get.js")(D),e("./generators.js")(D,i,g,b,s,C),e("./map.js")(D,w,i,b,g,C),e("./nodeify.js")(D),e("./promisify.js")(D,g),e("./props.js")(D,w,b,i),e("./race.js")(D,g,b,i),e("./reduce.js")(D,w,i,b,g,C),e("./settle.js")(D,w,C),e("./some.js")(D,w,i),e("./timers.js")(D,g,C),e("./using.js")(D,i,b,x,g,C),e("./any.js")(D),e("./each.js")(D,g),e("./filter.js")(D,g),u.toFastProperties(D),u.toFastProperties(D.prototype),N({a:1}),N({b:2}),N({c:3}),N(1),N(function(){}),N(void 0),N(!1),N(new D(g)),C.setBounds(l.firstLineError,u.lastLineError),D}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i){var s=e("./util");s.isArray;function a(e){var n=this._promise=new t(r);e instanceof t&&n._propagateFrom(e,3),n._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return s.inherits(a,i),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function e(r,i){var a=n(this._values,this._promise);if(a instanceof t){var c=(a=a._target())._bitField;if(this._values=a,0==(50397184&c))return this._promise._setAsyncGuaranteed(),a._then(e,this._reject,void 0,this,i);if(0==(33554432&c))return 0!=(16777216&c)?this._reject(a._reason()):this._cancel();a=a._value()}if(null!==(a=s.asArray(a)))0!==a.length?this._iterate(a):-5===i?this._resolveEmptyArray():this._resolve(function(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}(i));else{var u=o("expecting an array or an iterable object but got "+s.classString(a)).reason();this._promise._rejectCallback(u,!1)}},a.prototype._iterate=function(e){var r=this.getActualLength(e.length);this._length=r,this._values=this.shouldCopyValues()?new Array(r):this._values;for(var o=this._promise,i=!1,s=null,a=0;a<r;++a){var c=n(e[a],o);s=c instanceof t?(c=c._target())._bitField:null,i?null!==s&&c.suppressUnhandledRejections():null!==s?0==(50397184&s)?(c._proxy(this,a),this._values[a]=c):i=0!=(33554432&s)?this._promiseFulfilled(c._value(),a):0!=(16777216&s)?this._promiseRejected(c._reason(),a):this._promiseCancelled(a):i=this._promiseFulfilled(c,a)}i||o._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},a.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var r=0;r<e.length;++r)e[r]instanceof t&&e[r].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(e){return e},a}},{"./util":36}],24:[function(e,t,r){"use strict";t.exports=function(t,r){var n={},o=e("./util"),i=e("./nodeback"),s=o.withAppended,a=o.maybeWrapAsError,c=o.canEvaluate,u=e("./errors").TypeError,p={__isPromisified__:!0},l=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),h=function(e){return o.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function d(e){return!l.test(e)}function f(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function m(e,t,r){var n=o.getDataPropertyOrDefault(e,t+r,p);return!!n&&f(n)}function g(e,t,r,n){for(var i=o.inheritedDataKeys(e),s=[],a=0;a<i.length;++a){var c=i[a],p=e[c],l=n===h||h(c,p,e);"function"!=typeof p||f(p)||m(e,c,t)||!n(c,p,e,l)||s.push(c,p)}return function(e,t,r){for(var n=0;n<e.length;n+=2){var o=e[n];if(r.test(o))for(var i=o.replace(r,""),s=0;s<e.length;s+=2)if(e[s]===i)throw new u("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(s,t,r),s}var y=function(e){return e.replace(/([$])/,"\\$")};var v=c?void 0:function(e,c,u,p,l,h){var d=function(){return this}(),f=e;function m(){var o=c;c===n&&(o=this);var u=new t(r);u._captureStackTrace();var p="string"==typeof f&&this!==d?this[f]:e,l=i(u,h);try{p.apply(o,s(arguments,l))}catch(e){u._rejectCallback(a(e),!0,!0)}return u._isFateSealed()||u._setAsyncGuaranteed(),u}return"string"==typeof f&&(e=p),o.notEnumerableProp(m,"__isPromisified__",!0),m};function b(e,t,r,i,s){for(var a=new RegExp(y(t)+"$"),c=g(e,t,a,r),u=0,p=c.length;u<p;u+=2){var l=c[u],h=c[u+1],d=l+t;if(i===v)e[d]=v(l,n,l,h,t,s);else{var f=i(h,function(){return v(l,n,l,h,t,s)});o.notEnumerableProp(f,"__isPromisified__",!0),e[d]=f}}return o.toFastProperties(e),e}t.promisify=function(e,t){if("function"!=typeof e)throw new u("expecting a function but got "+o.classString(e));if(f(e))return e;var r=function(e,t,r){return v(e,t,void 0,e,null,r)}(e,void 0===(t=Object(t)).context?n:t.context,!!t.multiArgs);return o.copyDescriptors(e,r,d),r},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new u("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var r=!!(t=Object(t)).multiArgs,n=t.suffix;"string"!=typeof n&&(n="Async");var i=t.filter;"function"!=typeof i&&(i=h);var s=t.promisifier;if("function"!=typeof s&&(s=v),!o.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=o.inheritedDataKeys(e),c=0;c<a.length;++c){var p=e[a[c]];"constructor"!==a[c]&&o.isClass(p)&&(b(p.prototype,n,i,s,r),b(p,n,i,s,r))}return b(e,n,i,s,r)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){var i,s=e("./util"),a=s.isObject,c=e("./es5");"function"==typeof Map&&(i=Map);var u=function(){var e=0,t=0;function r(r,n){this[e]=r,this[e+t]=n,e++}return function(n){t=n.size,e=0;var o=new Array(2*n.size);return n.forEach(r,o),o}}();function p(e){var t,r=!1;if(void 0!==i&&e instanceof i)t=u(e),r=!0;else{var n=c.keys(e),o=n.length;t=new Array(2*o);for(var s=0;s<o;++s){var a=n[s];t[s]=e[a],t[s+o]=a}}this.constructor$(t),this._isMap=r,this._init$(void 0,r?-6:-3)}function l(e){var r,i=n(e);return a(i)?(r=i instanceof t?i._then(t.props,void 0,void 0,void 0,void 0):new p(i).promise(),i instanceof t&&r._propagateFrom(i,2),r):o("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}s.inherits(p,r),p.prototype._init=function(){},p.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var r;if(this._isMap)r=function(e){for(var t=new i,r=e.length/2|0,n=0;n<r;++n){var o=e[r+n],s=e[n];t.set(o,s)}return t}(this._values);else{r={};for(var n=this.length(),o=0,s=this.length();o<s;++o)r[this._values[o+n]]=this._values[o]}return this._resolve(r),!0}return!1},p.prototype.shouldCopyValues=function(){return!1},p.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return l(this)},t.props=function(e){return l(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,r){"use strict";function n(e){this._capacity=e,this._length=0,this._front=0}n.prototype._willBeOverCapacity=function(e){return this._capacity<e},n.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},n.prototype.push=function(e,t,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(e),this._pushOne(t),void this._pushOne(r);var o=this._front+n-3;this._checkCapacity(n);var i=this._capacity-1;this[o+0&i]=e,this[o+1&i]=t,this[o+2&i]=r,this._length=n},n.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},n.prototype.length=function(){return this._length},n.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},n.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,r,n,o){for(var i=0;i<o;++i)r[i+n]=e[i+t],e[i+t]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=n},{}],27:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){var i=e("./util"),s=function(e){return e.then(function(t){return a(t,e)})};function a(e,a){var c=n(e);if(c instanceof t)return s(c);if(null===(e=i.asArray(e)))return o("expecting an array or an iterable object but got "+i.classString(e));var u=new t(r);void 0!==a&&u._propagateFrom(a,3);for(var p=u._fulfill,l=u._reject,h=0,d=e.length;h<d;++h){var f=e[h];(void 0!==f||h in e)&&t.cast(f)._then(p,l,void 0,u,null)}return u}t.race=function(e){return a(e,void 0)},t.prototype.race=function(){return a(this,void 0)}}},{"./util":36}],28:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,s){var a=t._getDomain,c=e("./util"),u=c.tryCatch;function p(e,r,n,o){this.constructor$(e);var s=a();this._fn=null===s?r:c.domainBind(s,r),void 0!==n&&(n=t.resolve(n))._attachCancellationCallback(this),this._initialValue=n,this._currentCancellable=null,this._eachValues=o===i?Array(this._length):0===o?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function l(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function h(e,t,r,o){return"function"!=typeof t?n("expecting a function but got "+c.classString(t)):new p(e,t,r,o).promise()}function d(e){this.accum=e,this.array._gotAccum(e);var r=o(this.value,this.array._promise);return r instanceof t?(this.array._currentCancellable=r,r._then(f,void 0,void 0,this,void 0)):f.call(this,r)}function f(e){var r,n=this.array,o=n._promise,i=u(n._fn);o._pushContext(),(r=void 0!==n._eachValues?i.call(o._boundValue(),e,this.index,this.length):i.call(o._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(n._currentCancellable=r);var a=o._popContext();return s.checkForgottenReturns(r,a,void 0!==n._eachValues?"Promise.each":"Promise.reduce",o),r}c.inherits(p,r),p.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==i&&this._eachValues.push(e)},p.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},p.prototype._init=function(){},p.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},p.prototype.shouldCopyValues=function(){return!1},p.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},p.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},p.prototype._iterate=function(e){var r,n;this._values=e;var o=e.length;if(void 0!==this._initialValue?(r=this._initialValue,n=0):(r=t.resolve(e[0]),n=1),this._currentCancellable=r,!r.isRejected())for(;n<o;++n){var i={accum:null,value:e[n],index:n,length:o,array:this};r=r._then(d,void 0,void 0,i,void 0)}void 0!==this._eachValues&&(r=r._then(this._eachComplete,void 0,void 0,this,void 0)),r._then(l,l,void 0,r,this)},t.prototype.reduce=function(e,t){return h(this,e,t,null)},t.reduce=function(e,t,r,n){return h(e,t,r,n)}}},{"./util":36}],29:[function(e,o,i){"use strict";var s,a=e("./util"),c=a.getNativePromise();if(a.isNode&&"undefined"==typeof MutationObserver){var u=r.setImmediate,p=t.nextTick;s=a.isRecentNode?function(e){u.call(r,e)}:function(e){p.call(t,e)}}else if("function"==typeof c&&"function"==typeof c.resolve){var l=c.resolve();s=function(e){l.then(e)}}else s="undefined"!=typeof MutationObserver&&("undefined"==typeof window||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList"in document.documentElement?function(){var e=document.createElement("div"),t={attributes:!0},r=!1,n=document.createElement("div");new MutationObserver(function(){e.classList.toggle("foo"),r=!1}).observe(n,t);return function(o){var i=new MutationObserver(function(){i.disconnect(),o()});i.observe(e,t),r||(r=!0,n.classList.toggle("foo"))}}():void 0!==n?function(e){n(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};o.exports=s},{"./util":36}],30:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o=t.PromiseInspection;function i(e){this.constructor$(e)}e("./util").inherits(i,r),i.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(e,t){var r=new o;return r._bitField=33554432,r._settledValueField=e,this._promiseResolved(t,r)},i.prototype._promiseRejected=function(e,t){var r=new o;return r._bitField=16777216,r._settledValueField=e,this._promiseResolved(t,r)},t.settle=function(e){return n.deprecated(".settle()",".reflect()"),new i(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o=e("./util"),i=e("./errors").RangeError,s=e("./errors").AggregateError,a=o.isArray,c={};function u(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function p(e,t){if((0|t)!==t||t<0)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var r=new u(e),o=r.promise();return r.setHowMany(t),r.init(),o}o.inherits(u,r),u.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=a(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},u.prototype.init=function(){this._initialized=!0,this._init()},u.prototype.setUnwrap=function(){this._unwrap=!0},u.prototype.howMany=function(){return this._howMany},u.prototype.setHowMany=function(e){this._howMany=e},u.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},u.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},u.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},u.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new s,t=this.length();t<this._values.length;++t)this._values[t]!==c&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},u.prototype._fulfilled=function(){return this._totalResolved},u.prototype._rejected=function(){return this._values.length-this.length()},u.prototype._addRejected=function(e){this._values.push(e)},u.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},u.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},u.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new i(t)},u.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return p(e,t)},t.prototype.some=function(e){return p(this,e)},t._SomePromiseArray=u}},{"./errors":12,"./util":36}],32:[function(e,t,r){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var r=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},o=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},i=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return s.call(this._target())},e.prototype.isRejected=function(){return i.call(this._target())},e.prototype.isFulfilled=function(){return o.call(this._target())},e.prototype.isResolved=function(){return a.call(this._target())},e.prototype.value=function(){return r.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),n.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,r){"use strict";t.exports=function(t,r){var n=e("./util"),o=n.errorObj,i=n.isObject;var s={}.hasOwnProperty;return function(e,a){if(i(e)){if(e instanceof t)return e;var c=function(e){try{return function(e){return e.then}(e)}catch(e){return o.e=e,o}}(e);if(c===o){a&&a._pushContext();var u=t.reject(c.e);return a&&a._popContext(),u}if("function"==typeof c){if(function(e){try{return s.call(e,"_promise0")}catch(e){return!1}}(e)){u=new t(r);return e._then(u._fulfill,u._reject,void 0,u,null),u}return function(e,i,s){var a=new t(r),c=a;s&&s._pushContext();a._captureStackTrace(),s&&s._popContext();var u=!0,p=n.tryCatch(i).call(e,function(e){if(!a)return;a._resolveCallback(e),a=null},function(e){if(!a)return;a._rejectCallback(e,u,!0),a=null});u=!1,a&&p===o&&(a._rejectCallback(p.e,!0,!0),a=null);return c}(e,c,a)}}return e}}},{"./util":36}],34:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o=e("./util"),i=t.TimeoutError;function s(e){this.handle=e}s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(e){return c(+this).thenReturn(e)},c=t.delay=function(e,o){var i,c;return void 0!==o?(i=t.resolve(o)._then(a,null,null,e,void 0),n.cancellation()&&o instanceof t&&i._setOnCancel(o)):(i=new t(r),c=setTimeout(function(){i._fulfill()},+e),n.cancellation()&&i._setOnCancel(new s(c)),i._captureStackTrace()),i._setAsyncGuaranteed(),i};t.prototype.delay=function(e){return c(e,this)};function u(e){return clearTimeout(this.handle),e}function p(e){throw clearTimeout(this.handle),e}t.prototype.timeout=function(e,t){var r,a;e=+e;var c=new s(setTimeout(function(){r.isPending()&&function(e,t,r){var n;n="string"!=typeof t?t instanceof Error?t:new i("operation timed out"):new i(t),o.markAsOriginatingFromRejection(n),e._attachExtraTrace(n),e._reject(n),null!=r&&r.cancel()}(r,t,a)},e));return n.cancellation()?(a=this.then(),(r=a._then(u,p,void 0,c,void 0))._setOnCancel(c)):r=this._then(u,p,void 0,c,void 0),r}}},{"./util":36}],35:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,s){var a=e("./util"),c=e("./errors").TypeError,u=e("./util").inherits,p=a.errorObj,l=a.tryCatch,h={};function d(e){setTimeout(function(){throw e},0)}function f(e,r){var o=0,s=e.length,a=new t(i);return function i(){if(o>=s)return a._fulfill();var c=function(e){var t=n(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}(e[o++]);if(c instanceof t&&c._isDisposable()){try{c=n(c._getDisposer().tryDispose(r),e.promise)}catch(e){return d(e)}if(c instanceof t)return c._then(i,d,null,null,null)}i()}(),a}function m(e,t,r){this._data=e,this._promise=t,this._context=r}function g(e,t,r){this.constructor$(e,t,r)}function y(e){return m.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function v(e){this.length=e,this.promise=null,this[e-1]=null}m.prototype.data=function(){return this._data},m.prototype.promise=function(){return this._promise},m.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():h},m.prototype.tryDispose=function(e){var t=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=t!==h?this.doDispose(t,e):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},m.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},u(g,m),g.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},v.prototype._resultCancelled=function(){for(var e=this.length,r=0;r<e;++r){var n=this[r];n instanceof t&&n.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return r("you must pass at least 2 arguments to Promise.using");var o,i=arguments[e-1];if("function"!=typeof i)return r("expecting a function but got "+a.classString(i));var c=!0;2===e&&Array.isArray(arguments[0])?(e=(o=arguments[0]).length,c=!1):(o=arguments,e--);for(var u=new v(e),h=0;h<e;++h){var d=o[h];if(m.isDisposer(d)){var g=d;(d=d.promise())._setDisposable(g)}else{var b=n(d);b instanceof t&&(d=b._then(y,null,null,{resources:u,index:h},void 0))}u[h]=d}var w=new Array(u.length);for(h=0;h<w.length;++h)w[h]=t.resolve(u[h]).reflect();var E=t.all(w).then(function(e){for(var t=0;t<e.length;++t){var r=e[t];if(r.isRejected())return p.e=r.error(),p;if(!r.isFulfilled())return void E.cancel();e[t]=r.value()}x._pushContext(),i=l(i);var n=c?i.apply(void 0,e):i(e),o=x._popContext();return s.checkForgottenReturns(n,o,"Promise.using",x),n}),x=E.lastly(function(){var e=new t.PromiseInspection(E);return f(u,e)});return u.promise=x,x._setOnCancel(u),x},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new g(e,this,o());throw new c}}},{"./errors":12,"./util":36}],36:[function(e,n,o){"use strict";var i=e("./es5"),s="undefined"==typeof navigator,a={e:{}},c,u="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:void 0!==this?this:null;function p(){try{var e=c;return c=null,e.apply(this,arguments)}catch(e){return a.e=e,a}}function l(e){return c=e,p}var h=function(e,t){var r={}.hasOwnProperty;function n(){for(var n in this.constructor=e,this.constructor$=t,t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}return n.prototype=t.prototype,e.prototype=new n,e.prototype};function d(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function f(e){return"function"==typeof e||"object"==typeof e&&null!==e}function m(e){return d(e)?new Error(_(e)):e}function g(e,t){var r,n=e.length,o=new Array(n+1);for(r=0;r<n;++r)o[r]=e[r];return o[r]=t,o}function y(e,t,r){if(!i.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var n=Object.getOwnPropertyDescriptor(e,t);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function v(e,t,r){if(d(e))return e;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return i.defineProperty(e,t,n),e}function b(e){throw e}var w=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1};if(i.isES5){var r=Object.getOwnPropertyNames;return function(e){for(var n=[],o=Object.create(null);null!=e&&!t(e);){var s;try{s=r(e)}catch(e){return n}for(var a=0;a<s.length;++a){var c=s[a];if(!o[c]){o[c]=!0;var u=Object.getOwnPropertyDescriptor(e,c);null!=u&&null==u.get&&null==u.set&&n.push(c)}}e=i.getPrototypeOf(e)}return n}}var n={}.hasOwnProperty;return function(r){if(t(r))return[];var o=[];e:for(var i in r)if(n.call(r,i))o.push(i);else{for(var s=0;s<e.length;++s)if(n.call(e[s],i))continue e;o.push(i)}return o}}(),E=/this\s*\.\s*\S+\s*=/;function x(e){try{if("function"==typeof e){var t=i.names(e.prototype),r=i.isES5&&t.length>1,n=t.length>0&&!(1===t.length&&"constructor"===t[0]),o=E.test(e+"")&&i.names(e).length>0;if(r||n||o)return!0}return!1}catch(e){return!1}}function C(e){function t(){}t.prototype=e;var r=new t;function n(){return typeof r.foo}return n(),n(),e}var S=/^[a-z$_][a-z$_0-9]*$/i;function k(e){return S.test(e)}function P(e,t,r){for(var n=new Array(e),o=0;o<e;++o)n[o]=t+o+r;return n}function _(e){try{return e+""}catch(e){return"[no string representation]"}}function A(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function D(e){try{v(e,"isOperational",!0)}catch(e){}}function O(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)}function T(e){return A(e)&&i.propertyIsWritable(e,"stack")}var N="stack"in new Error?function(e){return T(e)?e:new Error(_(e))}:function(e){if(T(e))return e;try{throw new Error(_(e))}catch(e){return e}};function I(e){return{}.toString.call(e)}function R(e,t,r){for(var n=i.names(e),o=0;o<n.length;++o){var s=n[o];if(r(s))try{i.defineProperty(t,s,i.getDescriptor(e,s))}catch(e){}}}var j=function(e){return i.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var F="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,r=[],n=e[Symbol.iterator]();!(t=n.next()).done;)r.push(t.value);return r};j=function(e){return i.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?F(e):null}}var M=void 0!==t&&"[object process]"===I(t).toLowerCase(),L=void 0!==t&&void 0!==t.env;function G(e){return L?t.env[e]:void 0}function B(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}}function U(e,t){return e.bind(t)}var $={isClass:x,isIdentifier:k,inheritedDataKeys:w,getDataPropertyOrDefault:y,thrower:b,isArray:i.isArray,asArray:j,notEnumerableProp:v,isPrimitive:d,isObject:f,isError:A,canEvaluate:s,errorObj:a,tryCatch:l,inherits:h,withAppended:g,maybeWrapAsError:m,toFastProperties:C,filledRange:P,toString:_,canAttachTrace:T,ensureErrorObject:N,originatesFromRejection:O,markAsOriginatingFromRejection:D,classString:I,copyDescriptors:R,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:M,hasEnvVariables:L,env:G,global:u,getNativePromise:B,domainBind:U},q;$.isRecentNode=$.isNode&&(t.versions&&t.versions.node?q=t.versions.node.split(".").map(Number):t.version&&(q=t.version.split(".").map(Number)),0===q[0]&&q[1]>10||q[0]>0),$.isNode&&$.toFastProperties(t);try{throw new Error}catch(e){$.lastLineError=e}n.exports=$},{"./es5":13}]},{},[4])(4)},e.exports=o(),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,r(2),r(24),r(403).setImmediate)},function(e,t,r){"use strict";var n,o,i,s,a,c,u,p;null!=("undefined"!=typeof window&&null!==window?window.jsyaml:void 0)&&(s=window.jsyaml),s||(s=r(408)),n=r(45),p=r(143),t.validate=function(e){var t,n,o,i;for(t in(i="undefined"!=typeof window&&null!==window?window.tv4:void 0)||(i=r(113)),i.reset(),p)o=p[t],i.addSchema(o.id,o);return(n=i.validateMultiple(e,"testsfile.json")).missing.length&&(n.passed=!1),n},u=function(e){return e.name||(e.name=e.topic),e.cases||(e.cases=[]),e},t.create=function(e){return u(e)},t.loadYAML=c=function(e){var t;return t=[],s.safeLoadAll(e,function(e){return t.push(u(e))}),t},a=function(e,t){var r;if(n.isBrowser())return(r=new XMLHttpRequest).addEventListener("load",function(){var e;return e=c(this.responseText),t(null,e)}),r.addEventListener("error",function(){return t(new Error("Failed to load "+e+": "+this.statusText))}),r.open("get",e,!0),r.send();throw new Error("fbpspec.testsuite: Loading over HTTP not supported on node.js")},o=function(e,t){var n,o,s,a,u;return a=r(11),u=r(15),a.statSync(e).isDirectory()?(s=function(){var t,r,n,i;for(i=[],t=0,r=(n=a.readdirSync(e)).length;t<r;t++)-1!==(o=n[t]).indexOf(".yaml")&&i.push(u.join(e,o));return i}(),i(s)):(n=a.readFileSync(e),c(n))},t.getSuitesSync=i=function(e){var t,r,n,i;for(Array.isArray(e)||(e=[e]),n=[],t=0,r=e.length;t<r;t++)i=e[t],n=n.concat(o(i));return n},t.getSuites=function(e,t){var r;return Array.isArray(e)||(e=[e]),r=function(e,t){return n.startsWith(e,"http://")?a(e,t):t(null,o(e))},n.asyncSeries(e,r,function(e,r){var n,o,i,s,a,c,u;if(e)return t(e);for(u=[],n=0,i=r.length;n<i;n++)for(o=0,s=(c=r[n]).length;o<s;o++)a=c[o],u.push(a);return t(null,u)})}},function(e,t,r){"use strict";var n=r(37);e.exports=new n({explicit:[r(412),r(413),r(414)]})},function(e,t,r){(function(t){var r;r=function(){"use strict";var e="function"==typeof Promise,r="object"==typeof self?self:t,n="undefined"!=typeof Symbol,o="undefined"!=typeof Map,i="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,a="undefined"!=typeof WeakSet,c="undefined"!=typeof DataView,u=n&&void 0!==Symbol.iterator,p=n&&void 0!==Symbol.toStringTag,l=i&&"function"==typeof Set.prototype.entries,h=o&&"function"==typeof Map.prototype.entries,d=l&&Object.getPrototypeOf((new Set).entries()),f=h&&Object.getPrototypeOf((new Map).entries()),m=u&&"function"==typeof Array.prototype[Symbol.iterator],g=m&&Object.getPrototypeOf([][Symbol.iterator]()),y=u&&"function"==typeof String.prototype[Symbol.iterator],v=y&&Object.getPrototypeOf(""[Symbol.iterator]()),b=8,w=-1;return function(t){var n=typeof t;if("object"!==n)return n;if(null===t)return"null";if(t===r)return"global";if(Array.isArray(t)&&(!1===p||!(Symbol.toStringTag in t)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&t===window.location)return"Location";if("object"==typeof window.document&&t===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&t===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&t===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&t instanceof window.HTMLElement){if("BLOCKQUOTE"===t.tagName)return"HTMLQuoteElement";if("TD"===t.tagName)return"HTMLTableDataCellElement";if("TH"===t.tagName)return"HTMLTableHeaderCellElement"}}var u=p&&t[Symbol.toStringTag];if("string"==typeof u)return u;var l=Object.getPrototypeOf(t);return l===RegExp.prototype?"RegExp":l===Date.prototype?"Date":e&&l===Promise.prototype?"Promise":i&&l===Set.prototype?"Set":o&&l===Map.prototype?"Map":a&&l===WeakSet.prototype?"WeakSet":s&&l===WeakMap.prototype?"WeakMap":c&&l===DataView.prototype?"DataView":o&&l===f?"Map Iterator":i&&l===d?"Set Iterator":m&&l===g?"Array Iterator":y&&l===v?"String Iterator":null===l?"Object":Object.prototype.toString.call(t).slice(b,w)}},e.exports=r()}).call(this,r(24))},function(e,t,r){"use strict";var n=r(3),o=(r(1),null),i={};function s(){if(o)for(var e in i){var t=i[e],r=o.indexOf(e);if(r>-1||n("96",e),!u.plugins[r]){t.extractEvents||n("97",e),u.plugins[r]=t;var s=t.eventTypes;for(var c in s)a(s[c],t,c)||n("98",c,e)}}}function a(e,t,r){u.eventNameDispatchConfigs.hasOwnProperty(r)&&n("99",r),u.eventNameDispatchConfigs[r]=e;var o=e.phasedRegistrationNames;if(o){for(var i in o){if(o.hasOwnProperty(i))c(o[i],t,r)}return!0}return!!e.registrationName&&(c(e.registrationName,t,r),!0)}function c(e,t,r){u.registrationNameModules[e]&&n("100",e),u.registrationNameModules[e]=t,u.registrationNameDependencies[e]=t.eventTypes[r].dependencies}var u={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(e){o&&n("101"),o=Array.prototype.slice.call(e),s()},injectEventPluginsByName:function(e){var t=!1;for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];i.hasOwnProperty(r)&&i[r]===o||(i[r]&&n("102",r),i[r]=o,t=!0)}t&&s()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return u.registrationNameModules[t.registrationName]||null;if(void 0!==t.phasedRegistrationNames){var r=t.phasedRegistrationNames;for(var n in r)if(r.hasOwnProperty(n)){var o=u.registrationNameModules[r[n]];if(o)return o}}return null},_resetEventPlugins:function(){for(var e in o=null,i)i.hasOwnProperty(e)&&delete i[e];u.plugins.length=0;var t=u.eventNameDispatchConfigs;for(var r in t)t.hasOwnProperty(r)&&delete t[r];var n=u.registrationNameModules;for(var s in n)n.hasOwnProperty(s)&&delete n[s]}};e.exports=u},function(e,t,r){"use strict";var n,o,i=r(3),s=r(92);r(1),r(4);function a(e,t,r,n){var o=e.type||"unknown-event";e.currentTarget=c.getNodeFromInstance(n),t?s.invokeGuardedCallbackWithCatch(o,r,e):s.invokeGuardedCallback(o,r,e),e.currentTarget=null}var c={isEndish:function(e){return"topMouseUp"===e||"topTouchEnd"===e||"topTouchCancel"===e},isMoveish:function(e){return"topMouseMove"===e||"topTouchMove"===e},isStartish:function(e){return"topMouseDown"===e||"topTouchStart"===e},executeDirectDispatch:function(e){var t=e._dispatchListeners,r=e._dispatchInstances;Array.isArray(t)&&i("103"),e.currentTarget=t?c.getNodeFromInstance(r):null;var n=t?t(e):null;return e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,n},executeDispatchesInOrder:function(e,t){var r=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(r))for(var o=0;o<r.length&&!e.isPropagationStopped();o++)a(e,t,r[o],n[o]);else r&&a(e,t,r,n);e._dispatchListeners=null,e._dispatchInstances=null},executeDispatchesInOrderStopAtTrue:function(e){var t=function(e){var t=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(t)){for(var n=0;n<t.length&&!e.isPropagationStopped();n++)if(t[n](e,r[n]))return r[n]}else if(t&&t(e,r))return r;return null}(e);return e._dispatchInstances=null,e._dispatchListeners=null,t},hasDispatches:function(e){return!!e._dispatchListeners},getInstanceFromNode:function(e){return n.getInstanceFromNode(e)},getNodeFromInstance:function(e){return n.getNodeFromInstance(e)},isAncestor:function(e,t){return o.isAncestor(e,t)},getLowestCommonAncestor:function(e,t){return o.getLowestCommonAncestor(e,t)},getParentInstance:function(e){return o.getParentInstance(e)},traverseTwoPhase:function(e,t,r){return o.traverseTwoPhase(e,t,r)},traverseEnterLeave:function(e,t,r,n,i){return o.traverseEnterLeave(e,t,r,n,i)},injection:{injectComponentTree:function(e){n=e},injectTreeTraversal:function(e){o=e}}};e.exports=c},function(e,t,r){"use strict";var n=null;function o(e,t,r){try{t(r)}catch(e){null===n&&(n=e)}}var i={invokeGuardedCallback:o,invokeGuardedCallbackWithCatch:o,rethrowCaughtError:function(){if(n){var e=n;throw n=null,e}}};e.exports=i},function(e,t,r){"use strict";e.exports=function(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}},function(e,t,r){"use strict";var n,o=r(12);o.canUseDOM&&(n=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""))
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */,e.exports=function(e,t){if(!o.canUseDOM||t&&!("addEventListener"in document))return!1;var r="on"+e,i=r in document;if(!i){var s=document.createElement("div");s.setAttribute(r,"return;"),i="function"==typeof s[r]}return!i&&n&&"wheel"===e&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}},function(e,t,r){"use strict";var n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function o(e){var t=this.nativeEvent;if(t.getModifierState)return t.getModifierState(e);var r=n[e];return!!r&&!!t[r]}e.exports=function(e){return o}},function(e,t,r){"use strict";var n=r(42),o=r(506),i=(r(6),r(17),r(98)),s=r(73),a=r(168);function c(e,t){return Array.isArray(t)&&(t=t[1]),t?t.nextSibling:e.firstChild}var u=i(function(e,t,r){e.insertBefore(t,r)});function p(e,t,r){n.insertTreeBefore(e,t,r)}function l(e,t,r){Array.isArray(t)?function(e,t,r,n){var o=t;for(;;){var i=o.nextSibling;if(u(e,o,n),o===r)break;o=i}}(e,t[0],t[1],r):u(e,t,r)}function h(e,t){if(Array.isArray(t)){var r=t[1];d(e,t=t[0],r),e.removeChild(r)}e.removeChild(t)}function d(e,t,r){for(;;){var n=t.nextSibling;if(n===r)break;e.removeChild(n)}}var f={dangerouslyReplaceNodeWithMarkup:o.dangerouslyReplaceNodeWithMarkup,replaceDelimitedText:function(e,t,r){var n=e.parentNode,o=e.nextSibling;o===t?r&&u(n,document.createTextNode(r),o):r?(a(o,r),d(n,o,t)):d(n,e,t)},processUpdates:function(e,t){for(var r=0;r<t.length;r++){var n=t[r];switch(n.type){case"INSERT_MARKUP":p(e,n.content,c(e,n.afterNode));break;case"MOVE_EXISTING":l(e,n.fromNode,c(e,n.afterNode));break;case"SET_MARKUP":s(e,n.content);break;case"TEXT_CONTENT":a(e,n.content);break;case"REMOVE_NODE":h(e,n.fromNode)}}}};e.exports=f},function(e,t,r){"use strict";e.exports={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"}},function(e,t,r){"use strict";e.exports=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,r,n,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,o)})}:e}},function(e,t,r){"use strict";var n=r(3),o=r(524),i=r(156)(r(38).isValidElement),s=(r(1),r(4),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0});function a(e){null!=e.checkedLink&&null!=e.valueLink&&n("87")}function c(e){a(e),(null!=e.value||null!=e.onChange)&&n("88")}function u(e){a(e),(null!=e.checked||null!=e.onChange)&&n("89")}var p={value:function(e,t,r){return!e[t]||s[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,r){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:i.func},l={};function h(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var d={checkPropTypes:function(e,t,r){for(var n in p){if(p.hasOwnProperty(n))var i=p[n](t,n,e,"prop",null,o);if(i instanceof Error&&!(i.message in l)){l[i.message]=!0;h(r)}}},getValue:function(e){return e.valueLink?(c(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(u(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(c(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(u(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};e.exports=d},function(e,t,r){"use strict";var n=r(3),o=(r(1),!1),i={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){o&&n("104"),i.replaceNodeWithMarkup=e.replaceNodeWithMarkup,i.processChildrenUpdates=e.processChildrenUpdates,o=!0}}};e.exports=i},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty;function o(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}e.exports=function(e,t){if(o(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(!n.call(t,r[s])||!o(e[r[s]],t[r[s]]))return!1;return!0}},function(e,t,r){"use strict";e.exports=function(e,t){var r=null===e||!1===e,n=null===t||!1===t;if(r||n)return r===n;var o=typeof e,i=typeof t;return"string"===o||"number"===o?"string"===i||"number"===i:"object"===i&&e.type===t.type&&e.key===t.key}},function(e,t,r){"use strict";var n={escape:function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})},unescape:function(e){var t={"=0":"=","=2":":"};return(""+("."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1))).replace(/(=0|=2)/g,function(e){return t[e]})}};e.exports=n},function(e,t,r){"use strict";var n=r(3),o=(r(22),r(52)),i=(r(17),r(20));r(1),r(4);function s(e){i.enqueueUpdate(e)}function a(e,t){var r=o.get(e);return r||null}var c={isMounted:function(e){var t=o.get(e);return!!t&&!!t._renderedComponent},enqueueCallback:function(e,t,r){c.validateCallback(t,r);var n=a(e);if(!n)return null;n._pendingCallbacks?n._pendingCallbacks.push(t):n._pendingCallbacks=[t],s(n)},enqueueCallbackInternal:function(e,t){e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],s(e)},enqueueForceUpdate:function(e){var t=a(e);t&&(t._pendingForceUpdate=!0,s(t))},enqueueReplaceState:function(e,t,r){var n=a(e);n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,null!=r&&(c.validateCallback(r,"replaceState"),n._pendingCallbacks?n._pendingCallbacks.push(r):n._pendingCallbacks=[r]),s(n))},enqueueSetState:function(e,t){var r=a(e);r&&((r._pendingStateQueue||(r._pendingStateQueue=[])).push(t),s(r))},enqueueElementInternal:function(e,t,r){e._pendingElement=t,e._context=r,s(e)},validateCallback:function(e,t){e&&"function"!=typeof e&&n("122",t,function(e){var t=typeof e;if("object"!==t)return t;var r=e.constructor&&e.constructor.name||t,n=Object.keys(e);return n.length>0&&n.length<20?r+" (keys: "+n.join(", ")+")":r}(e))}};e.exports=c},function(e,t,r){"use strict";r(5);var n=r(19),o=(r(4),n);e.exports=o},function(e,t,r){"use strict";e.exports=function(e){var t,r=e.keyCode;return"charCode"in e?0===(t=e.charCode)&&13===r&&(t=13):t=r,t>=32||13===t?t:0}},function(e,t,r){var n;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(o,i,s,a){"use strict";var c,u=["","webkit","Moz","MS","ms","o"],p=i.createElement("div"),l="function",h=Math.round,d=Math.abs,f=Date.now;function m(e,t,r){return setTimeout(x(e,r),t)}function g(e,t,r){return!!Array.isArray(e)&&(y(e,r[t],r),!0)}function y(e,t,r){var n;if(e)if(e.forEach)e.forEach(t,r);else if(e.length!==a)for(n=0;n<e.length;)t.call(r,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&t.call(r,e[n],n,e)}function v(e,t,r){var n="DEPRECATED METHOD: "+t+"\n"+r+" AT \n";return function(){var t=new Error("get-stack-trace"),r=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=o.console&&(o.console.warn||o.console.log);return i&&i.call(o.console,n,r),e.apply(this,arguments)}}c="function"!=typeof Object.assign?function(e){if(e===a||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(n!==a&&null!==n)for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])}return t}:Object.assign;var b=v(function(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;)(!r||r&&e[n[o]]===a)&&(e[n[o]]=t[n[o]]),o++;return e},"extend","Use `assign`."),w=v(function(e,t){return b(e,t,!0)},"merge","Use `assign`.");function E(e,t,r){var n,o=t.prototype;(n=e.prototype=Object.create(o)).constructor=e,n._super=o,r&&c(n,r)}function x(e,t){return function(){return e.apply(t,arguments)}}function C(e,t){return typeof e==l?e.apply(t&&t[0]||a,t):e}function S(e,t){return e===a?t:e}function k(e,t,r){y(D(t),function(t){e.addEventListener(t,r,!1)})}function P(e,t,r){y(D(t),function(t){e.removeEventListener(t,r,!1)})}function _(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function A(e,t){return e.indexOf(t)>-1}function D(e){return e.trim().split(/\s+/g)}function O(e,t,r){if(e.indexOf&&!r)return e.indexOf(t);for(var n=0;n<e.length;){if(r&&e[n][r]==t||!r&&e[n]===t)return n;n++}return-1}function T(e){return Array.prototype.slice.call(e,0)}function N(e,t,r){for(var n=[],o=[],i=0;i<e.length;){var s=t?e[i][t]:e[i];O(o,s)<0&&n.push(e[i]),o[i]=s,i++}return r&&(n=t?n.sort(function(e,r){return e[t]>r[t]}):n.sort()),n}function I(e,t){for(var r,n,o=t[0].toUpperCase()+t.slice(1),i=0;i<u.length;){if((n=(r=u[i])?r+o:t)in e)return n;i++}return a}var R=1;function j(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||o}var F="ontouchstart"in o,M=I(o,"PointerEvent")!==a,L=F&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),G=25,B=1,U=2,$=4,q=8,z=1,H=2,V=4,X=8,W=16,J=H|V,Y=X|W,K=J|Y,Q=["x","y"],Z=["clientX","clientY"];function ee(e,t){var r=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){C(e.options.enable,[e])&&r.handler(t)},this.init()}function te(e,t,r){var n=r.pointers.length,o=r.changedPointers.length,i=t&B&&n-o==0,s=t&($|q)&&n-o==0;r.isFirst=!!i,r.isFinal=!!s,i&&(e.session={}),r.eventType=t,function(e,t){var r=e.session,n=t.pointers,o=n.length;r.firstInput||(r.firstInput=re(t));o>1&&!r.firstMultiple?r.firstMultiple=re(t):1===o&&(r.firstMultiple=!1);var i=r.firstInput,s=r.firstMultiple,c=s?s.center:i.center,u=t.center=ne(n);t.timeStamp=f(),t.deltaTime=t.timeStamp-i.timeStamp,t.angle=ae(c,u),t.distance=se(c,u),function(e,t){var r=t.center,n=e.offsetDelta||{},o=e.prevDelta||{},i=e.prevInput||{};t.eventType!==B&&i.eventType!==$||(o=e.prevDelta={x:i.deltaX||0,y:i.deltaY||0},n=e.offsetDelta={x:r.x,y:r.y});t.deltaX=o.x+(r.x-n.x),t.deltaY=o.y+(r.y-n.y)}(r,t),t.offsetDirection=ie(t.deltaX,t.deltaY);var p=oe(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=p.x,t.overallVelocityY=p.y,t.overallVelocity=d(p.x)>d(p.y)?p.x:p.y,t.scale=s?(l=s.pointers,h=n,se(h[0],h[1],Z)/se(l[0],l[1],Z)):1,t.rotation=s?function(e,t){return ae(t[1],t[0],Z)+ae(e[1],e[0],Z)}(s.pointers,n):0,t.maxPointers=r.prevInput?t.pointers.length>r.prevInput.maxPointers?t.pointers.length:r.prevInput.maxPointers:t.pointers.length,function(e,t){var r,n,o,i,s=e.lastInterval||t,c=t.timeStamp-s.timeStamp;if(t.eventType!=q&&(c>G||s.velocity===a)){var u=t.deltaX-s.deltaX,p=t.deltaY-s.deltaY,l=oe(c,u,p);n=l.x,o=l.y,r=d(l.x)>d(l.y)?l.x:l.y,i=ie(u,p),e.lastInterval=t}else r=s.velocity,n=s.velocityX,o=s.velocityY,i=s.direction;t.velocity=r,t.velocityX=n,t.velocityY=o,t.direction=i}(r,t);var l,h;var m=e.element;_(t.srcEvent.target,m)&&(m=t.srcEvent.target);t.target=m}(e,r),e.emit("hammer.input",r),e.recognize(r),e.session.prevInput=r}function re(e){for(var t=[],r=0;r<e.pointers.length;)t[r]={clientX:h(e.pointers[r].clientX),clientY:h(e.pointers[r].clientY)},r++;return{timeStamp:f(),pointers:t,center:ne(t),deltaX:e.deltaX,deltaY:e.deltaY}}function ne(e){var t=e.length;if(1===t)return{x:h(e[0].clientX),y:h(e[0].clientY)};for(var r=0,n=0,o=0;o<t;)r+=e[o].clientX,n+=e[o].clientY,o++;return{x:h(r/t),y:h(n/t)}}function oe(e,t,r){return{x:t/e||0,y:r/e||0}}function ie(e,t){return e===t?z:d(e)>=d(t)?e<0?H:V:t<0?X:W}function se(e,t,r){r||(r=Q);var n=t[r[0]]-e[r[0]],o=t[r[1]]-e[r[1]];return Math.sqrt(n*n+o*o)}function ae(e,t,r){r||(r=Q);var n=t[r[0]]-e[r[0]],o=t[r[1]]-e[r[1]];return 180*Math.atan2(o,n)/Math.PI}ee.prototype={handler:function(){},init:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(j(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&P(this.element,this.evEl,this.domHandler),this.evTarget&&P(this.target,this.evTarget,this.domHandler),this.evWin&&P(j(this.element),this.evWin,this.domHandler)}};var ce={mousedown:B,mousemove:U,mouseup:$},ue="mousedown",pe="mousemove mouseup";function le(){this.evEl=ue,this.evWin=pe,this.pressed=!1,ee.apply(this,arguments)}E(le,ee,{handler:function(e){var t=ce[e.type];t&B&&0===e.button&&(this.pressed=!0),t&U&&1!==e.which&&(t=$),this.pressed&&(t&$&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var he={pointerdown:B,pointermove:U,pointerup:$,pointercancel:q,pointerout:q},de={2:"touch",3:"pen",4:"mouse",5:"kinect"},fe="pointerdown",me="pointermove pointerup pointercancel";function ge(){this.evEl=fe,this.evWin=me,ee.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}o.MSPointerEvent&&!o.PointerEvent&&(fe="MSPointerDown",me="MSPointerMove MSPointerUp MSPointerCancel"),E(ge,ee,{handler:function(e){var t=this.store,r=!1,n=e.type.toLowerCase().replace("ms",""),o=he[n],i=de[e.pointerType]||e.pointerType,s="touch"==i,a=O(t,e.pointerId,"pointerId");o&B&&(0===e.button||s)?a<0&&(t.push(e),a=t.length-1):o&($|q)&&(r=!0),a<0||(t[a]=e,this.callback(this.manager,o,{pointers:t,changedPointers:[e],pointerType:i,srcEvent:e}),r&&t.splice(a,1))}});var ye={touchstart:B,touchmove:U,touchend:$,touchcancel:q},ve="touchstart",be="touchstart touchmove touchend touchcancel";function we(){this.evTarget=ve,this.evWin=be,this.started=!1,ee.apply(this,arguments)}E(we,ee,{handler:function(e){var t=ye[e.type];if(t===B&&(this.started=!0),this.started){var r=function(e,t){var r=T(e.touches),n=T(e.changedTouches);t&($|q)&&(r=N(r.concat(n),"identifier",!0));return[r,n]}.call(this,e,t);t&($|q)&&r[0].length-r[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:"touch",srcEvent:e})}}});var Ee={touchstart:B,touchmove:U,touchend:$,touchcancel:q},xe="touchstart touchmove touchend touchcancel";function Ce(){this.evTarget=xe,this.targetIds={},ee.apply(this,arguments)}E(Ce,ee,{handler:function(e){var t=Ee[e.type],r=function(e,t){var r=T(e.touches),n=this.targetIds;if(t&(B|U)&&1===r.length)return n[r[0].identifier]=!0,[r,r];var o,i,s=T(e.changedTouches),a=[],c=this.target;if(i=r.filter(function(e){return _(e.target,c)}),t===B)for(o=0;o<i.length;)n[i[o].identifier]=!0,o++;o=0;for(;o<s.length;)n[s[o].identifier]&&a.push(s[o]),t&($|q)&&delete n[s[o].identifier],o++;if(!a.length)return;return[N(i.concat(a),"identifier",!0),a]}.call(this,e,t);r&&this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:"touch",srcEvent:e})}});var Se=2500,ke=25;function Pe(){ee.apply(this,arguments);var e=x(this.handler,this);this.touch=new Ce(this.manager,e),this.mouse=new le(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function _e(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var r={x:t.clientX,y:t.clientY};this.lastTouches.push(r);var n=this.lastTouches;setTimeout(function(){var e=n.indexOf(r);e>-1&&n.splice(e,1)},Se)}}E(Pe,ee,{handler:function(e,t,r){var n="touch"==r.pointerType,o="mouse"==r.pointerType;if(!(o&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(n)(function(e,t){e&B?(this.primaryTouch=t.changedPointers[0].identifier,_e.call(this,t)):e&($|q)&&_e.call(this,t)}).call(this,t,r);else if(o&&function(e){for(var t=e.srcEvent.clientX,r=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var o=this.lastTouches[n],i=Math.abs(t-o.x),s=Math.abs(r-o.y);if(i<=ke&&s<=ke)return!0}return!1}.call(this,r))return;this.callback(e,t,r)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ae=I(p.style,"touchAction"),De=Ae!==a,Oe="auto",Te="manipulation",Ne="none",Ie="pan-x",Re="pan-y",je=function(){if(!De)return!1;var e={},t=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){e[r]=!t||o.CSS.supports("touch-action",r)}),e}();function Fe(e,t){this.manager=e,this.set(t)}Fe.prototype={set:function(e){"compute"==e&&(e=this.compute()),De&&this.manager.element.style&&je[e]&&(this.manager.element.style[Ae]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return y(this.manager.recognizers,function(t){C(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(e){if(A(e,Ne))return Ne;var t=A(e,Ie),r=A(e,Re);if(t&&r)return Ne;if(t||r)return t?Ie:Re;if(A(e,Te))return Te;return Oe}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,r=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var n=this.actions,o=A(n,Ne)&&!je[Ne],i=A(n,Re)&&!je[Re],s=A(n,Ie)&&!je[Ie];if(o){var a=1===e.pointers.length,c=e.distance<2,u=e.deltaTime<250;if(a&&c&&u)return}if(!s||!i)return o||i&&r&J||s&&r&Y?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Me=1,Le=2,Ge=4,Be=8,Ue=Be,$e=16;function qe(e){this.options=c({},this.defaults,e||{}),this.id=R++,this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=Me,this.simultaneous={},this.requireFail=[]}function ze(e){return e&$e?"cancel":e&Be?"end":e&Ge?"move":e&Le?"start":""}function He(e){return e==W?"down":e==X?"up":e==H?"left":e==V?"right":""}function Ve(e,t){var r=t.manager;return r?r.get(e):e}function Xe(){qe.apply(this,arguments)}function We(){Xe.apply(this,arguments),this.pX=null,this.pY=null}function Je(){Xe.apply(this,arguments)}function Ye(){qe.apply(this,arguments),this._timer=null,this._input=null}function Ke(){Xe.apply(this,arguments)}function Qe(){Xe.apply(this,arguments)}function Ze(){qe.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function et(e,t){return(t=t||{}).recognizers=S(t.recognizers,et.defaults.preset),new tt(e,t)}qe.prototype={defaults:{},set:function(e){return c(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(g(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Ve(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return g(e,"dropRecognizeWith",this)?this:(e=Ve(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(g(e,"requireFailure",this))return this;var t=this.requireFail;return-1===O(t,e=Ve(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(g(e,"dropRequireFailure",this))return this;e=Ve(e,this);var t=O(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,r=this.state;function n(r){t.manager.emit(r,e)}r<Be&&n(t.options.event+ze(r)),n(t.options.event),e.additionalEvent&&n(e.additionalEvent),r>=Be&&n(t.options.event+ze(r))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|Me)))return!1;e++}return!0},recognize:function(e){var t=c({},e);if(!C(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&(Ue|$e|32)&&(this.state=Me),this.state=this.process(t),this.state&(Le|Ge|Be|$e)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},E(Xe,qe,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,r=e.eventType,n=t&(Le|Ge),o=this.attrTest(e);return n&&(r&q||!o)?t|$e:n||o?r&$?t|Be:t&Le?t|Ge:Le:32}}),E(We,Xe,{defaults:{event:"pan",threshold:10,pointers:1,direction:K},getTouchAction:function(){var e=this.options.direction,t=[];return e&J&&t.push(Re),e&Y&&t.push(Ie),t},directionTest:function(e){var t=this.options,r=!0,n=e.distance,o=e.direction,i=e.deltaX,s=e.deltaY;return o&t.direction||(t.direction&J?(o=0===i?z:i<0?H:V,r=i!=this.pX,n=Math.abs(e.deltaX)):(o=0===s?z:s<0?X:W,r=s!=this.pY,n=Math.abs(e.deltaY))),e.direction=o,r&&n>t.threshold&&o&t.direction},attrTest:function(e){return Xe.prototype.attrTest.call(this,e)&&(this.state&Le||!(this.state&Le)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=He(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),E(Je,Xe,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ne]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&Le)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),E(Ye,qe,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Oe]},process:function(e){var t=this.options,r=e.pointers.length===t.pointers,n=e.distance<t.threshold,o=e.deltaTime>t.time;if(this._input=e,!n||!r||e.eventType&($|q)&&!o)this.reset();else if(e.eventType&B)this.reset(),this._timer=m(function(){this.state=Ue,this.tryEmit()},t.time,this);else if(e.eventType&$)return Ue;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===Ue&&(e&&e.eventType&$?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),E(Ke,Xe,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ne]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&Le)}}),E(Qe,Xe,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:J|Y,pointers:1},getTouchAction:function(){return We.prototype.getTouchAction.call(this)},attrTest:function(e){var t,r=this.options.direction;return r&(J|Y)?t=e.overallVelocity:r&J?t=e.overallVelocityX:r&Y&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&r&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&d(t)>this.options.velocity&&e.eventType&$},emit:function(e){var t=He(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),E(Ze,qe,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Te]},process:function(e){var t=this.options,r=e.pointers.length===t.pointers,n=e.distance<t.threshold,o=e.deltaTime<t.time;if(this.reset(),e.eventType&B&&0===this.count)return this.failTimeout();if(n&&o&&r){if(e.eventType!=$)return this.failTimeout();var i=!this.pTime||e.timeStamp-this.pTime<t.interval,s=!this.pCenter||se(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,s&&i?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=m(function(){this.state=Ue,this.tryEmit()},t.interval,this),Le):Ue}return 32},failTimeout:function(){return this._timer=m(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ue&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),et.VERSION="2.0.7",et.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Ke,{enable:!1}],[Je,{enable:!1},["rotate"]],[Qe,{direction:J}],[We,{direction:J},["swipe"]],[Ze],[Ze,{event:"doubletap",taps:2},["tap"]],[Ye]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function tt(e,t){var r;this.options=c({},et.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((r=this).options.inputClass||(M?ge:L?Ce:F?Pe:le))(r,te),this.touchAction=new Fe(this,this.options.touchAction),rt(this,!0),y(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function rt(e,t){var r,n=e.element;n.style&&(y(e.options.cssProps,function(o,i){r=I(n.style,i),t?(e.oldCssProps[r]=n.style[r],n.style[r]=o):n.style[r]=e.oldCssProps[r]||""}),t||(e.oldCssProps={}))}tt.prototype={set:function(e){return c(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var r;this.touchAction.preventDefaults(e);var n=this.recognizers,o=t.curRecognizer;(!o||o&&o.state&Ue)&&(o=t.curRecognizer=null);for(var i=0;i<n.length;)r=n[i],2===t.stopped||o&&r!=o&&!r.canRecognizeWith(o)?r.reset():r.recognize(e),!o&&r.state&(Le|Ge|Be)&&(o=t.curRecognizer=r),i++}},get:function(e){if(e instanceof qe)return e;for(var t=this.recognizers,r=0;r<t.length;r++)if(t[r].options.event==e)return t[r];return null},add:function(e){if(g(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(g(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,r=O(t,e);-1!==r&&(t.splice(r,1),this.touchAction.update())}return this},on:function(e,t){if(e!==a&&t!==a){var r=this.handlers;return y(D(e),function(e){r[e]=r[e]||[],r[e].push(t)}),this}},off:function(e,t){if(e!==a){var r=this.handlers;return y(D(e),function(e){t?r[e]&&r[e].splice(O(r[e],t),1):delete r[e]}),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var r=i.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=t,t.target.dispatchEvent(r)}(e,t);var r=this.handlers[e]&&this.handlers[e].slice();if(r&&r.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var n=0;n<r.length;)r[n](t),n++}},destroy:function(){this.element&&rt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},c(et,{INPUT_START:B,INPUT_MOVE:U,INPUT_END:$,INPUT_CANCEL:q,STATE_POSSIBLE:Me,STATE_BEGAN:Le,STATE_CHANGED:Ge,STATE_ENDED:Be,STATE_RECOGNIZED:Ue,STATE_CANCELLED:$e,STATE_FAILED:32,DIRECTION_NONE:z,DIRECTION_LEFT:H,DIRECTION_RIGHT:V,DIRECTION_UP:X,DIRECTION_DOWN:W,DIRECTION_HORIZONTAL:J,DIRECTION_VERTICAL:Y,DIRECTION_ALL:K,Manager:tt,Input:ee,TouchAction:Fe,TouchInput:Ce,MouseInput:le,PointerEventInput:ge,TouchMouseInput:Pe,SingleTouchInput:we,Recognizer:qe,AttrRecognizer:Xe,Tap:Ze,Pan:We,Swipe:Qe,Pinch:Je,Rotate:Ke,Press:Ye,on:k,off:P,each:y,merge:w,extend:b,assign:c,inherit:E,bindFn:x,prefixed:I}),(void 0!==o?o:"undefined"!=typeof self?self:{}).Hammer=et,(n=function(){return et}.call(t,r,t,e))===a||(e.exports=n)}(window,document)},function(e,t){var r=function(e,t){return t*Math.cos(2*Math.PI*e)},n=function(e,t){return t*Math.sin(2*Math.PI*e)},o=function(e,t,o){return["M",r(e,o),n(e,o),"A",o,o,0,0,0,r(t,o),n(t,o)].join(" ")},i={n4:o(7/8,5/8,36),s4:o(3/8,1/8,36),e4:o(1/8,-1/8,36),w4:o(5/8,3/8,36),inport:o(-.25,.25,4),outport:o(.25,-.25,4),inportBig:o(-.25,.25,6),outportBig:o(.25,-.25,6)};e.exports=i},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=r(189),p=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=r;return e=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?i(e):t}(this,a(t).call(this,o)),o.catchExceptions&&(window.onerror=function(e){return this.client&&this.send("network","error",e,{href:this.context?this.context.href:this.client.location.href}),console.error(e),!0}.bind(i(e))),o.defaultPermissions.length||(o.defaultPermissions=["protocol:graph","protocol:component","protocol:network","protocol:runtime","component:setsource","component:getsource","network:data","network:control","network:status"]),e.client=null,e}var r,p,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,u),r=t,(p=[{key:"setClient",value:function(e){this.client=e}},{key:"send",value:function(e,r,n,o){if(this.client){var i=n;n instanceof Error&&(i={message:n.message,stack:n.stack});var c=this.context;c||(c=o),this.client.postMessage(JSON.stringify({protocol:e,command:r,payload:i}),c.href),s(a(t.prototype),"send",this).call(this,e,r,n,c)}}},{key:"sendAll",value:function(e,t,r){this.send(e,t,r,this.context)}}])&&o(r.prototype,p),l&&o(r,l),t}();e.exports=p},function(e,t,r){"use strict";(function(t){var n=r(5);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function o(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0}function i(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var s=r(61),a=Object.prototype.hasOwnProperty,c=Array.prototype.slice,u="foo"===function(){}.name;function p(e){return Object.prototype.toString.call(e)}function l(e){return!i(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var h=e.exports=v,d=/\s*function\s+([^\(\s]*)\s*/;function f(e){if(s.isFunction(e)){if(u)return e.name;var t=e.toString().match(d);return t&&t[1]}}function m(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function g(e){if(u||!s.isFunction(e))return s.inspect(e);var t=f(e);return"[Function"+(t?": "+t:"")+"]"}function y(e,t,r,n,o){throw new h.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:o})}function v(e,t){e||y(e,!0,t,"==",h.ok)}function b(e,t,r,n){if(e===t)return!0;if(i(e)&&i(t))return 0===o(e,t);if(s.isDate(e)&&s.isDate(t))return e.getTime()===t.getTime();if(s.isRegExp(e)&&s.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(l(e)&&l(t)&&p(e)===p(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===o(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;var a=(n=n||{actual:[],expected:[]}).actual.indexOf(e);return-1!==a&&a===n.expected.indexOf(t)||(n.actual.push(e),n.expected.push(t),function(e,t,r,n){if(null==e||null==t)return!1;if(s.isPrimitive(e)||s.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=w(e),i=w(t);if(o&&!i||!o&&i)return!1;if(o)return e=c.call(e),t=c.call(t),b(e,t,r);var a,u,p=C(e),l=C(t);if(p.length!==l.length)return!1;for(p.sort(),l.sort(),u=p.length-1;u>=0;u--)if(p[u]!==l[u])return!1;for(u=p.length-1;u>=0;u--)if(a=p[u],!b(e[a],t[a],r,n))return!1;return!0}(e,t,r,n))}return r?e===t:e==t}function w(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function E(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function x(e,t,r,n){var o;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),o=function(e){var t;try{e()}catch(e){t=e}return t}(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!o&&y(o,r,"Missing expected exception"+n);var i="string"==typeof n,a=!e&&o&&!r;if((!e&&s.isError(o)&&i&&E(o,r)||a)&&y(o,r,"Got unwanted exception"+n),e&&o&&r&&!E(o,r)||!e&&o)throw o}h.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return m(g(e.actual),128)+" "+e.operator+" "+m(g(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,o=f(t),i=n.indexOf("\n"+o);if(i>=0){var s=n.indexOf("\n",i+1);n=n.substring(s+1)}this.stack=n}}},s.inherits(h.AssertionError,Error),h.fail=y,h.ok=v,h.equal=function(e,t,r){e!=t&&y(e,t,r,"==",h.equal)},h.notEqual=function(e,t,r){e==t&&y(e,t,r,"!=",h.notEqual)},h.deepEqual=function(e,t,r){b(e,t,!1)||y(e,t,r,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(e,t,r){b(e,t,!0)||y(e,t,r,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(e,t,r){b(e,t,!1)&&y(e,t,r,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function e(t,r,n){b(t,r,!0)&&y(t,r,n,"notDeepStrictEqual",e)},h.strictEqual=function(e,t,r){e!==t&&y(e,t,r,"===",h.strictEqual)},h.notStrictEqual=function(e,t,r){e===t&&y(e,t,r,"!==",h.notStrictEqual)},h.throws=function(e,t,r){x(!0,e,t,r)},h.doesNotThrow=function(e,t,r){x(!1,e,t,r)},h.ifError=function(e){if(e)throw e},h.strict=n(function e(t,r){t||y(t,!0,r,"==",e)},h,{equal:h.strictEqual,deepEqual:h.deepStrictEqual,notEqual:h.notStrictEqual,notDeepEqual:h.notDeepStrictEqual}),h.strict.strict=h.strict;var C=Object.keys||function(e){var t=[];for(var r in e)a.call(e,r)&&t.push(r);return t}}).call(this,r(24))},function(e,t,r){e.exports=f,f.Minimatch=m;var n={sep:"/"};try{n=r(15)}catch(e){}var o=f.GLOBSTAR=m.GLOBSTAR={},i=r(598),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="[^/]",c=a+"*?",u="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",p="(?:(?!(?:\\/|^)\\.).)*?",l="().*{}+?[]^$\\!".split("").reduce(function(e,t){return e[t]=!0,e},{});var h=/\/+/;function d(e,t){e=e||{},t=t||{};var r={};return Object.keys(t).forEach(function(e){r[e]=t[e]}),Object.keys(e).forEach(function(t){r[t]=e[t]}),r}function f(e,t,r){if("string"!=typeof t)throw new TypeError("glob pattern string required");return r||(r={}),!(!r.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new m(t,r).match(e))}function m(e,t){if(!(this instanceof m))return new m(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==n.sep&&(e=e.split(n.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function g(e,t){if(t||(t=this instanceof m?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:i(e)}f.filter=function(e,t){return t=t||{},function(r,n,o){return f(r,e,t)}},f.defaults=function(e){if(!e||!Object.keys(e).length)return f;var t=f,r=function(r,n,o){return t.minimatch(r,n,d(e,o))};return r.Minimatch=function(r,n){return new t.Minimatch(r,d(e,n))},r},m.defaults=function(e){return e&&Object.keys(e).length?f.defaults(e).Minimatch:m},m.prototype.debug=function(){},m.prototype.make=function(){if(this._made)return;var e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error);this.debug(this.pattern,r),r=this.globParts=r.map(function(e){return e.split(h)}),this.debug(this.pattern,r),r=r.map(function(e,t,r){return e.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(e){return-1===e.indexOf(!1)}),this.debug(this.pattern,r),this.set=r},m.prototype.parseNegate=function(){var e=this.pattern,t=!1,r=this.options,n=0;if(r.nonegate)return;for(var o=0,i=e.length;o<i&&"!"===e.charAt(o);o++)t=!t,n++;n&&(this.pattern=e.substr(n));this.negate=t},f.braceExpand=function(e,t){return g(e,t)},m.prototype.braceExpand=g,m.prototype.parse=function(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&"**"===e)return o;if(""===e)return"";var n,i="",u=!!r.nocase,p=!1,h=[],d=[],f=!1,m=-1,g=-1,v="."===e.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",b=this;function w(){if(n){switch(n){case"*":i+=c,u=!0;break;case"?":i+=a,u=!0;break;default:i+="\\"+n}b.debug("clearStateChar %j %j",n,i),n=!1}}for(var E,x=0,C=e.length;x<C&&(E=e.charAt(x));x++)if(this.debug("%s\t%s %s %j",e,x,i,E),p&&l[E])i+="\\"+E,p=!1;else switch(E){case"/":return!1;case"\\":w(),p=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,x,i,E),f){this.debug("  in class"),"!"===E&&x===g+1&&(E="^"),i+=E;continue}b.debug("call clearStateChar %j",n),w(),n=E,r.noext&&w();continue;case"(":if(f){i+="(";continue}if(!n){i+="\\(";continue}h.push({type:n,start:x-1,reStart:i.length,open:s[n].open,close:s[n].close}),i+="!"===n?"(?:(?!(?:":"(?:",this.debug("plType %j %j",n,i),n=!1;continue;case")":if(f||!h.length){i+="\\)";continue}w(),u=!0;var S=h.pop();i+=S.close,"!"===S.type&&d.push(S),S.reEnd=i.length;continue;case"|":if(f||!h.length||p){i+="\\|",p=!1;continue}w(),i+="|";continue;case"[":if(w(),f){i+="\\"+E;continue}f=!0,g=x,m=i.length,i+=E;continue;case"]":if(x===g+1||!f){i+="\\"+E,p=!1;continue}if(f){var k=e.substring(g+1,x);try{RegExp("["+k+"]")}catch(e){var P=this.parse(k,y);i=i.substr(0,m)+"\\["+P[0]+"\\]",u=u||P[1],f=!1;continue}}u=!0,f=!1,i+=E;continue;default:w(),p?p=!1:!l[E]||"^"===E&&f||(i+="\\"),i+=E}f&&(k=e.substr(g+1),P=this.parse(k,y),i=i.substr(0,m)+"\\["+P[0],u=u||P[1]);for(S=h.pop();S;S=h.pop()){var _=i.slice(S.reStart+S.open.length);this.debug("setting tail",i,S),_=_.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(e,t,r){return r||(r="\\"),t+t+r+"|"}),this.debug("tail=%j\n   %s",_,_,S,i);var A="*"===S.type?c:"?"===S.type?a:"\\"+S.type;u=!0,i=i.slice(0,S.reStart)+A+"\\("+_}w(),p&&(i+="\\\\");var D=!1;switch(i.charAt(0)){case".":case"[":case"(":D=!0}for(var O=d.length-1;O>-1;O--){var T=d[O],N=i.slice(0,T.reStart),I=i.slice(T.reStart,T.reEnd-8),R=i.slice(T.reEnd-8,T.reEnd),j=i.slice(T.reEnd);R+=j;var F=N.split("(").length-1,M=j;for(x=0;x<F;x++)M=M.replace(/\)[+*?]?/,"");var L="";""===(j=M)&&t!==y&&(L="$"),i=N+I+j+L+R}""!==i&&u&&(i="(?=.)"+i);D&&(i=v+i);if(t===y)return[i,u];if(!u)return function(e){return e.replace(/\\(.)/g,"$1")}(e);var G=r.nocase?"i":"";try{var B=new RegExp("^"+i+"$",G)}catch(e){return new RegExp("$.")}return B._glob=e,B._src=i,B};var y={};f.makeRe=function(e,t){return new m(e,t||{}).makeRe()},m.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?c:t.dot?u:p,n=t.nocase?"i":"",i=e.map(function(e){return e.map(function(e){return e===o?r:"string"==typeof e?function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(e):e._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch(e){this.regexp=!1}return this.regexp},f.match=function(e,t,r){var n=new m(t,r=r||{});return e=e.filter(function(e){return n.match(e)}),n.options.nonull&&!e.length&&e.push(t),e},m.prototype.match=function(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var r=this.options;"/"!==n.sep&&(e=e.split(n.sep).join("/"));e=e.split(h),this.debug(this.pattern,"split",e);var o,i,s=this.set;for(this.debug(this.pattern,"set",s),i=e.length-1;i>=0&&!(o=e[i]);i--);for(i=0;i<s.length;i++){var a=s[i],c=e;if(r.matchBase&&1===a.length&&(c=[o]),this.matchOne(c,a,t))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate},m.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var i=0,s=0,a=e.length,c=t.length;i<a&&s<c;i++,s++){this.debug("matchOne loop");var u,p=t[s],l=e[i];if(this.debug(t,p,l),!1===p)return!1;if(p===o){this.debug("GLOBSTAR",[t,p,l]);var h=i,d=s+1;if(d===c){for(this.debug("** at the end");i<a;i++)if("."===e[i]||".."===e[i]||!n.dot&&"."===e[i].charAt(0))return!1;return!0}for(;h<a;){var f=e[h];if(this.debug("\nglobstar while",e,h,t,d,f),this.matchOne(e.slice(h),t.slice(d),r))return this.debug("globstar found match!",h,a,f),!0;if("."===f||".."===f||!n.dot&&"."===f.charAt(0)){this.debug("dot detected!",e,h,t,d);break}this.debug("globstar swallow a segment, and continue"),h++}return!(!r||(this.debug("\n>>> no match, partial?",e,h,t,d),h!==a))}if("string"==typeof p?(u=n.nocase?l.toLowerCase()===p.toLowerCase():l===p,this.debug("string match",p,l,u)):(u=l.match(p),this.debug("pattern match",p,l,u)),!u)return!1}if(i===a&&s===c)return!0;if(i===a)return r;if(s===c)return i===a-1&&""===e[i];throw new Error("wtf?")}},function(e,t,r){"use strict";(function(t){function r(e){return"/"===e.charAt(0)}function n(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),r=t[1]||"",n=Boolean(r&&":"!==r.charAt(1));return Boolean(t[2]||n)}e.exports="win32"===t.platform?n:r,e.exports.posix=r,e.exports.win32=n}).call(this,r(2))},function(e,t,r){var n,o,i;o=[],void 0===(i="function"==typeof(n=function(){var e,t,r,n;Object.keys||(Object.keys=(e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=(r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(o){if("object"!=typeof o&&"function"!=typeof o||null===o)throw new TypeError("Object.keys called on non-object");var i=[];for(var s in o)e.call(o,s)&&i.push(s);if(t)for(var a=0;a<n;a++)e.call(o,r[a])&&i.push(r[a]);return i})),Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),r=t.length>>>0;if(0===r)return-1;var n=0;if(arguments.length>1&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=r)return-1;for(var o=n>=0?n:Math.max(r-Math.abs(n),0);o<r;o++)if(o in t&&t[o]===e)return o;return-1}),Object.isFrozen||(Object.isFrozen=function(e){for(var t="tv4_test_frozen_key";e.hasOwnProperty(t);)t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(e){return!0}});var o={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},i={"*":!0};function s(e){return encodeURI(e).replace(/%25[0-9][0-9]/g,function(e){return"%"+e.substring(3)})}function a(e){var t="";o[e.charAt(0)]&&(t=e.charAt(0),e=e.substring(1));var r="",n="",a=!0,c=!1,u=!1;"+"===t?a=!1:"."===t?(n=".",r="."):"/"===t?(n="/",r="/"):"#"===t?(n="#",a=!1):";"===t?(n=";",r=";",c=!0,u=!0):"?"===t?(n="?",r="&",c=!0):"&"===t&&(n="&",r="&",c=!0);for(var p=[],l=e.split(","),h=[],d={},f=0;f<l.length;f++){var m=l[f],g=null;if(-1!==m.indexOf(":")){var y=m.split(":");m=y[0],g=parseInt(y[1],10)}for(var v={};i[m.charAt(m.length-1)];)v[m.charAt(m.length-1)]=!0,m=m.substring(0,m.length-1);var b={truncate:g,name:m,suffices:v};h.push(b),d[m]=b,p.push(m)}var w=function(e){for(var t="",o=0,i=0;i<h.length;i++){var p=h[i],l=e(p.name);if(null==l||Array.isArray(l)&&0===l.length||"object"==typeof l&&0===Object.keys(l).length)o++;else if(t+=i===o?n:r||",",Array.isArray(l)){c&&(t+=p.name+"=");for(var d=0;d<l.length;d++)d>0&&(t+=p.suffices["*"]&&r||",",p.suffices["*"]&&c&&(t+=p.name+"=")),t+=a?encodeURIComponent(l[d]).replace(/!/g,"%21"):s(l[d])}else if("object"==typeof l){c&&!p.suffices["*"]&&(t+=p.name+"=");var f=!0;for(var m in l)f||(t+=p.suffices["*"]&&r||","),f=!1,t+=a?encodeURIComponent(m).replace(/!/g,"%21"):s(m),t+=p.suffices["*"]?"=":",",t+=a?encodeURIComponent(l[m]).replace(/!/g,"%21"):s(l[m])}else c&&(t+=p.name,u&&""===l||(t+="=")),null!=p.truncate&&(l=l.substring(0,p.truncate)),t+=a?encodeURIComponent(l).replace(/!/g,"%21"):s(l)}return t};return w.varNames=p,{prefix:n,substitution:w}}function c(e){if(!(this instanceof c))return new c(e);for(var t=e.split("{"),r=[t.shift()],n=[],o=[],i=[];t.length>0;){var s=t.shift(),u=s.split("}")[0],p=s.substring(u.length+1),l=a(u);o.push(l.substitution),n.push(l.prefix),r.push(p),i=i.concat(l.substitution.varNames)}this.fill=function(e){for(var t=r[0],n=0;n<o.length;n++)t+=(0,o[n])(e),t+=r[n+1];return t},this.varNames=i,this.template=e}c.prototype={toString:function(){return this.template},fillFromObject:function(e){return this.fill(function(t){return e[t]})}};var u=function(e,t,r,n,o){if(this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,n&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),o&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=r||y("en"),"string"==typeof this.errorReporter)throw new Error("debug");if(this.definedKeywords={},e)for(var i in e.definedKeywords)this.definedKeywords[i]=e.definedKeywords[i].slice(0)};function p(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!p(e[r],t[r]))return!1}else{var n;for(n in e)if(void 0===t[n]&&void 0!==e[n])return!1;for(n in t)if(void 0===e[n]&&void 0!==t[n])return!1;for(n in e)if(!p(e[n],t[n]))return!1}return!0}return!1}u.prototype.defineKeyword=function(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)},u.prototype.createError=function(e,t,r,n,o,i,s){var a=new x(e,t,r,n,o);return a.message=this.errorReporter(a,i,s),a},u.prototype.returnError=function(e){return e},u.prototype.collectError=function(e){return e&&this.errors.push(e),null},u.prototype.prefixErrors=function(e,t,r){for(var n=e;n<this.errors.length;n++)this.errors[n]=this.errors[n].prefixWith(t,r);return this},u.prototype.banUnknownProperties=function(e,t){for(var r in this.unknownPropertyPaths){var n=this.createError(v.UNKNOWN_PROPERTY,{path:r},r,"",null,e,t),o=this.handleError(n);if(o)return o}return null},u.prototype.addFormat=function(e,t){if("object"==typeof e){for(var r in e)this.addFormat(r,e[r]);return this}this.formatValidators[e]=t},u.prototype.resolveRefs=function(e,t){if(void 0!==e.$ref){if((t=t||{})[e.$ref])return this.createError(v.CIRCULAR_REFERENCE,{urls:Object.keys(t).join(", ")},"","",null,void 0,e);t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e},u.prototype.getSchema=function(e,t){var r;if(void 0!==this.schemas[e])return r=this.schemas[e],this.resolveRefs(r,t);var n=e,o="";if(-1!==e.indexOf("#")&&(o=e.substring(e.indexOf("#")+1),n=e.substring(0,e.indexOf("#"))),"object"==typeof this.schemas[n]){r=this.schemas[n];var i=decodeURIComponent(o);if(""===i)return this.resolveRefs(r,t);if("/"!==i.charAt(0))return;for(var s=i.split("/").slice(1),a=0;a<s.length;a++){var c=s[a].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===r[c]){r=void 0;break}r=r[c]}if(void 0!==r)return this.resolveRefs(r,t)}void 0===this.missing[n]&&(this.missing.push(n),this.missing[n]=n,this.missingMap[n]=n)},u.prototype.searchSchemas=function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.searchSchemas(e[r],t);else if(e&&"object"==typeof e)for(var n in"string"==typeof e.id&&function(e,t){if(t.substring(0,e.length)===e){var r=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===r.charAt(0)||"?"===r.charAt(0))return!0}return!1}(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e),e)if("enum"!==n)if("object"==typeof e[n])this.searchSchemas(e[n],t);else if("$ref"===n){var o=m(e[n]);o&&void 0===this.schemas[o]&&void 0===this.missingMap[o]&&(this.missingMap[o]=o)}},u.prototype.addSchema=function(e,t){if("string"!=typeof e||void 0===t){if("object"!=typeof e||"string"!=typeof e.id)return;e=(t=e).id}e===m(e)+"#"&&(e=m(e)),this.schemas[e]=t,delete this.missingMap[e],g(t,e),this.searchSchemas(t,e)},u.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},u.prototype.getSchemaUris=function(e){var t=[];for(var r in this.schemas)e&&!e.test(r)||t.push(r);return t},u.prototype.getMissingUris=function(e){var t=[];for(var r in this.missingMap)e&&!e.test(r)||t.push(r);return t},u.prototype.dropSchemas=function(){this.schemas={},this.reset()},u.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},u.prototype.validateAll=function(e,t,r,n,o){var i;if(!(t=this.resolveRefs(t)))return null;if(t instanceof x)return this.errors.push(t),t;var s,a=this.errors.length,c=null,u=null;if(this.checkRecursive&&e&&"object"==typeof e){if(i=!this.scanned.length,e[this.validatedSchemasKey]){var p=e[this.validatedSchemasKey].indexOf(t);if(-1!==p)return this.errors=this.errors.concat(e[this.validationErrorsKey][p]),null}if(Object.isFrozen(e)&&-1!==(s=this.scannedFrozen.indexOf(e))){var l=this.scannedFrozenSchemas[s].indexOf(t);if(-1!==l)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[s][l]),null}if(this.scanned.push(e),Object.isFrozen(e))-1===s&&(s=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),c=this.scannedFrozenSchemas[s].length,this.scannedFrozenSchemas[s][c]=t,this.scannedFrozenValidationErrors[s][c]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(t){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}u=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][u]=t,e[this.validationErrorsKey][u]=[]}}var h=this.errors.length,d=this.validateBasic(e,t,o)||this.validateNumeric(e,t,o)||this.validateString(e,t,o)||this.validateArray(e,t,o)||this.validateObject(e,t,o)||this.validateCombinations(e,t,o)||this.validateHypermedia(e,t,o)||this.validateFormat(e,t,o)||this.validateDefinedKeywords(e,t,o)||null;if(i){for(;this.scanned.length;)delete this.scanned.pop()[this.validatedSchemasKey];this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(d||h!==this.errors.length)for(;r&&r.length||n&&n.length;){var f=r&&r.length?""+r.pop():null,m=n&&n.length?""+n.pop():null;d&&(d=d.prefixWith(f,m)),this.prefixErrors(h,f,m)}return null!==c?this.scannedFrozenValidationErrors[s][c]=this.errors.slice(a):null!==u&&(e[this.validationErrorsKey][u]=this.errors.slice(a)),this.handleError(d)},u.prototype.validateFormat=function(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;var r=this.formatValidators[t.format].call(null,e,t);return"string"==typeof r||"number"==typeof r?this.createError(v.FORMAT_CUSTOM,{message:r},"","/format",null,e,t):r&&"object"==typeof r?this.createError(v.FORMAT_CUSTOM,{message:r.message||"?"},r.dataPath||"",r.schemaPath||"/format",null,e,t):null},u.prototype.validateDefinedKeywords=function(e,t,r){for(var n in this.definedKeywords)if(void 0!==t[n])for(var o=this.definedKeywords[n],i=0;i<o.length;i++){var s=(0,o[i])(e,t[n],t,r);if("string"==typeof s||"number"==typeof s)return this.createError(v.KEYWORD_CUSTOM,{key:n,message:s},"","",null,e,t).prefixWith(null,n);if(s&&"object"==typeof s){var a=s.code;if("string"==typeof a){if(!v[a])throw new Error("Undefined error code (use defineError): "+a);a=v[a]}else"number"!=typeof a&&(a=v.KEYWORD_CUSTOM);var c="object"==typeof s.message?s.message:{key:n,message:s.message||"?"},u=s.schemaPath||"/"+n.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(a,c,s.dataPath||null,u,null,e,t)}}return null},u.prototype.validateBasic=function(e,t,r){var n;return(n=this.validateType(e,t,r))?n.prefixWith(null,"type"):(n=this.validateEnum(e,t,r))?n.prefixWith(null,"type"):null},u.prototype.validateType=function(e,t){if(void 0===t.type)return null;var r=typeof e;null===e?r="null":Array.isArray(e)&&(r="array");var n=t.type;Array.isArray(n)||(n=[n]);for(var o=0;o<n.length;o++){var i=n[o];if(i===r||"integer"===i&&"number"===r&&e%1==0)return null}return this.createError(v.INVALID_TYPE,{type:r,expected:n.join("/")},"","",null,e,t)},u.prototype.validateEnum=function(e,t){if(void 0===t.enum)return null;for(var r=0;r<t.enum.length;r++)if(p(e,t.enum[r]))return null;return this.createError(v.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(e):e},"","",null,e,t)},u.prototype.validateNumeric=function(e,t,r){return this.validateMultipleOf(e,t,r)||this.validateMinMax(e,t,r)||this.validateNaN(e,t,r)||null};var l=Math.pow(2,-51),h=1-l;function d(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function f(e,t){return t=d(t||""),e=d(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+(r=t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname,n=[],r.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?n.pop():n.push(e)}),n.join("").replace(/^\//,"/"===r.charAt(0)?"/":""))+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null;var r,n}function m(e){return e.split("#")[0]}function g(e,t){if(e&&"object"==typeof e)if(void 0===t?t=e.id:"string"==typeof e.id&&(t=f(t,e.id),e.id=t),Array.isArray(e))for(var r=0;r<e.length;r++)g(e[r],t);else for(var n in"string"==typeof e.$ref&&(e.$ref=f(t,e.$ref)),e)"enum"!==n&&g(e[n],t)}function y(e){var t=C[e=e||"en"];return function(e){var r=t[e.code]||E[e.code];if("string"!=typeof r)return"Unknown error code "+e.code+": "+JSON.stringify(e.messageParams);var n=e.params;return r.replace(/\{([^{}]*)\}/g,function(e,t){var r=n[t];return"string"==typeof r||"number"==typeof r?r:e})}}u.prototype.validateMultipleOf=function(e,t){var r=t.multipleOf||t.divisibleBy;if(void 0===r)return null;if("number"==typeof e){var n=e/r%1;if(n>=l&&n<h)return this.createError(v.NUMBER_MULTIPLE_OF,{value:e,multipleOf:r},"","",null,e,t)}return null},u.prototype.validateMinMax=function(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(v.NUMBER_MINIMUM,{value:e,minimum:t.minimum},"","/minimum",null,e,t);if(t.exclusiveMinimum&&e===t.minimum)return this.createError(v.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum},"","/exclusiveMinimum",null,e,t)}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(v.NUMBER_MAXIMUM,{value:e,maximum:t.maximum},"","/maximum",null,e,t);if(t.exclusiveMaximum&&e===t.maximum)return this.createError(v.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum},"","/exclusiveMaximum",null,e,t)}return null},u.prototype.validateNaN=function(e,t){return"number"!=typeof e?null:!0===isNaN(e)||e===1/0||e===-1/0?this.createError(v.NUMBER_NOT_A_NUMBER,{value:e},"","/type",null,e,t):null},u.prototype.validateString=function(e,t,r){return this.validateStringLength(e,t,r)||this.validateStringPattern(e,t,r)||null},u.prototype.validateStringLength=function(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(v.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength},"","/minLength",null,e,t):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(v.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength},"","/maxLength",null,e,t):null},u.prototype.validateStringPattern=function(e,t){if("string"!=typeof e||"string"!=typeof t.pattern&&!(t.pattern instanceof RegExp))return null;var r;if(t.pattern instanceof RegExp)r=t.pattern;else{var n,o="",i=t.pattern.match(/^\/(.+)\/([img]*)$/);i?(n=i[1],o=i[2]):n=t.pattern,r=new RegExp(n,o)}return r.test(e)?null:this.createError(v.STRING_PATTERN,{pattern:t.pattern},"","/pattern",null,e,t)},u.prototype.validateArray=function(e,t,r){return Array.isArray(e)&&(this.validateArrayLength(e,t,r)||this.validateArrayUniqueItems(e,t,r)||this.validateArrayItems(e,t,r))||null},u.prototype.validateArrayLength=function(e,t){var r;return void 0!==t.minItems&&e.length<t.minItems&&(r=this.createError(v.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems},"","/minItems",null,e,t),this.handleError(r))?r:void 0!==t.maxItems&&e.length>t.maxItems&&(r=this.createError(v.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems},"","/maxItems",null,e,t),this.handleError(r))?r:null},u.prototype.validateArrayUniqueItems=function(e,t){if(t.uniqueItems)for(var r=0;r<e.length;r++)for(var n=r+1;n<e.length;n++)if(p(e[r],e[n])){var o=this.createError(v.ARRAY_UNIQUE,{match1:r,match2:n},"","/uniqueItems",null,e,t);if(this.handleError(o))return o}return null},u.prototype.validateArrayItems=function(e,t,r){if(void 0===t.items)return null;var n,o;if(Array.isArray(t.items)){for(o=0;o<e.length;o++)if(o<t.items.length){if(n=this.validateAll(e[o],t.items[o],[o],["items",o],r+"/"+o))return n}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(n=this.createError(v.ARRAY_ADDITIONAL_ITEMS,{},"/"+o,"/additionalItems",null,e,t),this.handleError(n)))return n}else if(n=this.validateAll(e[o],t.additionalItems,[o],["additionalItems"],r+"/"+o))return n}else for(o=0;o<e.length;o++)if(n=this.validateAll(e[o],t.items,[o],["items"],r+"/"+o))return n;return null},u.prototype.validateObject=function(e,t,r){return"object"!=typeof e||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,r)||this.validateObjectRequiredProperties(e,t,r)||this.validateObjectProperties(e,t,r)||this.validateObjectDependencies(e,t,r)||null},u.prototype.validateObjectMinMaxProperties=function(e,t){var r,n=Object.keys(e);return void 0!==t.minProperties&&n.length<t.minProperties&&(r=this.createError(v.OBJECT_PROPERTIES_MINIMUM,{propertyCount:n.length,minimum:t.minProperties},"","/minProperties",null,e,t),this.handleError(r))?r:void 0!==t.maxProperties&&n.length>t.maxProperties&&(r=this.createError(v.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:n.length,maximum:t.maxProperties},"","/maxProperties",null,e,t),this.handleError(r))?r:null},u.prototype.validateObjectRequiredProperties=function(e,t){if(void 0!==t.required)for(var r=0;r<t.required.length;r++){var n=t.required[r];if(void 0===e[n]){var o=this.createError(v.OBJECT_REQUIRED,{key:n},"","/required/"+r,null,e,t);if(this.handleError(o))return o}}return null},u.prototype.validateObjectProperties=function(e,t,r){var n;for(var o in e){var i=r+"/"+o.replace(/~/g,"~0").replace(/\//g,"~1"),s=!1;if(void 0!==t.properties&&void 0!==t.properties[o]&&(s=!0,n=this.validateAll(e[o],t.properties[o],[o],["properties",o],i)))return n;if(void 0!==t.patternProperties)for(var a in t.patternProperties)if(new RegExp(a).test(o)&&(s=!0,n=this.validateAll(e[o],t.patternProperties[a],[o],["patternProperties",a],i)))return n;if(s)this.trackUnknownProperties&&(this.knownPropertyPaths[i]=!0,delete this.unknownPropertyPaths[i]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[i]=!0,delete this.unknownPropertyPaths[i]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(n=this.createError(v.OBJECT_ADDITIONAL_PROPERTIES,{key:o},"","/additionalProperties",null,e,t).prefixWith(o,null),this.handleError(n)))return n}else if(n=this.validateAll(e[o],t.additionalProperties,[o],["additionalProperties"],i))return n}else this.trackUnknownProperties&&!this.knownPropertyPaths[i]&&(this.unknownPropertyPaths[i]=!0)}return null},u.prototype.validateObjectDependencies=function(e,t,r){var n;if(void 0!==t.dependencies)for(var o in t.dependencies)if(void 0!==e[o]){var i=t.dependencies[o];if("string"==typeof i){if(void 0===e[i]&&(n=this.createError(v.OBJECT_DEPENDENCY_KEY,{key:o,missing:i},"","",null,e,t).prefixWith(null,o).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(Array.isArray(i))for(var s=0;s<i.length;s++){var a=i[s];if(void 0===e[a]&&(n=this.createError(v.OBJECT_DEPENDENCY_KEY,{key:o,missing:a},"","/"+s,null,e,t).prefixWith(null,o).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(n=this.validateAll(e,i,[],["dependencies",o],r))return n}return null},u.prototype.validateCombinations=function(e,t,r){return this.validateAllOf(e,t,r)||this.validateAnyOf(e,t,r)||this.validateOneOf(e,t,r)||this.validateNot(e,t,r)||null},u.prototype.validateAllOf=function(e,t,r){if(void 0===t.allOf)return null;for(var n,o=0;o<t.allOf.length;o++){var i=t.allOf[o];if(n=this.validateAll(e,i,[],["allOf",o],r))return n}return null},u.prototype.validateAnyOf=function(e,t,r){if(void 0===t.anyOf)return null;var n,o,i=[],s=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,o=this.knownPropertyPaths);for(var a=!0,c=0;c<t.anyOf.length;c++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var u=t.anyOf[c],p=this.errors.length,l=this.validateAll(e,u,[],["anyOf",c],r);if(null===l&&p===this.errors.length){if(this.errors=this.errors.slice(0,s),this.trackUnknownProperties){for(var h in this.knownPropertyPaths)o[h]=!0,delete n[h];for(var d in this.unknownPropertyPaths)o[d]||(n[d]=!0);a=!1;continue}return null}l&&i.push(l.prefixWith(null,""+c).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=o),a?(i=i.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(v.ANY_OF_MISSING,{},"","/anyOf",i,e,t)):void 0},u.prototype.validateOneOf=function(e,t,r){if(void 0===t.oneOf)return null;var n,o,i=null,s=[],a=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,o=this.knownPropertyPaths);for(var c=0;c<t.oneOf.length;c++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var u=t.oneOf[c],p=this.errors.length,l=this.validateAll(e,u,[],["oneOf",c],r);if(null===l&&p===this.errors.length){if(null!==i)return this.errors=this.errors.slice(0,a),this.createError(v.ONE_OF_MULTIPLE,{index1:i,index2:c},"","/oneOf",null,e,t);if(i=c,this.trackUnknownProperties){for(var h in this.knownPropertyPaths)o[h]=!0,delete n[h];for(var d in this.unknownPropertyPaths)o[d]||(n[d]=!0)}}else l&&s.push(l)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=o),null===i?(s=s.concat(this.errors.slice(a)),this.errors=this.errors.slice(0,a),this.createError(v.ONE_OF_MISSING,{},"","/oneOf",s,e,t)):(this.errors=this.errors.slice(0,a),null)},u.prototype.validateNot=function(e,t,r){if(void 0===t.not)return null;var n,o,i=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,o=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var s=this.validateAll(e,t.not,null,null,r),a=this.errors.slice(i);return this.errors=this.errors.slice(0,i),this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=o),null===s&&0===a.length?this.createError(v.NOT_PASSED,{},"","/not",null,e,t):null},u.prototype.validateHypermedia=function(e,t,r){if(!t.links)return null;for(var n,o=0;o<t.links.length;o++){var i=t.links[o];if("describedby"===i.rel){for(var s=new c(i.href),a=!0,u=0;u<s.varNames.length;u++)if(!(s.varNames[u]in e)){a=!1;break}if(a){var p={$ref:s.fillFromObject(e)};if(n=this.validateAll(e,p,[],["links",o],r))return n}}}};var v={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},b={};for(var w in v)b[v[w]]=w;var E={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};function x(e,t,r,n,o){if(Error.call(this),void 0===e)throw new Error("No error code supplied: "+n);this.message="",this.params=t,this.code=e,this.dataPath=r||"",this.schemaPath=n||"",this.subErrors=o||null;var i=new Error(this.message);if(this.stack=i.stack||i.stacktrace,!this.stack)try{throw i}catch(i){this.stack=i.stack||i.stacktrace}}x.prototype=Object.create(Error.prototype),x.prototype.constructor=x,x.prototype.name="ValidationError",x.prototype.prefixWith=function(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors)for(var r=0;r<this.subErrors.length;r++)this.subErrors[r].prefixWith(e,t);return this};var C={},S=function e(t){var r,n,o=new u,i={setErrorReporter:function(e){return"string"==typeof e?this.language(e):(n=e,!0)},addFormat:function(){o.addFormat.apply(o,arguments)},language:function(e){return e?(C[e]||(e=e.split("-")[0]),!!C[e]&&(r=e,e)):r},addLanguage:function(e,t){var r;for(r in v)t[r]&&!t[v[r]]&&(t[v[r]]=t[r]);var n=e.split("-")[0];if(C[n])for(r in C[e]=Object.create(C[n]),t)void 0===C[n][r]&&(C[n][r]=t[r]),C[e][r]=t[r];else C[e]=t,C[n]=t;return this},freshApi:function(t){var r=e();return t&&r.language(t),r},validate:function(e,t,i,s){var a=y(r),c=new u(o,!1,n?function(e,t,r){return n(e,t,r)||a(e,t,r)}:a,i,s);"string"==typeof t&&(t={$ref:t}),c.addSchema("",t);var p=c.validateAll(e,t,null,null,"");return!p&&s&&(p=c.banUnknownProperties(e,t)),this.error=p,this.missing=c.missing,this.valid=null===p,this.valid},validateResult:function(){var e={toString:function(){return this.valid?"valid":this.error.message}};return this.validate.apply(e,arguments),e},validateMultiple:function(e,t,i,s){var a=y(r),c=new u(o,!0,n?function(e,t,r){return n(e,t,r)||a(e,t,r)}:a,i,s);"string"==typeof t&&(t={$ref:t}),c.addSchema("",t),c.validateAll(e,t,null,null,""),s&&c.banUnknownProperties(e,t);var p={toString:function(){return this.valid?"valid":this.error.message}};return p.errors=c.errors,p.missing=c.missing,p.valid=0===p.errors.length,p},addSchema:function(){return o.addSchema.apply(o,arguments)},getSchema:function(){return o.getSchema.apply(o,arguments)},getSchemaMap:function(){return o.getSchemaMap.apply(o,arguments)},getSchemaUris:function(){return o.getSchemaUris.apply(o,arguments)},getMissingUris:function(){return o.getMissingUris.apply(o,arguments)},dropSchemas:function(){o.dropSchemas.apply(o,arguments)},defineKeyword:function(){o.defineKeyword.apply(o,arguments)},defineError:function(e,t,r){if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof t||t%1!=0||t<1e4)throw new Error("Code number must be an integer > 10000");if(void 0!==v[e])throw new Error("Error already defined: "+e+" as "+v[e]);if(void 0!==b[t])throw new Error("Error code already used: "+b[t]+" as "+t);for(var n in v[e]=t,b[t]=e,E[e]=E[t]=r,C){var o=C[n];o[e]&&(o[t]=o[t]||o[e])}},reset:function(){o.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:g,resolveUrl:f,getDocumentUri:m,errorCodes:v};return i.language(t||"en"),i}();return S.addLanguage("en-gb",E),S.tv4=S,S})?n.apply(t,o):n)||(e.exports=i)},function(e,t,r){(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c,u,p,l,h,d,f;h=r(55),r(33);var m=r(8);c=m.EventEmitter,d=r(56),l=r(79),f=r(133),u=r(25),p=function(){var t=function(t){function r(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(n=i(this,s(r).call(this))).options=o,n.processes={},n.connections=[],n.initials=[],n.nextInitials=[],n.defaults=[],n.graph=t,n.started=!1,n.stopped=!0,n.debug=!0,n.eventBuffer=[],d.isBrowser()?n.baseDir=t.baseDir||"/":n.baseDir=t.baseDir||e.cwd(),n.startupDate=null,t.componentLoader?n.loader=t.componentLoader:n.loader=new l.ComponentLoader(n.baseDir,n.options),n}var n,p,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(r,c),n=r,(p=[{key:"uptime",value:function(){return this.startupDate?new Date-this.startupDate:0}},{key:"getActiveProcesses",value:function(){var e,t,r,n;if(e=[],!this.started)return e;for(t in n=this.processes)(r=n[t]).component.load>0&&e.push(t),r.component.__openConnections>0&&e.push(t);return e}},{key:"bufferedEmit",value:function(e,t){var r,n,o,i;if("icon"!==e&&"error"!==e&&"process-error"!==e&&"end"!==e)if(this.isStarted()||"end"===e){if(this.emit(e,t),"start"===e){for(n=0,o=(i=this.eventBuffer).length;n<o;n++)r=i[n],this.emit(r.type,r.payload);this.eventBuffer=[]}if("ip"===e)switch(t.type){case"openBracket":this.bufferedEmit("begingroup",t);break;case"closeBracket":this.bufferedEmit("endgroup",t);break;case"data":this.bufferedEmit("data",t)}}else this.eventBuffer.push({type:e,payload:t});else this.emit(e,t)}},{key:"load",value:function(e,t,r){return this.loader.load(e,r,t)}},{key:"addNode",value:function(e,t){var r,n=this;if(!this.processes[e.id])return r={id:e.id},e.component?this.load(e.component,e.metadata,function(o,i){var s,a,c,u;if(o)return t(o);for(a in i.nodeId=e.id,r.component=i,r.componentName=e.component,s=r.component.inPorts.ports,c=r.component.outPorts.ports,s)(u=s[a]).node=e.id,u.nodeInstance=i,u.name=a;for(a in c)(u=c[a]).node=e.id,u.nodeInstance=i,u.name=a;return i.isSubgraph()&&n.subscribeSubgraph(r),n.subscribeNode(r),n.processes[r.id]=r,t(null,r)}):(this.processes[r.id]=r,void t(null,r));t(null,this.processes[e.id])}},{key:"removeNode",value:function(e,t){var r,n=this;return(r=this.getNode(e.id))?r.component.shutdown(function(r){return r?t(r):(delete n.processes[e.id],t(null))}):t(new Error("Node ".concat(e.id," not found")))}},{key:"renameNode",value:function(e,t,r){var n,o,i,s,a;if(!(a=this.getNode(e)))return r(new Error("Process ".concat(e," not found")));for(o in a.id=t,n=a.component.inPorts.ports,i=a.component.outPorts.ports,n)(s=n[o])&&(s.node=t);for(o in i)(s=i[o])&&(s.node=t);return this.processes[t]=a,delete this.processes[e],r(null)}},{key:"getNode",value:function(e){return this.processes[e]}},{key:"connect",value:function(){var e,t,r,n,o,i,s=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return e=0,n=function(t,r){return function(n){return s["add".concat(n)](r,function(r){return r?a(r):++e%100!=0?t(n):void setTimeout(function(){return t(n)},0)})}},i=function(){return s.subscribeGraph(),a()},o=f.reduceRight(this.graph.nodes,n,i),r=f.reduceRight(this.graph.initializers,n,function(){return o("Defaults")}),t=f.reduceRight(this.graph.edges,n,function(){return r("Initial")}),f.reduceRight(this.graph.nodes,n,function(){return t("Edge")})("Node")}},{key:"connectPort",value:function(e,t,r,n,o,i){if(o)return e.to={process:t,port:r,index:n},t.component.inPorts&&t.component.inPorts[r]?t.component.inPorts[r].isAddressable()?(t.component.inPorts[r].attach(e,n),void i()):(t.component.inPorts[r].attach(e),void i()):void i(new Error("No inport '".concat(r,"' defined in process ").concat(t.id," (").concat(e.getId(),")")));if(e.from={process:t,port:r,index:n},t.component.outPorts&&t.component.outPorts[r]){if(t.component.outPorts[r].isAddressable())return t.component.outPorts[r].attach(e,n),void i();t.component.outPorts[r].attach(e),i()}else i(new Error("No outport '".concat(r,"' defined in process ").concat(t.id," (").concat(e.getId(),")")))}},{key:"subscribeGraph",value:function(){var e,t,r,n,o=this;return e=[],r=!1,n=function(t,r){return e.push({op:t,details:r})},t=function(n){var i,s;if(n){if(0===o.listeners("process-error").length)throw n;o.bufferedEmit("process-error",n)}if(e.length)switch(r=!0,s=e.shift(),i=t,s.op){case"renameNode":return o.renameNode(s.details.from,s.details.to,i);default:return o[s.op](s.details,i)}else r=!1},this.graph.on("addNode",function(e){if(n("addNode",e),!r)return t()}),this.graph.on("removeNode",function(e){if(n("removeNode",e),!r)return t()}),this.graph.on("renameNode",function(e,o){if(n("renameNode",{from:e,to:o}),!r)return t()}),this.graph.on("addEdge",function(e){if(n("addEdge",e),!r)return t()}),this.graph.on("removeEdge",function(e){if(n("removeEdge",e),!r)return t()}),this.graph.on("addInitial",function(e){if(n("addInitial",e),!r)return t()}),this.graph.on("removeInitial",function(e){if(n("removeInitial",e),!r)return t()})}},{key:"subscribeSubgraph",value:function(e){var t,r=this;if(e.component.isReady()){if(e.component.network)return e.component.network.setDebug(this.debug),t=function(t,n){if("process-error"===t&&0===r.listeners("process-error").length){if(n.id&&n.metadata&&n.error)throw n.error;throw n}return n||(n={}),n.subgraph?(n.subgraph.unshift||(n.subgraph=[n.subgraph]),n.subgraph.unshift(e.id)):n.subgraph=[e.id],r.bufferedEmit(t,n)},e.component.network.on("ip",function(e){return t("ip",e)}),e.component.network.on("process-error",function(e){return t("process-error",e)})}else e.component.once("ready",function(){return r.subscribeSubgraph(e)})}},{key:"subscribeSocket",value:function(e,t){var r,n=this;if(e.on("ip",function(t){return n.bufferedEmit("ip",{id:e.getId(),type:t.type,socket:e,data:t.data,metadata:e.metadata})}),e.on("error",function(e){if(0===n.listeners("process-error").length){if(e.id&&e.metadata&&e.error)throw e.error;throw e}return n.bufferedEmit("process-error",e)}),null!=t&&null!=(r=t.component)?r.isLegacy():void 0)return e.on("connect",function(){return t.component.__openConnections||(t.component.__openConnections=0),t.component.__openConnections++}),e.on("disconnect",function(){if(t.component.__openConnections--,t.component.__openConnections<0&&(t.component.__openConnections=0),0===t.component.__openConnections)return n.checkIfFinished()})}},{key:"subscribeNode",value:function(e){var t=this;if(e.component.on("activate",function(e){if(t.debouncedEnd)return t.abortDebounce=!0}),e.component.on("deactivate",function(e){if(!(e>0))return t.checkIfFinished()}),e.component.getIcon)return e.component.on("icon",function(){return t.bufferedEmit("icon",{id:e.id,icon:e.component.getIcon()})})}},{key:"addEdge",value:function(e,t){var r,n,o,i=this;if((n=h.createSocket(e.metadata)).setDebug(this.debug),!(r=this.getNode(e.from.node)))return t(new Error("No process defined for outbound node ".concat(e.from.node)));if(!r.component)return t(new Error("No component defined for outbound node ".concat(e.from.node)));if(r.component.isReady()){if(!(o=this.getNode(e.to.node)))return t(new Error("No process defined for inbound node ".concat(e.to.node)));if(!o.component)return t(new Error("No component defined for inbound node ".concat(e.to.node)));if(o.component.isReady())return this.subscribeSocket(n,r),this.connectPort(n,o,e.to.port,e.to.index,!0,function(o){return o?t(o):i.connectPort(n,r,e.from.port,e.from.index,!1,function(e){return e?t(e):(i.connections.push(n),t())})});o.component.once("ready",function(){return i.addEdge(e,t)})}else r.component.once("ready",function(){return i.addEdge(e,t)})}},{key:"removeEdge",value:function(e,t){var r,n,o,i,s;for(s=[],n=0,o=(i=this.connections).length;n<o;n++)(r=i[n])&&e.to.node===r.to.process.id&&e.to.port===r.to.port&&(r.to.process.component.inPorts[r.to.port].detach(r),e.from.node&&r.from&&e.from.node===r.from.process.id&&e.from.port===r.from.port&&r.from.process.component.outPorts[r.from.port].detach(r),this.connections.splice(this.connections.indexOf(r),1),s.push(t()));return s}},{key:"addDefaults",value:function(e,t){var r,n,o,i,s,a=this;if(!(o=this.getNode(e.id)))return t(new Error("Process ".concat(e.id," not defined")));if(!o.component)return t(new Error("No component defined for node ".concat(e.id)));if(!o.component.isReady())return o.component.setMaxListeners(0),void o.component.once("ready",function(){return a.addDefaults(o,t)});for(r in i=o.component.inPorts.ports)(n=i[r]).hasDefault()&&!n.isAttached()&&((s=h.createSocket()).setDebug(this.debug),this.subscribeSocket(s),this.connectPort(s,o,r,void 0,!0,function(){}),this.connections.push(s),this.defaults.push(s));return t()}},{key:"addInitial",value:function(e,t){var r,n,o=this;return(r=h.createSocket(e.metadata)).setDebug(this.debug),this.subscribeSocket(r),(n=this.getNode(e.to.node))?n.component?n.component.isReady()||n.component.inPorts[e.to.port]?this.connectPort(r,n,e.to.port,e.to.index,!0,function(n){var i;return n?t(n):(o.connections.push(r),i={socket:r,data:e.from.data},o.initials.push(i),o.nextInitials.push(i),o.isRunning()?o.sendInitials():o.isStopped()||(o.setStarted(!0),o.sendInitials()),t())}):(n.component.setMaxListeners(0),void n.component.once("ready",function(){return o.addInitial(e,t)})):t(new Error("No component defined for inbound node ".concat(e.to.node))):t(new Error("No process defined for inbound node ".concat(e.to.node)))}},{key:"removeInitial",value:function(e,t){var r,n,o,i,s,a,c,u,p,l,h;for(n=0,a=(p=this.connections).length;n<a;n++)if((r=p[n])&&e.to.node===r.to.process.id&&e.to.port===r.to.port){for(r.to.process.component.inPorts[r.to.port].detach(r),this.connections.splice(this.connections.indexOf(r),1),i=0,c=(l=this.initials).length;i<c;i++)(o=l[i])&&o.socket===r&&this.initials.splice(this.initials.indexOf(o),1);for(s=0,u=(h=this.nextInitials).length;s<u;s++)(o=h[s])&&o.socket===r&&this.nextInitials.splice(this.nextInitials.indexOf(o),1)}return t()}},{key:"sendInitial",value:function(e){return e.socket.post(new u("data",e.data,{initial:!0}))}},{key:"sendInitials",value:function(t){var r,n=this;return t||(t=function(){}),r=function(){var e,r,o,i;for(e=0,o=(i=n.initials).length;e<o;e++)r=i[e],n.sendInitial(r);return n.initials=[],t()},void 0!==e&&e.execPath&&-1!==e.execPath.indexOf("node")?e.nextTick(r):setTimeout(r,0)}},{key:"isStarted",value:function(){return this.started}},{key:"isStopped",value:function(){return this.stopped}},{key:"isRunning",value:function(){return this.getActiveProcesses().length>0}},{key:"startComponents",value:function(e){var t,r,n,o,i,s,a;if(e||(e=function(){}),t=0,n=this.processes?Object.keys(this.processes).length:0,o=function(r){return r?e(r):++t===n?e():void 0},!this.processes||!Object.keys(this.processes).length)return e();for(r in a=[],s=this.processes)(i=s[r]).component.isStarted()?o():0!==i.component.start.length?a.push(i.component.start(o)):(d.deprecated("component.start method without callback is deprecated"),i.component.start(),o());return a}},{key:"sendDefaults",value:function(e){var t,r,n,o;if(e||(e=function(){}),!this.defaults.length)return e();for(t=0,r=(n=this.defaults).length;t<r;t++)1===(o=n[t]).to.process.component.inPorts[o.to.port].sockets.length&&(o.connect(),o.send(),o.disconnect());return e()}},{key:"start",value:function(e){var t=this;e||(d.deprecated("Calling network.start() without callback is deprecated"),e=function(){}),this.debouncedEnd&&(this.abortDebounce=!0),this.started?this.stop(function(r){return r?e(r):t.start(e)}):(this.initials=this.nextInitials.slice(0),this.eventBuffer=[],this.startComponents(function(r){if(r)return e(r);t.sendInitials(function(r){if(r)return e(r);t.sendDefaults(function(r){if(r)return e(r);t.setStarted(!0),e(null)})})}))}},{key:"stop",value:function(e){var t,r,n,o,i,s,a,c,u,p,l,h=this;if(e||(d.deprecated("Calling network.stop() without callback is deprecated"),e=function(){}),this.debouncedEnd&&(this.abortDebounce=!0),!this.started)return this.stopped=!0,e(null);for(n=0,i=(u=this.connections).length;n<i;n++)(t=u[n]).isConnected()&&t.disconnect();if(r=0,s=this.processes?Object.keys(this.processes).length:0,a=function(t){return t?e(t):++r===s?(h.setStarted(!1),h.stopped=!0,e()):void 0},!this.processes||!Object.keys(this.processes).length)return this.setStarted(!1),this.stopped=!0,e();for(o in l=[],p=this.processes)(c=p[o]).component.isStarted()?0!==c.component.shutdown.length?l.push(c.component.shutdown(a)):(d.deprecated("component.shutdown method without callback is deprecated"),c.component.shutdown(),a()):a();return l}},{key:"setStarted",value:function(e){if(this.started!==e)return e?(this.startupDate||(this.startupDate=new Date),this.started=!0,this.stopped=!1,this.bufferedEmit("start",{start:this.startupDate})):(this.started=!1,void this.bufferedEmit("end",{start:this.startupDate,end:new Date,uptime:this.uptime()}))}},{key:"checkIfFinished",value:function(){var e=this;if(!this.isRunning())return delete this.abortDebounce,this.debouncedEnd||(this.debouncedEnd=f.debounce(function(){if(!e.abortDebounce&&!e.isRunning())return e.setStarted(!1)},50)),this.debouncedEnd()}},{key:"getDebug",value:function(){return this.debug}},{key:"setDebug",value:function(e){var t,r,n,o,i,s,a;if(e!==this.debug){for(this.debug=e,t=0,n=(i=this.connections).length;t<n;t++)i[t].setDebug(e);for(o in a=[],s=this.processes)(r=s[o].component).isSubgraph()?a.push(r.network.setDebug(e)):a.push(void 0);return a}}}])&&o(n.prototype,p),m&&o(n,m),r}();return t.prototype.processes={},t.prototype.connections=[],t.prototype.initials=[],t.prototype.defaults=[],t.prototype.graph=null,t.prototype.startupDate=null,t}.call(this),t.Network=p}).call(this,r(2))},function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,o=r;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},function(e,t,r){var n=r(115),o=r(116);e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[i+a]=s[a];return t||o(s)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,r){r(81)("fbp-protocol-client");t.transports={websocket:r(295),iframe:r(299),opener:r(300),webrtc:r(301),base:r(43)},t.connection=r(302),t.getTransport=function(e){return t.transports[e]}},function(e,t,r){"use strict";(function(t){var n,o,i,s,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();s=function(){return!(void 0!==t&&t.execPath&&-1!==t.execPath.indexOf("node"))},n=r(8).EventEmitter,s()||(i=r(81)("fbp-protocol-client:platform"),o=function(e){function t(e,n){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o=r(296).client,s.client=new o,s.connection=null,s.client.on("connectFailed",function(e){return s.emit("error",e)}),s.client.on("connect",function(e){return s.connection&&i("WARNING: multiple connections for one NodeWebSocketClient"),s.connection=e,e.on("error",function(e){return s.connection=null,s.emit("error",e)}),e.on("close",function(){return s.connection=null,s.emit("close")}),e.on("message",function(e){return e.data=e.utf8Data,s.emit("message",e)}),s.emit("open")}),s.client.connect(e,n),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n),a(t,[{key:"addEventListener",value:function(e,t,r,n){return this.on(e,t)}},{key:"close",value:function(){if(this.connection)return this.connection.close(),this.connection=null}},{key:"send",value:function(e){return this.connection.sendUTF(e)}}]),t}()),e.exports={isBrowser:s,EventEmitter:n,WebSocket:s()?window.WebSocket:o}}).call(this,r(2))},function(e,t,r){"use strict";var n=r(306),o=r(82),i=r(309),s=r(123),a=r(124),c=r(310),u=r(311),p=r(330),l=r(331),h=r(35),d=r(126);e.exports=b,b.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var n=this._addSchema(e);r=n.validate||this._compile(n)}var o=r(t);return!0===r.$async?"*"==this._opts.async?d(o):o:(this.errors=r.errors,o)},b.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},b.prototype.addSchema=function(e,t,r,n){if(Array.isArray(e)){for(var i=0;i<e.length;i++)this.addSchema(e[i],void 0,r,n);return this}var s=this._getId(e);if(void 0!==s&&"string"!=typeof s)throw new Error("schema id must be string");return k(this,t=o.normalizeId(t||s)),this._schemas[t]=this._addSchema(e,r,n,!0),this},b.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},b.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(g)?g:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n,o=this._formats.uri;this._formats.uri="function"==typeof o?this._schemaUriFormatFunc:this._schemaUriFormat;try{n=this.validate(r,e)}finally{this._formats.uri=o}if(!n&&t){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(i);this.logger.error(i)}return n},b.prototype.getSchema=function(e){var t=w(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=o.schema.call(e,{schema:{}},t);if(r){var i=r.schema,a=r.root,c=r.baseId,u=n.call(e,i,a,void 0,c);return e._fragments[t]=new s({ref:t,fragment:!0,schema:i,root:a,baseId:c,validate:u}),u}}(this,e)}},b.prototype.removeSchema=function(e){if(e instanceof RegExp)return E(this,this._schemas,e),E(this,this._refs,e),this;switch(typeof e){case"undefined":return E(this,this._schemas),E(this,this._refs),this._cache.clear(),this;case"string":var t=w(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,n=r?r(e):e;this._cache.del(n);var i=this._getId(e);i&&(i=o.normalizeId(i),delete this._schemas[i],delete this._refs[i])}return this},b.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},b.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,n=void 0===t.dataVar?"data":t.dataVar,o="",i=0;i<e.length;i++){var s=e[i];s&&(o+=n+s.dataPath+" "+s.message+r)}return o.slice(0,-r.length)},b.prototype._addSchema=function(e,t,r,n){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var i=this._opts.serialize,a=i?i(e):e,c=this._cache.get(a);if(c)return c;n=n||!1!==this._opts.addUsedSchema;var u=o.normalizeId(this._getId(e));u&&n&&k(this,u);var p,l=!1!==this._opts.validateSchema&&!t;l&&!(p=u&&u==o.normalizeId(e.$schema))&&this.validateSchema(e,!0);var h=o.ids.call(this,e),d=new s({id:u,schema:e,localRefs:h,cacheKey:a,meta:r});"#"!=u[0]&&n&&(this._refs[u]=d);this._cache.put(a,d),l&&p&&this.validateSchema(e,!0);return d},b.prototype._compile=function(e,t){if(e.compiling)return e.validate=i,i.schema=e.schema,i.errors=null,i.root=t||i,!0===e.schema.$async&&(i.$async=!0),i;var r,o;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{o=n.call(this,e.schema,t,e.localRefs)}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=o,e.refs=o.refs,e.refVal=o.refVal,e.root=o.root,o;function i(){var t=e.validate,r=t.apply(null,arguments);return i.errors=t.errors,r}},b.prototype.compileAsync=r(332);var f=r(333);b.prototype.addKeyword=f.add,b.prototype.getKeyword=f.get,b.prototype.removeKeyword=f.remove;var m=r(84);b.ValidationError=m.Validation,b.MissingRefError=m.MissingRef,b.$dataMetaSchema=p;var g="http://json-schema.org/draft-06/schema",y=["removeAdditional","useDefaults","coerceTypes"],v=["/properties"];function b(e){if(!(this instanceof b))return new b(e);e=this._opts=h.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:P,warn:P,error:P};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=c(e.format);var t=this._schemaUriFormat=this._formats["uri-reference"];this._schemaUriFormatFunc=function(e){return t.test(e)},this._cache=e.cache||new i,this._loadingSchemas={},this._compilations=[],this.RULES=u(),this._getId=function(e){switch(e.schemaId){case"$id":return C;case"id":return x;default:return S}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=a),this._metaOpts=function(e){for(var t=h.copy(e._opts),r=0;r<y.length;r++)delete t[y[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),function(e){var t;e._opts.$data&&(t=r(335),e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var n=r(336);e._opts.$data&&(n=p(n,v));e.addMetaSchema(n,g,!0),e._refs["http://json-schema.org/schema"]=g}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this),e.patternGroups&&l(this)}function w(e,t){return t=o.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function E(e,t,r){for(var n in t){var o=t[n];o.meta||r&&!r.test(n)||(e._cache.del(o.cacheKey),delete t[n])}}function x(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function C(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function S(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function k(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function P(){}},function(e,t,r){"use strict";var n=r(35);e.exports=function(e){n.copy(e,this)}},function(e,t,r){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,n="boolean"==typeof t.cycles&&t.cycles,o=t.cmp&&(r=t.cmp,function(e){return function(t,n){var o={key:t,value:e[t]},i={key:n,value:e[n]};return r(o,i)}}),i=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,s;if(Array.isArray(t)){for(s="[",r=0;r<t.length;r++)r&&(s+=","),s+=e(t[r])||"null";return s+"]"}if(null===t)return"null";if(-1!==i.indexOf(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var a=i.push(t)-1,c=Object.keys(t).sort(o&&o(t));for(s="",r=0;r<c.length;r++){var u=c[r],p=e(t[u]);p&&(s&&(s+=","),s+=JSON.stringify(u)+":"+p)}return i.splice(a,1),"{"+s+"}"}}(e)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n="",o=!0===e.schema.$async,i=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),s=e.self._getId(e.schema);if(e.isTop){if(o){e.async=!0;var a="es7"==e.opts.async;e.yieldAwait=a?"await":"yield"}n+=" var validate = ",o?a?n+=" (async function ":("*"!=e.opts.async&&(n+="co.wrap"),n+="(function* "):n+=" (function ",n+=" (data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",s&&(e.opts.sourceCode||e.opts.processCode)&&(n+=" /*# sourceURL="+s+" */ ")}if("boolean"==typeof e.schema||!i&&!e.schema.$ref){var c=e.level,u=e.dataLevel,p=e.schema["false schema"],l=e.schemaPath+e.util.getProperty("false schema"),h=e.errSchemaPath+"/false schema",d=!e.opts.allErrors,f="data"+(u||""),m="valid"+c;if(!1===e.schema){e.isTop?d=!0:n+=" var "+m+" = false; ",(J=J||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'boolean schema is false' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var g=n;n=J.pop(),!e.compositeRule&&d?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?n+=o?" return data; ":" validate.errors = null; return true; ":n+=" var "+m+" = true; ";return e.isTop&&(n+=" }); return validate; "),n}if(e.isTop){var y=e.isTop;c=e.level=0,u=e.dataLevel=0,f="data";e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{c=e.level,f="data"+((u=e.dataLevel)||"");if(s&&(e.baseId=e.resolve.url(e.baseId,s)),o&&!e.async)throw new Error("async schema in sync schema");n+=" var errs_"+c+" = errors;"}m="valid"+c,d=!e.opts.allErrors;var v="",b="",w=e.schema.type,E=Array.isArray(w);if(E&&1==w.length&&(w=w[0],E=!1),e.schema.$ref&&i){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(i=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(w){if(e.opts.coerceTypes)var x=e.util.coerceToTypes(e.opts.coerceTypes,w);var C=e.RULES.types[w];if(x||E||!0===C||C&&!Y(C)){l=e.schemaPath+".type",h=e.errSchemaPath+"/type",l=e.schemaPath+".type",h=e.errSchemaPath+"/type";var S=E?"checkDataTypes":"checkDataType";if(n+=" if ("+e.util[S](w,f,!0)+") { ",x){var k="dataType"+c,P="coerced"+c;n+=" var "+k+" = typeof "+f+"; ","array"==e.opts.coerceTypes&&(n+=" if ("+k+" == 'object' && Array.isArray("+f+")) "+k+" = 'array'; "),n+=" var "+P+" = undefined; ";var _="",A=x;if(A)for(var D,O=-1,T=A.length-1;O<T;)D=A[O+=1],O&&(n+=" if ("+P+" === undefined) { ",_+="}"),"array"==e.opts.coerceTypes&&"array"!=D&&(n+=" if ("+k+" == 'array' && "+f+".length == 1) { "+P+" = "+f+" = "+f+"[0]; "+k+" = typeof "+f+";  } "),"string"==D?n+=" if ("+k+" == 'number' || "+k+" == 'boolean') "+P+" = '' + "+f+"; else if ("+f+" === null) "+P+" = ''; ":"number"==D||"integer"==D?(n+=" if ("+k+" == 'boolean' || "+f+" === null || ("+k+" == 'string' && "+f+" && "+f+" == +"+f+" ","integer"==D&&(n+=" && !("+f+" % 1)"),n+=")) "+P+" = +"+f+"; "):"boolean"==D?n+=" if ("+f+" === 'false' || "+f+" === 0 || "+f+" === null) "+P+" = false; else if ("+f+" === 'true' || "+f+" === 1) "+P+" = true; ":"null"==D?n+=" if ("+f+" === '' || "+f+" === 0 || "+f+" === false) "+P+" = null; ":"array"==e.opts.coerceTypes&&"array"==D&&(n+=" if ("+k+" == 'string' || "+k+" == 'number' || "+k+" == 'boolean' || "+f+" == null) "+P+" = ["+f+"]; ");n+=" "+_+" if ("+P+" === undefined) {   ",(J=J||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",n+=E?""+w.join(","):""+w,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=E?""+w.join(","):""+w,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";g=n;n=J.pop(),!e.compositeRule&&d?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  ";var N=u?"data"+(u-1||""):"parentData";n+=" "+f+" = "+P+"; ",u||(n+="if ("+N+" !== undefined)"),n+=" "+N+"["+(u?e.dataPathArr[u]:"parentDataProperty")+"] = "+P+"; } "}else{(J=J||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",n+=E?""+w.join(","):""+w,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=E?""+w.join(","):""+w,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";g=n;n=J.pop(),!e.compositeRule&&d?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}n+=" } "}}if(e.schema.$ref&&!i)n+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",d&&(n+=" } if (errors === ",n+=y?"0":"errs_"+c,n+=") { ",b+="}");else{e.opts.v5&&e.schema.patternGroups&&e.logger.warn('keyword "patternGroups" is deprecated and disabled. Use option patternGroups: true to enable.');var I=e.RULES;if(I)for(var R=-1,j=I.length-1;R<j;)if(Y(C=I[R+=1])){if(C.type&&(n+=" if ("+e.util.checkDataType(C.type,f)+") { "),e.opts.useDefaults&&!e.compositeRule)if("object"==C.type&&e.schema.properties){p=e.schema.properties;var F=Object.keys(p);if(F)for(var M,L=-1,G=F.length-1;L<G;){if(void 0!==(U=p[M=F[L+=1]]).default)n+="  if ("+(q=f+e.util.getProperty(M))+" === undefined) "+q+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(U.default)+" ":n+=" "+JSON.stringify(U.default)+" ",n+="; "}}else if("array"==C.type&&Array.isArray(e.schema.items)){var B=e.schema.items;if(B){O=-1;for(var U,$=B.length-1;O<$;){var q;if(void 0!==(U=B[O+=1]).default)n+="  if ("+(q=f+"["+O+"]")+" === undefined) "+q+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(U.default)+" ":n+=" "+JSON.stringify(U.default)+" ",n+="; "}}}var z=C.rules;if(z)for(var H,V=-1,X=z.length-1;V<X;)if(K(H=z[V+=1])){var W=H.code(e,H.keyword,C.type);W&&(n+=" "+W+" ",d&&(v+="}"))}if(d&&(n+=" "+v+" ",v=""),C.type&&(n+=" } ",w&&w===C.type&&!x)){n+=" else { ";var J;l=e.schemaPath+".type",h=e.errSchemaPath+"/type";(J=J||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",n+=E?""+w.join(","):""+w,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=E?""+w.join(","):""+w,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";g=n;n=J.pop(),!e.compositeRule&&d?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "}d&&(n+=" if (errors === ",n+=y?"0":"errs_"+c,n+=") { ",b+="}")}}function Y(e){for(var t=e.rules,r=0;r<t.length;r++)if(K(t[r]))return!0}function K(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,n=0;n<r.length;n++)if(void 0!==e.schema[r[n]])return!0}(t)}return d&&(n+=" "+b+" "),y?(o?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }); return validate;"):n+=" var "+m+" = errors === errs_"+c+";",n=e.util.cleanUpCode(n),y&&(n=e.util.finalCleanUpCode(n,o)),n}},function(e,t){var r=Array.prototype.slice;function n(e){var t=this,n=r.call(arguments,1);return new Promise(function(r,s){if("function"==typeof e&&(e=e.apply(t,n)),!e||"function"!=typeof e.next)return r(e);function a(t){var r;try{r=e.next(t)}catch(e){return s(e)}u(r)}function c(t){var r;try{r=e.throw(t)}catch(e){return s(e)}u(r)}function u(e){if(e.done)return r(e.value);var n=o.call(t,e.value);return n&&i(n)?n.then(a,c):c(new TypeError('You may only yield a function, promise, generator, array, or object, but the following object was passed: "'+String(e.value)+'"'))}a()})}function o(e){return e?i(e)?e:function(e){var t=e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName||s(t.prototype))}(e)||s(e)?n.call(this,e):"function"==typeof e?function(e){var t=this;return new Promise(function(n,o){e.call(t,function(e,t){if(e)return o(e);arguments.length>2&&(t=r.call(arguments,1)),n(t)})})}.call(this,e):Array.isArray(e)?function(e){return Promise.all(e.map(o,this))}.call(this,e):Object==e.constructor?function(e){for(var t=new e.constructor,r=Object.keys(e),n=[],s=0;s<r.length;s++){var a=r[s],c=o.call(this,e[a]);c&&i(c)?u(c,a):t[a]=e[a]}return Promise.all(n).then(function(){return t});function u(e,r){t[r]=void 0,n.push(e.then(function(e){t[r]=e}))}}.call(this,e):e:e}function i(e){return"function"==typeof e.then}function s(e){return"function"==typeof e.next&&"function"==typeof e.throw}e.exports=n.default=n.co=n,n.wrap=function(e){return t.__generatorFunction__=e,t;function t(){return n.call(this,e.apply(this,arguments))}}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(s||""),h=e.opts.$data&&a&&a.$data;h?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a;var d="maximum"==t,f=d?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[f],g=d?"<":">",y=d?">":"<",v=void 0;if(e.opts.$data&&m&&m.$data){var b=e.util.getData(m.$data,s,e.dataPathArr),w="exclusive"+i,E="exclType"+i,x="exclIsNumber"+i,C="' + "+(P="op"+i)+" + '";o+=" var schemaExcl"+i+" = "+b+"; ",o+=" var "+w+"; var "+E+" = typeof "+(b="schemaExcl"+i)+"; if ("+E+" != 'boolean' && "+E+" != 'undefined' && "+E+" != 'number') { ";var S;v=f;(S=S||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(v||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(o+=" , message: '"+f+" should be boolean' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var k=o;o=S.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+k+"]); ":o+=" validate.errors = ["+k+"]; return false; ":o+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" "+E+" == 'number' ? ( ("+w+" = "+n+" === undefined || "+b+" "+g+"= "+n+") ? "+l+" "+y+"= "+b+" : "+l+" "+y+" "+n+" ) : ( ("+w+" = "+b+" === true) ? "+l+" "+y+"= "+n+" : "+l+" "+y+" "+n+" ) || "+l+" !== "+l+") { var op"+i+" = "+w+" ? '"+g+"' : '"+g+"=';"}else{C=g;if((x="number"==typeof m)&&h){var P="'"+C+"'";o+=" if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" ( "+n+" === undefined || "+m+" "+g+"= "+n+" ? "+l+" "+y+"= "+m+" : "+l+" "+y+" "+n+" ) || "+l+" !== "+l+") { "}else{x&&void 0===a?(w=!0,v=f,u=e.errSchemaPath+"/"+f,n=m,y+="="):(x&&(n=Math[d?"min":"max"](m,a)),m===(!x||n)?(w=!0,v=f,u=e.errSchemaPath+"/"+f,y+="="):(w=!1,C+="="));P="'"+C+"'";o+=" if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" "+l+" "+y+" "+n+" || "+l+" !== "+l+") { "}}v=v||t,(S=S||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(v||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { comparison: "+P+", limit: "+n+", exclusive: "+w+" } ",!1!==e.opts.messages&&(o+=" , message: 'should be "+C+" ",o+=h?"' + "+n:n+"'"),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";k=o;return o=S.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+k+"]); ":o+=" validate.errors = ["+k+"]; return false; ":o+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",p&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(s||""),h=e.opts.$data&&a&&a.$data;h?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a,o+="if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" "+l+".length "+("maxItems"==t?">":"<")+" "+n+") { ";var d=t,f=f||[];f.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(d||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have ",o+="maxItems"==t?"more":"less",o+=" than ",o+=h?"' + "+n+" + '":""+a,o+=" items' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var m=o;return o=f.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(s||""),h=e.opts.$data&&a&&a.$data;h?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a;var d="maxLength"==t?">":"<";o+="if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),!1===e.opts.unicode?o+=" "+l+".length ":o+=" ucs2length("+l+") ",o+=" "+d+" "+n+") { ";var f=t,m=m||[];m.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(f||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT be ",o+="maxLength"==t?"longer":"shorter",o+=" than ",o+=h?"' + "+n+" + '":""+a,o+=" characters' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var g=o;return o=m.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+g+"]); ":o+=" validate.errors = ["+g+"]; return false; ":o+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(s||""),h=e.opts.$data&&a&&a.$data;h?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a,o+="if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" Object.keys("+l+").length "+("maxProperties"==t?">":"<")+" "+n+") { ";var d=t,f=f||[];f.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(d||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have ",o+="maxProperties"==t?"more":"less",o+=" than ",o+=h?"' + "+n+" + '":""+a,o+=" properties' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var m=o;return o=f.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o}},function(e){e.exports=JSON.parse('{"id":"http://json-schema.org/draft-04/schema#","$schema":"http://json-schema.org/draft-04/schema#","description":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"positiveInteger":{"type":"integer","minimum":0},"positiveIntegerDefault0":{"allOf":[{"$ref":"#/definitions/positiveInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"minItems":1,"uniqueItems":true}},"type":"object","properties":{"id":{"type":"string","format":"uri"},"$schema":{"type":"string","format":"uri"},"title":{"type":"string"},"description":{"type":"string"},"default":{},"multipleOf":{"type":"number","minimum":0,"exclusiveMinimum":true},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"boolean","default":false},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"boolean","default":false},"maxLength":{"$ref":"#/definitions/positiveInteger"},"minLength":{"$ref":"#/definitions/positiveIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"anyOf":[{"type":"boolean"},{"$ref":"#"}],"default":{}},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":{}},"maxItems":{"$ref":"#/definitions/positiveInteger"},"minItems":{"$ref":"#/definitions/positiveIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"maxProperties":{"$ref":"#/definitions/positiveInteger"},"minProperties":{"$ref":"#/definitions/positiveIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"anyOf":[{"type":"boolean"},{"$ref":"#"}],"default":{}},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"enum":{"type":"array","minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"dependencies":{"exclusiveMaximum":["maximum"],"exclusiveMinimum":["minimum"]},"default":{}}')},function(e,t){e.exports={inports:{},outports:{},groups:[],processes:{AppView:{component:"polymer/noflo-ui"},StoreDispatch:{component:"ui/Store"},State:{component:"ui/State"},MapStateToProps:{component:"ui/MapStateToProps"},Logger:{component:"ui/LoggingMiddleware"},UrlMiddleware:{component:"ui/UrlMiddleware"},StorageMiddleware:{component:"ui/StorageMiddleware"},UserMiddleware:{component:"ui/UserMiddleware"},RegistryMiddleware:{component:"ui/RegistryMiddleware"},GithubMiddleware:{component:"ui/GithubMiddleware"},RuntimeMiddleware:{component:"ui/RuntimeMiddleware"},Dispatch:{component:"ui/DispatchAction"},UserReducer:{component:"ui/UserReducer"},MainContext:{component:"ui/CreateContext"},StorageReducer:{component:"ui/StorageReducer"},GithubReducer:{component:"ui/GithubReducer"},RegistryReducer:{component:"ui/RegistryReducer"},RuntimeReducer:{component:"ui/RuntimeReducer"},ContextReducer:{component:"ui/ContextReducer"},ShowErrors:{component:"core/Output"},ListenWindow:{component:"interaction/ListenResize"}},connections:[{src:{process:"AppView",port:"event"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"State",port:"state"},tgt:{process:"StoreDispatch",port:"state"}},{src:{process:"State",port:"state"},tgt:{process:"MapStateToProps",port:"state"}},{src:{process:"State",port:"updated"},tgt:{process:"MapStateToProps",port:"updated"}},{src:{process:"MapStateToProps",port:"props"},tgt:{process:"AppView",port:"updated"}},{src:{process:"StoreDispatch",port:"pass"},tgt:{process:"Logger",port:"in"}},{src:{process:"Logger",port:"pass"},tgt:{process:"UrlMiddleware",port:"in"}},{src:{process:"UrlMiddleware",port:"new"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"UrlMiddleware",port:"pass"},tgt:{process:"StorageMiddleware",port:"in"}},{src:{process:"StorageMiddleware",port:"new"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"StorageMiddleware",port:"pass"},tgt:{process:"UserMiddleware",port:"in"}},{src:{process:"UserMiddleware",port:"new"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"UserMiddleware",port:"pass"},tgt:{process:"RegistryMiddleware",port:"in"}},{src:{process:"RegistryMiddleware",port:"new"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"RegistryMiddleware",port:"pass"},tgt:{process:"GithubMiddleware",port:"in"}},{src:{process:"GithubMiddleware",port:"new"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"GithubMiddleware",port:"pass"},tgt:{process:"RuntimeMiddleware",port:"in"}},{src:{process:"RuntimeMiddleware",port:"new"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"RuntimeMiddleware",port:"pass"},tgt:{process:"Dispatch",port:"in"}},{data:"user:*,main:*,storage:*,storage:*:*,github:*,flowhub:*,runtime:*,context:*",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"UserReducer",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"MainContext",port:"start"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"StorageReducer",port:"in"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"StorageReducer",port:"in"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"GithubReducer",port:"in"}},{src:{process:"Dispatch",port:"handle",index:5},tgt:{process:"RegistryReducer",port:"in"}},{src:{process:"Dispatch",port:"handle",index:6},tgt:{process:"RuntimeReducer",port:"in"}},{src:{process:"Dispatch",port:"handle",index:7},tgt:{process:"ContextReducer",port:"in"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"ShowErrors",port:"in"}},{src:{process:"UserReducer",port:"context"},tgt:{process:"State",port:"in"}},{src:{process:"GithubReducer",port:"context"},tgt:{process:"State",port:"in"}},{src:{process:"RegistryReducer",port:"context"},tgt:{process:"State",port:"in"}},{src:{process:"RuntimeReducer",port:"context"},tgt:{process:"State",port:"in"}},{src:{process:"StorageReducer",port:"out"},tgt:{process:"State",port:"in"}},{src:{process:"MainContext",port:"out"},tgt:{process:"State",port:"in"}},{src:{process:"ContextReducer",port:"context"},tgt:{process:"State",port:"in"}},{data:"noflo-ui",tgt:{process:"AppView",port:"selector"}},{data:"",tgt:{process:"ListenWindow",port:"start"}},{src:{process:"ListenWindow",port:"width"},tgt:{process:"AppView",port:"width"}},{src:{process:"ListenWindow",port:"height"},tgt:{process:"AppView",port:"height"}}],properties:{environment:{type:"noflo-browser"},icon:"code"},caseSensitive:!1}},function(e,t){var r,n,o,i,s;n=function(e){return/.*\.coffee$/.test(e)?"coffeescript":"javascript"},o=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(arg)},i=function(e,t,r){if(void 0===t)return e;switch(null===r?3:r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)};case 4:return function(r,n,o,i){return e.call(t,r,n,o,i)}}return function(){return e.apply(t,arguments)}},s=function(e){var t;return t=function(t,r,n,o,i,s){for(var a;i>=0&&i<s;)n=r(n,t[a=o?o[i]:i],a,t),i+=e;return n},function(r,n,o,s){var a,c,u;return n=i(n,s,4),u=((c=Object.keys(r))||r).length,a=e>0?0:u-1,arguments.length<3&&(o=r[c?c[a]:a],a+=e),t(r,n,o,c,a,u)}}(-1),r=function(e,t,r){var n,o,i,s,a,c;return a=void 0,n=void 0,o=void 0,c=void 0,s=void 0,i=function(){var u;(u=Date.now-c)<t&&u>=0?a=setTimeout(i,t-u):(a=null,r||(s=e.apply(o,n),a||(o=n=null)))},function(){var u;return o=this,n=arguments,c=Date.now,u=r&&!a,a||(a=setTimeout(i,t)),u&&(s=e.apply(o,n),o=n=null),s}},t.guessLanguageFromFilename=n,t.reduceRight=s,t.debounce=r,t.isArray=o},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l,h,d,f,m,g,y,v,b,w,E=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")},x=r(8);h=x.EventEmitter,w=r(135),d=r(25),y=r(62)("noflo:component"),v=r(62)("noflo:component:brackets"),b=r(62)("noflo:component:send"),l=function(){var e=function(e){function t(e){var r,o,s,a;return i(this,t),(r=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}(this,c(t).call(this))).error=r.error.bind(u(r)),e||(e={}),e.inPorts||(e.inPorts={}),e.inPorts instanceof w.InPorts?r.inPorts=e.inPorts:r.inPorts=new w.InPorts(e.inPorts),e.outPorts||(e.outPorts={}),e.outPorts instanceof w.OutPorts?r.outPorts=e.outPorts:r.outPorts=new w.OutPorts(e.outPorts),e.icon&&(r.icon=e.icon),e.description&&(r.description=e.description),r.started=!1,r.load=0,r.ordered=null!=(o=e.ordered)&&o,r.autoOrdering=null!=(s=e.autoOrdering)?s:null,r.outputQ=[],r.bracketContext={in:{},out:{}},r.activateOnInput=null==(a=e.activateOnInput)||a,r.forwardBrackets={in:["out","error"]},"forwardBrackets"in e&&(r.forwardBrackets=e.forwardBrackets),"function"==typeof e.process&&r.process(e.process),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,h),a(t,[{key:"getDescription",value:function(){return this.description}},{key:"isReady",value:function(){return!0}},{key:"isSubgraph",value:function(){return!1}},{key:"setIcon",value:function(e){return this.icon=e,this.emit("icon",this.icon)}},{key:"getIcon",value:function(){return this.icon}},{key:"error",value:function(e){var r,n,o,i,s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"error",u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(E(this,t),!this.outPorts[c]||!this.outPorts[c].isAttached()&&this.outPorts[c].isRequired())throw e;for(n=0,i=a.length;n<i;n++)r=a[n],this.outPorts[c].openBracket(r,{scope:u});for(this.outPorts[c].data(e,{scope:u}),o=0,s=a.length;o<s;o++)r=a[o],this.outPorts[c].closeBracket(r,{scope:u})}},{key:"setUp",value:function(e){e()}},{key:"tearDown",value:function(e){e()}},{key:"start",value:function(e){var t=this;if(this.isStarted())return e();this.setUp(function(r){if(r)return e(r);t.started=!0,t.emit("start"),e(null)})}},{key:"shutdown",value:function(e){var t,r=this;t=function(){var t,n,o;for(o in n=r.inPorts.ports||r.inPorts)"function"==typeof(t=n[o]).clear&&t.clear();if(r.bracketContext={in:{},out:{}},!r.isStarted())return e();r.started=!1,r.emit("end"),e()},this.tearDown(function(n){var o;return n?e(n):r.load>0?(o=function(e){e>0||(this.removeListener("deactivate",o),t())},void r.on("deactivate",o)):void t()})}},{key:"isStarted",value:function(){return this.started}},{key:"prepareForwarding",value:function(){var e,t,r,n,o,i,s,a;for(t in s=[],i=this.forwardBrackets)if(o=i[t],t in this.inPorts.ports){for(a=[],e=0,r=o.length;e<r;e++)(n=o[e])in this.outPorts.ports&&a.push(n);0===a.length?s.push(delete this.forwardBrackets[t]):s.push(this.forwardBrackets[t]=a)}else delete this.forwardBrackets[t];return s}},{key:"isLegacy",value:function(){return!this.handle}},{key:"process",value:function(e){var t,r,n=this;if("function"!=typeof e)throw new Error("Process handler must be a function");if(!this.inPorts)throw new Error("Component ports must be defined before process function");for(t in this.prepareForwarding(),this.handle=e,r=this.inPorts.ports)!function(e,t){t.name||(t.name=e),t.on("ip",function(e){return n.handleIP(e,t)})}(t,r[t]);return this}},{key:"isForwardingInport",value:function(e){return("string"==typeof e?e:e.name)in this.forwardBrackets}},{key:"isForwardingOutport",value:function(e,t){var r,n;return r="string"==typeof e?e:e.name,n="string"==typeof t?t:t.name,!!this.forwardBrackets[r]&&-1!==this.forwardBrackets[r].indexOf(n)}},{key:"isOrdered",value:function(){return!!this.ordered||!!this.autoOrdering}},{key:"handleIP",value:function(e,t){var r,n,o,i,s,a,c;if(t.options.triggering){if("openBracket"!==e.type||null!==this.autoOrdering||this.ordered||(y("".concat(this.nodeId," port '").concat(t.name,"' entered auto-ordering mode")),this.autoOrdering=!0),c={},this.isForwardingInport(t)){if("openBracket"===e.type)return;if("closeBracket"===e.type){if(o=(r=t.getBuffer(e.scope,e.index)).filter(function(e){return"data"===e.type}),this.outputQ.length>=this.load&&0===o.length){if(r[0]!==e)return;t.get(e.scope,e.index),(n=this.getBracketContext("in",t.name,e.scope,e.index).pop()).closeIp=e,v("".concat(this.nodeId," closeBracket-C from '").concat(n.source,"' to ").concat(n.ports,": '").concat(e.data,"'")),c={__resolved:!0,__bracketClosingAfter:[n]},this.outputQ.push(c),this.processOutputQueue()}if(!o.length)return}}n=new f(e,this,t,c),s=new m(this.inPorts,n),a=new g(this.outPorts,n);try{this.handle(s,a,n)}catch(e){i=e,this.deactivate(n),a.sendDone(i)}n.activated||(t.isAddressable()?y("".concat(this.nodeId," packet on '").concat(t.name,"[").concat(e.index,"]' didn't match preconditions: ").concat(e.type)):y("".concat(this.nodeId," packet on '").concat(t.name,"' didn't match preconditions: ").concat(e.type)))}}},{key:"getBracketContext",value:function(e,t,r,n){var o,i,s=w.normalizePortName(t);return i=s.name,o=s.index,null!=n&&(o=n),("in"===e?this.inPorts:this.outPorts)[i].isAddressable()&&(t="".concat(i,"[").concat(o,"]")),this.bracketContext[e][t]||(this.bracketContext[e][t]={}),this.bracketContext[e][t][r]||(this.bracketContext[e][t][r]=[]),this.bracketContext[e][t][r]}},{key:"addToResult",value:function(e,t,r){var n,o,i,s,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=w.normalizePortName(t);return s=c.name,o=c.index,i=a?"unshift":"push",this.outPorts[s].isAddressable()?(n=o?parseInt(o):r.index,e[s]||(e[s]={}),e[s][n]||(e[s][n]=[]),r.index=n,void e[s][n][i](r)):(e[s]||(e[s]=[]),e[s][i](r))}},{key:"getForwardableContexts",value:function(e,t,r){var n,o,i,s=this,a=w.normalizePortName(t);return i=a.name,o=a.index,n=[],r.forEach(function(r,a){var c;if(s.isForwardingOutport(e,i)&&-1===r.ports.indexOf(t)&&(!(c=s.getBracketContext("out",i,r.ip.scope,o)[a])||c.ip.data!==r.ip.data||-1===c.ports.indexOf(t)))return n.push(r)}),n}},{key:"addBracketForwards",value:function(e){var t,r,n,o,i,s,a,c,u,p,l,h,d,f,m,g,y,b=this;if(null!=(h=e.__bracketClosingBefore)?h.length:void 0)for(r=0,a=(d=e.__bracketClosingBefore).length;r<a;r++)if(t=d[r],v("".concat(this.nodeId," closeBracket-A from '").concat(t.source,"' to ").concat(t.ports,": '").concat(t.closeIp.data,"'")),t.ports.length)for(o=0,c=(f=t.ports).length;o<c;o++)l=f[o],n=t.closeIp.clone(),this.addToResult(e,l,n,!0),this.getBracketContext("out",l,n.scope).pop();if(e.__bracketContext&&Object.keys(e.__bracketContext).reverse().forEach(function(r){var o,i,s,a,c,u,p,l,h,d,f,m,g,y,w;if((t=e.__bracketContext[r]).length){for(m in y=[],e)if(c=e[m],0!==m.indexOf("__"))if(b.outPorts[m].isAddressable()){for(s in c)if(c[s].filter(function(e){return"data"===e.type}).length&&(g="".concat(m,"[").concat(s,"]"),(w=b.getForwardableContexts(r,g,t)).length)){for(i=[],u=0,l=w.length;u<l;u++)o=w[u],v("".concat(b.nodeId," openBracket from '").concat(r,"' to '").concat(g,"': '").concat(o.ip.data,"'")),(n=o.ip.clone()).index=parseInt(s),i.push(n),o.ports.push(g),b.getBracketContext("out",m,o.ip.scope,s).push(o);for(i.reverse(),p=0,h=i.length;p<h;p++)a=i[p],b.addToResult(e,m,a,!0)}}else if(c.filter(function(e){return"data"===e.type}).length&&(w=b.getForwardableContexts(r,m,t)).length){for(i=[],f=0,d=w.length;f<d;f++)o=w[f],v("".concat(b.nodeId," openBracket from '").concat(r,"' to '").concat(m,"': '").concat(o.ip.data,"'")),i.push(o.ip.clone()),o.ports.push(m),b.getBracketContext("out",m,o.ip.scope).push(o);i.reverse(),y.push(function(){var t,r,n;for(n=[],r=0,t=i.length;r<t;r++)a=i[r],n.push(this.addToResult(e,m,a,!0));return n}.call(b))}return y}}),null!=(m=e.__bracketClosingAfter)?m.length:void 0)for(i=0,u=(g=e.__bracketClosingAfter).length;i<u;i++)if(t=g[i],v("".concat(this.nodeId," closeBracket-B from '").concat(t.source,"' to ").concat(t.ports,": '").concat(t.closeIp.data,"'")),t.ports.length)for(s=0,p=(y=t.ports).length;s<p;s++)l=y[s],n=t.closeIp.clone(),this.addToResult(e,l,n,!1),this.getBracketContext("out",l,n.scope).pop();return delete e.__bracketClosingBefore,delete e.__bracketContext,delete e.__bracketClosingAfter}},{key:"processOutputQueue",value:function(){var e,t,r,n,o,i,s,a;for(a=[];this.outputQ.length>0&&this.outputQ[0].__resolved;)s=this.outputQ.shift(),this.addBracketForwards(s),a.push(function(){var a,c,u;for(o in u=[],s)if(n=s[o],0!==o.indexOf("__"))if(this.outPorts.ports[o].isAddressable()){for(e in n)if(t=n[e],e=parseInt(e),this.outPorts.ports[o].isAttached(e))for(a=0,c=t.length;a<c;a++)r=t[a],i="".concat(o,"[").concat(r.index,"]"),"openBracket"===r.type?b("".concat(this.nodeId," sending ").concat(i," < '").concat(r.data,"'")):"closeBracket"===r.type?b("".concat(this.nodeId," sending ").concat(i," > '").concat(r.data,"'")):b("".concat(this.nodeId," sending ").concat(i," DATA")),this.outPorts[o].options.scoped||(r.scope=null),this.outPorts[o].sendIP(r)}else this.outPorts.ports[o].isAttached()&&u.push(function(){var e,t,s;for(s=[],e=0,t=n.length;e<t;e++)r=n[e],i=o,"openBracket"===r.type?b("".concat(this.nodeId," sending ").concat(i," < '").concat(r.data,"'")):"closeBracket"===r.type?b("".concat(this.nodeId," sending ").concat(i," > '").concat(r.data,"'")):b("".concat(this.nodeId," sending ").concat(i," DATA")),this.outPorts[o].options.scoped||(r.scope=null),s.push(this.outPorts[o].sendIP(r));return s}.call(this));return u}.call(this));return a}},{key:"activate",value:function(e){if(!e.activated)return e.activated=!0,e.deactivated=!1,this.load++,this.emit("activate",this.load),this.ordered||this.autoOrdering?this.outputQ.push(e.result):void 0}},{key:"deactivate",value:function(e){if(!e.deactivated)return e.deactivated=!0,e.activated=!1,this.isOrdered()&&this.processOutputQueue(),this.load--,this.emit("deactivate",this.load)}}]),t}();return e.prototype.description="",e.prototype.icon=null,e}.call(this),f=function(){function e(t,r,n,o){i(this,e),this.ip=t,this.nodeInstance=r,this.port=n,this.result=o,this.scope=this.ip.scope,this.activated=!1,this.deactivated=!1}return a(e,[{key:"activate",value:function(){return(this.result.__resolved||-1===this.nodeInstance.outputQ.indexOf(this.result))&&(this.result={}),this.nodeInstance.activate(this)}},{key:"deactivate",value:function(){return this.result.__resolved||(this.result.__resolved=!0),this.nodeInstance.deactivate(this)}}]),e}(),m=function(){function e(t,r){i(this,e),this.ports=t,this.context=r,this.nodeInstance=this.context.nodeInstance,this.ip=this.context.ip,this.port=this.context.port,this.result=this.context.result,this.scope=this.context.scope}return a(e,[{key:"activate",value:function(){if(!this.context.activated)return this.nodeInstance.isOrdered()&&(this.result.__resolved=!1),this.nodeInstance.activate(this.context),this.port.isAddressable()?y("".concat(this.nodeInstance.nodeId," packet on '").concat(this.port.name,"[").concat(this.ip.index,"]' caused activation ").concat(this.nodeInstance.load,": ").concat(this.ip.type)):y("".concat(this.nodeInstance.nodeId," packet on '").concat(this.port.name,"' caused activation ").concat(this.nodeInstance.load,": ").concat(this.ip.type))}},{key:"attached",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o,i,s;for(t.length||(t=["in"]),s=[],n=0,o=t.length;n<o;n++){if(i=t[n],!this.ports[i])throw new Error("Node ".concat(this.nodeInstance.nodeId," has no port '").concat(i,"'"));s.push(this.ports[i].listAttached())}return 1===t.length?s.pop():s}},{key:"has",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o,i,s;for(t.length||(t=["in"]),s="function"==typeof t[t.length-1]?t.pop():function(){return!0},n=0,o=t.length;n<o;n++)if(i=t[n],Array.isArray(i)){if(!this.ports[i[0]])throw new Error("Node ".concat(this.nodeInstance.nodeId," has no port '").concat(i[0],"'"));if(!this.ports[i[0]].isAddressable())throw new Error("Non-addressable ports, access must be with string ".concat(i[0]));if(!this.ports[i[0]].has(this.scope,i[1],s))return!1}else{if(!this.ports[i])throw new Error("Node ".concat(this.nodeInstance.nodeId," has no port '").concat(i,"'"));if(this.ports[i].isAddressable())throw new Error("For addressable ports, access must be with array [".concat(i,", idx]"));if(!this.ports[i].has(this.scope,s))return!1}return!0}},{key:"hasData",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length||(t=["in"]),t.push(function(e){return"data"===e.type}),this.has.apply(this,t)}},{key:"hasStream",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o,i,s,a,c,u;for(t.length||(t=["in"]),u="function"==typeof t[t.length-1]?t.pop():function(){return!0},o=0,i=t.length;o<i;o++)if(s=t[o],a=[],[],n=!1,c=function(e){return"openBracket"===e.type?(a.push(e.data),!1):"data"===e.type?(n=u(e,a),!a.length&&n):"closeBracket"===e.type?(a.pop(),!a.length&&!!n):void 0},!this.has(s,c))return!1;return!0}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i,s,a,c,u,p;for(this.activate(),t.length||(t=["in"]),p=[],n=0,a=t.length;n<a;n++){if(c=t[n],Array.isArray(c)){var l=c,h=o(l,2);if(u=h[0],i=h[1],!this.ports[u].isAddressable())throw new Error("Non-addressable ports, access must be with string portname")}else if(u=c,this.ports[u].isAddressable())throw new Error("For addressable ports, access must be with array [portname, idx]");this.nodeInstance.isForwardingInport(u)?(s=this.__getForForwarding(u,i),p.push(s)):(s=this.ports[u].get(this.scope,i),p.push(s))}return 1===t.length?p[0]:p}},{key:"__getForForwarding",value:function(e,t){var r,n,o,i,s,a;for(a=[],n=null;i=this.ports[e].get(this.scope,t);){if("data"===i.type){n=i;break}a.push(i)}for(o=0,s=a.length;o<s;o++)"closeBracket"!==(i=a[o]).type?"openBracket"!==i.type||this.nodeInstance.getBracketContext("in",e,this.scope,t).push({ip:i,ports:[],source:e}):(this.result.__bracketClosingBefore||(this.result.__bracketClosingBefore=[]),(r=this.nodeInstance.getBracketContext("in",e,this.scope,t).pop()).closeIp=i,this.result.__bracketClosingBefore.push(r));return this.result.__bracketContext||(this.result.__bracketContext={}),this.result.__bracketContext[e]=this.nodeInstance.getBracketContext("in",e,this.scope,t).slice(0),n}},{key:"getData",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o,i,s,a;for(t.length||(t=["in"]),n=[],o=0,i=t.length;o<i;o++)if(a=t[o],null!=(s=this.get(a))){for(;"data"!==s.type&&(s=this.get(a)););n.push(s.data)}else n.push(s);return 1===t.length?n.pop():n}},{key:"getStream",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o,i,s,a,c,u,p;for(t.length||(t=["in"]),n=[],i=0,a=t.length;i<a;i++){for(c=t[i],u=[],p=[],o=!1,(s=this.get(c))||n.push(void 0);s&&("openBracket"===s.type&&(u.length||(p=[],o=!1),u.push(s.data),p.push(s)),"data"!==s.type||(p.push(s),o=!0,u.length))&&("closeBracket"!==s.type||(p.push(s),u.pop(),!o||u.length));)s=this.get(c);n.push(p)}return 1===t.length?n.pop():n}}]),e}(),g=function(){function e(t,r){i(this,e),this.ports=t,this.context=r,this.nodeInstance=this.context.nodeInstance,this.ip=this.context.ip,this.result=this.context.result,this.scope=this.context.scope}return a(e,[{key:"isError",value:function(e){return e instanceof Error||Array.isArray(e)&&e.length>0&&e[0]instanceof Error}},{key:"error",value:function(e){var t,r,n,o,i,s,a;if((s=Array.isArray(e))||(e=[e]),!("error"in this.ports)||!this.ports.error.isAttached()&&this.ports.error.isRequired()){for(a=[],n=0,i=e.length;n<i;n++)throw t=e[n];return a}for(s&&this.sendIP("error",new d("openBracket")),r=0,o=e.length;r<o;r++)t=e[r],this.sendIP("error",t);if(s)return this.sendIP("error",new d("closeBracket"))}},{key:"sendIP",value:function(e,t){var r;if(r=d.isIP(t)?t:new d("data",t),null!==this.scope&&null===r.scope&&(r.scope=this.scope),this.nodeInstance.outPorts[e].isAddressable()&&null===r.index)throw new Error("Sending packets to addressable ports requires specifying index");if(!this.nodeInstance.isOrdered())return this.nodeInstance.outPorts[e].options.scoped||(r.scope=null),this.nodeInstance.outPorts[e].sendIP(r);this.nodeInstance.addToResult(this.result,e,r)}},{key:"send",value:function(e){var t,r,o,i,s,a,c,u;if(this.isError(e))return this.error(e);for(t=[],i=!1,r=0,o=(c=Object.keys(this.ports.ports)).length;r<o;r++)"error"!==(a=c[r])&&"ports"!==a&&"_callbacks"!==a&&t.push(a),i||null==e||"object"!==n(e)||-1===Object.keys(e).indexOf(a)||(i=!0);if(1!==t.length||i){if(t.length>1&&!i)throw new Error("Port must be specified for sending output");for(a in u=[],e)s=e[a],u.push(this.sendIP(a,s));return u}this.sendIP(t[0],e)}},{key:"sendDone",value:function(e){return this.send(e),this.done()}},{key:"pass",value:function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!("out"in this.ports))throw new Error('output.pass() requires port "out" to be present');for(t in n)r=n[t],this.ip[t]=r;return this.ip.data=e,this.sendIP("out",this.ip),this.done()}},{key:"done",value:function(e){var t,r,n,o,i,s,a,c,u,p=this;if(this.result.__resolved=!0,this.nodeInstance.activate(this.context),e&&this.error(e),s=function(){var e,t,r,n;return r=(n=p.nodeInstance.outputQ.filter(function(e){return!e.__resolved||(2!==Object.keys(e).length||!e.__bracketClosingAfter)})).indexOf(p.result),e=n.length,t=p.nodeInstance.load,r===e-1||(-1===r&&t===e+1||e<=1&&1===t)},this.nodeInstance.isOrdered()&&s())for(c in u=this.nodeInstance.bracketContext.in)if((n=u[c])[this.scope]&&(a=n[this.scope]).length)for(r=a[a.length-1],t=this.nodeInstance.inPorts[r.source].getBuffer(r.ip.scope,r.ip.index);t.length&&"closeBracket"===t[0].type;)i=this.nodeInstance.inPorts[r.source].get(r.ip.scope,r.ip.index),(o=a.pop()).closeIp=i,this.result.__bracketClosingAfter||(this.result.__bracketClosingAfter=[]),this.result.__bracketClosingAfter.push(o);return y("".concat(this.nodeInstance.nodeId," finished processing ").concat(this.nodeInstance.load)),this.nodeInstance.deactivate(this.context)}}]),e}(),t.Component=l},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l,h,d,f,m=r(8);l=m.EventEmitter,h=r(136),d=r(138),f=function(){var e=function(e){function t(e){var r,n,i;if(o(this,t),(r=a(this,c(t).call(this))).ports={},!e)return a(r);for(n in e)i=e[n],r.add(n,i);return r}return u(t,l),s(t,[{key:"add",value:function(e,t,r){if("add"===e||"remove"===e)throw new Error("Add and remove are restricted port names");if(!e.match(/^[a-z0-9_\.\/]+$/))throw new Error("Port names can only contain lowercase alphanumeric characters and underscores. '".concat(e,"' not allowed"));return this.ports[e]&&this.remove(e),"object"===n(t)&&t.canAttach?this.ports[e]=t:this.ports[e]=new this.model(t,r),this[e]=this.ports[e],this.emit("add",e),this}},{key:"remove",value:function(e){if(!this.ports[e])throw new Error("Port ".concat(e," not defined"));return delete this.ports[e],delete this[e],this.emit("remove",e),this}}]),t}();return e.prototype.model=h,e}.call(this),t.InPorts=function(e){function t(){return o(this,t),a(this,c(t).apply(this,arguments))}return u(t,f),s(t,[{key:"on",value:function(e,t,r){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].on(t,r)}},{key:"once",value:function(e,t,r){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].once(t,r)}}]),t}(),t.OutPorts=function(){var e=function(e){function t(){return o(this,t),a(this,c(t).apply(this,arguments))}return u(t,f),s(t,[{key:"connect",value:function(e,t){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].connect(t)}},{key:"beginGroup",value:function(e,t,r){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].beginGroup(t,r)}},{key:"send",value:function(e,t,r){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].send(t,r)}},{key:"endGroup",value:function(e,t){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].endGroup(t)}},{key:"disconnect",value:function(e,t){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].disconnect(t)}}]),t}();return e.prototype.model=d,e}.call(this),t.normalizePortName=function(e){var t,r;return r={name:e},-1===e.indexOf("[")?r:(null!=(t=e.match(/(.*)\[([0-9]+)\]/))?t.length:void 0)?(r.name=t[1],r.index=t[2],r):e}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c,u;c=r(137),r(25),u=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),null==r.control&&(r.control=!1),null==r.scoped&&(r.scoped=!0),null==r.triggering&&(r.triggering=!0),r.process)throw new Error("InPort process callback is deprecated. Please use Process API");if(r.handle)throw new Error("InPort handle callback is deprecated. Please use Process API");return(e=i(this,s(t).call(this,r))).prepareBuffer(),e}var r,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,c),r=t,(n=[{key:"attachSocket",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.hasDefault()&&e.setDataDelegate(function(){return t.options.default}),e.on("connect",function(){return t.handleSocketEvent("connect",e,r)}),e.on("begingroup",function(e){return t.handleSocketEvent("begingroup",e,r)}),e.on("data",function(e){return t.validateData(e),t.handleSocketEvent("data",e,r)}),e.on("endgroup",function(e){return t.handleSocketEvent("endgroup",e,r)}),e.on("disconnect",function(){return t.handleSocketEvent("disconnect",e,r)}),e.on("ip",function(e){return t.handleIP(e,r)})}},{key:"handleIP",value:function(e,t){var r;if(!this.options.control||"data"===e.type)return e.owner=this.nodeInstance,this.isAddressable()&&(e.index=t),"all"===e.datatype&&(e.datatype=this.getDataType()),this.getSchema()&&!e.schema&&(e.schema=this.getSchema()),(r=this.prepareBufferForIP(e)).push(e),this.options.control&&r.length>1&&r.shift(),this.emit("ip",e,t)}},{key:"handleSocketEvent",value:function(e,t,r){return this.isAddressable()?this.emit(e,t,r):this.emit(e,t)}},{key:"hasDefault",value:function(){return void 0!==this.options.default}},{key:"prepareBuffer",value:function(){if(this.isAddressable())return this.options.scoped&&(this.scopedBuffer={}),this.indexedBuffer={},void(this.iipBuffer={});this.options.scoped&&(this.scopedBuffer={}),this.iipBuffer=[],this.buffer=[]}},{key:"prepareBufferForIP",value:function(e){return this.isAddressable()?null!=e.scope&&this.options.scoped?(e.scope in this.scopedBuffer||(this.scopedBuffer[e.scope]=[]),e.index in this.scopedBuffer[e.scope]||(this.scopedBuffer[e.scope][e.index]=[]),this.scopedBuffer[e.scope][e.index]):e.initial?(e.index in this.iipBuffer||(this.iipBuffer[e.index]=[]),this.iipBuffer[e.index]):(e.index in this.indexedBuffer||(this.indexedBuffer[e.index]=[]),this.indexedBuffer[e.index]):null!=e.scope&&this.options.scoped?(e.scope in this.scopedBuffer||(this.scopedBuffer[e.scope]=[]),this.scopedBuffer[e.scope]):e.initial?this.iipBuffer:this.buffer}},{key:"validateData",value:function(e){if(this.options.values&&-1===this.options.values.indexOf(e))throw new Error("Invalid data='".concat(e,"' received, not in [").concat(this.options.values,"]"))}},{key:"getBuffer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.isAddressable()){if(null!=e&&this.options.scoped){if(!(e in this.scopedBuffer))return;if(!(t in this.scopedBuffer[e]))return;return this.scopedBuffer[e][t]}if(r){if(!(t in this.iipBuffer))return;return this.iipBuffer[t]}if(!(t in this.indexedBuffer))return;return this.indexedBuffer[t]}if(null!=e&&this.options.scoped){if(!(e in this.scopedBuffer))return;return this.scopedBuffer[e]}return r?this.iipBuffer:this.buffer}},{key:"getFromBuffer",value:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!=(r=this.getBuffer(e,t,n))?r.length:void 0)return this.options.control?r[r.length-1]:r.shift()}},{key:"get",value:function(e,t){var r;return void 0!==(r=this.getFromBuffer(e,t))?r:this.getFromBuffer(null,t,!0)}},{key:"hasIPinBuffer",value:function(e,t,r){var n,o,i,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!(null!=(n=this.getBuffer(e,t,s))?n.length:void 0))return!1;for(o=0,i=n.length;o<i;o++)if(r(n[o]))return!0;return!1}},{key:"hasIIP",value:function(e,t){return this.hasIPinBuffer(null,e,t,!0)}},{key:"has",value:function(e,t,r){return this.isAddressable()||(r=t,t=null),!!this.hasIPinBuffer(e,t,r)||!!this.hasIIP(t,r)}},{key:"length",value:function(e,t){var r;return(r=this.getBuffer(e,t))?r.length:0}},{key:"ready",value:function(e,t){return this.length(e)>0}},{key:"clear",value:function(){return this.prepareBuffer()}}])&&o(r.prototype,n),u&&o(r,u),t}(),e.exports=u},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c,u,p;u=r(8).EventEmitter,p=["all","string","number","int","object","array","boolean","color","date","bang","function","buffer","stream"],c=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=i(this,s(t).call(this))).options=r.handleOptions(e),r.sockets=[],r.node=null,r.name=null,r}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,u),r=t,(n=[{key:"handleOptions",value:function(e){if(e||(e={}),e.datatype||(e.datatype="all"),void 0===e.required&&(e.required=!1),"integer"===e.datatype&&(e.datatype="int"),-1===p.indexOf(e.datatype))throw new Error("Invalid port datatype '".concat(e.datatype,"' specified, valid are ").concat(p.join(", ")));if(e.type&&!e.schema&&(e.schema=e.type,delete e.type),e.schema&&-1===e.schema.indexOf("/"))throw new Error("Invalid port schema '".concat(e.schema,"' specified. Should be URL or MIME type"));return e}},{key:"getId",value:function(){return this.node&&this.name?"".concat(this.node," ").concat(this.name.toUpperCase()):"Port"}},{key:"getDataType",value:function(){return this.options.datatype}},{key:"getSchema",value:function(){return this.options.schema||null}},{key:"getDescription",value:function(){return this.options.description}},{key:"attach",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isAddressable()&&null!==t||(t=this.sockets.length),this.sockets[t]=e,this.attachSocket(e,t),!this.isAddressable())return this.emit("attach",e);this.emit("attach",e,t)}},{key:"attachSocket",value:function(){}},{key:"detach",value:function(e){var t;if(-1!==(t=this.sockets.indexOf(e))){if(this.sockets[t]=void 0,!this.isAddressable())return this.emit("detach",e);this.emit("detach",e,t)}}},{key:"isAddressable",value:function(){return!!this.options.addressable}},{key:"isBuffered",value:function(){return!!this.options.buffered}},{key:"isRequired",value:function(){return!!this.options.required}},{key:"isAttached",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.isAddressable()&&null!==e?!!this.sockets[e]:!!this.sockets.length}},{key:"listAttached",value:function(){var e,t,r,n,o;for(e=[],r=t=0,n=(o=this.sockets).length;t<n;r=++t)o[r]&&e.push(r);return e}},{key:"isConnected",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.isAddressable()){if(null===t)throw new Error("".concat(this.getId(),": Socket ID required"));if(!this.sockets[t])throw new Error("".concat(this.getId(),": Socket ").concat(t," not available"));return this.sockets[t].isConnected()}return e=!1,this.sockets.forEach(function(t){if(t)return t.isConnected()?e=!0:void 0}),e}},{key:"canAttach",value:function(){return!0}}])&&o(r.prototype,n),c&&o(r,c),t}(),e.exports=c},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u,p,l;u=r(137),p=r(25),l=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),null==r.scoped&&(r.scoped=!0),(e=i(this,a(t).call(this,r))).cache={},e}var r,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,u),r=t,(n=[{key:"attach",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(s(a(t.prototype),"attach",this).call(this,e,r),this.isCaching()&&null!=this.cache[r])return this.send(this.cache[r],r)}},{key:"connect",value:function(){var e,t,r,n,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;for(o=this.getSockets(i),this.checkRequired(o),r=[],e=0,t=o.length;e<t;e++)(n=o[e])&&r.push(n.connect());return r}},{key:"beginGroup",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t=this.getSockets(r),this.checkRequired(t),t.forEach(function(t){if(t)return t.beginGroup(e)})}},{key:"send",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t=this.getSockets(r),this.checkRequired(t),this.isCaching()&&e!==this.cache[r]&&(this.cache[r]=e),t.forEach(function(t){if(t)return t.send(e)})}},{key:"endGroup",value:function(){var e,t,r,n,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;for(o=this.getSockets(i),this.checkRequired(o),r=[],e=0,t=o.length;e<t;e++)(n=o[e])&&r.push(n.endGroup());return r}},{key:"disconnect",value:function(){var e,t,r,n,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;for(o=this.getSockets(i),this.checkRequired(o),r=[],e=0,t=o.length;e<t;e++)(n=o[e])&&r.push(n.disconnect());return r}},{key:"sendIP",value:function(e,t,r,n){var o,i,s,a,c,u,l,h=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];for(p.isIP(e)?n=(i=e).index:i=new p(e,t,r),l=this.getSockets(n),this.checkRequired(l),"all"===i.datatype&&(i.datatype=this.getDataType()),this.getSchema()&&!i.schema&&(i.schema=this.getSchema()),this.isCaching()&&t!==(null!=(c=this.cache[n])?c.data:void 0)&&(this.cache[n]=i),a=!0,o=0,s=l.length;o<s;o++)(u=l[o])&&(a?(u.post(i,h),a=!1):(i.clonable&&(i=i.clone()),u.post(i,h)));return this}},{key:"openBracket",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.sendIP("openBracket",e,t,r)}},{key:"data",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.sendIP("data",e,t,r)}},{key:"closeBracket",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.sendIP("closeBracket",e,t,r)}},{key:"checkRequired",value:function(e){if(0===e.length&&this.isRequired())throw new Error("".concat(this.getId(),": No connections available"))}},{key:"getSockets",value:function(e){if(this.isAddressable()){if(null===e)throw new Error("".concat(this.getId()," Socket ID required"));return this.sockets[e]?[this.sockets[e]]:[]}return this.sockets}},{key:"isCaching",value:function(){return!!this.options.caching}}])&&o(r.prototype,n),l&&o(r,l),t}(),e.exports=l},function(e,t){e.exports={stringPatterns:[/'[^]*?'/g,/"[^]*?"/g,/`[^]*?`/g],prePatterns:[/\[[^]*?\]/,/{[^]*?}/,/=>\s*?\([^]*?\)/,/=\s*?function\s*?\([^]*(?=[^]*\))/,/=\s*?\([^]*(?=[^]*\))/,/\s*?=[^>][^,\)]*/],postPatterns:[/\([^]*?\)/]}},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,s,a,c,u,p,l,h,d,f,m,g,y,v,b,w,E,x,C,S=[].indexOf;c=r(45),y=r(405),C=r(87),l=r(144),h=r(78),d=r(461),u=r(16)("fbp-spec:runner"),i=r(86),p=function(e){var t;return t=r(16)("fbp-spec:runner:received"),e.on("signal",function(e){var r=e.protocol,n=e.command,o=e.payload;return t(r,n,o)})},x=function(e,t,r){var n,o,i,s,a,c,p,l,h;if(u("synthesizing fixture",e),!(n=t[e]))return r(new Error("Could not find component for topic: "+e));for("testee",(o={properties:{},inports:{},outports:{},processes:{},connections:[]}).processes.testee={component:e},i=0,a=(l=n.inPorts).length;i<a;i++)p=l[i].id,o.inports[p]={process:"testee",port:p};for(s=0,c=(h=n.outPorts).length;s<c;s++)p=h[s].id,o.outports[p]={process:"testee",port:p};return Object.keys(o.outports)<1?r(new Error("Component '"+e+"' used as fixture has no outports")):Object.keys(o.inports)<1?r(new Error("Component '"+e+"' used as fixture has no inports")):r(null,o)},f=function(e,t,r){var n;n=function(e){return null!=e.components&&"object"===o(e.components)&&Object.keys(e.components).length},function(t){if(n(e))return t(null);y.getComponents(e.client,function(r,n){return r?t(r):(e.components=n,t(null))})}(function(n){var o;if(n)return r(n);if(null==t.fixture)return x(t.topic,e.components,r);if("json"===t.fixture.type){try{o=JSON.parse(t.fixture.data)}catch(e){return r(e)}return r(null,o)}if("fbp"===t.fixture.type){try{o=h.parse(t.fixture.data)}catch(e){return r(e)}return o.properties||(o.properties={}),r(null,o)}return r(new Error("Unknown fixture type "+t.fixture.type))})},E=function(e,t,r,n,o){var s,a,c,u,p;c=e.observe(function(e){return"runtime"===e.protocol&&"packet"===e.command&&e.payload.graph===t}),p=function(e){var t,r,n,o;for(n={},t=0,r=e.length;t<r;t++)n[(o=e[t]).payload.port]=o.payload.payload;return n},a=function(e){var r,o;return"runtime"===e.protocol&&"packet"===e.command&&(e.payload.graph===t&&("data"===e.payload.event&&(o=c.signals.slice(0,c.signals.indexOf(e)+1),r=p(o),Object.keys(r).length===Object.keys(n).length)))},s=function(e){return"network"===e.protocol&&"error"===e.command?!e.payload.graph||e.payload.graph===t:"network"===e.protocol&&"processerror"===e.command?!e.payload.graph||e.payload.graph===t:"runtime"===e.protocol&&"packet"===e.command&&(e.payload.graph===t&&("data"===e.payload.event&&("error"===e.payload.port&&void 0===n.error)))},u=i.promisify(y.sendPackets),i.resolve().then(function(){return u(e,t,r)}).then(function(){return c.until(a,s)}).then(function(e){return p(e)}).nodeify(o)},g=function(e){return e.cases.filter(function(e){return!e.skip}).length>0},s=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=t,this.currentGraphId=null,this.components={},this.parentElement=null,this.options=r,null==this.options.connectTimeout&&(this.options.connectTimeout=5e3),null==this.options.commandTimeout&&(this.options.commandTimeout=3e3)}return n(e,[{key:"prepareClient",value:function(e){var t=this;null==this.client.protocol||null==this.client.address?e(null,this.client):i.resolve().then(function(){return d(t.client,{commandTimeout:t.options.commandTimeout})}).then(function(e){return t.client=e,t.parentElement&&"iframe"===e.definition.protocol&&e.transport.setParentElement(t.parentElement),e}).nodeify(e)}},{key:"connect",value:function(e){var t=this;u("connect"),this.prepareClient(function(r){var n,o,s;return r?e(r):(p(t.client),t.client.on("network",function(e){var t=e.command,r=e.payload;if("output"===t&&r.message)return console.log(r.message)}),500,n=Math.floor(t.options.connectTimeout/500),o=function(){return t.client.isConnected()?i.resolve():i.reject(new Error("Not connected to runtime"))},s=function(){return u("trying to connect"),t.client.connect()},c.retryUntil(s,o,500,n).then(function(){return t.checkCapabilities(["protocol:graph","protocol:network","protocol:runtime"])}).nodeify(e))})}},{key:"disconnect",value:function(e){var t,r=this;if(u("disconnect"),!(null!=(t=this.client)?t.isConnected():void 0))return e();i.resolve().then(function(){return r.client.disconnect()}).nodeify(e)}},{key:"checkCapabilities",value:function(e){var t,r,n,o,s;if(!this.client.isConnected())return i.reject(new Error("Not connected to runtime"));if(!(null!=(o=this.client.definition)&&null!=(s=o.capabilities)?s.length:void 0))return i.reject(new Error("Runtime provides no capabilities"));for(r=0,n=e.length;r<n;r++)if(t=e[r],-1===this.client.definition.capabilities.indexOf(t))return i.reject(new Error("Runtime doesn't provide "+t));return i.resolve()}},{key:"setupSuite",value:function(e,t){var r=this;return u("setup suite",'"'+e.name+'"'),g(e)?this.client.isConnected()?void f(this,e,function(e,n){if(e)return t(e);y.sendGraph(r.client,n,function(e,n){return r.currentGraphId=n,e?t(e):y.startNetwork(r.client,n,t)})}):t(new Error("Disconnected from runtime")):t(null)}},{key:"teardownSuite",value:function(e,t){return u("teardown suite",'"'+e.name+'"'),g(e)?this.client.isConnected()?void y.stopNetwork(this.client,this.currentGraphId,t):t(new Error("Disconnected from runtime")):t(null)}},{key:"runTest",value:function(e,t){var r,n,o,i,s,a,p,l=this;if(u("runtest",'"'+e.name+'"'),!this.client.isConnected())return t(new Error("Disconnected from runtime"));for(o=c.isArray(e.inputs)?e.inputs:[e.inputs],r=c.isArray(e.expect)?e.expect:[e.expect],p=[],n=i=0,s=o.length;0<=s?i<s:i>s;n=0<=s?++i:--i)p.push({inputs:o[n],expect:r[n]});a=function(e,t){return E(l.client,l.currentGraphId,e.inputs,e.expect,t)},c.asyncSeries(p,a,function(e,r){return e?t(e):(r.forEach(function(e,t){return p[t].actual=e}),t(null,p))})}}]),e}(),a=function(e){var t,r,n,o,i,s,a;return t=e.filter(function(e){return null!=e.actual}),n=e.filter(function(e){return null!=e.expect}),t.length<n.length?a={passed:!1,error:new Error("Only got "+actual.length+" output messages out of "+expect.length)}:(0===(i=(e=e.map(function(e){var t;e.error=null;try{l.expect(e.expect,e.actual)}catch(r){t=r,e.error=t}return e})).filter(function(e){return e.error})).length?a={passed:!0}:1===n.length?a={error:i[0].error}:n.length>1&&1===i.length?(s=e.findIndex(function(e){return e.error}),o=e[s],a={error:new Error("Expectation "+s+" of sequence failed: "+o.error.message)}):(r=e.map(function(e){var t;return(null!=(t=e.error)?t.message:void 0)||""}),a={error:new Error("Multiple failures in sequence: "+r)}),a)},w=function(e,t,r){var n,o;return t.skip?r(null,{passed:!0}):(o=c.isArray(t.inputs)?t.inputs:[t.inputs],n=c.isArray(t.expect)?t.expect:[t.expect],o.length!==n.length?r(null,{passed:!1,error:new Error("Test sequence length mismatch. Got "+o.length+" inputs and "+n.length+" expectations")}):void e.runTest(t,function(e,t){var n;return e?r(null,n={passed:!1,error:e}):((n=a(t)).error&&(n.passed=!1),r(null,n))}))},b=function(e,t,r,n){if(t.skip)return n(null,t);e.setupSuite(t,function(o){return u("setup suite",o),o?n(o,t):c.asyncSeries(t.cases,r,function(r){return u("testrun complete",r),e.teardownSuite(t,function(e){return u("teardown suite",e),n(e,t)})})})},t.getComponentSuites=function(e,t){y.getCapabilities(e.client,function(r,n){return r?t(r):S.call(n,"component:getsource")<0?t(null,[]):y.getComponentTests(e.client,function(e,r){var n;return e?t(e):(n=m(r),u("get component suites",r.length,n.length),t(null,n))})})},m=function(e){var t,r,n,o;for(t in n=[],e){o=e[t];try{r=C.loadYAML(o),n=n.concat(r)}catch(e){e;continue}}return n},v=function(e,t,r,n){var o,i,s;i=function(n,o){var i;return i=function(e){return r(t),o(e)},w(e,n,function(e,t){var r,o;for(r in t)o=t[r],n[r]=o;return n.error&&(n.error=n.error.message),u("ran test",'"testcase.name"',n.passed,e),i(null)})},o=function(t,r){return b(e,t,i,r)},u("running suites",function(){var e,r,n;for(n=[],e=0,r=t.length;e<r;e++)s=t[e],n.push(s.name);return n}()),c.asyncSeries(t,o,function(e){return n(e)})},t.Runner=s,t.runAll=v,t.runTestAndCheck=w},function(e,t,r){"use strict";var n=r(37);e.exports=new n({include:[r(142)]})},function(e,t,r){"use strict";var n=r(37);e.exports=new n({include:[r(88)],implicit:[r(415),r(416),r(417),r(418)]})},function(e,t,r){"use strict";var n;try{e.exports={base:r(430),testcase:r(431),testsuite:r(432),testsuites:r(433),expectations:r(434),testsfile:r(435)}}catch(e){n=e,console.log("fbp-spec: Failed to load schemas",n)}},function(e,t,r){"use strict";var n,o,i,s,a,c,u;s=r(16)("fbp-spec:expectation"),o=r(436),n=r(459),i=r(45),u={type:function(e,t){return o.expect(e).to.be.a(t)},equals:function(e,t){return o.expect(e).to.eql(t)},above:function(e,t){return o.expect(e).to.be.above(t)},below:function(e,t){return o.expect(e).to.be.below(t)},haveKeys:function(e,t){return o.expect(e).to.have.keys(t)},includeKeys:function(e,t){return o.expect(e).to.include.keys(t)},contains:function(e,t){return o.expect(e).to.contain(t)},noterror:function(e,t){if(null!=e?e.message:void 0)throw e}},c=function(e){var t,r,n,o;for(n in e)if(t=e[n],"path"!==n&&(r=u[n]))return(o=function(e){return r(e,t)}).toString=function(){return n+" "+t},o;throw new Error("fbp-spec: No operator matching "+Object.keys(e)+". Available: "+Object.keys(u))},a=function(e,t){var r,o;if(o={flatten:!0},e.path){if(s("extracting JSONPath from",e.path,t),!(r=n.eval(t,e.path,o)).length)throw new Error("expected JSONPath '"+e.path+"' to match data in "+JSON.stringify(t))}else r=[t];return s("matching against",r),r},t.expect=function(e,t){var r,n,o,u,p,l,h,d,f,m,g,y;for(i.isArray(e)||(e=[e]),y=[],l=0,h=e.length;l<h;l++)n=e[l],y.push(function(){var e;for(m in e=[],n)o=n[m],p=o,i.isArray(p)||(p=[p]),e.push(function(){var e,n,o;for(o=[],e=0,n=p.length;e<n;e++){if(u=p[e],s("checking port for expectation",m,u),void 0===(r=t[m]))throw new Error("No data received on port "+m);g=c(u),f=a(u,r),o.push(function(){var e,t,r;for(r=[],e=0,t=f.length;e<t;e++)d=f[e],s("checking against predicate",d,g.toString()),r.push(g(d));return r}())}return o}());return e}());return y},t.noError=function(e){return o.expect(e).to.not.exist}},function(e,t){
/*!
 * assertion-error
 * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
 * MIT Licensed
 */
/*!
 * Return a function that will copy properties from
 * one object to another excluding any originally
 * listed. Returned function will create a new `{}`.
 *
 * @param {String} excluded properties ...
 * @return {Function}
 */
function r(){var e=[].slice.call(arguments);function t(t,r){Object.keys(r).forEach(function(n){~e.indexOf(n)||(t[n]=r[n])})}return function(){for(var e=[].slice.call(arguments),r=0,n={};r<e.length;r++)t(n,e[r]);return n}}function n(e,t,o){var i=r("name","message","stack","constructor","toJSON")(t||{});for(var s in this.message=e||"Unspecified AssertionError",this.showDiff=!1,i)this[s]=i[s];if(o=o||n,Error.captureStackTrace)Error.captureStackTrace(this,o);else try{throw new Error}catch(e){this.stack=e.stack}}
/*!
 * Inherit from Error.prototype
 */
/*!
 * Primary Exports
 */
e.exports=n,n.prototype=Object.create(Error.prototype),
/*!
 * Statically set name
 */
n.prototype.name="AssertionError",
/*!
 * Ensure correct constructor
 */
n.prototype.constructor=n,n.prototype.toJSON=function(e){var t=r("constructor","toJSON","stack")({name:this.name},this);return!1!==e&&this.stack&&(t.stack=this.stack),t}},function(e,t){
/*!
 * Chai - getActual utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){return t.length>4?t[4]:e._obj}},function(e,t,r){"use strict";var n=Function.prototype.toString,o=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/;e.exports=function(e){if("function"!=typeof e)return null;var t="";if(void 0===Function.prototype.name&&void 0===e.name){var r=n.call(e).match(o);r&&(t=r[1])}else t=e.name;return t}},function(e,t){
/*!
 * Chai - getProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){var t=Object.getOwnPropertyNames(e);function r(e){-1===t.indexOf(e)&&t.push(e)}for(var n=Object.getPrototypeOf(e);null!==n;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return t}},function(e,t,r){
/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependancies
 */
var n=r(64),o=r(30);e.exports=function(e){var t=n(e),r=Object.prototype.toString.call(e);if(o.truncateThreshold&&t.length>=o.truncateThreshold){if("[object Function]"===r)return e.name&&""!==e.name?"[Function: "+e.name+"]":"[Function]";if("[object Array]"===r)return"[ Array("+e.length+") ]";if("[object Object]"===r){var i=Object.keys(e);return"{ Object ("+(i.length>2?i.splice(0,2).join(", ")+", ...":i.join(", "))+") }"}return t}return t}},function(e,t){
/*!
 * Chai - getOwnEnumerablePropertySymbols utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){return"function"!=typeof Object.getOwnPropertySymbols?[]:Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})}},function(e,t,r){"use strict";var n;r(45),n=r(16)("fbp-spec:subprocess"),t.start=function(e,t,o){var i,s,a,c,u;try{a=r(11)}catch(e){return o(e)}return null==t.timeout&&(t.timeout=300),c=!1,u="","","sh",i=["-c",e],s=a.spawn("sh",i),n("spawned","'sh "+i.join(" ")+"'"),n("waiting for output"),s.on("error",function(e){return o(e)}),s.stdout.on("data",function(e){if(e=e.toString(),e,n("sub stdout",e),!c)return n("got output, transitioning to started"),c=!0,setTimeout(o,100)}),s.stderr.on("data",function(e){if(e=e.toString(),u+=e,n("sub stderr",e),!c)return n("got stderr, failing"),c=!0,o(new Error("Subprocess wrote on stderr: '"+u+"'"))}),setTimeout(function(){if(!c)return n("timeout waiting for output, assuming started"),c=!0,o(null)},t.timeout),s}},function(e,t,r){"use strict";var n=r(48),o=r(5),i=r(153),s=(r(154),r(69));r(1),r(475);function a(e,t,r){this.props=e,this.context=t,this.refs=s,this.updater=r||i}function c(e,t,r){this.props=e,this.context=t,this.refs=s,this.updater=r||i}function u(){}a.prototype.isReactComponent={},a.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&n("85"),this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t,"setState")},a.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e,"forceUpdate")},u.prototype=a.prototype,c.prototype=new u,c.prototype.constructor=c,o(c.prototype,a.prototype),c.prototype.isPureReactComponent=!0,e.exports={Component:a,PureComponent:c}},function(e,t,r){"use strict";r(4);var n={isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){},enqueueReplaceState:function(e,t){},enqueueSetState:function(e,t){}};e.exports=n},function(e,t,r){"use strict";e.exports=!1},function(e,t,r){"use strict";var n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=n},function(e,t,r){"use strict";var n=r(483);e.exports=function(e){return n(e,!1)}},function(e,t,r){"use strict";var n=r(5),o=r(69),i=r(1),s="mixins";e.exports=function(e,t,r){var a=[],c={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},u={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},p={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var r=0;r<t.length;r++)h(e,t[r])},childContextTypes:function(e,t){e.childContextTypes=n({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=n({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=f(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=n({},e.propTypes,t)},statics:function(e,t){!function(e,t){if(!t)return;for(var r in t){var n=t[r];if(t.hasOwnProperty(r)){if(i(!(r in p),'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',r),r in e){var o=u.hasOwnProperty(r)?u[r]:null;return i("DEFINE_MANY_MERGED"===o,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",r),void(e[r]=f(e[r],n))}e[r]=n}}}(e,t)},autobind:function(){}};function l(e,t){var r=c.hasOwnProperty(t)?c[t]:null;b.hasOwnProperty(t)&&i("OVERRIDE_BASE"===r,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&i("DEFINE_MANY"===r||"DEFINE_MANY_MERGED"===r,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function h(e,r){if(r){i("function"!=typeof r,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),i(!t(r),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var n=e.prototype,o=n.__reactAutoBindPairs;for(var a in r.hasOwnProperty(s)&&p.mixins(e,r.mixins),r)if(r.hasOwnProperty(a)&&a!==s){var u=r[a],h=n.hasOwnProperty(a);if(l(h,a),p.hasOwnProperty(a))p[a](e,u);else{var d=c.hasOwnProperty(a);if("function"==typeof u&&!d&&!h&&!1!==r.autobind)o.push(a,u),n[a]=u;else if(h){var g=c[a];i(d&&("DEFINE_MANY_MERGED"===g||"DEFINE_MANY"===g),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",g,a),"DEFINE_MANY_MERGED"===g?n[a]=f(n[a],u):"DEFINE_MANY"===g&&(n[a]=m(n[a],u))}else n[a]=u}}}else;}function d(e,t){for(var r in i(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."),t)t.hasOwnProperty(r)&&(i(void 0===e[r],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",r),e[r]=t[r]);return e}function f(e,t){return function(){var r=e.apply(this,arguments),n=t.apply(this,arguments);if(null==r)return n;if(null==n)return r;var o={};return d(o,r),d(o,n),o}}function m(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function g(e,t){return t.bind(e)}var y={componentDidMount:function(){this.__isMounted=!0}},v={componentWillUnmount:function(){this.__isMounted=!1}},b={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},w=function(){};return n(w.prototype,e.prototype,b),function(e){var t=function(e,n,s){this.__reactAutoBindPairs.length&&function(e){for(var t=e.__reactAutoBindPairs,r=0;r<t.length;r+=2){var n=t[r],o=t[r+1];e[n]=g(e,o)}}(this),this.props=e,this.context=n,this.refs=o,this.updater=s||r,this.state=null;var a=this.getInitialState?this.getInitialState():null;i("object"==typeof a&&!Array.isArray(a),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=a};for(var n in t.prototype=new w,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],a.forEach(h.bind(null,t)),h(t,y),h(t,e),h(t,v),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),i(t.prototype.render,"createClass(...): Class specification must implement a `render` method."),c)t.prototype[n]||(t.prototype[n]=null);return t}}},function(e,t,r){var n=r(7),o=r(10),i=n.createFactory(o({displayName:"TheGraphSVGImage",render:function(){var e="<image ";return e=(e=(e=(e=(e=e+'xlink:href="'+this.props.src+'"')+'x="'+this.props.x+'"')+'y="'+this.props.y+'"')+'width="'+this.props.width+'"')+'height="'+this.props.height+'"',e+="/>",n.createElement("g",{className:this.props.className,dangerouslySetInnerHTML:{__html:e}})}}));e.exports=i},function(e,t,r){"use strict";e.exports={hasCachedChildNodes:1}},function(e,t,r){"use strict";var n=r(3);r(1);e.exports=function(e,t){return null==t&&n("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}},function(e,t,r){"use strict";e.exports=function(e,t,r){Array.isArray(e)?e.forEach(t,r):e&&t.call(r,e)}},function(e,t,r){"use strict";var n=r(12),o=null;e.exports=function(){return!o&&n.canUseDOM&&(o="textContent"in document.documentElement?"textContent":"innerText"),o}},function(e,t,r){"use strict";var n=r(3);var o=r(32),i=(r(1),function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._callbacks=null,this._contexts=null,this._arg=t}return e.prototype.enqueue=function(e,t){this._callbacks=this._callbacks||[],this._callbacks.push(e),this._contexts=this._contexts||[],this._contexts.push(t)},e.prototype.notifyAll=function(){var e=this._callbacks,t=this._contexts,r=this._arg;if(e&&t){e.length!==t.length&&n("24"),this._callbacks=null,this._contexts=null;for(var o=0;o<e.length;o++)e[o].call(t[o],r);e.length=0,t.length=0}},e.prototype.checkpoint=function(){return this._callbacks?this._callbacks.length:0},e.prototype.rollback=function(e){this._callbacks&&this._contexts&&(this._callbacks.length=e,this._contexts.length=e)},e.prototype.reset=function(){this._callbacks=null,this._contexts=null},e.prototype.destructor=function(){this.reset()},e}());e.exports=o.addPoolingTo(i)},function(e,t,r){"use strict";e.exports={logTopLevelRenders:!1}},function(e,t,r){"use strict";var n=r(6);function o(e){var t=e.type,r=e.nodeName;return r&&"input"===r.toLowerCase()&&("checkbox"===t||"radio"===t)}function i(e){return e._wrapperState.valueTracker}var s={_getTrackerFromNode:function(e){return i(n.getInstanceFromNode(e))},track:function(e){if(!i(e)){var t=n.getNodeFromInstance(e),r=o(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),a=""+t[r];t.hasOwnProperty(r)||"function"!=typeof s.get||"function"!=typeof s.set||(Object.defineProperty(t,r,{enumerable:s.enumerable,configurable:!0,get:function(){return s.get.call(this)},set:function(e){a=""+e,s.set.call(this,e)}}),function(e,t){e._wrapperState.valueTracker=t}(e,{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){!function(e){e._wrapperState.valueTracker=null}(e),delete t[r]}}))}},updateValueIfChanged:function(e){if(!e)return!1;var t=i(e);if(!t)return s.track(e),!0;var r,a,c=t.getValue(),u=((r=n.getNodeFromInstance(e))&&(a=o(r)?""+r.checked:r.value),a);return u!==c&&(t.setValue(u),!0)},stopTracking:function(e){var t=i(e);t&&t.stopTracking()}};e.exports=s},function(e,t,r){"use strict";var n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!n[e.type]:"textarea"===t}},function(e,t,r){"use strict";var n={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){n.currentScrollLeft=e.x,n.currentScrollTop=e.y}};e.exports=n},function(e,t,r){"use strict";var n=r(12),o=r(74),i=r(73),s=function(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t};n.canUseDOM&&("textContent"in document.documentElement||(s=function(e,t){3!==e.nodeType?i(e,o(t)):e.nodeValue=t})),e.exports=s},function(e,t,r){"use strict";e.exports=function(e){try{e.focus()}catch(e){}}},function(e,t,r){"use strict";var n={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var o=["Webkit","ms","Moz","O"];Object.keys(n).forEach(function(e){o.forEach(function(t){n[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=n[e]})});var i={isUnitlessNumber:n,shorthandPropertyExpansions:{background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}}};e.exports=i},function(e,t,r){"use strict";var n=r(40),o=(r(6),r(17),r(520)),i=(r(4),new RegExp("^["+n.ATTRIBUTE_NAME_START_CHAR+"]["+n.ATTRIBUTE_NAME_CHAR+"]*$")),s={},a={};function c(e){return!!a.hasOwnProperty(e)||!s.hasOwnProperty(e)&&(i.test(e)?(a[e]=!0,!0):(s[e]=!0,!1))}function u(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&!1===t}var p={createMarkupForID:function(e){return n.ID_ATTRIBUTE_NAME+"="+o(e)},setAttributeForID:function(e,t){e.setAttribute(n.ID_ATTRIBUTE_NAME,t)},createMarkupForRoot:function(){return n.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(e){e.setAttribute(n.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(e,t){var r=n.properties.hasOwnProperty(e)?n.properties[e]:null;if(r){if(u(r,t))return"";var i=r.attributeName;return r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===t?i+'=""':i+"="+o(t)}return n.isCustomAttribute(e)?null==t?"":e+"="+o(t):null},createMarkupForCustomAttribute:function(e,t){return c(e)&&null!=t?e+"="+o(t):""},setValueForProperty:function(e,t,r){var o=n.properties.hasOwnProperty(t)?n.properties[t]:null;if(o){var i=o.mutationMethod;if(i)i(e,r);else{if(u(o,r))return void this.deleteValueForProperty(e,t);if(o.mustUseProperty)e[o.propertyName]=r;else{var s=o.attributeName,a=o.attributeNamespace;a?e.setAttributeNS(a,s,""+r):o.hasBooleanValue||o.hasOverloadedBooleanValue&&!0===r?e.setAttribute(s,""):e.setAttribute(s,""+r)}}}else if(n.isCustomAttribute(t))return void p.setValueForAttribute(e,t,r)},setValueForAttribute:function(e,t,r){c(t)&&(null==r?e.removeAttribute(t):e.setAttribute(t,""+r))},deleteValueForAttribute:function(e,t){e.removeAttribute(t)},deleteValueForProperty:function(e,t){var r=n.properties.hasOwnProperty(t)?n.properties[t]:null;if(r){var o=r.mutationMethod;if(o)o(e,void 0);else if(r.mustUseProperty){var i=r.propertyName;r.hasBooleanValue?e[i]=!1:e[i]=""}else e.removeAttribute(r.attributeName)}else n.isCustomAttribute(t)&&e.removeAttribute(t)}};e.exports=p},function(e,t,r){"use strict";var n=r(5),o=r(99),i=r(6),s=r(20),a=(r(4),!1);function c(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=o.getValue(e);null!=t&&u(this,Boolean(e.multiple),t)}}function u(e,t,r){var n,o,s=i.getNodeFromInstance(e).options;if(t){for(n={},o=0;o<r.length;o++)n[""+r[o]]=!0;for(o=0;o<s.length;o++){var a=n.hasOwnProperty(s[o].value);s[o].selected!==a&&(s[o].selected=a)}}else{for(n=""+r,o=0;o<s.length;o++)if(s[o].value===n)return void(s[o].selected=!0);s.length&&(s[0].selected=!0)}}var p={getHostProps:function(e,t){return n({},t,{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var r=o.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=r?r:t.defaultValue,listeners:null,onChange:l.bind(e),wasMultiple:Boolean(t.multiple)},void 0===t.value||void 0===t.defaultValue||a||(a=!0)},getSelectValueContext:function(e){return e._wrapperState.initialValue},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var r=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var n=o.getValue(t);null!=n?(e._wrapperState.pendingUpdate=!1,u(e,Boolean(t.multiple),n)):r!==Boolean(t.multiple)&&(null!=t.defaultValue?u(e,Boolean(t.multiple),t.defaultValue):u(e,Boolean(t.multiple),t.multiple?[]:""))}};function l(e){var t=this._currentElement.props,r=o.executeOnChange(t,e);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),s.asap(c,this),r}e.exports=p},function(e,t,r){"use strict";var n=r(3),o=r(5),i=r(529),s=r(175),a=r(176),c=(r(530),r(1),r(4),function(e){this.construct(e)});function u(e,t){var r;if(null===e||!1===e)r=s.create(u);else if("object"==typeof e){var o=e,i=o.type;if("function"!=typeof i&&"string"!=typeof i){var p="";0,p+=function(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}(o._owner),n("130",null==i?i:typeof i,p)}"string"==typeof o.type?r=a.createInternalComponent(o):!function(e){return"function"==typeof e&&void 0!==e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}(o.type)?r=new c(o):(r=new o.type(o)).getHostNode||(r.getHostNode=r.getNativeNode)}else"string"==typeof e||"number"==typeof e?r=a.createInstanceForText(e):n("131",typeof e);return r._mountIndex=0,r._mountImage=null,r}o(c.prototype,i,{_instantiateReactComponent:u}),e.exports=u},function(e,t,r){"use strict";var n=r(3),o=r(38),i=(r(1),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(e){return null===e||!1===e?i.EMPTY:o.isValidElement(e)?"function"==typeof e.type?i.COMPOSITE:i.HOST:void n("26",e)}});e.exports=i},function(e,t,r){"use strict";var n,o={injectEmptyComponentFactory:function(e){n=e}},i={create:function(e){return n(e)}};i.injection=o,e.exports=i},function(e,t,r){"use strict";var n=r(3),o=(r(1),null),i=null;var s={createInternalComponent:function(e){return o||n("111",e.type),new o(e)},createInstanceForText:function(e){return new i(e)},isTextComponent:function(e){return e instanceof i},injection:{injectGenericComponentClass:function(e){o=e},injectTextComponentClass:function(e){i=e}}};e.exports=s},function(e,t,r){"use strict";var n=r(3),o=(r(22),r(531)),i=r(532),s=(r(1),r(103)),a=(r(4),"."),c=":";function u(e,t){return e&&"object"==typeof e&&null!=e.key?s.escape(e.key):t.toString(36)}e.exports=function(e,t,r){return null==e?0:function e(t,r,p,l){var h,d=typeof t;if("undefined"!==d&&"boolean"!==d||(t=null),null===t||"string"===d||"number"===d||"object"===d&&t.$$typeof===o)return p(l,t,""===r?a+u(t,0):r),1;var f=0,m=""===r?a:r+c;if(Array.isArray(t))for(var g=0;g<t.length;g++)f+=e(h=t[g],m+u(h,g),p,l);else{var y=i(t);if(y){var v,b=y.call(t);if(y!==t.entries)for(var w=0;!(v=b.next()).done;)f+=e(h=v.value,m+u(h,w++),p,l);else for(;!(v=b.next()).done;){var E=v.value;E&&(f+=e(h=E[1],m+s.escape(E[0])+c+u(h,0),p,l))}}else if("object"===d){var x=String(t);n("31","[object Object]"===x?"object with keys {"+Object.keys(t).join(", ")+"}":x,"")}}return f}(e,"",t,r)}},function(e,t,r){"use strict";var n,o,i,s,a,c,u,p=r(48),l=r(22);r(1),r(4);function h(e){var t=Function.prototype.toString,r=Object.prototype.hasOwnProperty,n=RegExp("^"+t.call(r).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var o=t.call(e);return n.test(o)}catch(e){return!1}}if("function"==typeof Array.from&&"function"==typeof Map&&h(Map)&&null!=Map.prototype&&"function"==typeof Map.prototype.keys&&h(Map.prototype.keys)&&"function"==typeof Set&&h(Set)&&null!=Set.prototype&&"function"==typeof Set.prototype.keys&&h(Set.prototype.keys)){var d=new Map,f=new Set;n=function(e,t){d.set(e,t)},o=function(e){return d.get(e)},i=function(e){d.delete(e)},s=function(){return Array.from(d.keys())},a=function(e){f.add(e)},c=function(e){f.delete(e)},u=function(){return Array.from(f.keys())}}else{var m={},g={},y=function(e){return"."+e},v=function(e){return parseInt(e.substr(1),10)};n=function(e,t){var r=y(e);m[r]=t},o=function(e){var t=y(e);return m[t]},i=function(e){var t=y(e);delete m[t]},s=function(){return Object.keys(m).map(v)},a=function(e){var t=y(e);g[t]=!0},c=function(e){var t=y(e);delete g[t]},u=function(){return Object.keys(g).map(v)}}var b=[];function w(e){var t=o(e);if(t){var r=t.childIDs;i(e),r.forEach(w)}}function E(e,t,r){return"\n    in "+(e||"Unknown")+(t?" (at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+")":r?" (created by "+r+")":"")}function x(e){return null==e?"#empty":"string"==typeof e||"number"==typeof e?"#text":"string"==typeof e.type?e.type:e.type.displayName||e.type.name||"Unknown"}function C(e){var t,r=S.getDisplayName(e),n=S.getElement(e),o=S.getOwnerID(e);return o&&(t=S.getDisplayName(o)),E(r,n&&n._source,t)}var S={onSetChildren:function(e,t){var r=o(e);r||p("144"),r.childIDs=t;for(var n=0;n<t.length;n++){var i=t[n],s=o(i);s||p("140"),null==s.childIDs&&"object"==typeof s.element&&null!=s.element&&p("141"),s.isMounted||p("71"),null==s.parentID&&(s.parentID=e),s.parentID!==e&&p("142",i,s.parentID,e)}},onBeforeMountComponent:function(e,t,r){n(e,{element:t,parentID:r,text:null,childIDs:[],isMounted:!1,updateCount:0})},onBeforeUpdateComponent:function(e,t){var r=o(e);r&&r.isMounted&&(r.element=t)},onMountComponent:function(e){var t=o(e);t||p("144"),t.isMounted=!0,0===t.parentID&&a(e)},onUpdateComponent:function(e){var t=o(e);t&&t.isMounted&&t.updateCount++},onUnmountComponent:function(e){var t=o(e);t&&(t.isMounted=!1,0===t.parentID&&c(e));b.push(e)},purgeUnmountedComponents:function(){if(!S._preventPurging){for(var e=0;e<b.length;e++){w(b[e])}b.length=0}},isMounted:function(e){var t=o(e);return!!t&&t.isMounted},getCurrentStackAddendum:function(e){var t="";if(e){var r=x(e),n=e._owner;t+=E(r,e._source,n&&n.getName())}var o=l.current,i=o&&o._debugID;return t+=S.getStackAddendumByID(i)},getStackAddendumByID:function(e){for(var t="";e;)t+=C(e),e=S.getParentID(e);return t},getChildIDs:function(e){var t=o(e);return t?t.childIDs:[]},getDisplayName:function(e){var t=S.getElement(e);return t?x(t):null},getElement:function(e){var t=o(e);return t?t.element:null},getOwnerID:function(e){var t=S.getElement(e);return t&&t._owner?t._owner._debugID:null},getParentID:function(e){var t=o(e);return t?t.parentID:null},getSource:function(e){var t=o(e),r=t?t.element:null;return null!=r?r._source:null},getText:function(e){var t=S.getElement(e);return"string"==typeof t?t:"number"==typeof t?""+t:null},getUpdateCount:function(e){var t=o(e);return t?t.updateCount:0},getRootIDs:u,getRegisteredIDs:s,pushNonStandardWarningStack:function(e,t){if("function"==typeof console.reactStack){var r=[],n=l.current,o=n&&n._debugID;try{for(e&&r.push({name:o?S.getDisplayName(o):null,fileName:t?t.fileName:null,lineNumber:t?t.lineNumber:null});o;){var i=S.getElement(o),s=S.getParentID(o),a=S.getOwnerID(o),c=a?S.getDisplayName(a):null,u=i&&i._source;r.push({name:c,fileName:u?u.fileName:null,lineNumber:u?u.lineNumber:null}),o=s}}catch(e){}console.reactStack(r)}},popNonStandardWarningStack:function(){"function"==typeof console.reactStackEnd&&console.reactStackEnd()}};e.exports=S},function(e,t,r){"use strict";var n=r(19),o={listen:function(e,t,r){return e.addEventListener?(e.addEventListener(t,r,!1),{remove:function(){e.removeEventListener(t,r,!1)}}):e.attachEvent?(e.attachEvent("on"+t,r),{remove:function(){e.detachEvent("on"+t,r)}}):void 0},capture:function(e,t,r){return e.addEventListener?(e.addEventListener(t,r,!0),{remove:function(){e.removeEventListener(t,r,!0)}}):{remove:n}},registerDefault:function(){}};e.exports=o},function(e,t,r){"use strict";var n=r(544),o=r(546),i=r(169),s=r(181);var a={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=s();return{focusedElem:e,selectionRange:a.hasSelectionCapabilities(e)?a.getSelection(e):null}},restoreSelection:function(e){var t,r=s(),n=e.focusedElem,c=e.selectionRange;r!==n&&(t=n,o(document.documentElement,t))&&(a.hasSelectionCapabilities(n)&&a.setSelection(n,c),i(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var r=document.selection.createRange();r.parentElement()===e&&(t={start:-r.moveStart("character",-e.value.length),end:-r.moveEnd("character",-e.value.length)})}else t=n.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var r=t.start,o=t.end;if(void 0===o&&(o=r),"selectionStart"in e)e.selectionStart=r,e.selectionEnd=Math.min(o,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var i=e.createTextRange();i.collapse(!0),i.moveStart("character",r),i.moveEnd("character",o-r),i.select()}else n.setOffsets(e,t)}};e.exports=a},function(e,t,r){"use strict";e.exports=function(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}},function(e,t,r){"use strict";var n=r(3),o=r(42),i=r(40),s=r(38),a=r(75),c=(r(22),r(6)),u=r(561),p=r(562),l=r(164),h=r(52),d=(r(17),r(563)),f=r(41),m=r(104),g=r(20),y=r(69),v=r(173),b=(r(1),r(73)),w=r(102),E=(r(4),i.ID_ATTRIBUTE_NAME),x=i.ROOT_ATTRIBUTE_NAME,C=1,S=9,k=11,P={};function _(e){return e?e.nodeType===S?e.documentElement:e.firstChild:null}function A(e,t,r,n,o){var i;if(l.logTopLevelRenders){var s=e._currentElement.props.child.type;i="React mount: "+("string"==typeof s?s:s.displayName||s.name),console.time(i)}var a=f.mountComponent(e,r,null,u(e,t),o,0);i&&console.timeEnd(i),e._renderedComponent._topLevelWrapper=e,F._mountImageIntoNode(a,t,e,n,r)}function D(e,t,r,n){var o=g.ReactReconcileTransaction.getPooled(!r&&p.useCreateElement);o.perform(A,null,e,t,o,r,n),g.ReactReconcileTransaction.release(o)}function O(e,t,r){for(0,f.unmountComponent(e,r),t.nodeType===S&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function T(e){var t=_(e);if(t){var r=c.getInstanceFromNode(t);return!(!r||!r._hostParent)}}function N(e){return!(!e||e.nodeType!==C&&e.nodeType!==S&&e.nodeType!==k)}function I(e){var t=function(e){var t=_(e),r=t&&c.getInstanceFromNode(t);return r&&!r._hostParent?r:null}(e);return t?t._hostContainerInfo._topLevelWrapper:null}var R=1,j=function(){this.rootID=R++};j.prototype.isReactComponent={},j.prototype.render=function(){return this.props.child},j.isReactTopLevelWrapper=!0;var F={TopLevelWrapper:j,_instancesByReactRootID:P,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,r,n,o){return F.scrollMonitor(n,function(){m.enqueueElementInternal(e,t,r),o&&m.enqueueCallbackInternal(e,o)}),e},_renderNewRootComponent:function(e,t,r,o){N(t)||n("37"),a.ensureScrollValueMonitoring();var i=v(e,!1);g.batchedUpdates(D,i,t,r,o);var s=i._instance.rootID;return P[s]=i,i},renderSubtreeIntoContainer:function(e,t,r,o){return null!=e&&h.has(e)||n("38"),F._renderSubtreeIntoContainer(e,t,r,o)},_renderSubtreeIntoContainer:function(e,t,r,o){m.validateCallback(o,"ReactDOM.render"),s.isValidElement(t)||n("39","string"==typeof t?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof t?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=t&&void 0!==t.props?" This may be caused by unintentionally loading two independent copies of React.":"");var i,a=s.createElement(j,{child:t});if(e){var c=h.get(e);i=c._processChildContext(c._context)}else i=y;var u=I(r);if(u){var p=u._currentElement.props.child;if(w(p,t)){var l=u._renderedComponent.getPublicInstance(),d=o&&function(){o.call(l)};return F._updateRootComponent(u,a,i,r,d),l}F.unmountComponentAtNode(r)}var f,g=_(r),v=g&&!(!(f=g).getAttribute||!f.getAttribute(E)),b=T(r),x=v&&!u&&!b,C=F._renderNewRootComponent(a,r,x,i)._renderedComponent.getPublicInstance();return o&&o.call(C),C},render:function(e,t,r){return F._renderSubtreeIntoContainer(null,e,t,r)},unmountComponentAtNode:function(e){N(e)||n("40");var t=I(e);if(!t){T(e),1===e.nodeType&&e.hasAttribute(x);return!1}return delete P[t._instance.rootID],g.batchedUpdates(O,t,e,!1),!0},_mountImageIntoNode:function(e,t,r,i,s){if(N(t)||n("41"),i){var a=_(t);if(d.canReuseMarkup(e,a))return void c.precacheNode(r,a);var u=a.getAttribute(d.CHECKSUM_ATTR_NAME);a.removeAttribute(d.CHECKSUM_ATTR_NAME);var p=a.outerHTML;a.setAttribute(d.CHECKSUM_ATTR_NAME,u);var l=e,h=function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++)if(e.charAt(n)!==t.charAt(n))return n;return e.length===t.length?-1:r}(l,p),f=" (client) "+l.substring(h-20,h+20)+"\n (server) "+p.substring(h-20,h+20);t.nodeType===S&&n("42",f)}if(t.nodeType===S&&n("43"),s.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);o.insertTreeBefore(t,e,null)}else b(t,e),c.precacheNode(r,t.firstChild)}};e.exports=F},function(e,t,r){"use strict";var n=r(174);e.exports=function(e){for(var t;(t=e._renderedNodeType)===n.COMPOSITE;)e=e._renderedComponent;return t===n.HOST?e._renderedComponent:t===n.EMPTY?null:void 0}},function(e,t,r){var n=r(7),o=r(13),i=r(10),s=r(68),a=r(70),c={container:{},rect:{ref:"rect",className:"context-modal-bg"}},u={createModalBackgroundGroup:s.createGroup,createModalBackgroundRect:s.createRect},p=n.createFactory(i({displayName:"TheGraphModalBG",componentDidMount:function(){var e=o.findDOMNode(this),t=this.refs.rect;e.addEventListener("mousedown",function(e){e&&e.target===t&&this.hideModal()}.bind(this))},hideModal:function(e){this.props.triggerHideContext()},render:function(){var e={width:this.props.width,height:this.props.height};e=a(c.rect,e);var t=[u.createModalBackgroundRect.call(this,e),this.props.children],r=a(c.container,{});return u.createModalBackgroundGroup.call(this,r,t)}}));e.exports={ModalBG:p,config:c,factories:u}},function(e,t,r){var n=r(7),o=r(10),i=n.createFactory(o({displayName:"TheGraphTextBG",render:function(){var e=this.props.text;e||(e="");var t=this.props.height,r=e.length*this.props.height*2/3,o=this.props.height/2,i=this.props.x,s=this.props.y-t/2;return"center"===this.props.halign&&(i-=r/2,"middle"),"right"===this.props.halign&&(i-=r,"end"),n.createElement("g",{className:this.props.className?this.props.className:"text-bg"},n.createElement("rect",{className:"text-bg-rect",x:i,y:s,rx:o,ry:o,height:1.1*t,width:r}),n.createElement("text",{className:this.props.textClassName?this.props.textClassName:"text-bg-text",x:this.props.x,y:this.props.y,children:e}))}}));e.exports=i},function(e,t){FONT_AWESOME={"500px":"","address-book":"","address-book-o":"","address-card":"","address-card-o":"",adjust:"",adn:"","align-center":"","align-justify":"","align-left":"","align-right":"",amazon:"",ambulance:"","american-sign-language-interpreting":"",anchor:"",android:"",angellist:"","angle-double-down":"","angle-double-left":"","angle-double-right":"","angle-double-up":"","angle-down":"","angle-left":"","angle-right":"","angle-up":"",apple:"",archive:"","area-chart":"","arrow-circle-down":"","arrow-circle-left":"","arrow-circle-o-down":"","arrow-circle-o-left":"","arrow-circle-o-right":"","arrow-circle-o-up":"","arrow-circle-right":"","arrow-circle-up":"","arrow-down":"","arrow-left":"","arrow-right":"","arrow-up":"",arrows:"","arrows-alt":"","arrows-h":"","arrows-v":"","asl-interpreting":"","assistive-listening-systems":"",asterisk:"",at:"","audio-description":"",automobile:"",backward:"","balance-scale":"",ban:"",bandcamp:"",bank:"","bar-chart":"","bar-chart-o":"",barcode:"",bars:"",bath:"",bathtub:"",battery:"","battery-0":"","battery-1":"","battery-2":"","battery-3":"","battery-4":"","battery-empty":"","battery-full":"","battery-half":"","battery-quarter":"","battery-three-quarters":"",bed:"",beer:"",behance:"","behance-square":"",bell:"","bell-o":"","bell-slash":"","bell-slash-o":"",bicycle:"",binoculars:"","birthday-cake":"",bitbucket:"","bitbucket-square":"",bitcoin:"","black-tie":"",blind:"",bluetooth:"","bluetooth-b":"",bold:"",bolt:"",bomb:"",book:"",bookmark:"","bookmark-o":"",braille:"",briefcase:"",btc:"",bug:"",building:"","building-o":"",bullhorn:"",bullseye:"",bus:"",buysellads:"",cab:"",calculator:"",calendar:"","calendar-check-o":"","calendar-minus-o":"","calendar-o":"","calendar-plus-o":"","calendar-times-o":"",camera:"","camera-retro":"",car:"","caret-down":"","caret-left":"","caret-right":"","caret-square-o-down":"","caret-square-o-left":"","caret-square-o-right":"","caret-square-o-up":"","caret-up":"","cart-arrow-down":"","cart-plus":"",cc:"","cc-amex":"","cc-diners-club":"","cc-discover":"","cc-jcb":"","cc-mastercard":"","cc-paypal":"","cc-stripe":"","cc-visa":"",certificate:"",chain:"","chain-broken":"",check:"","check-circle":"","check-circle-o":"","check-square":"","check-square-o":"","chevron-circle-down":"","chevron-circle-left":"","chevron-circle-right":"","chevron-circle-up":"","chevron-down":"","chevron-left":"","chevron-right":"","chevron-up":"",child:"",chrome:"",circle:"","circle-o":"","circle-o-notch":"","circle-thin":"",clipboard:"","clock-o":"",clone:"",close:"",cloud:"","cloud-download":"","cloud-upload":"",cny:"",code:"","code-fork":"",codepen:"",codiepie:"",coffee:"",cog:"",cogs:"",columns:"",comment:"","comment-o":"",commenting:"","commenting-o":"",comments:"","comments-o":"",compass:"",compress:"",connectdevelop:"",contao:"",copy:"",copyright:"","creative-commons":"","credit-card":"","credit-card-alt":"",crop:"",crosshairs:"",css3:"",cube:"",cubes:"",cut:"",cutlery:"",dashboard:"",dashcube:"",database:"",deaf:"",deafness:"",dedent:"",delicious:"",desktop:"",deviantart:"",diamond:"",digg:"",dollar:"","dot-circle-o":"",download:"",dribbble:"","drivers-license":"","drivers-license-o":"",dropbox:"",drupal:"",edge:"",edit:"",eercast:"",eject:"","ellipsis-h":"","ellipsis-v":"",empire:"",envelope:"","envelope-o":"","envelope-open":"","envelope-open-o":"","envelope-square":"",envira:"",eraser:"",etsy:"",eur:"",euro:"",exchange:"",exclamation:"","exclamation-circle":"","exclamation-triangle":"",expand:"",expeditedssl:"","external-link":"","external-link-square":"",eye:"","eye-slash":"",eyedropper:"",fa:"",facebook:"","facebook-f":"","facebook-official":"","facebook-square":"","fast-backward":"","fast-forward":"",fax:"",feed:"",female:"","fighter-jet":"",file:"","file-archive-o":"","file-audio-o":"","file-code-o":"","file-excel-o":"","file-image-o":"","file-movie-o":"","file-o":"","file-pdf-o":"","file-photo-o":"","file-picture-o":"","file-powerpoint-o":"","file-sound-o":"","file-text":"","file-text-o":"","file-video-o":"","file-word-o":"","file-zip-o":"","files-o":"",film:"",filter:"",fire:"","fire-extinguisher":"",firefox:"","first-order":"",flag:"","flag-checkered":"","flag-o":"",flash:"",flask:"",flickr:"","floppy-o":"",folder:"","folder-o":"","folder-open":"","folder-open-o":"",font:"","font-awesome":"",fonticons:"","fort-awesome":"",forumbee:"",forward:"",foursquare:"","free-code-camp":"","frown-o":"","futbol-o":"",gamepad:"",gavel:"",gbp:"",ge:"",gear:"",gears:"",genderless:"","get-pocket":"",gg:"","gg-circle":"",gift:"",git:"","git-square":"",github:"","github-alt":"","github-square":"",gitlab:"",gittip:"",glass:"",glide:"","glide-g":"",globe:"",google:"","google-plus":"","google-plus-circle":"","google-plus-official":"","google-plus-square":"","google-wallet":"","graduation-cap":"",gratipay:"",grav:"",group:"","h-square":"","hacker-news":"","hand-grab-o":"","hand-lizard-o":"","hand-o-down":"","hand-o-left":"","hand-o-right":"","hand-o-up":"","hand-paper-o":"","hand-peace-o":"","hand-pointer-o":"","hand-rock-o":"","hand-scissors-o":"","hand-spock-o":"","hand-stop-o":"","handshake-o":"","hard-of-hearing":"",hashtag:"","hdd-o":"",header:"",headphones:"",heart:"","heart-o":"",heartbeat:"",history:"",home:"","hospital-o":"",hotel:"",hourglass:"","hourglass-1":"","hourglass-2":"","hourglass-3":"","hourglass-end":"","hourglass-half":"","hourglass-o":"","hourglass-start":"",houzz:"",html5:"","i-cursor":"","id-badge":"","id-card":"","id-card-o":"",ils:"",image:"",imdb:"",inbox:"",indent:"",industry:"",info:"","info-circle":"",inr:"",instagram:"",institution:"","internet-explorer":"",intersex:"",ioxhost:"",italic:"",joomla:"",jpy:"",jsfiddle:"",key:"","keyboard-o":"",krw:"",language:"",laptop:"",lastfm:"","lastfm-square":"",leaf:"",leanpub:"",legal:"","lemon-o":"","level-down":"","level-up":"","life-bouy":"","life-buoy":"","life-ring":"","life-saver":"","lightbulb-o":"","line-chart":"",link:"",linkedin:"","linkedin-square":"",linode:"",linux:"",list:"","list-alt":"","list-ol":"","list-ul":"","location-arrow":"",lock:"","long-arrow-down":"","long-arrow-left":"","long-arrow-right":"","long-arrow-up":"","low-vision":"",magic:"",magnet:"","mail-forward":"","mail-reply":"","mail-reply-all":"",male:"",map:"","map-marker":"","map-o":"","map-pin":"","map-signs":"",mars:"","mars-double":"","mars-stroke":"","mars-stroke-h":"","mars-stroke-v":"",maxcdn:"",meanpath:"",medium:"",medkit:"",meetup:"","meh-o":"",mercury:"",microchip:"",microphone:"","microphone-slash":"",minus:"","minus-circle":"","minus-square":"","minus-square-o":"",mixcloud:"",mobile:"","mobile-phone":"",modx:"",money:"","moon-o":"","mortar-board":"",motorcycle:"","mouse-pointer":"",music:"",navicon:"",neuter:"","newspaper-o":"","object-group":"","object-ungroup":"",odnoklassniki:"","odnoklassniki-square":"",opencart:"",openid:"",opera:"","optin-monster":"",outdent:"",pagelines:"","paint-brush":"","paper-plane":"","paper-plane-o":"",paperclip:"",paragraph:"",paste:"",pause:"","pause-circle":"","pause-circle-o":"",paw:"",paypal:"",pencil:"","pencil-square":"","pencil-square-o":"",percent:"",phone:"","phone-square":"",photo:"","picture-o":"","pie-chart":"","pied-piper":"","pied-piper-alt":"","pied-piper-pp":"",pinterest:"","pinterest-p":"","pinterest-square":"",plane:"",play:"","play-circle":"","play-circle-o":"",plug:"",plus:"","plus-circle":"","plus-square":"","plus-square-o":"",podcast:"","power-off":"",print:"","product-hunt":"","puzzle-piece":"",qq:"",qrcode:"",question:"","question-circle":"","question-circle-o":"",quora:"","quote-left":"","quote-right":"",ra:"",random:"",ravelry:"",rebel:"",recycle:"",reddit:"","reddit-alien":"","reddit-square":"",refresh:"",registered:"",remove:"",renren:"",reorder:"",repeat:"",reply:"","reply-all":"",resistance:"",retweet:"",rmb:"",road:"",rocket:"","rotate-left":"","rotate-right":"",rouble:"",rss:"","rss-square":"",rub:"",ruble:"",rupee:"",s15:"",safari:"",save:"",scissors:"",scribd:"",search:"","search-minus":"","search-plus":"",sellsy:"",send:"","send-o":"",server:"",share:"","share-alt":"","share-alt-square":"","share-square":"","share-square-o":"",shekel:"",sheqel:"",shield:"",ship:"",shirtsinbulk:"","shopping-bag":"","shopping-basket":"","shopping-cart":"",shower:"","sign-in":"","sign-language":"","sign-out":"",signal:"",signing:"",simplybuilt:"",sitemap:"",skyatlas:"",skype:"",slack:"",sliders:"",slideshare:"","smile-o":"",snapchat:"","snapchat-ghost":"","snapchat-square":"","snowflake-o":"","soccer-ball-o":"",sort:"","sort-alpha-asc":"","sort-alpha-desc":"","sort-amount-asc":"","sort-amount-desc":"","sort-asc":"","sort-desc":"","sort-down":"","sort-numeric-asc":"","sort-numeric-desc":"","sort-up":"",soundcloud:"","space-shuttle":"",spinner:"",spoon:"",spotify:"",square:"","square-o":"","stack-exchange":"","stack-overflow":"",star:"","star-half":"","star-half-empty":"","star-half-full":"","star-half-o":"","star-o":"",steam:"","steam-square":"","step-backward":"","step-forward":"",stethoscope:"","sticky-note":"","sticky-note-o":"",stop:"","stop-circle":"","stop-circle-o":"","street-view":"",strikethrough:"",stumbleupon:"","stumbleupon-circle":"",subscript:"",subway:"",suitcase:"","sun-o":"",superpowers:"",superscript:"",support:"",table:"",tablet:"",tachometer:"",tag:"",tags:"",tasks:"",taxi:"",telegram:"",television:"","tencent-weibo":"",terminal:"","text-height":"","text-width":"",th:"","th-large":"","th-list":"",themeisle:"",thermometer:"","thermometer-0":"","thermometer-1":"","thermometer-2":"","thermometer-3":"","thermometer-4":"","thermometer-empty":"","thermometer-full":"","thermometer-half":"","thermometer-quarter":"","thermometer-three-quarters":"","thumb-tack":"","thumbs-down":"","thumbs-o-down":"","thumbs-o-up":"","thumbs-up":"",ticket:"",times:"","times-circle":"","times-circle-o":"","times-rectangle":"","times-rectangle-o":"",tint:"","toggle-down":"","toggle-left":"","toggle-off":"","toggle-on":"","toggle-right":"","toggle-up":"",trademark:"",train:"",transgender:"","transgender-alt":"",trash:"","trash-o":"",tree:"",trello:"",tripadvisor:"",trophy:"",truck:"",try:"",tty:"",tumblr:"","tumblr-square":"","turkish-lira":"",tv:"",twitch:"",twitter:"","twitter-square":"",umbrella:"",underline:"",undo:"","universal-access":"",university:"",unlink:"",unlock:"","unlock-alt":"",unsorted:"",upload:"",usb:"",usd:"",user:"","user-circle":"","user-circle-o":"","user-md":"","user-o":"","user-plus":"","user-secret":"","user-times":"",users:"",vcard:"","vcard-o":"",venus:"","venus-double":"","venus-mars":"",viacoin:"",viadeo:"","viadeo-square":"","video-camera":"",vimeo:"","vimeo-square":"",vine:"",vk:"","volume-control-phone":"","volume-down":"","volume-off":"","volume-up":"",warning:"",wechat:"",weibo:"",weixin:"",whatsapp:"",wheelchair:"","wheelchair-alt":"",wifi:"","wikipedia-w":"","window-close":"","window-close-o":"","window-maximize":"","window-minimize":"","window-restore":"",windows:"",won:"",wordpress:"",wpbeginner:"",wpexplorer:"",wpforms:"",wrench:"",xing:"","xing-square":"","y-combinator":"","y-combinator-square":"",yahoo:"",yc:"","yc-square":"",yelp:"",yen:"",yoast:"",youtube:"","youtube-play":"","youtube-square":""},e.exports=FONT_AWESOME},function(e,t){function r(e,t,r,n,o,i){try{e.strokeStyle=i.edgeColors[0],o&&(e.strokeStyle=i.edgeColors[o]);var s=Math.round(r.metadata.x*t)-.5,a=Math.round(r.metadata.y*t)-.5,c=Math.round(n.metadata.x*t)-.5,u=Math.round(n.metadata.y*t)-.5;e.beginPath(),e.moveTo(s,a),e.lineTo(c,u),e.stroke()}catch(e){}}e.exports={render:function(e,t,n){e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,n.width,n.height),e.lineWidth=n.lineWidth;var o=[],i=1/0,s=1/0,a=-1/0,c=-1/0,u={};if(t.nodes.forEach(function(e){!e.metadata||isNaN(e.metadata.x)||isNaN(e.metadata.y)||(o.push(e),u[e.id]=e,i=Math.min(i,e.metadata.x),s=Math.min(s,e.metadata.y),a=Math.max(a,e.metadata.x),c=Math.max(c,e.metadata.y))}.bind(this)),t.inports&&Object.keys(t.inports).forEach(function(e){var r=t.inports[e];!r.metadata||isNaN(r.metadata.x)||isNaN(r.metadata.y)||(o.push(r),i=Math.min(i,r.metadata.x),s=Math.min(s,r.metadata.y),a=Math.max(a,r.metadata.x),c=Math.max(c,r.metadata.y))}.bind(this)),t.outports&&Object.keys(t.outports).forEach(function(e){var r=t.outports[e];!r.metadata||isNaN(r.metadata.x)||isNaN(r.metadata.y)||(o.push(r),i=Math.min(i,r.metadata.x),s=Math.min(s,r.metadata.y),a=Math.max(a,r.metadata.x),c=Math.max(c,r.metadata.y))}.bind(this)),0===o.length)return{scale:1,rectangle:[0,0,0,0]};if(!(isFinite(i)&&isFinite(s)&&isFinite(a)&&isFinite(c)))throw new Error("the-graph-thumb: Invalid space spanned");i-=n.nodeSize,s-=n.nodeSize,a+=2*n.nodeSize,c+=2*n.nodeSize;var p=a-i,l=c-s,h=[];h[0]=i,h[1]=s,h[2]=p,h[3]=l;var d=p>l?n.width/p:n.height/l,f=d,m=Math.round(n.nodeSize*d)/2;return e.setTransform(1,0,0,1,0-i*d,0-s*d),t.inports&&Object.keys(t.inports).forEach(function(o){var i=t.inports[o];if(i.metadata&&!isNaN(i.metadata.x)&&!isNaN(i.metadata.y)){var s=u[i.process];if(!s)return;r(e,d,i,s,2,n)}}.bind(this)),t.outports&&Object.keys(t.outports).forEach(function(o){var i=t.outports[o];if(i.metadata&&!isNaN(i.metadata.x)&&!isNaN(i.metadata.y)){var s=u[i.process];if(!s)return;r(e,d,s,i,5,n)}}.bind(this)),t.edges.forEach(function(t){var o=u[t.from.node],i=u[t.to.node];o&&i&&r(e,d,o,i,t.metadata.route,n)}.bind(this)),o.forEach(function(t){var r=Math.round(t.metadata.x*d),o=Math.round(t.metadata.y*d);e.strokeStyle=n.strokeStyle,e.fillStyle=n.fillStyle,e.beginPath(),t.process&&!t.component?e.arc(r,o,m/2,0,2*Math.PI,!1):e.arc(r,o,m,0,2*Math.PI,!1),e.fill(),e.stroke(),e.beginPath();var i=Math.max(m-1.5,1);t.process&&!t.component?e.arc(r,o,i/2,0,2*Math.PI,!1):e.arc(r,o,i,0,2*Math.PI,!1),e.fill()}.bind(this)),{rectangle:h,scale:f}},styleFromTheme:function(e){var t={};return"dark"===e?(t.fill="hsl(184, 8%, 10%)",t.stroke="hsl(180, 11%, 70%)",t.edgeColors=["white","hsl(  0, 100%, 46%)","hsl( 35, 100%, 46%)","hsl( 60, 100%, 46%)","hsl(135, 100%, 46%)","hsl(160, 100%, 46%)","hsl(185, 100%, 46%)","hsl(210, 100%, 46%)","hsl(285, 100%, 46%)","hsl(310, 100%, 46%)","hsl(335, 100%, 46%)"]):(t.fill="hsl(184, 8%, 75%)",t.stroke="hsl(180, 11%, 20%)",t.edgeColors=["hsl(  0,   0%, 50%)","hsl(  0, 100%, 40%)","hsl( 29, 100%, 40%)","hsl( 47, 100%, 40%)","hsl(138, 100%, 40%)","hsl(160,  73%, 50%)","hsl(181, 100%, 40%)","hsl(216, 100%, 40%)","hsl(260, 100%, 40%)","hsl(348, 100%, 50%)","hsl(328, 100%, 40%)"]),t}}},function(e,t){var r={};function n(e){return JSON.parse(JSON.stringify(e))}function o(e){var t=60466176;return e+"_"+(t=Math.floor(Math.random()*t)).toString(36)}e.exports={copy:function(e,t){r={nodes:[],edges:[]};var i,s,a={};for(i=0,s=t.length;i<s;i++){var c=e.getNode(t[i]),u=n(c);u.id=o(c.component),r.nodes.push(u),a[c.id]=u.id}for(i=0,s=e.edges.length;i<s;i++){var p=e.edges[i],l=p.from.node,h=p.to.node;if(a.hasOwnProperty(l)&&a.hasOwnProperty(h)){var d=n(p);d.from.node=a[l],d.to.node=a[h],r.edges.push(d)}}},paste:function(e){var t,i,s={},a={nodes:[],edges:[]};for(t=0,i=r.nodes.length;t<i;t++){var c=r.nodes[t],u=n(c.metadata);u.x+=36,u.y+=36;var p=e.addNode(o(c.component),c.component,u);s[c.id]=p.id,a.nodes.push(p)}for(t=0,i=r.edges.length;t<i;t++){var l,h=r.edges[t],d=n(h.metadata);if(h.from.hasOwnProperty("index")||h.to.hasOwnProperty("index")){var f=h.from.index||null,m=h.to.index||null;l=e.addEdgeIndex(s[h.from.node],h.from.port,f,s[h.to.node],h.to.port,m,d)}else l=e.addEdge(s[h.from.node],h.from.port,s[h.to.node],h.to.port,d);a.edges.push(l)}return a}}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o,i,s,a,c,u,p=[].indexOf;u={Runtime:r(586),Graph:r(587),Network:r(588),Component:r(589)},i=r(14)("noflo-runtime-base:messaging:receive"),s=r(14)("noflo-runtime-base:messaging:receive:payload"),a=r(14)("noflo-runtime-base:messaging:send"),c=r(14)("noflo-runtime-base:messaging:send:payload"),o=function(){function e(t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.options||(this.options={}),this.version="0.7",this.component=new u.Component(this),this.graph=new u.Graph(this),this.network=new u.Network(this),this.runtime=new u.Runtime(this),this.context=null,null!=this.options.defaultGraph&&(this.options.defaultGraph.baseDir=this.options.baseDir,r=this._getGraphName(this.options.defaultGraph),this.context="none",this.graph.registerGraph(r,this.options.defaultGraph),this.runtime.setMainGraph(r,this.options.defaultGraph),this.network._startNetwork(this.options.defaultGraph,r,this.context,function(e){if(e)throw e})),null!=this.options.captureOutput&&this.options.captureOutput&&this.startCapture(),this.options.capabilities||(this.options.capabilities=["protocol:graph","protocol:component","protocol:network","protocol:runtime","component:setsource","component:getsource","graph:readonly","network:data","network:control","network:status"]),this.options.defaultPermissions||(this.options.defaultPermissions=[]),this.options.permissions||(this.options.permissions={})}var t,r,o;return t=e,(r=[{key:"_getGraphName",value:function(e){var t,r;return r=this.options.namespace||"default",t=e.name||"main","".concat(r,"/").concat(t)}},{key:"canDo",value:function(e,t){var r,n;return r="string"==typeof e?[e]:e,n=this.getPermitted(t),r.filter(function(e){return p.call(n,e)>=0}).length>0}},{key:"canInput",value:function(e,t,r){if("graph"===e)return this.canDo(["protocol:graph"],r);switch("".concat(e,":").concat(t)){case"component:list":return this.canDo(["protocol:component"],r);case"component:getsource":return this.canDo(["component:getsource"],r);case"component:source":return this.canDo(["component:setsource"],r);case"network:edges":return this.canDo(["network:data","protocol:network"],r);case"network:start":case"network:stop":case"network:debug":return this.canDo(["network:control","protocol:network"],r);case"network:getstatus":return this.canDo(["network:status","network:control","protocol:network"],r);case"runtime:getruntime":return!0;case"runtime:packet":return this.canDo(["protocol:runtime"],r)}return!1}},{key:"getPermitted",value:function(e){return e?this.options.permissions[e]?this.options.permissions[e]:[]:this.options.defaultPermissions}},{key:"send",value:function(e,t,r,n){return a("".concat(e," ").concat(t)),c(r)}},{key:"sendAll",value:function(e,t,r,n){}},{key:"receive",value:function(e,t,r,n){if(r||(r={}),i("".concat(e," ").concat(t)),s(r),this.canInput(e,t,r.secret))switch(this.context=n,e){case"runtime":return this.runtime.receive(t,r,n);case"graph":return this.graph.receive(t,r,n);case"network":return this.network.receive(t,r,n);case"component":return this.component.receive(t,r,n);default:return this.send(e,"error",new Error("Protocol ".concat(e," is not supported")),n)}else this.send(e,"error",new Error("".concat(e,":").concat(t," is not permitted")),n)}}])&&n(t.prototype,r),o&&n(t,o),e}(),e.exports=o,e.exports.trace=r(592),e.exports.direct=r(605)},function(e,t,r){(function(t){e.exports=b;var n=r(11),o=r(191),i=r(111),s=(i.Minimatch,r(601)),a=r(8).EventEmitter,c=r(15),u=r(110),p=r(112),l=r(602),h=r(192),d=(h.alphasort,h.alphasorti,h.setopts),f=h.ownProp,m=r(603),g=(r(61),h.childrenIgnored),y=h.isIgnored,v=r(194);function b(e,t,r){if("function"==typeof t&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return l(e,t)}return new E(e,t,r)}b.sync=l;var w=b.GlobSync=l.GlobSync;function E(e,r,n){if("function"==typeof r&&(n=r,r=null),r&&r.sync){if(n)throw new TypeError("callback provided to sync glob");return new w(e,r)}if(!(this instanceof E))return new E(e,r,n);d(this,e,r),this._didRealPath=!1;var o=this.minimatch.set.length;this.matches=new Array(o),"function"==typeof n&&(n=v(n),this.on("error",n),this.on("end",function(e){n(null,e)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===o)return c();for(var s=!0,a=0;a<o;a++)this._process(this.minimatch.set[a],a,!1,c);function c(){--i._processing,i._processing<=0&&(s?t.nextTick(function(){i._finish()}):i._finish())}s=!1}b.glob=b,b.hasMagic=function(e,t){var r=function(e,t){if(null===t||"object"!=typeof t)return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}({},t);r.noprocess=!0;var n=new E(e,r).minimatch.set;if(!e)return!1;if(n.length>1)return!0;for(var o=0;o<n[0].length;o++)if("string"!=typeof n[0][o])return!0;return!1},b.Glob=E,s(E,a),E.prototype._finish=function(){if(u(this instanceof E),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();h.finish(this),this.emit("end",this.found)}},E.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n)}function n(){0==--e&&t._finish()}},E.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var n=Object.keys(r),i=this,s=n.length;if(0===s)return t();var a=this.matches[e]=Object.create(null);n.forEach(function(r,n){r=i._makeAbs(r),o.realpath(r,i.realpathCache,function(n,o){n?"stat"===n.syscall?a[r]=!0:i.emit("error",n):a[o]=!0,0==--s&&(i.matches[e]=a,t())})})},E.prototype._mark=function(e){return h.mark(this,e)},E.prototype._makeAbs=function(e){return h.makeAbs(this,e)},E.prototype.abort=function(){this.aborted=!0,this.emit("abort")},E.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},E.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(t=0;t<n.length;t++){var o=n[t];this._processing--,this._process(o[0],o[1],o[2],o[3])}}}},E.prototype._process=function(e,t,r,n){if(u(this instanceof E),u("function"==typeof n),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,r,n]);else{for(var o,s=0;"string"==typeof e[s];)s++;switch(s){case e.length:return void this._processSimple(e.join("/"),t,n);case 0:o=null;break;default:o=e.slice(0,s).join("/")}var a,c=e.slice(s);null===o?a=".":p(o)||p(e.join("/"))?(o&&p(o)||(o="/"+o),a=o):a=o;var l=this._makeAbs(a);if(g(this,a))return n();c[0]===i.GLOBSTAR?this._processGlobStar(o,a,l,c,t,r,n):this._processReaddir(o,a,l,c,t,r,n)}},E.prototype._processReaddir=function(e,t,r,n,o,i,s){var a=this;this._readdir(r,i,function(c,u){return a._processReaddir2(e,t,r,n,o,i,u,s)})},E.prototype._processReaddir2=function(e,t,r,n,o,i,s,a){if(!s)return a();for(var u=n[0],p=!!this.minimatch.negate,l=u._glob,h=this.dot||"."===l.charAt(0),d=[],f=0;f<s.length;f++){if("."!==(g=s[f]).charAt(0)||h)(p&&!e?!g.match(u):g.match(u))&&d.push(g)}var m=d.length;if(0===m)return a();if(1===n.length&&!this.mark&&!this.stat){this.matches[o]||(this.matches[o]=Object.create(null));for(f=0;f<m;f++){var g=d[f];e&&(g="/"!==e?e+"/"+g:e+g),"/"!==g.charAt(0)||this.nomount||(g=c.join(this.root,g)),this._emitMatch(o,g)}return a()}n.shift();for(f=0;f<m;f++){g=d[f];e&&(g="/"!==e?e+"/"+g:e+g),this._process([g].concat(n),o,i,a)}a()},E.prototype._emitMatch=function(e,t){if(!this.aborted&&!y(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var r=p(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0;var o=this.statCache[r];o&&this.emit("stat",t,o),this.emit("match",t)}}},E.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var r=this,o=m("lstat\0"+e,function(n,o){if(n&&"ENOENT"===n.code)return t();var i=o&&o.isSymbolicLink();r.symlinks[e]=i,i||!o||o.isDirectory()?r._readdir(e,!1,t):(r.cache[e]="FILE",t())});o&&n.lstat(e,o)}},E.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=m("readdir\0"+e+"\0"+t,r))){if(t&&!f(this.symlinks,e))return this._readdirInGlobStar(e,r);if(f(this.cache,e)){var o=this.cache[e];if(!o||"FILE"===o)return r();if(Array.isArray(o))return r(null,o)}n.readdir(e,function(e,t,r){return function(n,o){n?e._readdirError(t,n,r):e._readdirEntries(t,o,r)}}(this,e,r))}},E.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var o=t[n];o="/"===e?e+o:e+"/"+o,this.cache[o]=!0}return this.cache[e]=t,r(null,t)}},E.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var o=new Error(t.code+" invalid cwd "+this.cwd);o.path=this.cwd,o.code=t.code,this.emit("error",o),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return r()}},E.prototype._processGlobStar=function(e,t,r,n,o,i,s){var a=this;this._readdir(r,i,function(c,u){a._processGlobStar2(e,t,r,n,o,i,u,s)})},E.prototype._processGlobStar2=function(e,t,r,n,o,i,s,a){if(!s)return a();var c=n.slice(1),u=e?[e]:[],p=u.concat(c);this._process(p,o,!1,a);var l=this.symlinks[r],h=s.length;if(l&&i)return a();for(var d=0;d<h;d++){if("."!==s[d].charAt(0)||this.dot){var f=u.concat(s[d],c);this._process(f,o,!0,a);var m=u.concat(s[d],n);this._process(m,o,!0,a)}}a()},E.prototype._processSimple=function(e,t,r){var n=this;this._stat(e,function(o,i){n._processSimple2(e,t,o,i,r)})},E.prototype._processSimple2=function(e,r,n,o,i){if(this.matches[r]||(this.matches[r]=Object.create(null)),!o)return i();if(e&&p(e)&&!this.nomount){var s=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=c.join(this.root,e):(e=c.resolve(this.root,e),s&&(e+="/"))}"win32"===t.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(r,e),i()},E.prototype._stat=function(e,t){var r=this._makeAbs(e),o="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&f(this.cache,r)){var i=this.cache[r];if(Array.isArray(i)&&(i="DIR"),!o||"DIR"===i)return t(null,i);if(o&&"FILE"===i)return t()}var s=this.statCache[r];if(void 0!==s){if(!1===s)return t(null,s);var a=s.isDirectory()?"DIR":"FILE";return o&&"FILE"===a?t():t(null,a,s)}var c=this,u=m("stat\0"+r,function(o,i){if(i&&i.isSymbolicLink())return n.stat(r,function(n,o){n?c._stat2(e,r,null,i,t):c._stat2(e,r,n,o,t)});c._stat2(e,r,o,i,t)});u&&n.lstat(r,u)},E.prototype._stat2=function(e,t,r,n,o){if(r&&("ENOENT"===r.code||"ENOTDIR"===r.code))return this.statCache[t]=!1,o();var i="/"===e.slice(-1);if(this.statCache[t]=n,"/"===t.slice(-1)&&n&&!n.isDirectory())return o(null,!1,n);var s=!0;return n&&(s=n.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,i&&"FILE"===s?o():o(null,s,n)}}).call(this,r(2))},function(e,t,r){(function(t){e.exports=p,p.realpath=p,p.sync=l,p.realpathSync=l,p.monkeypatch=function(){n.realpath=p,n.realpathSync=l},p.unmonkeypatch=function(){n.realpath=o,n.realpathSync=i};var n=r(11),o=n.realpath,i=n.realpathSync,s=t.version,a=/^v[0-5]\./.test(s),c=r(597);function u(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function p(e,t,r){if(a)return o(e,t,r);"function"==typeof t&&(r=t,t=null),o(e,t,function(n,o){u(n)?c.realpath(e,t,r):r(n,o)})}function l(e,t){if(a)return i(e,t);try{return i(e,t)}catch(r){if(u(r))return c.realpathSync(e,t);throw r}}}).call(this,r(2))},function(e,t,r){(function(e){function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.alphasort=u,t.alphasorti=c,t.setopts=function(t,r,i){i||(i={});if(i.matchBase&&-1===r.indexOf("/")){if(i.noglobstar)throw new Error("base matching requires globstar");r="**/"+r}t.silent=!!i.silent,t.pattern=r,t.strict=!1!==i.strict,t.realpath=!!i.realpath,t.realpathCache=i.realpathCache||Object.create(null),t.follow=!!i.follow,t.dot=!!i.dot,t.mark=!!i.mark,t.nodir=!!i.nodir,t.nodir&&(t.mark=!0);t.sync=!!i.sync,t.nounique=!!i.nounique,t.nonull=!!i.nonull,t.nosort=!!i.nosort,t.nocase=!!i.nocase,t.stat=!!i.stat,t.noprocess=!!i.noprocess,t.absolute=!!i.absolute,t.maxLength=i.maxLength||1/0,t.cache=i.cache||Object.create(null),t.statCache=i.statCache||Object.create(null),t.symlinks=i.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]);e.ignore.length&&(e.ignore=e.ignore.map(p))}(t,i),t.changedCwd=!1;var c=e.cwd();n(i,"cwd")?(t.cwd=o.resolve(i.cwd),t.changedCwd=t.cwd!==c):t.cwd=c;t.root=i.root||o.resolve(t.cwd,"/"),t.root=o.resolve(t.root),"win32"===e.platform&&(t.root=t.root.replace(/\\/g,"/"));t.cwdAbs=s(t.cwd)?t.cwd:l(t,t.cwd),"win32"===e.platform&&(t.cwdAbs=t.cwdAbs.replace(/\\/g,"/"));t.nomount=!!i.nomount,i.nonegate=!0,i.nocomment=!0,t.minimatch=new a(r,i),t.options=t.minimatch.options},t.ownProp=n,t.makeAbs=l,t.finish=function(e){for(var t=e.nounique,r=t?[]:Object.create(null),n=0,o=e.matches.length;n<o;n++){var i=e.matches[n];if(i&&0!==Object.keys(i).length){var s=Object.keys(i);t?r.push.apply(r,s):s.forEach(function(e){r[e]=!0})}else if(e.nonull){var a=e.minimatch.globSet[n];t?r.push(a):r[a]=!0}}t||(r=Object.keys(r));e.nosort||(r=r.sort(e.nocase?c:u));if(e.mark){for(n=0;n<r.length;n++)r[n]=e._mark(r[n]);e.nodir&&(r=r.filter(function(t){var r=!/\/$/.test(t),n=e.cache[t]||e.cache[l(e,t)];return r&&n&&(r="DIR"!==n&&!Array.isArray(n)),r}))}e.ignore.length&&(r=r.filter(function(t){return!h(e,t)}));e.found=r},t.mark=function(e,t){var r=l(e,t),n=e.cache[r],o=t;if(n){var i="DIR"===n||Array.isArray(n),s="/"===t.slice(-1);if(i&&!s?o+="/":!i&&s&&(o=o.slice(0,-1)),o!==t){var a=l(e,o);e.statCache[a]=e.statCache[r],e.cache[a]=e.cache[r]}}return o},t.isIgnored=h,t.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some(function(e){return!(!e.gmatcher||!e.gmatcher.match(t))})};var o=r(15),i=r(111),s=r(112),a=i.Minimatch;function c(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function u(e,t){return e.localeCompare(t)}function p(e){var t=null;if("/**"===e.slice(-3)){var r=e.replace(/(\/\*\*)+$/,"");t=new a(r,{dot:!0})}return{matcher:new a(e,{dot:!0}),gmatcher:t}}function l(t,r){var n=r;return n="/"===r.charAt(0)?o.join(t.root,r):s(r)||""===r?r:t.changedCwd?o.resolve(t.cwd,r):o.resolve(r),"win32"===e.platform&&(n=n.replace(/\\/g,"/")),n}function h(e,t){return!!e.ignore.length&&e.ignore.some(function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))})}}).call(this,r(2))},function(e,t){e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");Object.keys(t).forEach(function(e){n[e]=t[e]});return n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),o=e[e.length-1];return"function"==typeof n&&n!==o&&Object.keys(o).forEach(function(e){n[e]=o[e]}),n}}},function(e,t,r){var n=r(193);function o(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function i(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=n(o),e.exports.strict=n(i),o.proto=o(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return o(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})})},function(e,t){t.normalizeOptions=function(e){var t=e;return void 0===e.catchExceptions&&(t.catchExceptions=!0,window.location.search&&"debug"===window.location.search.substring(1)&&(t.catchExceptions=!1)),t},t.subscribe=function(e,t){e.addEventListener("message",function(e){var r=e.data;"string"==typeof e.data&&(r=JSON.parse(e.data)),r.protocol&&r.command&&t(r,e)})}},function(e,t,r){const n=r(0),o=r(400),i=r(26),s=r(401),a=r(469),c=r(585),u=r(608),p=r(609),l=r(57),h=r(58),d=r(617),f=r(132),m={noflo:n,underscore:o,uuid:i,"fbp-spec":s,"the-graph":a,"noflo-ui/src/JournalStore":u,"noflo-ui/runtimeinfo":p,"noflo-ui/collections":l,"noflo-ui/projects":h,"noflo-ui/icons":d};window.React=r(7),window.ReactDOM=r(13),window.TheGraph=m["the-graph"],window.require=function(e){if(void 0!==m[e])return m[e];throw new Error(`Module ${e} not available`)},window.addEventListener("WebComponentsReady",()=>{const e=function(e){const t=Math.random().toString(36).substring(7);n.graph.loadJSON(f,(r,n)=>{if(r)return void e(r);const o={defaultGraph:n,baseDir:n.baseDir,permissions:{}};o.permissions[t]=["protocol:component","protocol:runtime","protocol:graph","protocol:network","component:getsource","component:setsource"],o.label="NoFlo Development Environment",o.id="2b487ea3-287b-43f7-b7eb-806f02b402f9",o.namespace="ui",o.repository="git+https://github.com/noflo/noflo-ui.git";const i=document.createElement("button");i.id="flowhub_debug_url",i.innerText="Debug in Flowhub";const s=`https://app.flowhub.io#runtime/endpoint?${encodeURIComponent(`protocol=opener&address=${window.location.href}&id=${o.id}`)}`;i.setAttribute("href",s),document.body.appendChild(i),c.opener(o,i),e()})};window.nofloStarted=!1;let t=function(e){n.graph.loadJSON(f,(t,r)=>{t?e(t):n.createNetwork(r,(t,r)=>{t?e(t):(r.on("process-error",e=>{"function"==typeof console.error?console.error(e.error):console.log(e.error)}),e())})})};"true"===String(localStorage.getItem("flowhub-debug"))&&(t=e),t(e=>{if(e)throw e;document.body.classList.remove("loading"),window.nofloStarted=!0,setTimeout(()=>{const e=document.getElementById("loading");document.body.removeChild(e)},400)})})},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c,u,p,l,h,d,f=r(8);c=f.EventEmitter,p=r(53),h=r(201),u=function(){var e=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=i(this,s(t).call(this))).setMaxListeners(0),e.name=r,e.properties={},e.nodes=[],e.edges=[],e.initializers=[],e.inports={},e.outports={},e.groups=[],e.transaction={id:null,depth:0},e.caseSensitive=n.caseSensitive||!1,e}var n,u,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,c),n=t,(u=[{key:"getPortName",value:function(e){return this.caseSensitive?e:e.toLowerCase()}},{key:"startTransaction",value:function(e,t){if(this.transaction.id)throw Error("Nested transactions not supported");return this.transaction.id=e,this.transaction.depth=1,this.emit("startTransaction",e,t)}},{key:"endTransaction",value:function(e,t){if(!this.transaction.id)throw Error("Attempted to end non-existing transaction");return this.transaction.id=null,this.transaction.depth=0,this.emit("endTransaction",e,t)}},{key:"checkTransactionStart",value:function(){return this.transaction.id?"implicit"===this.transaction.id?this.transaction.depth+=1:void 0:this.startTransaction("implicit")}},{key:"checkTransactionEnd",value:function(){if("implicit"===this.transaction.id&&(this.transaction.depth-=1),0===this.transaction.depth)return this.endTransaction("implicit")}},{key:"setProperties",value:function(e){var t,r,n;for(r in this.checkTransactionStart(),t=p(this.properties),e)n=e[r],this.properties[r]=n;return this.emit("changeProperties",this.properties,t),this.checkTransactionEnd()}},{key:"addInport",value:function(e,t,r,n){if(this.getNode(t))return e=this.getPortName(e),this.checkTransactionStart(),this.inports[e]={process:t,port:this.getPortName(r),metadata:n},this.emit("addInport",e,this.inports[e]),this.checkTransactionEnd()}},{key:"removeInport",value:function(e){var t;if(e=this.getPortName(e),this.inports[e])return this.checkTransactionStart(),t=this.inports[e],this.setInportMetadata(e,{}),delete this.inports[e],this.emit("removeInport",e,t),this.checkTransactionEnd()}},{key:"renameInport",value:function(e,t){if(e=this.getPortName(e),t=this.getPortName(t),this.inports[e]&&t!==e)return this.checkTransactionStart(),this.inports[t]=this.inports[e],delete this.inports[e],this.emit("renameInport",e,t),this.checkTransactionEnd()}},{key:"setInportMetadata",value:function(e,t){var r,n,o;if(e=this.getPortName(e),this.inports[e]){for(n in this.checkTransactionStart(),r=p(this.inports[e].metadata),this.inports[e].metadata||(this.inports[e].metadata={}),t)null!=(o=t[n])?this.inports[e].metadata[n]=o:delete this.inports[e].metadata[n];return this.emit("changeInport",e,this.inports[e],r,t),this.checkTransactionEnd()}}},{key:"addOutport",value:function(e,t,r,n){if(this.getNode(t))return e=this.getPortName(e),this.checkTransactionStart(),this.outports[e]={process:t,port:this.getPortName(r),metadata:n},this.emit("addOutport",e,this.outports[e]),this.checkTransactionEnd()}},{key:"removeOutport",value:function(e){var t;if(e=this.getPortName(e),this.outports[e])return this.checkTransactionStart(),t=this.outports[e],this.setOutportMetadata(e,{}),delete this.outports[e],this.emit("removeOutport",e,t),this.checkTransactionEnd()}},{key:"renameOutport",value:function(e,t){if(e=this.getPortName(e),t=this.getPortName(t),this.outports[e])return this.checkTransactionStart(),this.outports[t]=this.outports[e],delete this.outports[e],this.emit("renameOutport",e,t),this.checkTransactionEnd()}},{key:"setOutportMetadata",value:function(e,t){var r,n,o;if(e=this.getPortName(e),this.outports[e]){for(n in this.checkTransactionStart(),r=p(this.outports[e].metadata),this.outports[e].metadata||(this.outports[e].metadata={}),t)null!=(o=t[n])?this.outports[e].metadata[n]=o:delete this.outports[e].metadata[n];return this.emit("changeOutport",e,this.outports[e],r,t),this.checkTransactionEnd()}}},{key:"addGroup",value:function(e,t,r){var n;return this.checkTransactionStart(),n={name:e,nodes:t,metadata:r},this.groups.push(n),this.emit("addGroup",n),this.checkTransactionEnd()}},{key:"renameGroup",value:function(e,t){var r,n,o,i;for(this.checkTransactionStart(),n=0,o=(i=this.groups).length;n<o;n++)(r=i[n])&&r.name===e&&(r.name=t,this.emit("renameGroup",e,t));return this.checkTransactionEnd()}},{key:"removeGroup",value:function(e){var t,r,n,o;for(this.checkTransactionStart(),r=0,n=(o=this.groups).length;r<n;r++)(t=o[r])&&t.name===e&&(this.setGroupMetadata(t.name,{}),this.groups.splice(this.groups.indexOf(t),1),this.emit("removeGroup",t));return this.checkTransactionEnd()}},{key:"setGroupMetadata",value:function(e,t){var r,n,o,i,s,a,c;for(this.checkTransactionStart(),o=0,s=(a=this.groups).length;o<s;o++)if((n=a[o])&&n.name===e){for(i in r=p(n.metadata),t)null!=(c=t[i])?n.metadata[i]=c:delete n.metadata[i];this.emit("changeGroup",n,r,t)}return this.checkTransactionEnd()}},{key:"addNode",value:function(e,t,r){var n;return this.checkTransactionStart(),r||(r={}),n={id:e,component:t,metadata:r},this.nodes.push(n),this.emit("addNode",n),this.checkTransactionEnd(),n}},{key:"removeNode",value:function(e){var t,r,n,o,i,s,a,c,u,p,l,h,d,f,m,g,y,v,b,w,E,x,C,S,k,P;if(v=this.getNode(e)){for(this.checkTransactionStart(),P=[],n=0,u=(E=this.edges).length;n<u;n++)(t=E[n]).from.node!==v.id&&t.to.node!==v.id||P.push(t);for(s=0,p=P.length;s<p;s++)t=P[s],this.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);for(P=[],a=0,l=(x=this.initializers).length;a<l;a++)(i=x[a]).to.node===v.id&&P.push(i);for(c=0,h=P.length;c<h;c++)i=P[c],this.removeInitial(i.to.node,i.to.port);for(w in P=[],C=this.inports)C[w].process===e&&P.push(w);for(g=0,d=P.length;g<d;g++)w=P[g],this.removeInport(w);for(w in P=[],S=this.outports)S[w].process===e&&P.push(w);for(y=0,f=P.length;y<f;y++)w=P[y],this.removeOutport(w);for(b=0,m=(k=this.groups).length;b<m;b++)(r=k[b])&&-1!==(o=r.nodes.indexOf(e))&&r.nodes.splice(o,1);return this.setNodeMetadata(e,{}),-1!==this.nodes.indexOf(v)&&this.nodes.splice(this.nodes.indexOf(v),1),this.emit("removeNode",v),this.checkTransactionEnd()}}},{key:"getNode",value:function(e){var t,r,n,o;for(t=0,r=(o=this.nodes).length;t<r;t++)if((n=o[t])&&n.id===e)return n;return null}},{key:"renameNode",value:function(e,t){var r,n,o,i,s,a,c,u,p,l,h,d,f,m,g,y,v,b;if(this.checkTransactionStart(),h=this.getNode(e)){for(h.id=t,o=0,u=(m=this.edges).length;o<u;o++)(r=m[o])&&(r.from.node===e&&(r.from.node=t),r.to.node===e&&(r.to.node=t));for(a=0,p=(g=this.initializers).length;a<p;a++)(i=g[a])&&i.to.node===e&&(i.to.node=t);for(f in y=this.inports)(d=y[f]).process===e&&(d.process=t);for(f in v=this.outports)(d=v[f]).process===e&&(d.process=t);for(c=0,l=(b=this.groups).length;c<l;c++)(n=b[c])&&-1!==(s=n.nodes.indexOf(e))&&(n.nodes[s]=t);return this.emit("renameNode",e,t),this.checkTransactionEnd()}}},{key:"setNodeMetadata",value:function(e,t){var r,n,o,i;if(o=this.getNode(e)){for(n in this.checkTransactionStart(),r=p(o.metadata),o.metadata||(o.metadata={}),t)null!=(i=t[n])?o.metadata[n]=i:delete o.metadata[n];return this.emit("changeNode",o,r,t),this.checkTransactionEnd()}}},{key:"addEdge",value:function(e,t,r,n){var o,i,s,a,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};for(t=this.getPortName(t),n=this.getPortName(n),i=0,s=(a=this.edges).length;i<s;i++)if((o=a[i]).from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n)return;if(this.getNode(e)&&this.getNode(r))return this.checkTransactionStart(),o={from:{node:e,port:t},to:{node:r,port:n},metadata:c},this.edges.push(o),this.emit("addEdge",o),this.checkTransactionEnd(),o}},{key:"addEdgeIndex",value:function(e,t,r,n,o,i){var s,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};if(this.getNode(e)&&this.getNode(n))return t=this.getPortName(t),o=this.getPortName(o),null===i&&(i=void 0),null===r&&(r=void 0),a||(a={}),this.checkTransactionStart(),s={from:{node:e,port:t,index:r},to:{node:n,port:o,index:i},metadata:a},this.edges.push(s),this.emit("addEdge",s),this.checkTransactionEnd(),s}},{key:"removeEdge",value:function(e,t,r,n){var o,i,s,a,c,u,p,l,h,d,f,m;if(this.checkTransactionStart(),t=this.getPortName(t),n=this.getPortName(n),m=[],f=[],r&&n)for(s=i=0,u=(h=this.edges).length;i<u;s=++i)(o=h[s]).from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n?(this.setEdgeMetadata(o.from.node,o.from.port,o.to.node,o.to.port,{}),m.push(o)):f.push(o);else for(s=a=0,p=(d=this.edges).length;a<p;s=++a)(o=d[s]).from.node===e&&o.from.port===t||o.to.node===e&&o.to.port===t?(this.setEdgeMetadata(o.from.node,o.from.port,o.to.node,o.to.port,{}),m.push(o)):f.push(o);for(this.edges=f,c=0,l=m.length;c<l;c++)o=m[c],this.emit("removeEdge",o);return this.checkTransactionEnd()}},{key:"getEdge",value:function(e,t,r,n){var o,i,s,a,c;for(t=this.getPortName(t),n=this.getPortName(n),s=i=0,a=(c=this.edges).length;i<a;s=++i)if((o=c[s])&&o.from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n)return o;return null}},{key:"setEdgeMetadata",value:function(e,t,r,n,o){var i,s,a,c;if(s=this.getEdge(e,t,r,n)){for(a in this.checkTransactionStart(),i=p(s.metadata),s.metadata||(s.metadata={}),o)null!=(c=o[a])?s.metadata[a]=c:delete s.metadata[a];return this.emit("changeEdge",s,i,o),this.checkTransactionEnd()}}},{key:"addInitial",value:function(e,t,r,n){var o;if(this.getNode(t))return r=this.getPortName(r),this.checkTransactionStart(),o={from:{data:e},to:{node:t,port:r},metadata:n},this.initializers.push(o),this.emit("addInitial",o),this.checkTransactionEnd(),o}},{key:"addInitialIndex",value:function(e,t,r,n,o){var i;if(this.getNode(t))return null===n&&(n=void 0),r=this.getPortName(r),this.checkTransactionStart(),i={from:{data:e},to:{node:t,port:r,index:n},metadata:o},this.initializers.push(i),this.emit("addInitial",i),this.checkTransactionEnd(),i}},{key:"addGraphInitial",value:function(e,t,r){var n;if(n=this.inports[t])return this.addInitial(e,n.process,n.port,r)}},{key:"addGraphInitialIndex",value:function(e,t,r,n){var o;if(o=this.inports[t])return this.addInitialIndex(e,o.process,o.port,r,n)}},{key:"removeInitial",value:function(e,t){var r,n,o,i,s,a,c,u,p;for(t=this.getPortName(t),this.checkTransactionStart(),p=[],u=[],o=n=0,s=(c=this.initializers).length;n<s;o=++n)(r=c[o]).to.node===e&&r.to.port===t?p.push(r):u.push(r);for(this.initializers=u,i=0,a=p.length;i<a;i++)r=p[i],this.emit("removeInitial",r);return this.checkTransactionEnd()}},{key:"removeGraphInitial",value:function(e){var t;if(t=this.inports[e])return this.removeInitial(t.process,t.port)}},{key:"toDOT",value:function(){var e,t,r,n,o,i,s,a,c,u,p,l,h,d,f,m,g;for(e=function(e){return e.replace(/\s*/g,"")},t=function(e){return e.replace(/\./g,"")},n="digraph {\n",i=0,p=(f=this.nodes).length;i<p;i++)d=f[i],n+="    ".concat(e(d.id)," [label=").concat(d.id," shape=box]\n");for(s=c=0,l=(m=this.initializers).length;c<l;s=++c)r="function"==typeof(a=m[s]).from.data?"Function":a.from.data,n+="    data".concat(s," [label=\"'").concat(r,"'\" shape=plaintext]\n"),n+="    data".concat(s," -> ").concat(e(a.to.node),"[headlabel=").concat(t(a.to.port)," labelfontcolor=blue labelfontsize=8.0]\n");for(u=0,h=(g=this.edges).length;u<h;u++)o=g[u],n+="    ".concat(e(o.from.node)," -> ").concat(e(o.to.node),"[taillabel=").concat(t(o.from.port)," headlabel=").concat(t(o.to.port)," labelfontcolor=blue labelfontsize=8.0]\n");return n+="}"}},{key:"toYUML",value:function(){var e,t,r,n,o,i,s,a,c;for(c=[],t=0,o=(s=this.initializers).length;t<o;t++)r=s[t],c.push("(start)[".concat(r.to.port,"]->(").concat(r.to.node,")"));for(n=0,i=(a=this.edges).length;n<i;n++)e=a[n],c.push("(".concat(e.from.node,")[").concat(e.from.port,"]->(").concat(e.to.node,")"));return c.join(",")}},{key:"toJSON",value:function(){var e,t,r,n,o,i,s,a,c,u,p,l,h,d,f,m,g,y,v,b,w,E,x,C,S,k;for(g in a={caseSensitive:this.caseSensitive,properties:{},inports:{},outports:{},groups:[],processes:{},connections:[]},this.name&&(a.properties.name=this.name),v=this.properties)k=v[g],a.properties[g]=k;for(y in b=this.inports)m=b[y],a.inports[y]=m;for(y in w=this.outports)m=w[y],a.outports[y]=m;for(o=0,p=(E=this.groups).length;o<p;o++)n={name:(r=E[o]).name,nodes:r.nodes},Object.keys(r.metadata).length&&(n.metadata=r.metadata),a.groups.push(n);for(s=0,l=(x=this.nodes).length;s<l;s++)f=x[s],a.processes[f.id]={component:f.component},f.metadata&&(a.processes[f.id].metadata=f.metadata);for(c=0,h=(C=this.edges).length;c<h;c++)e={src:{process:(t=C[c]).from.node,port:t.from.port,index:t.from.index},tgt:{process:t.to.node,port:t.to.port,index:t.to.index}},Object.keys(t.metadata).length&&(e.metadata=t.metadata),a.connections.push(e);for(u=0,d=(S=this.initializers).length;u<d;u++)i=S[u],a.connections.push({data:i.from.data,tgt:{process:i.to.node,port:i.to.port,index:i.to.index}});return a}},{key:"save",value:function(e,t){var n;return h.isBrowser()?t(new Error("Saving graphs not supported on browser")):(n=JSON.stringify(this.toJSON(),null,4),e.match(/\.json$/)||(e="".concat(e,".json")),r(11).writeFile(e,n,"utf-8",function(r,n){return r?t(r):t(null,e)}))}}])&&o(n.prototype,u),l&&o(n,l),t}();return e.prototype.name="",e.prototype.caseSensitive=!1,e.prototype.properties={},e.prototype.nodes=[],e.prototype.edges=[],e.prototype.initializers=[],e.prototype.inports={},e.prototype.outports={},e.prototype.groups=[],e}.call(this),t.Graph=u,t.createGraph=function(e,t){return new u(e,t)},t.loadJSON=function(e,t){var r,n,o,i,s,a,c,p,l,h,d,f,m,g,y,v,b,w,E,x,C,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(m in"string"==typeof e&&(e=JSON.parse(e)),e.properties||(e.properties={}),e.processes||(e.processes={}),e.connections||(e.connections=[]),r=e.caseSensitive||!1,(i=new u(e.properties.name,{caseSensitive:r})).startTransaction("loadJSON",S),f={},y=e.properties)C=y[m],"name"!==m&&(f[m]=C);for(c in i.setProperties(f),v=e.processes)(o=v[c]).metadata||(o.metadata={}),i.addNode(c,o.component,o.metadata);for(a=0,l=(b=e.connections).length;a<l;a++)S=(n=b[a]).metadata?n.metadata:{},void 0===n.data?"number"!=typeof n.src.index&&"number"!=typeof n.tgt.index?i.addEdge(n.src.process,i.getPortName(n.src.port),n.tgt.process,i.getPortName(n.tgt.port),S):i.addEdgeIndex(n.src.process,i.getPortName(n.src.port),n.src.index,n.tgt.process,i.getPortName(n.tgt.port),n.tgt.index,S):"number"==typeof n.tgt.index?i.addInitialIndex(n.data,n.tgt.process,i.getPortName(n.tgt.port),n.tgt.index,S):i.addInitial(n.data,n.tgt.process,i.getPortName(n.tgt.port),S);if(e.inports)for(g in w=e.inports)d=w[g],i.addInport(g,d.process,i.getPortName(d.port),d.metadata);if(e.outports)for(g in E=e.outports)d=E[g],i.addOutport(g,d.process,i.getPortName(d.port),d.metadata);if(e.groups)for(p=0,h=(x=e.groups).length;p<h;p++)s=x[p],i.addGroup(s.name,s.nodes,s.metadata||{});return i.endTransaction("loadJSON"),t(null,i)},t.loadFBP=function(e,n){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{o=r(78).parse(e,{caseSensitive:s})}catch(e){return n(e)}return t.loadJSON(o,n,i)},t.loadHTTP=function(e,t){var r;return(r=new XMLHttpRequest).onreadystatechange=function(){if(4===r.readyState)return 200!==r.status?t(new Error("Failed to load ".concat(e,": HTTP ").concat(r.status))):t(null,r.responseText)},r.open("GET",e,!0),r.send()},t.loadFile=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!h.isBrowser())return r(11).readFile(e,"utf-8",function(r,o){var s;return r?n(r):"fbp"===e.split(".").pop()?t.loadFBP(o,n,{},i):(s=JSON.parse(o),t.loadJSON(s,n,{}))});t.loadHTTP(e,function(r,i){var s;return r?n(r):"fbp"===e.split(".").pop()?t.loadFBP(i,n,o):(s=JSON.parse(i),t.loadJSON(s,n,o))})},d=function(e){var t,r,n,o,i,s,a,c,u,l,h,d,f,m,g,y,v,b,w,E;for(n=0,c=(m=p(e.groups).reverse()).length;n<c;n++)null!=(r=m[n])&&e.removeGroup(r.name);for(f in g=p(e.outports))g[f],e.removeOutport(f);for(f in y=p(e.inports))y[f],e.removeInport(f);for(e.setProperties({}),i=0,u=(v=p(e.initializers).reverse()).length;i<u;i++)o=v[i],e.removeInitial(o.to.node,o.to.port);for(s=0,l=(b=p(e.edges).reverse()).length;s<l;s++)t=b[s],e.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);for(E=[],a=0,h=(w=p(e.nodes).reverse()).length;a<h;a++)d=w[a],E.push(e.removeNode(d.id));return E},l=function(e,t){var r,n,o,i,s,a,c,u,p,l,h,f,m,g,y,v,b,w,E,x,C;for(d(e),o=0,u=(y=t.nodes).length;o<u;o++)f=y[o],e.addNode(f.id,f.component,f.metadata);for(s=0,p=(v=t.edges).length;s<p;s++)r=v[s],e.addEdge(r.from.node,r.from.port,r.to.node,r.to.port,r.metadata);for(a=0,l=(b=t.initializers).length;a<l;a++)i=b[a],e.addInitial(i.from.data,i.to.node,i.to.port,i.metadata);for(g in e.setProperties(t.properties),w=t.inports)m=w[g],e.addInport(g,m.process,m.port,m.metadata);for(g in E=t.outports)m=E[g],e.addOutport(g,m.process,m.port,m.metadata);for(C=[],c=0,h=(x=t.groups).length;c<h;c++)n=x[c],C.push(e.addGroup(n.name,n.nodes,n.metadata));return C},t.equivalent=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return JSON.stringify(e)===JSON.stringify(t)},t.mergeResolveTheirs=l},function(e,t,r){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=u(e),s=n[0],a=n[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),p=0,l=a>0?s-4:s;for(r=0;r<l;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],c[p++]=t>>16&255,c[p++]=t>>8&255,c[p++]=255&t;2===a&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,c[p++]=255&t);1===a&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,c[p++]=t>>8&255,c[p++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,i=[],s=0,a=r-o;s<a;s+=16383)i.push(p(e,s,s+16383>a?a:s+16383));1===o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)n[a]=s[a],o[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function p(e,t,r){for(var o,i,s=[],a=t;a<r;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return s.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,c=(1<<a)-1,u=c>>1,p=-7,l=r?o-1:0,h=r?-1:1,d=e[t+l];for(l+=h,i=d&(1<<-p)-1,d>>=-p,p+=a;p>0;i=256*i+e[t+l],l+=h,p-=8);for(s=i&(1<<-p)-1,i>>=-p,p+=n;p>0;s=256*s+e[t+l],l+=h,p-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),i-=u}return(d?-1:1)*s*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var s,a,c,u=8*i-o-1,p=(1<<u)-1,l=p>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=p):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+l>=1?h/c:h*Math.pow(2,1-l))*c>=2&&(s++,c/=2),s+l>=p?(a=0,s=p):s+l>=1?(a=(t*c-1)*Math.pow(2,o),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),s=0));o>=8;e[r+d]=255&a,d+=f,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[r+d]=255&s,d+=f,s/=256,u-=8);e[r+d-f]|=128*m}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){(function(e){t.isBrowser=function(){return void 0===e||!e.execPath||!e.execPath.match(/node|iojs/)},t.deprecated=function(r){if(!t.isBrowser()){if(e.env.NOFLO_FATAL_DEPRECATED)throw new Error(r);return console.warn(r)}if(window.NOFLO_FATAL_DEPRECATED)throw new Error(r);console.warn(r)}}).call(this,r(2))},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","id":"graph.json","title":"FBP graph","description":"A graph of FBP processes and connections between them.\\nThis is the primary way of specifying FBP programs.\\n","name":"graph","type":"object","additionalProperties":false,"properties":{"caseSensitive":{"type":"boolean","description":"Whether the graph port identifiers should be treated as case-sensitive"},"properties":{"type":"object","description":"User-defined properties attached to the graph.","additionalProperties":true,"properties":{"name":{"type":"string","description":"Name of the graph"},"environment":{"type":"object","description":"Information about the execution environment for the graph","additionalProperties":true,"required":["type"],"properties":{"type":{"type":"string","description":"Runtime type the graph is for","example":"noflo-nodejs"},"content":{"type":"string","description":"HTML fixture for browser-based graphs"}}},"description":{"type":"string","description":"Graph description"},"icon":{"type":"string","description":"Name of the icon that can be used for depicting the graph"}}},"inports":{"type":["object","undefined"],"description":"Exported inports of the graph","additionalProperties":true,"patternProperties":{"[a-z0-9]+":{"type":"object","properties":{"process":{"type":"string"},"port":{"type":"string"},"metadata":{"type":"object","additionalProperties":true,"required":[],"properties":{"x":{"type":"integer","description":"X coordinate of a graph inport"},"y":{"type":"integer","description":"Y coordinate of a graph inport"}}}}}}},"outports":{"type":["object","undefined"],"description":"Exported outports of the graph","additionalProperties":true,"patternProperties":{"[a-z0-9]+":{"type":"object","properties":{"process":{"type":"string"},"port":{"type":"string"},"metadata":{"type":"object","required":[],"additionalProperties":true,"properties":{"x":{"type":"integer","description":"X coordinate of a graph outport"},"y":{"type":"integer","description":"Y coordinate of a graph outport"}}}}}}},"groups":{"type":"array","description":"List of groups of processes","items":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string"},"nodes":{"type":"array","items":{"type":"string"}},"metadata":{"type":"object","additionalProperties":true,"required":[],"properties":{"description":{"type":"string"}}}}}},"processes":{"type":"object","description":"The processes of this graph.\\nEach process is an instance of a component.\\n","additionalProperties":false,"patternProperties":{"[a-zA-Z0-9_]+":{"type":"object","properties":{"component":{"type":"string"},"metadata":{"type":"object","additionalProperties":true,"required":[],"properties":{"x":{"type":"integer","description":"X coordinate of a graph node"},"y":{"type":"integer","description":"Y coordinate of a graph node"}}}}}}},"connections":{"type":"array","description":"Connections of the graph.\\nA connection either connects ports of two processes, or specifices an IIP as initial input packet to a port.\\n","items":{"type":"object","additionalProperties":false,"properties":{"src":{"type":"object","additionalProperties":false,"properties":{"process":{"type":"string"},"port":{"type":"string"},"index":{"type":"integer"}}},"tgt":{"type":"object","additionalProperties":false,"properties":{"process":{"type":"string"},"port":{"type":"string"},"index":{"type":"integer"}}},"data":{},"metadata":{"type":"object","additionalProperties":true,"required":[],"properties":{"route":{"type":"integer","description":"Route identifier of a graph edge"},"schema":{"type":"string","format":"uri","description":"JSON schema associated with a graph edge"},"secure":{"type":"boolean","description":"Whether edge data should be treated as secure"}}}}}}}}')},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d,f,m,g,y,v,b,w=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")},E=r(8);d=E.EventEmitter,v=r(53),b=function(e){var t;switch(t=e.args,e.cmd){case"addNode":return"".concat(t.id,"(").concat(t.component,")");case"removeNode":return"DEL ".concat(t.id,"(").concat(t.component,")");case"renameNode":return"RENAME ".concat(t.oldId," ").concat(t.newId);case"changeNode":return"META ".concat(t.id);case"addEdge":return"".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"removeEdge":return"".concat(t.from.node," ").concat(t.from.port," -X> ").concat(t.to.port," ").concat(t.to.node);case"changeEdge":return"META ".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"addInitial":return"'".concat(t.from.data,"' -> ").concat(t.to.port," ").concat(t.to.node);case"removeInitial":return"'".concat(t.from.data,"' -X> ").concat(t.to.port," ").concat(t.to.node);case"startTransaction":return">>> ".concat(e.rev,": ").concat(t.id);case"endTransaction":return"<<< ".concat(e.rev,": ").concat(t.id);case"changeProperties":return"PROPERTIES";case"addGroup":return"GROUP ".concat(t.name);case"renameGroup":return"RENAME GROUP ".concat(t.oldName," ").concat(t.newName);case"removeGroup":return"DEL GROUP ".concat(t.name);case"changeGroup":return"META GROUP ".concat(t.name);case"addInport":return"INPORT ".concat(t.name);case"removeInport":return"DEL INPORT ".concat(t.name);case"renameInport":return"RENAME INPORT ".concat(t.oldId," ").concat(t.newId);case"changeInport":return"META INPORT ".concat(t.name);case"addOutport":return"OUTPORT ".concat(t.name);case"removeOutport":return"DEL OUTPORT ".concat(t.name);case"renameOutport":return"RENAME OUTPORT ".concat(t.oldId," ").concat(t.newId);case"changeOutport":return"META OUTPORT ".concat(t.name);default:throw new Error("Unknown journal entry: ".concat(e.cmd))}},y=function(e,t){var r,n,o;for(r in n={},e)o=e[r],n[r]=null;for(r in t)o=t[r],n[r]=o;return n},m=function(){var e=function(e){function t(e){var r;return i(this,t),(r=c(this,p(t).call(this))).graph=e,r.lastRevision=0,r}return l(t,d),a(t,[{key:"putTransaction",value:function(e,t){return e>this.lastRevision&&(this.lastRevision=e),this.emit("transaction",e)}},{key:"fetchTransaction",value:function(e,t){}}]),t}();return e.prototype.lastRevision=0,e}.call(this),g=function(e){function t(e){var r;return i(this,t),(r=c(this,p(t).call(this,e))).transactions=[],r}return l(t,m),a(t,[{key:"putTransaction",value:function(e,r){return o(p(t.prototype),"putTransaction",this).call(this,e,r),this.transactions[e]=r}},{key:"fetchTransaction",value:function(e){return this.transactions[e]}}]),t}(),f=function(){var e=function(e){function t(e,r,n){var o,s,a,l,h,d,f,m,y,v,b,w,E,x,C,S,k,P,_,A,D;if(i(this,t),(o=c(this,p(t).call(this))).startTransaction=o.startTransaction.bind(u(o)),o.endTransaction=o.endTransaction.bind(u(o)),o.graph=e,o.entries=[],o.subscribed=!0,o.store=n||new g(o.graph),0===o.store.transactions.length){for(o.currentRevision=-1,o.startTransaction("initial",r),h=0,m=(C=o.graph.nodes).length;h<m;h++)x=C[h],o.appendCommand("addNode",x);for(f=0,y=(S=o.graph.edges).length;f<y;f++)s=S[f],o.appendCommand("addEdge",s);for(w=0,v=(k=o.graph.initializers).length;w<v;w++)l=k[w],o.appendCommand("addInitial",l);for(d in Object.keys(o.graph.properties).length>0&&o.appendCommand("changeProperties",o.graph.properties,{}),P=o.graph.inports)D=P[d],o.appendCommand("addInport",{name:d,port:D});for(d in _=o.graph.outports)D=_[d],o.appendCommand("addOutport",{name:d,port:D});for(E=0,b=(A=o.graph.groups).length;E<b;E++)a=A[E],o.appendCommand("addGroup",a);o.endTransaction("initial",r)}else o.currentRevision=o.store.lastRevision;return o.graph.on("addNode",function(e){return o.appendCommand("addNode",e)}),o.graph.on("removeNode",function(e){return o.appendCommand("removeNode",e)}),o.graph.on("renameNode",function(e,t){var r;return r={oldId:e,newId:t},o.appendCommand("renameNode",r)}),o.graph.on("changeNode",function(e,t){return o.appendCommand("changeNode",{id:e.id,new:e.metadata,old:t})}),o.graph.on("addEdge",function(e){return o.appendCommand("addEdge",e)}),o.graph.on("removeEdge",function(e){return o.appendCommand("removeEdge",e)}),o.graph.on("changeEdge",function(e,t){return o.appendCommand("changeEdge",{from:e.from,to:e.to,new:e.metadata,old:t})}),o.graph.on("addInitial",function(e){return o.appendCommand("addInitial",e)}),o.graph.on("removeInitial",function(e){return o.appendCommand("removeInitial",e)}),o.graph.on("changeProperties",function(e,t){return o.appendCommand("changeProperties",{new:e,old:t})}),o.graph.on("addGroup",function(e){return o.appendCommand("addGroup",e)}),o.graph.on("renameGroup",function(e,t){return o.appendCommand("renameGroup",{oldName:e,newName:t})}),o.graph.on("removeGroup",function(e){return o.appendCommand("removeGroup",e)}),o.graph.on("changeGroup",function(e,t){return o.appendCommand("changeGroup",{name:e.name,new:e.metadata,old:t})}),o.graph.on("addExport",function(e){return o.appendCommand("addExport",e)}),o.graph.on("removeExport",function(e){return o.appendCommand("removeExport",e)}),o.graph.on("addInport",function(e,t){return o.appendCommand("addInport",{name:e,port:t})}),o.graph.on("removeInport",function(e,t){return o.appendCommand("removeInport",{name:e,port:t})}),o.graph.on("renameInport",function(e,t){return o.appendCommand("renameInport",{oldId:e,newId:t})}),o.graph.on("changeInport",function(e,t,r){return o.appendCommand("changeInport",{name:e,new:t.metadata,old:r})}),o.graph.on("addOutport",function(e,t){return o.appendCommand("addOutport",{name:e,port:t})}),o.graph.on("removeOutport",function(e,t){return o.appendCommand("removeOutport",{name:e,port:t})}),o.graph.on("renameOutport",function(e,t){return o.appendCommand("renameOutport",{oldId:e,newId:t})}),o.graph.on("changeOutport",function(e,t,r){return o.appendCommand("changeOutport",{name:e,new:t.metadata,old:r})}),o.graph.on("startTransaction",function(e,t){return o.startTransaction(e,t)}),o.graph.on("endTransaction",function(e,t){return o.endTransaction(e,t)}),o}return l(t,d),a(t,[{key:"startTransaction",value:function(e,r){if(w(this,t),this.subscribed){if(this.entries.length>0)throw Error("Inconsistent @entries");return this.currentRevision++,this.appendCommand("startTransaction",{id:e,metadata:r},this.currentRevision)}}},{key:"endTransaction",value:function(e,r){if(w(this,t),this.subscribed)return this.appendCommand("endTransaction",{id:e,metadata:r},this.currentRevision),this.store.putTransaction(this.currentRevision,this.entries),this.entries=[]}},{key:"appendCommand",value:function(e,t,r){var n;if(this.subscribed)return n={cmd:e,args:v(t)},null!=r&&(n.rev=r),this.entries.push(n)}},{key:"executeEntry",value:function(e){var t;switch(t=e.args,e.cmd){case"addNode":return this.graph.addNode(t.id,t.component);case"removeNode":return this.graph.removeNode(t.id);case"renameNode":return this.graph.renameNode(t.oldId,t.newId);case"changeNode":return this.graph.setNodeMetadata(t.id,y(t.old,t.new));case"addEdge":return this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"removeEdge":return this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"changeEdge":return this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,y(t.old,t.new));case"addInitial":return this.graph.addInitial(t.from.data,t.to.node,t.to.port);case"removeInitial":return this.graph.removeInitial(t.to.node,t.to.port);case"startTransaction":case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(t.new);case"addGroup":return this.graph.addGroup(t.name,t.nodes,t.metadata);case"renameGroup":return this.graph.renameGroup(t.oldName,t.newName);case"removeGroup":return this.graph.removeGroup(t.name);case"changeGroup":return this.graph.setGroupMetadata(t.name,y(t.old,t.new));case"addInport":return this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);case"removeInport":return this.graph.removeInport(t.name);case"renameInport":return this.graph.renameInport(t.oldId,t.newId);case"changeInport":return this.graph.setInportMetadata(t.name,y(t.old,t.new));case"addOutport":return this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata(t.name));case"removeOutport":return this.graph.removeOutport;case"renameOutport":return this.graph.renameOutport(t.oldId,t.newId);case"changeOutport":return this.graph.setOutportMetadata(t.name,y(t.old,t.new));default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"executeEntryInversed",value:function(e){var t;switch(t=e.args,e.cmd){case"addNode":return this.graph.removeNode(t.id);case"removeNode":return this.graph.addNode(t.id,t.component);case"renameNode":return this.graph.renameNode(t.newId,t.oldId);case"changeNode":return this.graph.setNodeMetadata(t.id,y(t.new,t.old));case"addEdge":return this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"removeEdge":return this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"changeEdge":return this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,y(t.new,t.old));case"addInitial":return this.graph.removeInitial(t.to.node,t.to.port);case"removeInitial":return this.graph.addInitial(t.from.data,t.to.node,t.to.port);case"startTransaction":case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(t.old);case"addGroup":return this.graph.removeGroup(t.name);case"renameGroup":return this.graph.renameGroup(t.newName,t.oldName);case"removeGroup":return this.graph.addGroup(t.name,t.nodes,t.metadata);case"changeGroup":return this.graph.setGroupMetadata(t.name,y(t.new,t.old));case"addInport":return this.graph.removeInport(t.name);case"removeInport":return this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);case"renameInport":return this.graph.renameInport(t.newId,t.oldId);case"changeInport":return this.graph.setInportMetadata(t.name,y(t.new,t.old));case"addOutport":return this.graph.removeOutport(t.name);case"removeOutport":return this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata);case"renameOutport":return this.graph.renameOutport(t.newId,t.oldId);case"changeOutport":return this.graph.setOutportMetadata(t.name,y(t.new,t.old));default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"moveToRevision",value:function(e){var t,r,n,o,i,s,a,c,u,p,l,h,d;if(e!==this.currentRevision){if(this.subscribed=!1,e>this.currentRevision)for(u=o=p=this.currentRevision+1,l=e;p<=l?o<=l:o>=l;u=p<=l?++o:--o)for(i=0,s=(h=this.store.fetchTransaction(u)).length;i<s;i++)r=h[i],this.executeEntry(r);else for(u=a=this.currentRevision,d=e+1;a>=d;u=a+=-1)for(n=c=(t=this.store.fetchTransaction(u)).length-1;c>=0;n=c+=-1)this.executeEntryInversed(t[n]);return this.currentRevision=e,this.subscribed=!0}}},{key:"undo",value:function(){if(this.canUndo())return this.moveToRevision(this.currentRevision-1)}},{key:"canUndo",value:function(){return this.currentRevision>0}},{key:"redo",value:function(){if(this.canRedo())return this.moveToRevision(this.currentRevision+1)}},{key:"canRedo",value:function(){return this.currentRevision<this.store.lastRevision}},{key:"toPrettyString",value:function(e,t){var r,n,o,i,s,a,c,u,p;for(a=[],c=o=u=e|=0,p=t|=this.store.lastRevision;u<=p?o<p:o>p;c=u<=p?++o:--o)for(i=0,s=(r=this.store.fetchTransaction(c)).length;i<s;i++)n=r[i],a.push(b(n));return a.join("\n")}},{key:"toJSON",value:function(e,t){var r,n,o,i,s,a,c,u;for(r=[],a=o=e|=0,c=t|=this.store.lastRevision;o<c;a=o+=1)for(i=0,s=(u=this.store.fetchTransaction(a)).length;i<s;i++)n=u[i],r.push(b(n));return r}},{key:"save",value:function(e,t){var n;return n=JSON.stringify(this.toJSON(),null,4),r(11).writeFile("".concat(e,".json"),n,"utf-8",function(r,n){if(r)throw r;return t(e)})}}]),t}();return e.prototype.graph=null,e.prototype.entries=[],e.prototype.subscribed=!0,e}.call(this),t.Journal=f,t.JournalStore=m,t.MemoryJournalStore=g},function(e,t,r){var n=r(205),o={};t.setSource=function(e,t,r,i,s,a){n.setSource(o,e,t,r,i,s,a)},t.getSource=function(e,t,r){n.getSource(o,e,t,r)},t.register=function(e,t){e.setLibraryIcon("flow","random"),e.setLibraryIcon("github","github"),e.setLibraryIcon("indexeddb","database"),e.setLibraryIcon("objects","list"),e.setLibraryIcon("strings","font"),e.registerComponent("ui","BlobToEntry",r(206)),e.registerComponent("ui","CheckGistExists",r(208)),e.registerComponent("ui","CheckRepoExists",r(209)),e.registerComponent("ui","CheckSyncState",r(210)),e.registerComponent("ui","CheckTokenGrant",r(216)),e.registerComponent("ui","CleanAction",r(221)),e.registerComponent("ui","CleanProject",r(222)),e.registerComponent("ui","ClearUserData",r(223)),e.registerComponent("ui","CollectInitialData",r(224)),e.registerComponent("ui","CreateContext",r(225)),e.registerComponent("ui","CreateEmptyContext",r(226)),e.registerComponent("ui","CreateLoadingContext",r(227)),e.registerComponent("ui","DatabaseReady",r(228)),e.registerComponent("ui","DispatchAction",r(229)),e.registerComponent("ui","EnsureId",r(230)),e.registerComponent("ui","EnsureLocalRuntimes",r(231)),e.registerComponent("ui","ErrorToContext",r(232)),e.registerComponent("ui","ExchangeGrantToken",r(233)),e.registerComponent("ui","FindNodesInGraph",r(234)),e.registerComponent("ui","GetActionValues",r(235)),e.registerComponent("ui","GetRemoteProjects",r(236)),e.registerComponent("ui","GetRemoteRuntimes",r(237)),e.registerComponent("ui","GetRemoteUser",r(244)),e.registerComponent("ui","GetUrl",r(245)),e.registerComponent("ui","GetUserToken",r(246)),e.registerComponent("ui","GistToProject",r(247)),e.registerComponent("ui","HasActionRuntime",r(248)),e.registerComponent("ui","ListenRuntime",r(249)),e.registerComponent("ui","LoadUserData",r(250)),e.registerComponent("ui","LoggingMiddleware",r(251)),e.registerComponent("ui","LoginOAuth",r(253)),e.registerComponent("ui","MapStateToProps",r(254)),e.registerComponent("ui","OpenLiveMode",r(255)),e.registerComponent("ui","OpenNewProject",r(256)),e.registerComponent("ui","OpenProject",r(257)),e.registerComponent("ui","OpenProjectMode",r(258)),e.registerComponent("ui","PopulateProjectRuntime",r(259)),e.registerComponent("ui","PopulateRuntimeData",r(260)),e.registerComponent("ui","PreparePulls",r(261)),e.registerComponent("ui","PreparePush",r(262)),e.registerComponent("ui","ReconnectRuntime",r(263)),e.registerComponent("ui","RefreshRemoteUser",r(264)),e.registerComponent("ui","RemoveRemoteProject",r(265)),e.registerComponent("ui","RemoveRemoteRuntime",r(266)),e.registerComponent("ui","Router",r(267)),e.registerComponent("ui","RuntimeReducer",r(268)),e.registerComponent("ui","RuntimeToProject",r(270)),e.registerComponent("ui","SearchGraphNodeToContext",r(271)),e.registerComponent("ui","SendComponentChanges",r(272)),e.registerComponent("ui","SendCurrentHash",r(273)),e.registerComponent("ui","SendEdges",r(274)),e.registerComponent("ui","SendGraphChanges",r(275)),e.registerComponent("ui","SetAction",r(276)),e.registerComponent("ui","SetToContext",r(277)),e.registerComponent("ui","SetUrl",r(278)),e.registerComponent("ui","SetUrlHash",r(279)),e.registerComponent("ui","StartNetwork",r(280)),e.registerComponent("ui","State",r(281)),e.registerComponent("ui","StopNetwork",r(282)),e.registerComponent("ui","StorageReducer",r(283)),e.registerComponent("ui","Store",r(284)),e.registerComponent("ui","StoreRemoteProject",r(285)),e.registerComponent("ui","StoreRemoteRuntime",r(286)),e.registerComponent("ui","StoreUser",r(287)),e.registerComponent("ui","StoreUserPreferences",r(288)),e.registerComponent("ui","UpdateFromTree",r(289)),e.registerComponent("ui","Save",r(290)),e.registerComponent("ui","SaveData",r(291)),e.registerComponent("ui","GetRuntimeClient",r(292)),e.registerComponent("ui","MigrateLocalStorage",r(341)),e.registerComponent("ui","ContextReducer",r(342)),e.registerComponent("ui","Delete",r(343)),e.registerComponent("ui","DeleteData",r(344)),e.registerComponent("ui","GithubMiddleware",r(345)),e.registerComponent("ui","GithubReducer",r(346)),e.registerComponent("ui","GithubSynchronization",r(347)),e.registerComponent("ui","Load",r(348)),e.registerComponent("ui","LoadData",r(349)),e.registerComponent("ui","PrepareStorage",r(350)),e.registerComponent("ui","RegistryMiddleware",r(351)),e.registerComponent("ui","RegistryReducer",r(352)),e.registerComponent("ui","RuntimeMiddleware",r(353)),e.registerComponent("ui","StorageMiddleware",r(354)),e.registerComponent("ui","UrlMiddleware",r(355)),e.registerComponent("ui","UserMiddleware",r(356)),e.registerComponent("ui","UserReducer",r(357)),e.registerComponent("ui","main",r(132)),e.registerComponent("core","Merge",r(358)),e.registerComponent("core","Output",r(359)),e.registerComponent("core","Repeat",r(362)),e.registerComponent("core","RepeatAsync",r(363)),e.registerComponent("core","SendNext",r(364)),e.registerComponent("core","Split",r(365)),e.registerComponent("flow","Race",r(366)),e.registerComponent("github","CreateCommit",r(367)),e.registerComponent("github","CreateTree",r(368)),e.registerComponent("github","GetBlob",r(369)),e.registerComponent("github","GetReference",r(370)),e.registerComponent("github","UpdateReference",r(371)),e.registerComponent("graph","LoadJson",r(372)),e.registerComponent("indexeddb","BeginTransaction",r(373)),e.registerComponent("indexeddb","CreateIndex",r(374)),e.registerComponent("indexeddb","CreateStore",r(375)),e.registerComponent("indexeddb","Delete",r(376)),e.registerComponent("indexeddb","GetStore",r(377)),e.registerComponent("indexeddb","Open",r(378)),e.registerComponent("indexeddb","Put",r(380)),e.registerComponent("indexeddb","Query",r(381)),e.registerComponent("indexeddb","UpgradeRouter",r(382)),e.registerComponent("interaction","ListenHash",r(383)),e.registerComponent("interaction","ListenResize",r(384)),e.registerComponent("objects","CallMethod",r(385)),e.registerComponent("objects","CreateObject",r(386)),e.registerComponent("objects","GetObjectKey",r(387)),e.registerComponent("strings","SendString",r(388)),e.registerComponent(null,"Graph",r(389));var o=[];o.push(r(390)),n.registerCustomLoaders(e,o,t)}},function(module,exports){exports.registerCustomLoaders=function(e,t,r){if(!t.length)return r();var n=t.shift();e.registerLoader(n,function(n){if(n)return r(n);exports.registerCustomLoaders(e,t,r)})},exports.setSource=function(sources,loader,packageId,name,source,language,callback){var implementation,originalSource=source;if("coffeescript"===language){if("undefined"!=typeof window&&!window.CoffeeScript)return callback(new Error("CoffeeScript compiler needed for "+packageId+"/"+name+" not available"));try{source=window.CoffeeScript.compile(source,{bare:!0})}catch(e){return callback(e)}}if(("es6"===language||"es2015"===language)&&"undefined"!=typeof window&&window.babel)try{source=window.babel.transform(source).code}catch(e){return callback(e)}try{var withExports="(function () { var exports = {}; "+source+"; return exports; })();";implementation=eval(withExports)}catch(e){return callback(e)}if("function"!=typeof implementation&&(!implementation.getComponent||"function"!=typeof implementation.getComponent))return callback(new Error("Provided source for "+packageId+"/"+name+" failed to create a runnable component"));var fullName=packageId+"/"+name;sources[fullName]={language:language,source:originalSource},loader.registerComponent(packageId,name,implementation,callback)},exports.getSource=function(e,t,r,n){if(!t.components[r])return n(new Error("Component "+r+" not available"));var o=t.components[r];if(-1!==r.indexOf("/"))var i=r.split("/"),s={name:i[1],library:i[0]};else s={name:r,library:""};return t.isGraph(o)?(s.code=JSON.stringify(o,null,2),s.language="json",n(null,s)):e[r]?(s.code=e[r].source,s.language=e[r].language,n(null,s)):"function"==typeof o?(s.code=o.toString(),s.language="javascript",n(null,s)):"function"==typeof o.getComponent?(s.code=o.getComponent.toString(),s.language="javascript",n(null,s)):n(new Error("Unable to get sources for "+r))}},function(e,t,r){const n=r(0),o=r(26),i=r(57),s=r(58),a=(e,t,r,s,a)=>{let c=t;const u=r;let p="loadJSON";"fbp"===u.remote.language&&(p="loadFBP"),"json"===u.remote.language&&(c=JSON.parse(c)),n.graph[p](c,(t,r)=>{if(t)return void a(new Error(`Failed to load ${u.remote.name}: ${t.message}`));const c=r;if(c.properties||(c.properties={}),c.properties.sha=e,c.properties.changed=!1,c.properties.project=s.id,u.local)return u.local.startTransaction(e),n.graph.mergeResolveTheirs(u.local,c),u.local.endTransaction(e),u.local.properties.changed=!1,i.addToList(s.graphs,u.local),void a(null,u.local);c.properties.name=u.remote.name,c.name=u.remote.name,c.properties.id=o.v4(),c.properties.environment||(c.properties.environment={}),c.properties.environment.type||(c.properties.environment.type=s.type),i.addToList(s.graphs,c),a(null,c),a()})},c=(e,t,r,n,s)=>{const a=r;if(a.local)return a.local.code=t,a.local.sha=e,a.local.changed=!1,i.addToList(n.components,a.local),void s(null,a.local);const c={id:o.v4(),project:n.id,name:a.remote.name,code:t,language:a.remote.language,sha:e,changed:!1};i.addToList(n.components,c),s(null,c)},u=(e,t,r,n,s)=>{const a=r;if(a.local)return a.local.code=t,a.local.sha=e,a.local.changed=!1,i.addToList(n.specs,a.local),void s(null,a.local);const c={id:o.v4(),project:n.id,type:"spec",name:a.remote.name,code:t,language:a.remote.language,sha:e,changed:!1};i.addToList(n.specs,c),s(null,c)};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("blob",{datatype:"array",description:"Git blob entries"}),e.inPorts.add("operation",{datatype:"object",description:"Sync operation",required:!0}),e.outPorts.add("graph",{datatype:"object",scoped:!1}),e.outPorts.add("component",{datatype:"object",scoped:!1}),e.outPorts.add("spec",{datatype:"object",scoped:!1}),e.outPorts.add("project",{datatype:"object",scoped:!1}),e.outPorts.add("error",{datatype:"object",scoped:!1}),e.forwardBrackets={},e.process((e,t)=>{if(!e.hasData("operation"))return;if(!e.hasData("blob"))return;const[r,n]=e.getData("operation","blob");if(!(null!=r.pull?r.pull.length:void 0))return void t.done(new Error("Operation does not provide any pull entries"));const o=[],i=[];n.forEach(e=>{const{sha:t}=e;let n=e.content.replace(/\s/g,"");"base64"===e.encoding&&(n=decodeURIComponent(escape(atob(n)))),r.pull.forEach(e=>{if((null!=e.remote?e.remote.sha:void 0)!==t)return;let s,p;switch(e.type){case"graph":s=a,p="graph";break;case"spec":s=u,p="spec";break;default:s=c,p="component"}s(t,n,e,r.project,(e,t)=>{e?i.push(e):o.push({type:p,entity:t})})}),i.push(`No entry found for blob ${t}`)}),i.length?t.done(i[0]):(o.forEach(e=>{const r={};r[e.type]=e.entity,t.send(r)}),r.project.main=s.findMainGraph(r.project),t.sendDone({project:r.project}))})}},function(e,t,r){var n,o,i=r(115),s=r(116),a=0,c=0;e.exports=function(e,t,r){var u=t&&r||0,p=t||[],l=(e=e||{}).node||n,h=void 0!==e.clockseq?e.clockseq:o;if(null==l||null==h){var d=i();null==l&&(l=n=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==h&&(h=o=16383&(d[6]<<8|d[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:c+1,g=f-a+(m-c)/1e4;if(g<0&&void 0===e.clockseq&&(h=h+1&16383),(g<0||f>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=f,c=m,o=h;var y=(1e4*(268435455&(f+=122192928e5))+m)%4294967296;p[u++]=y>>>24&255,p[u++]=y>>>16&255,p[u++]=y>>>8&255,p[u++]=255&y;var v=f/4294967296*1e4&268435455;p[u++]=v>>>8&255,p[u++]=255&v,p[u++]=v>>>24&15|16,p[u++]=v>>>16&255,p[u++]=h>>>8|128,p[u++]=255&h;for(var b=0;b<6;++b)p[u+b]=l[b];return t||s(p)}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("existing",{datatype:"array"}),e.outPorts.add("new",{datatype:"object"}),n.helpers.WirePattern(e,{out:["existing","new"],async:!0},(e,t,r,n)=>{if(!e.state||!e.state.projects||!e.state.projects.length)return r.new.send(e),void n();const o=e.state.projects.filter(t=>t.gist===e.payload.graph);if(!o.length)return r.new.send(e),void n();r.existing.send(["project",o[0].id,o[0].main]),n()})}},function(e,t,r){const n=r(0),o=r(15),i=r(26),s=r(58),a=e=>{const t=e.payload.repo.split("/");return{project:{id:i.v4(),name:e.payload.repo,namespace:t[1].replace(/^noflo-/,""),repo:e.payload.repo,branch:e.payload.branch,graphs:[],components:[],specs:[]},repo:e.payload.repo}};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("existing",{datatype:"array"}),e.outPorts.add("new",{datatype:"object"}),e.outPorts.add("openmain",{datatype:"array"}),e.process((e,t)=>{if(!e.hasData("in"))return;const r=e.getData("in");if(!r.state||!r.state.projects||!r.state.projects.length)return void t.sendDone({openmain:{route:"main",runtime:null,project:null,graph:null,component:null,nodes:[]},new:a(r)});const n=r.state.projects.filter(e=>e.repo===r.payload.repo&&("master"===r.payload.branch&&!e.branch||e.branch===r.payload.branch));n.length?s.getProjectHash(n[0],(e,i)=>{let s=i;if(s||(s=["project",n[0].id,n[0].main]),r.payload.component){const e=((e,t)=>{const r=o.basename(e,o.extname(e)),n=t.components.find(e=>e.name===r);return n?n.name:null})(r.payload.component,n[0]);e&&(s[2]="component",s[3]=e)}if(r.payload.graph){const e=((e,t)=>{const r=o.basename(e,o.extname(e)),n=t.graphs.find(e=>e.name===r);return n?n.properties.id:null})(r.payload.graph,n[0]);e&&(delete s[3],s[2]=e)}t.sendDone({existing:s})}):t.sendDone({openmain:{route:"main",runtime:null,project:null,graph:null,component:null,nodes:[]},new:a(r)})})}},function(e,t,r){const n=r(0),o=r(21),i=(e,t,r)=>{const n=o.api();n.token(t);const i=n.get(e);i.on("success",e=>{e.body?r(null,e.body):r(new Error("No result received"))}),i.on("error",e=>r(e.body)),i()},s=(e,t,r,n)=>i(`/repos/${e}/git/trees/${t}`,r,n),a=(e,t,r)=>{const n=t;if(!e)return;const o=e.tree.filter(e=>"blob"===e.type&&!!e.path.match(".*.(coffee|js|hpp|c|py)$"));n.components=n.components.concat(o.map(e=>{const t=e;t.name=t.path.substr(0,t.path.indexOf("."));const n=t.path.substr(t.path.lastIndexOf(".")+1);switch(n){case"coffee":t.language="coffeescript";break;case"js":t.language="javascript";break;case"hpp":t.language="c++";break;case"c":t.language="c";break;case"py":t.language="python";break;default:t.language=n}return t.fullPath=`${r}${t.path}`,t}))},c=(e,t,r)=>{const n=t;if(!e)return;const o=e.tree.filter(e=>"blob"===e.type&&!!e.path.match(".*.(yaml|coffee)$"));n.specs=n.specs.concat(o.map(e=>{const t=e;t.name=t.path.substr(0,t.path.indexOf(".")),t.type="spec";const n=t.path.substr(t.path.lastIndexOf(".")+1);switch(n){case"coffee":t.language="coffeescript";break;default:t.language=n}return t.fullPath=`${r}${t.path}`,t}))},u=(e,t,r,n)=>((e,t,r,n)=>i(`/repos/${e}/git/commits/${t}`,r,n))(e,t,r,(o,i)=>{o?n(o):i?s(e,i.tree.sha,r,(t,o)=>{if(t)return void n(t);let u=null,p=null,l=null;const h={tree:i.tree.sha,graphs:[],components:[],specs:[]};o.tree.forEach(e=>{"fbp.json"===e.path&&"blob"===e.type||("graphs"!==e.path||"tree"!==e.type?"components"!==e.path||"tree"!==e.type?"spec"===e.path&&"tree"===e.type&&(l=e.sha):p=e.sha:u=e.sha)}),u?s(e,u,r,(t,o)=>{t?n(t):(((e,t,r)=>{const n=t;if(!e)return;let o=e.tree.filter(e=>"blob"===e.type&&!!e.path.match(".*.(fbp|json)$"));o=o.filter(e=>{if(-1===e.path.indexOf(".fbp"))return!0;const t=e.path.replace(".fbp",".json");return!o.find(e=>e.path===t)}),n.graphs=n.graphs.concat(o.map(e=>{const t=e;return t.name=t.path.substr(0,t.path.indexOf(".")),t.language=t.path.substr(t.path.lastIndexOf(".")+1),t.fullPath=`${r}${t.path}`,t}))})(o,h,"graphs/"),p?s(e,p,r,(t,o)=>{t?n(t):(a(o,h,"components/"),l?s(e,l,r,(e,t)=>{e?n(e):(c(t,h,"spec/"),n(null,h))}):n(null,h))}):n(null,h))}):p?s(e,p,r,(t,o)=>{t?n(t):(a(o,h,"components/"),l?s(e,l,r,(e,t)=>{e?n(e):(c(t,h,"spec/"),n(null,h))}):n(null,h))}):l?s(e,l,r,(e,t)=>e?n(e):(c(t,h,"spec/"),n(null,h))):n(null,h)}):n(new Error(`No commit found for ${e} ${t}`))}),p=e=>e.replace(/\s/g,"_"),l=(e,t)=>{const r=p(t.name);if("graph"===e)return`graphs/${r}.json`;let n="components";switch("spec"===e&&(n="spec"),t.language){case"coffeescript":return`${n}/${r}.coffee`;case"javascript":case"es2015":return`${n}/${r}.js`;case"c++":return`${n}/${r}.hpp`;case"python":return`${n}/${r}.py`;default:return`${n}/${r}.${t.language}`}},h=(e,t,r,n)=>n.pull.push({path:r.fullPath,type:e,local:t,remote:r}),d=(e,t,r,n)=>n.push.push({path:(null!=r?r.fullPath:void 0)||l(e,t),type:e,local:t,remote:r}),f=(e,t,r,n)=>n.conflict.push({path:r.fullPath,type:e,local:t,remote:r});t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("reference",{datatype:"object"}),e.inPorts.add("project",{datatype:"object"}),e.inPorts.add("token",{datatype:"string",required:!0}),e.outPorts.add("noop",{datatype:"object"}),e.outPorts.add("local",{datatype:"object"}),e.outPorts.add("remote",{datatype:"object"}),e.outPorts.add("both",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:["reference","project"],params:"token",out:["noop","local","remote","both"],async:!0},(t,r,n,o)=>{const i={repo:t.project.repo,project:t.project,ref:t.reference.ref,commit:t.reference.object.sha,push:[],pull:[],conflict:[]};u(i.repo,i.commit,e.params.token,(e,r)=>{if(e)return void o(e);i.tree=r.tree,r.graphs.forEach(e=>{const r=t.project.graphs.filter(t=>t.properties.sha===e.sha||p(t.name)===e.name);r.length?r[0].properties.sha!==e.sha?!1!==r[0].properties.changed?f("graph",r[0],e,i):h("graph",r[0],e,i):r[0].properties.changed&&d("graph",r[0],e,i):h("graph",null,e,i)});let s=t.project.graphs.filter(e=>{let t=!0;return r.graphs.forEach(r=>{e.properties.sha===r.sha&&(t=!1),p(e.name)===r.name&&(t=!1)}),t});return s.forEach(e=>{d("graph",e,null,i)}),r.components.forEach(e=>{const r=t.project.components.filter(t=>t.sha===e.sha||p(t.name)===e.name);r.length?r[0].sha!==e.sha?!1!==r[0].changed?f("component",r[0],e,i):h("component",r[0],e,i):r[0].changed&&d("component",r[0],e,i):h("component",null,e,i)}),(s=t.project.components.filter(e=>{if(!e.code.length)return!1;let t=!0;return r.components.forEach(r=>{e.sha===r.sha&&(t=!1),p(e.name)===r.name&&(t=!1)}),t})).forEach(e=>{d("component",e,null,i)}),r.specs.forEach(e=>{const r=t.project.specs.filter(t=>t.sha===e.sha||p(t.name)===e.name);r.length?r[0].sha!==e.sha?!1!==r[0].changed?f("spec",r[0],e,i):h("spec",r[0],e,i):r[0].changed&&d("spec",r[0],e,i):h("spec",null,e,i)}),(s=t.project.specs.filter(e=>{if(!e.code.length)return!1;let t=!0;return r.specs.forEach(r=>{e.sha===r.sha&&(t=!1),p(e.name)===r.name&&(t=!1)}),t})).forEach(e=>{d("spec",e,null,i)}),i.conflict.length?(n.both.send(i),void o()):i.push.length&&i.pull.length?(n.both.send(i),void o()):i.push.length?(n.local.send(i),void o()):i.pull.length?(n.remote.send(i),void o()):(n.noop.send(i),void o())})}),e}},function(e,t,r){(function(t){
/*!
 * octo.js
 * Copyright (c) 2012 Justin Palmer <justin@labratrevenge.com>
 * MIT Licensed
 */
!function(){"undefined"==typeof superagent&&(superagent=r(212),void 0!==t&&t.execPath&&-1!==t.execPath.indexOf("node")&&(btoa=r(215)));var n={api:function(){var e,r,n,o,i,s="https://api.github.com";superagent;function a(){}function c(s,c,u){var p=1,l=30,h={},d=!1,f=!1,m={};void 0!==t&&t.execPath&&t.execPath.match(/node/)&&(h["User-Agent"]="Octo.js");var g=function(){var t=superagent[s](a.host()+c);t.on("error",function(e){y._handledError=e,y.trigger("error",e)}),i&&t.set("Authorization","token "+i),!i&&n&&o&&t.set("Authorization","Basic "+btoa(n+":"+o)),t.set(h).query({page:p,per_page:l}).timeout(3e3).send(u).end(function(t){if(!y._handledError){if(t.error)return y._handledError=t,void y.trigger("error",t);e=~~t.header["x-ratelimit-limit"],r=~~t.header["x-ratelimit-remaining"];var n=t.header.link;d=/rel=\"next\"/i.test(n),f=/rel=\"next\"/.test(n),y.trigger("end",t),t.ok&&y.trigger("success",t)}})};function y(){g()}return y.page=function(e){return arguments.length?(p=e,y):p},y.perpage=function(e){return arguments.length?(l=e,y):l},y.next=function(){return p+=1,g(),y},y.prev=function(){return p-=1,g(),y},y.hasnext=function(){return d},y.hasprev=function(){return f},y.on=function(e,t){return void 0===m[e]&&(m[e]=[]),m[e].push(t),y},y.off=function(e,t){if(m[e]instanceof Array)for(var r=m[e],n=0;n<r.length;n++)if(r[n]===t){r.splice(n,1);break}return y},y.trigger=function(e,t){return m[e]instanceof Array&&m[e].forEach(function(e){e.call(y,t)}),y},y.set=function(e,t){return h[e]=t,y},y}return a.host=function(e){return arguments.length?(s=e,a):s},a.get=function(e,t){return new c("get",e)},a.post=function(e,t){return new c("post",e,t)},a.patch=function(e,t){return new c("patch",e,t)},a.put=function(e,t){return new c("put",e,t)},a.del=function(e,t){return new c("del",e,t)},a.limit=function(){return e},a.remaining=function(){return r},a.username=function(e){return arguments.length?(n=e,a):n},a.password=function(e){return arguments.length?(o=e,a):o},a.token=function(e){return arguments.length?(i=e,a):i},a}};e.exports=n}()}).call(this,r(2))},function(e,t,r){var n=r(213),o=r(214),i="undefined"==typeof window?this:window;function s(){}var a="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function c(e){return e===Object(e)}function u(e){if(!c(e))return e;var t=[];for(var r in e)null!=e[r]&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")}function p(e){for(var t,r={},n=e.split("&"),o=0,i=n.length;o<i;++o)t=n[o].split("="),r[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return r}function l(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text=this.xhr.responseText,this.setStatusProperties(this.xhr.status),this.header=this.headers=function(e){var t,r,n,o,i=e.split(/\r?\n/),s={};i.pop();for(var c=0,u=i.length;c<u;++c)t=(r=i[c]).indexOf(":"),n=r.slice(0,t).toLowerCase(),o=a(r.slice(t+1)),s[n]=o;return s}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function h(e,t){var r=this;n.call(this),this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var t=new l(r);"HEAD"==e&&(t.text=null),r.callback(null,t)})}function d(e,t){return"function"==typeof t?new h("GET",e).end(t):1==arguments.length?new h("GET",e):new h(e,t)}d.serializeObject=u,d.parseString=p,d.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},d.serialize={"application/x-www-form-urlencoded":u,"application/json":JSON.stringify},d.parse={"application/x-www-form-urlencoded":p,"application/json":JSON.parse},l.prototype.get=function(e){return this.header[e.toLowerCase()]},l.prototype.setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=t.split(/ *; */).shift();var r=function(e){return o(e.split(/ *; */),function(e,t){var r=t.split(/ *= */),n=r.shift(),o=r.shift();return n&&o&&(e[n]=o),e},{})}(t);for(var n in r)this[n]=r[n]},l.prototype.parseBody=function(e){var t=d.parse[this.type];return t?t(e):null},l.prototype.setStatusProperties=function(e){var t=e/100|0;this.status=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.accepted=202==e,this.noContent=204==e||1223==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},l.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,n="cannot "+t+" "+r+" ("+this.status+")",o=new Error(n);return o.status=this.status,o.method=t,o.url=r,o},d.Response=l,n(h.prototype),h.prototype.use=function(e){return e(this),this},h.prototype.timeout=function(e){return this._timeout=e,this},h.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},h.prototype.abort=function(){if(!this.aborted)return this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this},h.prototype.set=function(e,t){if(c(e)){for(var r in e)this.set(r,e[r]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},h.prototype.getHeader=function(e){return this._header[e.toLowerCase()]},h.prototype.type=function(e){return this.set("Content-Type",d.types[e]||e),this},h.prototype.accept=function(e){return this.set("Accept",d.types[e]||e),this},h.prototype.auth=function(e,t){var r=btoa(e+":"+t);return this.set("Authorization","Basic "+r),this},h.prototype.query=function(e){return"string"!=typeof e&&(e=u(e)),e&&this._query.push(e),this},h.prototype.field=function(e,t){return this._formData||(this._formData=new FormData),this._formData.append(e,t),this},h.prototype.attach=function(e,t,r){return this._formData||(this._formData=new FormData),this._formData.append(e,t,r),this},h.prototype.send=function(e){var t=c(e),r=this.getHeader("Content-Type");if(t&&c(this._data))for(var n in e)this._data[n]=e[n];else"string"==typeof e?(r||this.type("form"),r=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return t?(r||this.type("json"),this):this},h.prototype.callback=function(e,t){var r=this._callback;return 2==r.length?r(e,t):e?this.emit("error",e):void r(t)},h.prototype.crossDomainError=function(){var e=new Error("Origin is not allowed by Access-Control-Allow-Origin");e.crossDomain=!0,this.callback(e)},h.prototype.timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},h.prototype.withCredentials=function(){return this._withCredentials=!0,this},h.prototype.end=function(e){var t=this,r=this.xhr=function(){if(i.XMLHttpRequest&&("file:"!=i.location.protocol||!i.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1}(),n=this._query.join("&"),o=this._timeout,a=this._formData||this._data;if(this._callback=e||s,r.onreadystatechange=function(){if(4==r.readyState)return 0==r.status?t.aborted?t.timeoutError():t.crossDomainError():void t.emit("end")},r.upload&&(r.upload.onprogress=function(e){e.percent=e.loaded/e.total*100,t.emit("progress",e)}),o&&!this._timer&&(this._timer=setTimeout(function(){t.abort()},o)),n&&(n=d.serializeObject(n),this.url+=~this.url.indexOf("?")?"&"+n:"?"+n),r.open(this.method,this.url,!0),this._withCredentials&&(r.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a&&!function(e){switch({}.toString.call(e)){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}(a)){var c=d.serialize[this.getHeader("Content-Type")];c&&(a=c(a))}for(var u in this.header)null!=this.header[u]&&r.setRequestHeader(u,this.header[u]);return this.emit("request",this),r.send(a),this},d.Request=h,d.get=function(e,t,r){var n=d("GET",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},d.head=function(e,t,r){var n=d("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},d.del=function(e,t){var r=d("DELETE",e);return t&&r.end(t),r},d.patch=function(e,t,r){var n=d("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},d.post=function(e,t,r){var n=d("POST",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},d.put=function(e,t,r){var n=d("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},e.exports=d},function(e,t){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){var r=this;function n(){r.off(e,n),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r)for(var n=0,o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){e.exports=function(e,t,r){for(var n=0,o=e.length,i=3==arguments.length?r:e[n++];n<o;)i=t.call(null,i,e[n],++n,e);return i}},function(e,t,r){(function(t){!function(){"use strict";e.exports=function(e){return(e instanceof t?e:new t(e.toString(),"binary")).toString("base64")}}()}).call(this,r(54).Buffer)},function(e,t,r){const n=r(27),o=r(59),i=r(0);t.getComponent=()=>{const e=new i.Component;return e.inPorts.add("in",{datatype:"all"}),e.outPorts.add("pass",{datatype:"all"}),e.outPorts.add("code",{datatype:"string"}),e.outPorts.add("error",{datatype:"string"}),i.helpers.WirePattern(e,{in:["in"],out:["pass","code"],forwardGroups:!0,async:!0},(e,t,r,i)=>{if("string"!=typeof e.payload)return i(new Error("URL must be a string"));const s=n.parse(e.payload);if(!s.query)return r.pass.send(e),i();const a=o.parse(s.query);return a.error&&a.error_description&&i(new Error(a.error_description)),a.code?(r.code.send(a.code),i()):(r.pass.send(e),i())})}},function(e,t,r){(function(e,n){var o;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(i){t&&t.nodeType,e&&e.nodeType;var s="object"==typeof n&&n;s.global!==s&&s.window!==s&&s.self;var a,c=2147483647,u=36,p=1,l=26,h=38,d=700,f=72,m=128,g="-",y=/^xn--/,v=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=u-p,x=Math.floor,C=String.fromCharCode;function S(e){throw new RangeError(w[e])}function k(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function P(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+k((e=e.replace(b,".")).split("."),t).join(".")}function _(e){for(var t,r,n=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function A(e){return k(e,function(e){var t="";return e>65535&&(t+=C((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=C(e)}).join("")}function D(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function O(e,t,r){var n=0;for(e=r?x(e/d):e>>1,e+=x(e/t);e>E*l>>1;n+=u)e=x(e/E);return x(n+(E+1)*e/(e+h))}function T(e){var t,r,n,o,i,s,a,h,d,y,v,b=[],w=e.length,E=0,C=m,k=f;for((r=e.lastIndexOf(g))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&S("not-basic"),b.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<w;){for(i=E,s=1,a=u;o>=w&&S("invalid-input"),((h=(v=e.charCodeAt(o++))-48<10?v-22:v-65<26?v-65:v-97<26?v-97:u)>=u||h>x((c-E)/s))&&S("overflow"),E+=h*s,!(h<(d=a<=k?p:a>=k+l?l:a-k));a+=u)s>x(c/(y=u-d))&&S("overflow"),s*=y;k=O(E-i,t=b.length+1,0==i),x(E/t)>c-C&&S("overflow"),C+=x(E/t),E%=t,b.splice(E++,0,C)}return A(b)}function N(e){var t,r,n,o,i,s,a,h,d,y,v,b,w,E,k,P=[];for(b=(e=_(e)).length,t=m,r=0,i=f,s=0;s<b;++s)(v=e[s])<128&&P.push(C(v));for(n=o=P.length,o&&P.push(g);n<b;){for(a=c,s=0;s<b;++s)(v=e[s])>=t&&v<a&&(a=v);for(a-t>x((c-r)/(w=n+1))&&S("overflow"),r+=(a-t)*w,t=a,s=0;s<b;++s)if((v=e[s])<t&&++r>c&&S("overflow"),v==t){for(h=r,d=u;!(h<(y=d<=i?p:d>=i+l?l:d-i));d+=u)k=h-y,E=u-y,P.push(C(D(y+k%E,0))),h=x(k/E);P.push(C(D(h,0))),i=O(r,w,n==o),r=0,++n}++r,++t}return P.join("")}a={version:"1.4.1",ucs2:{decode:_,encode:A},decode:T,encode:N,toASCII:function(e){return P(e,function(e){return v.test(e)?"xn--"+N(e):e})},toUnicode:function(e){return P(e,function(e){return y.test(e)?T(e.slice(4).toLowerCase()):e})}},void 0===(o=function(){return a}.call(t,r,t,e))||(e.exports=o)}()}).call(this,r(118)(e),r(24))},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,i){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var c=1e3;i&&"number"==typeof i.maxKeys&&(c=i.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var p=0;p<u;++p){var l,h,d,f,m=e[p].replace(a,"%20"),g=m.indexOf(r);g>=0?(l=m.substr(0,g),h=m.substr(g+1)):(l=m,h=""),d=decodeURIComponent(l),f=decodeURIComponent(h),n(s,d)?o(s[d])?s[d].push(f):s[d]=[s[d],f]:s[d]=f}return s};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,a){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?i(s(e),function(s){var a=encodeURIComponent(n(s))+r;return o(e[s])?i(e[s],function(e){return a+encodeURIComponent(n(e))}).join(t):a+encodeURIComponent(n(e[s]))}).join(t):a?encodeURIComponent(n(a))+r+encodeURIComponent(n(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="Strips state from action payloads for backwards compat",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"all"}),n.helpers.WirePattern(e,{async:!0,forwardGroups:!0},(e,t,r,n)=>{r.send(e.payload||e),n()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),n.helpers.WirePattern(e,{async:!0,forwardGroups:!1},(e,t,r,n)=>{r.send({id:e.id,name:e.name,namespace:e.namespace,type:e.type,repo:e.repo,branch:e.branch,gist:e.gist,main:e.main}),n()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("clear",{datatype:"bang"}),e.outPorts.add("user",()=>({datatype:"object"})),n.helpers.WirePattern(e,{in:"clear",out:"user",async:!0},(e,t,r,n)=>{const o={};["flowhub-avatar","flowhub-plan","flowhub-theme","flowhub-token","flowhub-user","github-token","github-username"].forEach(e=>{localStorage.removeItem(e),o[e]=null}),r.send(o),n()})}},function(e,t,r){const n=r(0),o=(e,t)=>e.getStream(t).filter(e=>"data"===e.type&&!(!e.data||!0===e.data)).map(e=>e.data);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("project",{datatype:"object"}),e.inPorts.add("graph",{datatype:"object"}),e.inPorts.add("component",{datatype:"object"}),e.inPorts.add("spec",{datatype:"object"}),e.inPorts.add("runtime",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.process((e,t)=>{if(!e.hasStream("project","graph","component","spec","runtime"))return;const r={projects:o(e,"project"),graphs:o(e,"graph"),components:o(e,"component"),specs:o(e,"spec"),runtimes:o(e,"runtime")};t.sendDone({out:r})})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="file-o",e.inPorts.add("start",{datatype:"bang"}),e.outPorts.add("out",{datatype:"object"}),n.helpers.WirePattern(e,{in:"start",out:"out",async:!0},(e,t,r,n)=>{const o={state:("","ok"),project:null,runtime:null,component:null,graphs:[],remote:[]};return r.send(o),n()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="file-o",e.inPorts.add("start",{datatype:"bang"}),e.outPorts.add("out",{datatype:"object"}),n.helpers.WirePattern(e,{in:"start",out:"out",async:!0},(e,t,r,n)=>{const o={state:("","ok")};r.send(o),n()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="spinner",e.inPorts.add("start",{datatype:"bang"}),e.outPorts.add("out",{datatype:"object"}),n.helpers.WirePattern(e,{in:"start",out:"out",async:!0},(e,t,r,n)=>{const o={state:("","loading")};return r.send(o),n()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"bang"}),e.process((e,t)=>{e.hasData("in")&&(e.getData("in"),window.nofloDBReady=!0,t.done())})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="code-fork",e.inPorts.add("routes",{datatype:"string",required:!0,control:!0}),e.inPorts.add("in",{datatype:"all"}),e.outPorts.add("pass",{datatype:"all"}),e.outPorts.add("handle",{datatype:"all",addressable:!0}),e.outPorts.add("handling",{datatype:"integer"}),e.forwardBrackets={},e.process((e,t)=>{if(!e.hasData("routes","in"))return;const[r,o]=e.getData("routes","in");if(!(null!=o?o.action:void 0))return void t.sendDone({pass:o});const i=r.split(","),s=((e,t)=>{return t.map(t=>{if(-1===t.indexOf("*"))return t;return t.split(":").map((t,r)=>"*"!==t?t:e[r]?e[r]:t).join(":")}).indexOf(e.join(":"))})(o.action.split(":"),i);-1!==s?(t.send({handling:s,handle:new n.IP("data",o,{index:s})}),t.done()):t.sendDone({pass:o})})}},function(e,t,r){const n=r(0),o=e=>{let t=e;return null==t&&(t=60466176),(t=Math.floor(Math.random()*t)).toString(36)};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("id",{datatype:"string"}),n.helpers.WirePattern(e,{in:"in",out:["out","id"],async:!0},(e,t,r,n)=>{const i=e;if(i.properties){if(i.properties.id)return i.id=i.properties.id,r.out.send(i),r.id.send(i.id),void n();const e=o();return i.properties.id=e,i.id=e,r.out.send(i),r.id.send(i.id),void n()}if(i.id)return r.out.send(i),r.id.send(i.id),void n();i.id=o(),r.out.send(i),r.id.send(i.id),n()})}},function(e,t,r){const n=r(0),o=r(26),i="https://noflojs.org/noflo-browser/everything.html?fbp_noload=true&fbp_protocol=iframe";t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"array"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("runtimes",{datatype:"array"}),n.helpers.WirePattern(e,{out:["out","runtimes"],async:!0,forwardGroups:!1},(e,t,r,n)=>{const s=e||[],a=(e=>{return e.find(e=>"iframe"===e.protocol&&e.address===i)?null:{label:"NoFlo HTML5 environment",id:o(),protocol:"iframe",address:i,type:"noflo-browser",seen:Date.now()}})(s);a&&(r.out.send(a),s.push(a)),r.runtimes.send(s),n()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="exclamation-triangle",e.inPorts.add("error",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),n.helpers.WirePattern(e,{in:"error",out:"out",async:!0},(e,t,r,n)=>{const o={state:("","error"),project:null,runtime:null,component:null,graphs:[],remote:[]};o.error=e.payload||e,r.send(o),n()})}},function(e,t,r){const n=r(59),o=r(0);t.getComponent=()=>{const e=new o.Component;return e.inPorts.add("code",{datatype:"string"}),e.outPorts.add("token",{datatype:"string"}),e.outPorts.add("error",{datatype:"object"}),o.helpers.WirePattern(e,{in:"code",out:"token",async:!0},(e,t,r,o)=>{const i={redirect:"http://localhost:9999",clientid:"46fe25abef8d07e6dc2d",clientsecret:"",token_server:"https://github.com",token_endpoint:"/login/oauth/access_token",gatekeeper_server:"https://noflo-gate.herokuapp.com",gatekeeper_endpoint:"/authenticate"};return"https:"===window.location.protocol&&(i.redirect="",i.clientid="",i.clientsecret="",i.gatekeeper_endpoint="/authenticate/ssl"),"undefined"!=typeof chrome&&chrome.identity&&(i.redirect="https://hfhpoogbmnkfihpcaoigganphdglajmp.chromiumapp.org/",i.clientid="f29ae9f73bfb223d69d7",i.clientsecret="",i.gatekeeper_endpoint="/authenticate/chrome"),((e,t,r)=>{const o=new XMLHttpRequest;if(o.onreadystatechange=()=>{if(4!==o.readyState)return;if(200!==o.status){try{const e=JSON.parse(o.responseText);r(new Error(`Authentication token exchange failed with ${e.error}`))}catch(e){r(new Error(o.responseText))}return}let e;try{e=JSON.parse(o.responseText)}catch(e){return void r(e)}const t=e.token||e.access_token||null;r(null,t)},t.clientsecret){const r={code:e,client_id:t.clientid,client_secret:t.clientsecret,grant_type:"authorization_code",redirect_uri:t.redirect||window.location.href};return o.open("POST",`${t.token_server}${t.token_endpoint}`,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.setRequestHeader("Accept","application/json"),void o.send(n.stringify(r))}o.open("GET",`${t.gatekeeper_server}${t.gatekeeper_endpoint}/${e}`,!0),o.send(null)})(e,i,(e,t)=>e?o(e):t?(r.send(t),o()):o(new Error("OAuth token exchange didn't return a token")))})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("graph",{datatype:"object"}),e.inPorts.add("search",{datatype:"string"}),e.outPorts.add("nodes",{datatype:"object"}),n.helpers.WirePattern(e,{in:"search",params:["graph"],out:"nodes",async:!0},(t,r,n,o)=>{if(null==t)return void o();if(!e.params.graph)return void o();if(t.length<1)return n.send(null),void o();const i=t.toLowerCase();e.params.graph.nodes.forEach(e=>{e.metadata.label.toLowerCase().indexOf(i)>=0&&n.send(e)}),o()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="Reads requested keys from action and sends them out alongside the action payload",e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("keys",{datatype:"string",control:!0}),e.outPorts.add("values",{datatype:"all",addressable:!0}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("state",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in"))return;if(e.attached("keys").length&&!e.hasData("keys"))return;const r=e.getData("in");if(e.hasData("keys")){const o=((e,t)=>{return e.map(e=>{if(-1===e.indexOf("["))return t[e];const r=e.match(/(.*)\[([0-9]+|last)\]/);if(!r)return null;const n=t[r[1]];return"last"===r[2]?n[n.length-1]:n[r[2]]})})(e.getData("keys").split(","),r.state);for(let e=0;e<o.length;e+=1){const r=o[e];t.send({values:new n.IP("data",r,{index:e})})}}t.sendDone({state:r.state||{},out:r.payload||r})})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("user",{datatype:"object"}),e.outPorts.add("projects",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"user",out:"projects",async:!0},(e,t,r,n)=>{if(!e["flowhub-token"])return void n();const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4===o.readyState){if(200===o.status){let e;try{e=JSON.parse(o.responseText)}catch(e){return void n(e)}return r.send(e),void n()}n(new Error(o.responseText))}},o.open("GET","https://api.flowhub.io/projects",!0),o.setRequestHeader("Authorization",`Bearer ${e["flowhub-token"]}`),o.send(null)})}},function(e,t,r){const n=r(0),o=r(80);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("user",{datatype:"object"}),e.inPorts.add("runtimes",{datatype:"array",required:!0}),e.outPorts.add("runtime",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{params:["runtimes"],in:"user",out:"runtime",async:!0},(t,r,n,i)=>{if(!t["flowhub-token"])return void i();const s=e.params.runtimes||[];o.list(t["flowhub-token"],{host:"https://api.flowhub.io"},(e,t)=>{if(e)return void i(e);const r=t.filter(e=>{const t=e,r=s.find(e=>e.id===t.runtime.id);if(!r)return!0;const n=new Date(r.seen);return(t.runtime.seen.getTime()!==n.getTime()||t.runtime.address!==r.address||t.runtime.secret!==r.secret)&&(t.runtime.capabilities=r.capabilities,t.runtime.components=r.components,!0)});r.length?(n.beginGroup("https://api.flowhub.io"),r.forEach(e=>{n.send(e.runtime)}),n.endGroup(),i()):i()})})}},function(e,t,r){var n;"undefined"!=typeof window?n=window:"undefined"!=typeof self?n=self:(console.warn("Using browser-only version of superagent in non-browser environment"),n=this);var o=r(239),i=r(240),s=r(119),a=r(241),c=r(243);function u(){}var p=t=e.exports=function(e,r){return"function"==typeof r?new t.Request("GET",e).end(r):1==arguments.length?new t.Request("GET",e):new t.Request(e,r)};t.Request=y,p.getXHR=function(){if(!(!n.XMLHttpRequest||n.location&&"file:"==n.location.protocol&&n.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var l="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function h(e){if(!s(e))return e;var t=[];for(var r in e)d(t,r,e[r]);return t.join("&")}function d(e,t,r){if(null!=r)if(Array.isArray(r))r.forEach(function(r){d(e,t,r)});else if(s(r))for(var n in r)d(e,t+"["+n+"]",r[n]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));else null===r&&e.push(encodeURIComponent(t))}function f(e){for(var t,r,n={},o=e.split("&"),i=0,s=o.length;i<s;++i)-1==(r=(t=o[i]).indexOf("="))?n[decodeURIComponent(t)]="":n[decodeURIComponent(t.slice(0,r))]=decodeURIComponent(t.slice(r+1));return n}function m(e){return/[\/+]json($|[^-\w])/.test(e)}function g(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){for(var t,r,n,o,i=e.split(/\r?\n/),s={},a=0,c=i.length;a<c;++a)-1!==(t=(r=i[a]).indexOf(":"))&&(n=r.slice(0,t).toLowerCase(),o=l(r.slice(t+1)),s[n]=o);return s}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function y(e,t){var r=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e,t=null,n=null;try{n=new g(r)}catch(e){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=e,r.xhr?(t.rawResponse=void 0===r.xhr.responseType?r.xhr.responseText:r.xhr.response,t.status=r.xhr.status?r.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),r.callback(t)}r.emit("response",n);try{r._isResponseOK(n)||(e=new Error(n.statusText||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=t,e.response=n,e.status=n.status,r.callback(e,n)):r.callback(null,n)})}function v(e,t,r){var n=p("DELETE",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n}p.serializeObject=h,p.parseString=f,p.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},p.serialize={"application/x-www-form-urlencoded":h,"application/json":JSON.stringify},p.parse={"application/x-www-form-urlencoded":f,"application/json":JSON.parse},a(g.prototype),g.prototype._parseBody=function(e){var t=p.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&m(this.type)&&(t=p.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},g.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,n="cannot "+t+" "+r+" ("+this.status+")",o=new Error(n);return o.status=this.status,o.method=t,o.url=r,o},p.Response=g,o(y.prototype),i(y.prototype),y.prototype.type=function(e){return this.set("Content-Type",p.types[e]||e),this},y.prototype.accept=function(e){return this.set("Accept",p.types[e]||e),this},y.prototype.auth=function(e,t,r){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(r=t,t=""),r||(r={type:"function"==typeof btoa?"basic":"auto"});var n=function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(e,t,r,n)},y.prototype.query=function(e){return"string"!=typeof e&&(e=h(e)),e&&this._query.push(e),this},y.prototype.attach=function(e,t,r){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,r||t.name)}return this},y.prototype._getFormData=function(){return this._formData||(this._formData=new n.FormData),this._formData},y.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var r=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),r(e,t)},y.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},y.prototype.buffer=y.prototype.ca=y.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},y.prototype.pipe=y.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},y.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},y.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||u,this._finalizeQueryString(),this._end()},y.prototype._end=function(){var e=this,t=this.xhr=p.getXHR(),r=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var r=t.readyState;if(r>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==r){var n;try{n=t.status}catch(e){n=0}if(!n){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var n=function(t,r){r.total>0&&(r.percent=r.loaded/r.total*100),r.direction=t,e.emit("progress",r)};if(this.hasListeners("progress"))try{t.onprogress=n.bind(null,"download"),t.upload&&(t.upload.onprogress=n.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof r&&!this._isHost(r)){var o=this._header["content-type"],i=this._serializer||p.serialize[o?o.split(";")[0]:""];!i&&m(o)&&(i=p.serialize["application/json"]),i&&(r=i(r))}for(var s in this.header)null!=this.header[s]&&this.header.hasOwnProperty(s)&&t.setRequestHeader(s,this.header[s]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==r?r:null),this},p.agent=function(){return new c},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(e){c.prototype[e.toLowerCase()]=function(t,r){var n=new p.Request(e,t);return this._setDefaults(n),r&&n.end(r),n}}),c.prototype.del=c.prototype.delete,p.get=function(e,t,r){var n=p("GET",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},p.head=function(e,t,r){var n=p("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},p.options=function(e,t,r){var n=p("OPTIONS",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},p.del=v,p.delete=v,p.patch=function(e,t,r){var n=p("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},p.post=function(e,t,r){var n=p("POST",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},p.put=function(e,t,r){var n=p("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n}},function(e,t,r){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){n=0;for(var o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,r){"use strict";var n=r(119);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},o.prototype.parse=function(e){return this._parser=e,this},o.prototype.responseType=function(e){return this._responseType=e,this},o.prototype.serialize=function(e){return this._serializer=e,this},o.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},o.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var i=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];o.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var r=this._retryCallback(e,t);if(!0===r)return!0;if(!1===r)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~i.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},o.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},o.prototype.then=function(e,t){if(!this._fullfilledPromise){var r=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(e,t){r.end(function(r,n){r?t(r):e(n)})})}return this._fullfilledPromise.then(e,t)},o.prototype.catch=function(e){return this.then(void 0,e)},o.prototype.use=function(e){return e(this),this},o.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},o.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},o.prototype.get=function(e){return this._header[e.toLowerCase()]},o.prototype.getHeader=o.prototype.get,o.prototype.set=function(e,t){if(n(e)){for(var r in e)this.set(r,e[r]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},o.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},o.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),n(e)){for(var r in e)this.field(r,e[r]);return this}if(Array.isArray(t)){for(var o in t)this.field(e,t[o]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},o.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},o.prototype._auth=function(e,t,r,n){switch(r.type){case"basic":this.set("Authorization","Basic "+n(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},o.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},o.prototype.redirects=function(e){return this._maxRedirects=e,this},o.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},o.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},o.prototype.send=function(e){var t=n(e),r=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&n(this._data))for(var o in e)this._data[o]=e[o];else"string"==typeof e?(r||this.type("form"),r=this._header["content-type"],this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(r||this.type("json"),this)},o.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},o.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var r=this.url.substring(t+1).split("&");"function"==typeof this._sort?r.sort(this._sort):r.sort(),this.url=this.url.substring(0,t)+"?"+r.join("&")}}},o.prototype._appendQueryString=function(){console.trace("Unsupported")},o.prototype._timeoutError=function(e,t,r){if(!this._aborted){var n=new Error(e+t+"ms exceeded");n.timeout=t,n.code="ECONNABORTED",n.errno=r,this.timedout=!0,this.abort(),this.callback(n)}},o.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function(e,t,r){"use strict";var n=r(242);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.get=function(e){return this.header[e.toLowerCase()]},o.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=n.type(t);var r=n.params(t);for(var o in r)this[o]=r[o];this.links={};try{e.link&&(this.links=n.parseLinks(e.link))}catch(e){}},o.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t,r){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce(function(e,t){var r=t.split(/ *= */),n=r.shift(),o=r.shift();return n&&o&&(e[n]=o),e},{})},t.parseLinks=function(e){return e.split(/ *, */).reduce(function(e,t){var r=t.split(/ *; */),n=r[0].slice(1,-1);return e[r[1].split(/ *= */)[1].slice(1,-1)]=n,e},{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){function r(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(e){r.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}}),r.prototype._setDefaults=function(e){this._defaults.forEach(function(t){e[t.fn].apply(e,t.arguments)})},e.exports=r},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("token",{datatype:"string",required:!0}),e.outPorts.add("user",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"token",out:"user",async:!0},(e,t,r,n)=>{const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4!==o.readyState)return;if(200!==o.status){try{const e=JSON.parse(o.responseText);n(new Error(e.message||`User fetching failed with ${o.status}`))}catch(e){n(new Error(o.responseText))}return}let e;try{e=JSON.parse(o.responseText)}catch(e){return void n(e)}r.send(e),n()},o.open("GET","https://api.flowhub.io/user",!0),o.setRequestHeader("Authorization",`Bearer ${e}`),o.send(null)})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"bang"}),e.outPorts.add("out",{datatype:"string"}),n.helpers.WirePattern(e,{async:!0,forwardGroups:!1},(e,t,r,n)=>(r.send(window.location.href),n()))}},function(e,t,r){const n=r(0),o=r(21);t.getComponent=()=>{const e=new n.Component;return e.description="Get user token from action",e.icon="key",e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("limit",{datatype:"int",default:50}),e.outPorts.add("token",{datatype:"string"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"in",params:["limit"],out:["token","out"],async:!0},(t,r,n,i)=>{let s;t.state&&t.state.user&&t.state.user["github-token"]&&(s=t.state.user["github-token"]);const a=o.api();s&&a.token(s);const c=a.get("/rate_limit");c.on("success",r=>{if(((null!=r.body.rate?r.body.rate.remaining:void 0)||0)<(e.params.limit?parseInt(e.params.limit,10):50))return s?void i(new Error("GitHub API access rate limited, try again later")):void i(new Error("GitHub API access rate limited. Please log in to increase the limit"));n.token.send(s),n.out.send(t.payload),i()}),c.on("error",e=>{const t=e.error||e.body;i(t?new Error(`Failed to communicate with GitHub: ${t}`):new Error("Failed to communicate with GitHub. Try again later"))}),c()})}},function(e,t,r){const n=r(0),o=r(21),i=r(15);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object",required:!0}),e.inPorts.add("token",{datatype:"string",required:!0}),e.outPorts.add("graph",{datatype:"object"}),e.outPorts.add("component",{datatype:"object"}),e.outPorts.add("project",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"in",params:["token"],out:["graph","component","project"],async:!0},(t,r,s,a)=>{const c=o.api();e.params.token&&c.token(e.params.token);const u={id:t.graph,gist:t.graph,graphs:[],components:[],specs:[]},p=c.get(`/gists/${t.graph}`);return p.on("success",e=>{(null!=e.body?e.body.files:void 0)?(u.name=e.body.description,Object.keys(e.body.files).forEach(t=>{const r=e.body.files[t],o=i.basename(t,i.extname(t));if(".json"===i.extname(t))return void n.graph.loadJSON(r.content,(e,t)=>(t.setProperties({project:u.id,id:`${u.id}_${o}`}),u.main||(u.main=t.properties.id),u.name||(u.name=t.name),t.properties&&t.properties.environment&&t.properties.environment.type&&!u.type&&(u.type=t.properties.environment.type),u.graphs.push(t)));const s={name:o,language:r.language,project:u.id,code:r.content,tests:""};u.components.push(s)}),s.project.send(u),u.graphs.forEach(e=>{s.graph.send(e)}),u.components.forEach(e=>{s.components.send(e)}),a()):a(new Error(`Gist ${t.gist} didn't provide any files`))}),p.on("error",e=>a(e.error||e.body)),p()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("missed",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in"))return;const r=e.getData("in");r.state.runtime?t.sendDone({out:r}):t.sendDone({missed:r})})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;e.inPorts.add("in",{description:"Runtime client instance",datatype:"object"}),e.outPorts.add("runtimeupdate",{datatype:"object"}),e.outPorts.add("status",{description:"Runtime status change",datatype:"object"}),e.outPorts.add("components",{datatype:"object"}),e.outPorts.add("component",{datatype:"object"}),e.outPorts.add("started",{datatype:"object"}),e.outPorts.add("stopped",{datatype:"object"}),e.outPorts.add("packet",{datatype:"object"}),e.outPorts.add("output",{datatype:"object"}),e.outPorts.add("icon",{datatype:"object"}),e.outPorts.add("networkerror",{datatype:"object"}),e.outPorts.add("processerror",{datatype:"object"}),e.outPorts.add("protocolerror",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.clients={};const t=t=>{e.clients[t]&&(e.clients[t].client.removeListener("connected",e.clients[t].onConnected),e.clients[t].client.transport.removeListener("status",e.clients[t].onStatus),e.clients[t].client.removeListener("signal",e.clients[t].onSignal),e.clients[t].client.removeListener("protocolError",e.clients[t].onProtocolError),e.clients[t].context.deactivate(),delete e.clients[t])};return e.tearDown=r=>{Object.keys(e.clients).forEach(e=>{t(e)}),r()},e.process((r,n,o)=>{if(!r.hasData("in"))return;const i=r.getData("in");let{id:s}=i.definition;t(s);const a=()=>{i.definition.id!==s&&(e.clients[i.definition.id]=e.clients[s],delete e.clients[s],s=i.definition.id,n.send({runtimeupdate:i.definition}))};e.clients[s]={context:o,client:i,onConnected(){a(),i.canSend("component","list")&&setTimeout(()=>i.protocol.component.list().then(e=>n.send({components:{components:e,runtime:s}})).then(()=>i.definition.graph?i.protocol.network.getstatus({graph:i.definition.graph}).then(e=>{e.running&&n.send({started:{status:e,runtime:s}})}):Promise.resolve()).catch(e=>{const t=e;t.runtime=s,n.send({error:t})}),1)},onStatus(e){a(),i.definition.seen=new Date,n.send({status:{status:e,runtime:s},runtimeupdate:i.definition})},onSignal(e){((e,t,r)=>{const n=e;switch("error"===n.command&&(n.payload.runtime=t,r.send({error:{payload:n.payload}})),`${n.protocol}:${n.command}`){case"component:component":return void r.send({component:{component:n.payload,runtime:t}});case"network:started":return void r.send({started:{status:n.payload,runtime:t}});case"network:stopped":return void r.send({stopped:{status:n.payload,runtime:t}});case"network:begingroup":return n.payload.type="openBracket",void r.send({packet:{packet:n.payload,runtime:t}});case"network:data":return n.payload.type="data",void r.send({packet:{packet:n.payload,runtime:t}});case"network:endgroup":return n.payload.type="closeBracket",void r.send({packet:{packet:n.payload,runtime:t}});case"network:output":return void r.send({output:{output:n.payload,runtime:t}});case"network:error":return void r.send({networkerror:{error:n.payload,runtime:t}});case"network:processerror":return void r.send({processerror:{error:n.payload,runtime:t}});case"network:icon":r.send({icon:{icon:n.payload,runtime:t}})}})(e,s,n)},onProtocolError(e){n.send({protocolerror:{error:e,runtime:s}})}},i.on("connected",e.clients[s].onConnected),i.transport.on("status",e.clients[s].onStatus),i.on("signal",e.clients[s].onSignal),i.on("protocolError",e.clients[s].onProtocolError)})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("start",{datatype:"bang"}),e.outPorts.add("user",()=>({datatype:"object"})),e.outPorts.add("error",()=>({datatype:"object"})),n.helpers.WirePattern(e,{in:"start",out:"user",async:!0},(e,t,r,n)=>{const o={"grid-avatar":"flowhub-avatar","grid-token":"flowhub-token","grid-user":"flowhub-user"};Object.keys(o).forEach(e=>{const t=o[e],r=localStorage.getItem(e);r&&(localStorage.setItem(t,r),localStorage.removeItem(e))});const i={};["flowhub-avatar","flowhub-debug","flowhub-plan","flowhub-theme","flowhub-token","flowhub-user","github-token","github-username"].forEach(e=>{i[e]=localStorage.getItem(e)}),((e,t)=>{const r=e;if(r["flowhub-user"]){try{r["flowhub-user"]=JSON.parse(r["flowhub-user"])}catch(e){return void t(e)}t(null,r)}else t(null,r)})(i,(e,t)=>{e?n(e):(r.send(t),n())})})}},function(e,t,r){const n=r(0),o=r(14)("noflo-ui:action"),i=r(14)("noflo-ui:action:full"),s=r(14)("noflo-ui:error"),a=(e,t,r)=>{let n=t,o=r;null==n&&(n="click"),null==o&&(o="menu"),"function"==typeof window.ga&&window.ga("send","event",o,n,e)};t.getComponent=()=>{const e=new n.Component;return e.icon="file-text",e.inPorts.add("in",{datatype:"all"}),e.outPorts.add("pass",{datatype:"all"}),n.helpers.WirePattern(e,{in:"in",out:"pass",forwardGroups:!0,async:!0},(e,t,r,n)=>{const{action:c}=e;switch(o(c),i(c,e.payload),c.match(/:error$/)&&s(e.payload),c){case"application:hash":(e=>{let t=e;"function"==typeof window.ga&&t&&(-1!==t.indexOf("?")&&([t]=t.split("?")),window.ga("set","page",`${window.location.pathname}${window.location.search}#${t}`),window.ga("send","pageview"))})(e.payload);break;case"user:login":a("userLogin");break;case"user:logout":a("userLogout");break;case"github:open":a("pullGithub","navigation","url");break;case"gist:open":a("pullGist","navigation","url");break;case"main:open":a("openHome","navigation","url");break;case"runtime:start":a("startRuntime","click","button");break;case"runtime:stop":a("stopRuntime","click","button");break;case"runtime:output":e.payload.output.message&&console.error(e.payload.output.message);break;case"runtime:processerror":console.error(e.payload.error.error);break;case"runtime:networkerror":case"runtime:protocolerror":console.error(e.payload.error);break;case"runtime:error":console.error(e.payload)}r.send(e),n()})}},function(e,t,r){e.exports=function(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){let r;function s(...e){if(!s.enabled)return;const t=s,o=Number(new Date),i=o-(r||o);t.diff=i,t.prev=r,t.curr=o,r=o,e[0]=n.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,o)=>{if("%%"===r)return r;a++;const i=n.formatters[o];if("function"==typeof i){const n=e[a];r=i.call(t,n),e.splice(a,1),a--}return r}),n.formatArgs.call(t,e),(t.log||n.log).apply(t,e)}return s.namespace=e,s.enabled=n.enabled(e),s.useColors=n.useColors(),s.color=t(e),s.destroy=o,s.extend=i,"function"==typeof n.init&&n.init(s),n.instances.push(s),s}function o(){const e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function i(e,t){const r=n(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},n.disable=function(){const e=[...n.names.map(s),...n.skips.map(s).map(e=>"-"+e)].join(",");return n.enable(""),e},n.enable=function(e){let t;n.save(e),n.names=[],n.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(t=0;t<o;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){const e=n.instances[t];e.enabled=n.enabled(e.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;let t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=r(60),Object.keys(e).forEach(t=>{n[t]=e[t]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}},function(e,t,r){const n=r(0),o=r(27),i=r(59),s=(e,t)=>{let r;const n=o.parse(e);return r=t?o.parse("https://hfhpoogbmnkfihpcaoigganphdglajmp.chromiumapp.org/"):"https:"===window.location.protocol?o.parse(""):o.parse("http://localhost:9999"),n.host===r.host},a=e=>{const t={client_id:e.client,response_type:"code",redirect_uri:e.url};return e.scopes.length&&(t.scope=e.scopes.join(" ")),`https://github.com/login/oauth/authorize?${i.stringify(t)}`};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"string"}),e.outPorts.add("codeurl",{datatype:"string"}),e.outPorts.add("redirect",{datatype:"string"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{out:["codeurl","redirect"],async:!0},(e,t,r,n)=>{let o;if("undefined"!=typeof chrome&&chrome.identity)return o=chrome.identity.getRedirectURL(),s(o,!0)?void chrome.identity.launchWebAuthFlow({interactive:!0,url:a({client:"f29ae9f73bfb223d69d7",url:chrome.identity.getRedirectURL(),scopes:e.payload.scopes})},e=>{r.codeurl.send({payload:e}),n()}):void n(new Error("App URL must match GitHub app configuration https://hfhpoogbmnkfihpcaoigganphdglajmp.chromiumapp.org/"));if(!s(e.payload.url))return void n(new Error("App URL must match GitHub app configuration http://localhost:9999"));const i={client:"46fe25abef8d07e6dc2d",url:e.payload.url,scopes:e.payload.scopes};"https:"===window.location.protocol&&(i.client=""),r.redirect.send(a(i)),n()})}},function(e,t,r){const n=r(0),o=e=>{const t=e;return(null!=t.runtime?t.runtime.id:void 0)?(t.runtimeStatuses||(t.runtimeStatuses={}),t.runtimeExecutions||(t.runtimeExecutions={}),{definition:t.runtime,status:t.runtimeStatuses[t.runtime.id]||{},execution:t.runtimeExecutions[t.runtime.id]||{running:!1,label:"not started"}}):null};t.getComponent=()=>{const e=new n.Component;return e.description="Map application state to UI properties",e.inPorts.add("state",{datatype:"object",description:"Full application state"}),e.inPorts.add("updated",{datatype:"object",description:"Updated application state values"}),e.outPorts.add("props",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("state","updated"))return;const[r,n]=e.getData("state","updated"),i={};Object.keys(n).forEach(e=>{switch(e){case"runtime":return(null!=r.runtime?r.runtime.id:void 0)?void(i.runtime=o(r)):(i.runtime=n.runtime,i.componentLibrary=[],i.packets=[],i.events=[],i.edges=[],void(i.icons={}));case"componentLibraries":if(!(null!=r.runtime?r.runtime.id:void 0))return;return void(i.componentLibrary=n[e][r.runtime.id]||[]);case"runtimeStatuses":case"runtimeExecutions":return void(i.runtime=o(r));case"runtimePackets":{if(!(null!=r.runtime?r.runtime.id:void 0))return;if(!n.runtimePackets[r.runtime.id])return void(i.packets=[]);const e=n.runtimePackets[r.runtime.id].toarray();return e.reverse(),void(i.packets=e.filter(e=>e.graph===(r.graphs[0].name||r.graphs[0].properties.id)))}case"runtimeEvents":{if(!(null!=r.runtime?r.runtime.id:void 0))return;if(!n.runtimeEvents[r.runtime.id])return void(i.events=[]);const e=n.runtimeEvents[r.runtime.id].toarray();return e.reverse(),void(i.events=e)}case"runtimeIcons":{if(!(null!=r.runtime?r.runtime.id:void 0))return;if(i.icons={},!n.runtimeIcons[r.runtime.id])return;if(!(null!=r.graphs?r.graphs.length:void 0))return;const e=r.graphs[r.graphs.length-1],t=e.name||e.properties.id;if(!n.runtimeIcons[r.runtime.id][t])return;return void Object.keys(n.runtimeIcons[r.runtime.id][t]).forEach(e=>{const o=n.runtimeIcons[r.runtime.id][t][e];i.icons[e]=o})}default:i[e]=n[e]}}),t.sendDone({props:i})})}},function(e,t,r){const n=r(0),o=r(117),{loadGraph:i,ensureIframe:s,getRemoteNodes:a}=r(28);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","client"))return;const[r,n]=e.getData("in","client"),c={state:"ok",graphs:[],remote:r.nodes||[],project:{},component:null,runtime:r.runtime};Promise.resolve().then(()=>s(n,{id:o()})).then(()=>n.connect()).then(e=>e.graph?n.protocol.component.getsource({name:e.graph}):Promise.reject(new Error(`Runtime ${e.id} is not running a graph`))).then(e=>i({...e,name:n.definition.graph})).then(e=>c.graphs.push(e)).then(()=>a(n,c)).then(()=>t.send({out:c})).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0),o=r(58);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("project",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("hash",{datatype:"array"}),n.helpers.WirePattern(e,{in:["in","project"],out:["out","hash"],async:!0,forwardGroups:!1},(e,t,r,n)=>{r.out.send(e.project),e.in.state.project?n():o.getProjectHash(e.project,(e,t)=>e?n():(r.hash.send(t),n()))})}},function(e,t,r){const n=r(0),o=(e,t)=>t.graphs?t.graphs.find(t=>t.name===e||t.properties.id===e):null,i=(e,t)=>t.components?t.components.find(t=>t.name===e):null,s=(e,t)=>{let[r,n]=e.split("/");n||(n=r,r=void 0);const s=o(n,t);if(s)return["graph",s];const a=i(n,t);return a?["component",a]:["runtime",e]};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{async:!0,forwardGroups:!1},(e,t,r,n)=>{if(!(null!=e.state.projects?e.state.projects.length:void 0))return void n(new Error("No projects found"));const a={state:"",project:null,runtime:null,component:null,graphs:[],remote:[]};if(a.project=((e,t)=>t?t.find(t=>t.id===e):null)(e.payload.project,e.state.projects),!a.project)return void n(new Error(`Project ${e.payload.project} not found`));if(e.payload.component)return a.component=i(e.payload.component,a.project),a.component?(a.state="ok",r.send(a),void n()):void n(new Error(`Component ${e.payload.component} not found`));const c=o(e.payload.graph,a.project);if(!c)return void n(new Error(`Graph ${e.payload.graph} not found`));a.graphs.push(c);let u=c;for(;e.payload.nodes.length;){let t;const r=e.payload.nodes.shift();if("object"!=typeof u)a.remote.push(r);else{const o=u.getNode(r);if(!o)return void n(new Error(`Node ${r} not found`));if(!o.component)return void n(new Error(`Node ${r} has no component defined`));if([t,u]=s(o.component,a.project),"component"===t){if(a.component=u,e.payload.nodes.length)return void n(new Error(`Component ${r} cannot have subnodes`));break}"runtime"===t?a.remote.push(r):a.graphs.push(u)}}a.state=a.remote.length?"loading":"ok",r.send(a),n()})}},function(e,t,r){const n=r(0),{getGraphType:o,getComponentType:i,getRemoteNodes:s,ensureIframe:a}=r(28);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","client"))return;const[r,n]=e.getData("in","client");(null!=r.remote?r.remote.length:void 0)&&(r.state="loading"),t.send({out:r}),Promise.resolve().then(()=>a(n,r.project)).then(()=>n.connect()).then(()=>((e,t,r)=>{const n=t.filter(t=>[null,e.definition.type].includes(i(t)));return Promise.all(n.map(t=>e.protocol.component.source({name:t.name,language:t.language,library:r||e.definition.namespace,code:t.code})))})(n,r.project.components,r.project.namespace)).then(()=>((e,t,r)=>{const n=t.filter(t=>o(t)===e.definition.type);return Promise.all(n.map(t=>{const n=t===r[0];return e.protocol.graph.send(t,n)}))})(n,r.project.graphs,r.graphs)).then(()=>(null!=r.graphs?r.graphs.length:void 0)?n.transport.graph===r.graphs[0]?Promise.resolve():(n.transport.setMain(r.graphs[0]),Promise.resolve()):Promise.resolve()).then(()=>s(n,r)).then(()=>"loading"!==r.state?Promise.resolve():(r.state="ok",t.send({out:r}))).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0),{getGraphType:o,getComponentType:i,isDefaultRuntime:s}=r(28),a=(e,t)=>{const r=(e=>{if(e.graphs.length){const t=o(e.graphs[0]);if(t)return t}if(e.component){const t=i(e.component);if(t)return t}return e.project?e.project.type:null})(e);return t.filter(e=>"all"===r||e.type===r)};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("runtimes",{datatype:"array"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("skipped",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","runtimes"))return;const[r,n]=e.getData("in","runtimes");r.compatible=a(r,n),r.runtime=((e,t)=>{if(e.runtime)return e.runtime;if(!t.length)return null;const[r]=t.filter(t=>{if(e.project&&t.project){if(s(t))return!0;if(t.project!==e.project.id)return!1}return!(!e.project||t.project!==e.project.id)||"iframe"===t.protocol});return r||null})(r,r.compatible),r.runtime?t.sendDone({out:r}):t.sendDone({skipped:r})})}},function(e,t,r){const n=r(0),o=r(26);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("runtimes",{required:!0,datatype:"array"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("new",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","runtimes"))return;const[r,n]=e.getData("in","runtimes");if(!r.runtime)return void t.done(new Error("No runtime defined"));"string"==typeof r.runtime&&"endpoint?"===r.runtime.substr(0,9)&&(r.runtime=(e=>{const t={};return e.split("&").forEach(e=>{const[r,n]=e.split("=");t[r]=n}),t.protocol&&t.address?t:null})(r.runtime.substr(9)));const i=((e,t)=>{if(!t||!t.length)return null;let r=e;return"string"==typeof e&&(r={id:e}),t.find(e=>e.id===r.id||!r.id&&r.protocol===e.protocol&&r.address===e.address)})(r.runtime,n);if(!i)return r.runtime.id||(r.runtime.id=o()),t.send({new:r.runtime}),t.send({out:r}),void t.done();r.runtime=i,t.send({out:r}),t.done()})}},function(e,t,r){const n=r(0),o=r(26),i=(e,t,r,o,s)=>{if(!e.length)return void s();const a=e.shift();a.remote?(o.send({repository:new n.IP("data",t,{scope:r}),sha:new n.IP("data",a.remote.sha,{scope:r})}),setTimeout(()=>i(e,t,r,o,s),100)):i(e,t,r,o,s)};t.getComponent=()=>{const e=new n.Component;return e.description="Prepare a set of blob fetching requests for an operations object",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("repository",{datatype:"string"}),e.outPorts.add("sha",{datatype:"string"}),e.process((e,t)=>{if(!e.hasData("in"))return;const r=e.getData("in");if(0===r.pull.length)return void t.done();const s=o.v4();t.send({out:new n.IP("data",r,{scope:s})}),t.send({sha:new n.IP("openBracket",s,{scope:s})});const a=r.pull.slice(0);i(a,r.repo,s,t,()=>{t.send({sha:new n.IP("closeBracket",s,{scope:s})}),t.done()})})}},function(e,t,r){const n=r(0),o=(e,t)=>{if(["component","spec"].includes(e))return t.code;const r=t.toJSON();return delete r.properties.sha,delete r.properties.id,delete r.properties.project,delete r.properties.changed,JSON.stringify(r,null,4)},i=(e,t)=>"graph"!==e?t:t.replace(".fbp",".json");t.getComponent=()=>{const e=new n.Component;return e.description="Prepare a GitHub tree for an operations object",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("repository",{datatype:"string"}),e.outPorts.add("tree",{datatype:"array"}),e.outPorts.add("basetree",{datatype:"string"}),e.outPorts.add("parentcommits",{datatype:"array"}),e.outPorts.add("message",{datatype:"string"}),e.outPorts.add("ref",{datatype:"string"}),n.helpers.WirePattern(e,{in:"in",out:["out","repository","tree","basetree","parentcommits","message","ref"],async:!0},(e,t,r,n)=>(null!=e.push?e.push.length:void 0)?(r.out.send(e),r.basetree.send(e.tree),r.tree.send((e=>e.map(e=>({path:i(e.type,e.path),content:o(e.type,e.local),mode:"100644"})))(e.push)),r.repository.send(e.repo),r.parentcommits.send([e.commit]),r.message.send(e.message),r.ref.send(e.ref),n()):n())}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","client"))return;const[,r]=e.getData("in","client");r.disconnect().then(()=>r.connect()).then(()=>t.send({out:r.definition})).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("pass",{datatype:"object"}),e.outPorts.add("updated",{datatype:"object"}),e.outPorts.add("invalid",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"in",out:["pass","updated","invalid"],async:!0},(e,t,r,n)=>{if(!e||!e["flowhub-token"])return r.pass.send(e),void n();if(!navigator.onLine)return r.pass.send(e),void n();const o=new XMLHttpRequest;o.onreadystatechange=()=>{let t;if(4===o.readyState){if(401===o.status)return r.invalid.send(e),void n();if(200===o.status){try{t=JSON.parse(o.responseText)}catch(e){return void n(e)}if(JSON.stringify(t)===JSON.stringify(e["flowhub-user"]))return r.pass.send(e),void n();r.updated.send(t),n()}else try{const e=JSON.parse(o.responseText);n(new Error(e.message||`User fetching failed with ${o.status}`))}catch(e){n(new Error(o.responseText))}}},o.open("GET","https://api.flowhub.io/user",!0),o.setRequestHeader("Authorization",`Bearer ${e["flowhub-token"]}`),o.send(null)})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("user",{datatype:"object",required:!0}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"in",params:"user",out:"out",async:!0},(t,r,n,o)=>{if(!e.params||!e.params.user||!e.params.user["flowhub-token"])return n.send(t),void o();const i=new XMLHttpRequest;i.onreadystatechange=()=>{if(4===i.readyState){if(![200,201,404].includes(i.status)){let{message:e}=JSON.parse(i.responseText);return-1!==e.indexOf('"message":')&&({message:e}=JSON.parse(e)),void o(new Error(e))}n.send(t)}},i.open("DELETE",`https://api.flowhub.io/projects/${t.id}`,!0),i.setRequestHeader("Authorization",`Bearer ${e.params.user["flowhub-token"]}`),i.send()})}},function(e,t,r){const n=r(0),o=r(80);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("user",{datatype:"object",required:!0}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"in",params:"user",out:"out",async:!0},(t,r,n,i)=>{if(!e.params||!e.params.user||!e.params.user["flowhub-token"])return n.send(t),void i();new o.Runtime(t,{host:"https://api.flowhub.io"}).del(e.params.user["flowhub-token"],e=>e?i(e):(n.send(t),i()))})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("route",{datatype:"object"}),e.outPorts.add("redirect",{datatype:"string"}),e.outPorts.add("missed",{datatype:"bang"}),n.helpers.WirePattern(e,{in:"in",out:["route","redirect","missed"],forwardGroups:!1,async:!0},(e,t,r,n)=>{const o=(e=>{const t={route:"",subroute:"open",runtime:null,project:null,graph:null,component:null,nodes:[]};if(""===e)return t.route="main",t;const r=e.split("/").map(e=>decodeURIComponent(e));switch(r.shift()){case"project":return t.route="storage",t.project=r.shift(),"component"===r[0]&&2===r.length?([,t.component]=r,t):(t.graph=r.shift(),t.nodes=r,t);case"example":return{route:"redirect",url:`gist/${r.join("/")}`};case"gist":return t.route="github",t.subroute="gist",t.graph=r.shift(),t.remote=r,t;case"github":{t.route="github";const[e,n]=r.splice(0,2);return t.repo=`${e}/${n}`,t.branch="master",r.length?"tree"===r[0]?(r.shift(),t.branch=r.join("/"),t):("blob"===r[0]&&(r.shift(),t.branch=r.shift(),"graphs"===r[0]&&([,t.graph]=r),"components"===r[0]&&([,t.component]=r)),t):t}case"runtime":return t.route="runtime",t.runtime=r.shift(),t.nodes=r,t;default:return{route:"redirect",url:""}}})(e.payload);if(!o)return r.missed.send({payload:o}),void n();if("redirect"===o.route)return r.redirect.send(`#${o.url}`),void n();const i=`${o.route}:${o.subroute}`;delete o.subroute,r.route.send({action:i,payload:o}),n()})}},function(e,t,r){const n=r(0),o=r(269),i=r(14)("noflo-ui:reducer:runtime"),{componentForLibrary:s}=r(28),a=r(57),c=(e,t,r,n)=>{const i=e.runtimeEvents||{};return t?(i[t]||(i[t]=new o(400)),i[t].enq({type:r,payload:n}),i):i},u=(e,t,r)=>{const n=e||{};if(!t)return n;if(!n[t])return n;const i=n[t].toarray().filter(r);return i.reverse(),n[t]=new o(400),i.forEach(e=>{n[t].enq(e)}),n};t.getComponent=()=>{const e=new n.Component;return e.icon="cogs",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("context",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in"))return;const r=e.getData("in");switch(r.action){case"runtime:opening":return void t.sendDone({context:{state:"loading"}});case"runtime:opened":return void t.sendDone({context:{state:"ok",graphs:r.payload.graphs,component:r.payload.component,runtime:r.payload.runtime}});case"runtime:components":{const e=r.state.componentLibraries||{};return e[r.payload.runtime]=r.payload.components.map(s),void t.sendDone({context:{componentLibraries:e}})}case"runtime:component":{const e=r.state.componentLibraries||{};return e[r.payload.runtime]=e[r.payload.runtime]||[],a.addToList(e[r.payload.runtime],s(r.payload.component)),void t.sendDone({context:{componentLibraries:e}})}case"runtime:status":{const e=r.state.runtimeStatuses||{},n=e[r.payload.runtime];let o=r.state.runtimeEvents||{};n&&n.online&&!r.payload.status.online&&(o=c(r.state,r.payload.runtime,"disconnected",r.payload.status)),n&&n.online||!r.payload.status.online||(o=c(r.state,r.payload.runtime,"connected",r.payload.status)),e[r.payload.runtime]=r.payload.status;const i={runtimeStatuses:e,runtimeEvents:o};if(!r.payload.status.online){const e=r.state.runtimeExecutions||{};e[r.payload.runtime]=r.payload.status,e[r.payload.runtime].running=!1,e[r.payload.runtime].label="not running",i.runtimeExecutions=e}return void t.sendDone({context:i})}case"runtime:started":{const e=r.state.runtimeExecutions||{};let n,o=r.state.runtimeEvents||{};return e[r.payload.runtime]&&(n=e[r.payload.runtime].running),e[r.payload.runtime]=r.payload.status,e[r.payload.runtime].label="running",n||(o=c(r.state,r.payload.runtime,"started",r.payload.status)),r.payload.status.running||(e[r.payload.runtime].label="finished",o=c(r.state,r.payload.runtime,"stopped",r.payload.status)),void t.sendDone({context:{runtimeExecutions:e,runtimeEvents:o}})}case"runtime:stopped":{const e=r.state.runtimeExecutions||{};let n,o=r.state.runtimeEvents||{};return e[r.payload.runtime]&&(n=e[r.payload.runtime].running),e[r.payload.runtime]=r.payload.status,e[r.payload.runtime].running=!1,e[r.payload.runtime].label="not running",n&&(o=c(r.state,r.payload.runtime,"stopped",r.payload.status)),void t.sendDone({context:{runtimeExecutions:e,runtimeEvents:o}})}case"runtime:packet":{const e=((e,t,r)=>{const n=r,i=e.runtimePackets||{};return t?(i[t]||(i[t]=new o(400)),delete n.runtime,i[t].enq(n),i):i})(r.state,r.payload.runtime,r.payload.packet);return void t.sendDone({context:{runtimePackets:e}})}case"runtime:processerror":{const e=c(r.state,r.payload.runtime,"processerror",r.payload.error);return void t.sendDone({context:{runtimeEvents:e}})}case"runtime:networkerror":{const e=c(r.state,r.payload.runtime,"networkerror",r.payload.error);return void t.sendDone({context:{runtimeEvents:e}})}case"runtime:protocolerror":{const e=c(r.state,r.payload.runtime,"protocolerror",r.payload.error);return void t.sendDone({context:{runtimeEvents:e}})}case"runtime:output":{const e=c(r.state,r.payload.runtime,"output",r.payload.output);return void t.sendDone({context:{runtimeEvents:e}})}case"runtime:icon":{const e=r.state.runtimeIcons||{};return e[r.payload.runtime]||(e[r.payload.runtime]={}),e[r.payload.runtime][r.payload.icon.graph]||(e[r.payload.runtime][r.payload.icon.graph]={}),e[r.payload.runtime][r.payload.icon.graph][r.payload.icon.id]=r.payload.icon.icon,void t.sendDone({context:{runtimeIcons:e}})}case"runtime:error":{const e=c(r.state,r.payload.runtime,"error",r.payload);return t.send({context:{runtimeEvents:e}}),void t.sendDone({context:{state:"error",error:r.payload}})}case"runtime:clearevents":{const e=u(r.state.runtimeEvents,r.payload.runtime,e=>!(!r.payload.type||e.type===r.payload.type)||(!(!r.payload.graph||e.payload.graph===r.payload.graph)||!(!r.payload.id||e.payload.id===r.payload.id)));return void t.send({context:{runtimeEvents:e}})}case"runtime:clearpackets":{const e=u(r.state.runtimePackets,r.payload.runtime,e=>{if(r.payload.type&&e.type!==r.payload.type)return!0;if(r.payload.graph&&e.graph!==r.payload.graph)return!0;if(null!=r.payload.edge?r.payload.edge.from:void 0){if(!e.src)return!0;if(e.src.node!==r.payload.edge.from.node)return!0;if(e.src.port!==r.payload.edge.from.port)return!0}if(null!=r.payload.edge?r.payload.edge.to:void 0){if(!e.tgt)return!0;if(e.tgt.node!==r.payload.edge.to.node)return!0;if(e.tgt.port!==r.payload.edge.to.port)return!0}return!1});return void t.send({context:{runtimePackets:e}})}default:i(`Unknown action ${r.action}`)}})}},function(e,t){function r(e){if(!(this instanceof r))return new r(e);if("object"==typeof e&&Array.isArray(e._buffer)&&"number"==typeof e._capacity&&"number"==typeof e._first&&"number"==typeof e._size)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);else{if("number"!=typeof e||e%1!=0||e<1)throw new TypeError("Invalid capacity");this._buffer=new Array(e),this._capacity=e,this._first=0,this._size=0}}r.prototype={size:function(){return this._size},capacity:function(){return this._capacity},enq:function(e){this._first>0?this._first--:this._first=this._capacity-1,this._buffer[this._first]=e,this._size<this._capacity&&this._size++},push:function(e){this._size==this._capacity?(this._buffer[this._first]=e,this._first=(this._first+1)%this._capacity):(this._buffer[(this._first+this._size)%this._capacity]=e,this._size++)},deq:function(){if(0==this._size)throw new RangeError("dequeue on empty buffer");var e=this._buffer[(this._first+this._size-1)%this._capacity];return this._size--,e},pop:function(){return this.deq()},shift:function(){if(0==this._size)throw new RangeError("shift on empty buffer");var e=this._buffer[this._first];return this._first==this._capacity-1?this._first=0:this._first++,this._size--,e},get:function(e,t){if(0==this._size&&0==e&&(null==t||0==t))return[];if("number"!=typeof e||e%1!=0||e<0)throw new TypeError("Invalid start");if(e>=this._size)throw new RangeError("Index past end of buffer: "+e);if(null==t)return this._buffer[(this._first+e)%this._capacity];if("number"!=typeof t||t%1!=0||t<0)throw new TypeError("Invalid end");if(t>=this._size)throw new RangeError("Index past end of buffer: "+t);return this._first+e>=this._capacity&&(e-=this._capacity,t-=this._capacity),this._first+t<this._capacity?this._buffer.slice(this._first+e,this._first+t+1):this._buffer.slice(this._first+e,this._capacity).concat(this._buffer.slice(0,this._first+t+1-this._capacity))},toarray:function(){return 0==this._size?[]:this.get(0,this._size-1)}},e.exports=r},function(e,t,r){const n=r(0),o=r(26),i=r(27),s=r(15),a=e=>e.definition&&e.definition.namespace?e.definition.namespace:null;t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("project",{datatype:"object"}),e.outPorts.add("graph",{datatype:"object"}),e.outPorts.add("component",{datatype:"object"}),e.outPorts.add("runtime",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","client"))return;const[r,c]=e.getData("in","client"),u={id:o.v4(),namespace:a(c),graphs:[],components:[],specs:[]};if(u.namespace&&(u.name=u.namespace),c.definition&&c.definition.repository){const e=i.parse(c.definition.repository);if("github.com"===e.hostname&&e.pathname){const t=e.pathname.slice(1),r=s.dirname(t),n=s.basename(t,s.extname(t));u.repo=`${r}/${n}`,u.name=u.repo}}c.definition&&c.definition.repositoryVersion&&(u.branch=c.definition.repositoryVersion);const p=r.graphs?r.graphs.slice(0):[];let l=[];r.component&&l.push(r.component),((e,t)=>e?t.connect().then(()=>t.protocol.component.list()).then(t=>t.map(e=>e.name).filter(t=>((e,t)=>{if(-1===t.indexOf("/")&&"Graph"!==t)return!0;const[r]=t.split("/");return r===e})(e,t))).then(e=>Promise.all(e.map(e=>t.protocol.component.getsource({name:e})))):Promise.resolve([]))(u.namespace,c).then(e=>{e.filter(e=>"json"===e.language).forEach(e=>{n.graph.loadJSON(e,(e,t)=>{e||p.push(t)})}),l=l.concat(e.filter(e=>"json"!==e.language)),p.forEach(e=>{const t=e;t.name=t.name.split("/").pop(),t.setProperties({id:`${u.id}/${(null!=t.properties?t.properties.id:void 0)||t.name}`,project:u.id}),u.main||(u.main=t.properties.id),u.name||(u.name=t.name),t.properties&&t.properties.environment&&t.properties.environment.type&&!u.type&&(u.type=t.properties.environment.type),u.graphs.push(t)}),l.forEach(e=>{const t=e;t.project=u.id,u.components.push(t)}),c.definition.project=u.id,c.definition.seen=new Date,c.definition.label||(c.definition.label=`${u.name} runtime`),t.send({runtime:c.definition,project:u}),u.graphs.forEach(e=>{t.send({graph:e})}),u.components.forEach(e=>{t.send({component:e})}),t.done()},t.done)})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("nodes",{datatype:"array"}),e.outPorts.add("context",{datatype:"object"}),n.helpers.WirePattern(e,{in:"nodes",out:"context",async:!0},(e,t,r,n)=>{const o={searchGraphResult:e};r.send(o),n()})}},function(e,t,r){const n=r(0),{getComponentType:o}=r(28);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("project",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","project","client"))return;const[r,n,i]=e.getData("in","project","client"),{component:s}=r,a=o(s);a&&a!==i.definition.type?t.done():i.connect().then(()=>i.protocol.component.source({name:s.name,language:s.language,library:(null!=n?n.namespace:void 0)||i.definition.namespace,code:s.code,tests:s.tests})).then(e=>t.send({out:{component:e,runtime:i.definition.id}})).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"bang"}),e.outPorts.add("out",{datatype:"string"}),e.process((e,t)=>{e.hasData("in")&&(e.getData("in"),t.sendDone({out:window.location.href.split("#")[1]||""}))})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("client",{datatype:"object"}),e.inPorts.add("graphs",{datatype:"array"}),e.inPorts.add("edges",{datatype:"array"}),e.outPorts.add("out",{datatype:"array"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("client","graphs","edges"))return;const[r,n,o]=e.getData("client","graphs","edges");if(t.send({out:o}),!n.length)return void t.done(new Error("No graph specified"));const i=n[n.length-1];r.protocol.network.edges({graph:i.name||i.properties.id,edges:o.map(e=>{return{src:e.from,tgt:e.to}})}).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0),{getGraphType:o}=r(28);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("project",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","project","client"))return;const[r,n]=e.getData("in","client");e.getData("project");const i=o(r.graph);if(i&&i!==n.definition.type)return void t.done();const s=r.changes.map(e=>{const t=e;return t.event=e.event.toLowerCase(),t}).filter(e=>n.protocol.graph[e.event]);n.connect().then(()=>Promise.all(s.map(e=>n.protocol.graph[e.event](((e,t,r)=>{const n={};return Object.keys(t).forEach(r=>{const o=t[r];"from"!==r||-1===e.indexOf("edge")&&-1===e.indexOf("initial")?"to"!==r||-1===e.indexOf("edge")&&-1===e.indexOf("initial")?"metadata"===r&&["removenode","removeedge","removeinitial","removeinport","removeoutport","removegroup"].includes(e)||["node","port"].includes(r)&&["removeinport","removeoutport"].includes(e)||"component"===r&&["changenode","removenode"].includes(e)||("metadata"===r&&o&&(n.metadata={},Object.keys(o).forEach(e=>{const t=o[e];"route"===e&&null===t||(n.metadata[e]=t)})),n[r]=o):n.tgt=o:n.src=o}),n.graph=r.name||r.properties.id,n})(e.event,e.payload,r.graph))))).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("action",{datatype:"string",required:!0,control:!0}),e.inPorts.add("in",{datatype:"all"}),e.outPorts.add("out",{datatype:"all",scoped:!1}),n.helpers.WirePattern(e,{params:["action"],forwardGroups:!1,async:!0},(t,r,n,o)=>(n.send({action:e.params.action,payload:t}),o()))}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="indent",e.inPorts.add("context",{datatype:"object"}),e.inPorts.add("key",{datatype:"string",required:!0}),e.inPorts.add("value",{datatype:"all"}),e.outPorts.add("context",{datatype:"object"}),n.helpers.WirePattern(e,{in:["context","value"],params:"key",out:"context",async:!0},(t,r,n,o)=>{const i=t;i.context[e.params.key]=i.value,n.send(i.context),o()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"string"}),e.outPorts.add("out",{datatype:"bang"}),n.helpers.WirePattern(e,{async:!0,forwardGroups:!1},(e,t,r,n)=>(window.location.href=e.payload,r.send(!0),n()))}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"bang"}),n.helpers.WirePattern(e,{async:!0,forwardGroups:!1},(e,t,r,n)=>(window.location.hash=`#${e.payload.map(e=>encodeURIComponent(e)).join("/")}`,r.send(!0),n()))}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","client"))return;const[r,n]=e.getData("in","client"),o=r.graph.name||r.graph.properties.id;n.connect().then(()=>n.protocol.network.start({graph:o})).then(e=>t.send({out:{status:e,runtime:n.definition.id}})).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0),o=r(14)("noflo-ui:state");t.getComponent=()=>{const e=new n.Component;return e.icon="database",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("state",{datatype:"object"}),e.outPorts.add("updated",{datatype:"object"}),e.state={},e.tearDown=t=>{e.state={},t()},n.helpers.WirePattern(e,{in:"in",out:["state","updated"],async:!0,forwardGroups:!1},(t,r,n,i)=>(Object.keys(t).forEach(r=>{const n=t[r];e.state[r]!==n&&(o(`${r} changed`,e.state[r],n),e.state[r]=n)}),n.state.send(e.state),n.updated.send(t),i()))}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","client"))return;const[r,n]=e.getData("in","client"),o=r.graph.name||r.graph.properties.id;n.connect().then(()=>n.protocol.network.stop({graph:o})).then(e=>t.send({out:{status:e,runtime:n.definition.id}})).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0),o=r(57),i=(e,t)=>{const r=(null!=e.properties?e.properties.project:void 0)||e.project;if(!r)return null;const n=t.filter(e=>e.id===r);return n.length?n[0]:null};t.getComponent=()=>{const e=new n.Component;return e.icon="database",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{out:"out",forwardGroups:!1,async:!0},(e,t,r,n)=>{switch(e.action){case"storage:db":{const t=e.state||{};return t.db=e.payload,r.send(t),void n()}case"storage:opened":return r.send(e.payload),void n();case"storage:stored:initial":{const t=e.payload;return t.storedGraphs=t.graphs,delete t.graphs,t.projects.sort(o.sortByName),t.storedGraphs.sort(o.sortByName),t.components.sort(o.sortByName),t.specs.sort(o.sortByName),t.runtimes.sort(o.sortBySeen),t.projects.forEach(e=>{const r=e;r.graphs=t.storedGraphs.filter(e=>e.properties.project===r.id),r.components=t.components.filter(e=>e.project===r.id),r.specs=t.specs.filter(e=>e.project===r.id)}),r.send(t),void n()}case"storage:stored:project":{const t={},i=e.payload;return i.graphs||(i.graphs=[]),e.state.storedGraphs&&!i.graphs.length&&(i.graphs=e.state.storedGraphs.filter(e=>e.properties.project===i.id)),i.components||(i.components=[]),e.state.components&&!i.components.length&&(i.components=e.state.components.filter(e=>e.project===i.id)),i.specs||(i.specs=[]),e.state.specs&&!i.specs.length&&(i.specs=e.state.specs.filter(e=>e.project===i.id)),t.projects=e.state.projects||[],o.addToList(t.projects,i),r.send(t),void n()}case"storage:removed:project":{const t={};return t.projects=e.state.projects||[],o.removeFromList(t.projects,{id:e.payload}),r.send(t),void n()}case"storage:stored:graph":{const t={};t.storedGraphs=e.state.storedGraphs||[],o.addToList(t.storedGraphs,e.payload),t.projects=e.state.projects||[];const s=i(e.payload,t.projects);return s?(o.addToList(s.graphs,e.payload),r.send(t),void n()):(r.send(t),void n())}case"storage:removed:graph":{const t={};t.storedGraphs=e.state.storedGraphs||[],o.removeFromList(t.storedGraphs,{properties:{id:e.payload}}),t.projects=e.state.projects||[];const s=i(e.payload,t.projects);return s?(o.removeFromList(s.graphs,{properties:{id:e.payload}}),r.send(t),void n()):(r.send(t),void n())}case"storage:stored:component":{const t={};t.components=e.state.components||[],o.addToList(t.components,e.payload),t.projects=e.state.projects||[];const s=i(e.payload,t.projects);return s?(o.addToList(s.components,e.payload),r.send(t),void n()):(r.send(t),void n())}case"storage:removed:component":{const t={};t.components=e.state.components||[],o.removeFromList(t.components,{id:e.payload}),t.projects=e.state.projects||[];const s=i(e.payload,t.projects);return s?(o.removeFromList(s.components,{id:e.payload}),r.send(t),void n()):(r.send(t),void n())}case"storage:stored:spec":{const t={};t.specs=e.state.specs||[],o.addToList(t.specs,e.payload),t.projects=e.state.projects||[];const s=i(e.payload,t.projects);return s?(o.addToList(s.specs,e.payload),r.send(t),void n()):(r.send(t),void n())}case"storage:removed:spec":{const t={};t.specs=e.state.specs||[],o.removeFromList(t.specs,{id:e.payload}),t.projects=e.state.projects||[];const s=i(e.payload,t.projects);return s?(o.removeFromList(s.specs,{id:e.payload}),r.send(t),void n()):(r.send(t),void n())}case"storage:stored:runtime":{const t={};return t.runtimes=e.state.runtimes||[],o.addToList(t.runtimes,e.payload,o.sortBySeen),r.send(t),void n()}case"storage:removed:runtime":{const t={};return t.runtimes=e.state.runtimes||[],o.removeFromList(t.runtimes,{id:e.payload}),r.send(t),void n()}case"storage:error":{const t={state:"error",error:e.payload};return r.send(t),void n()}default:n()}})}},function(e,t,r){const n=r(0),o=r(14)("noflo-ui:store"),i=r(14)("noflo-ui:store:error");t.getComponent=()=>{const e=new n.Component;return e.icon="rocket",e.inPorts.add("action",{datatype:"all"}),e.inPorts.add("state",{datatype:"object"}),e.outPorts.add("pass",{datatype:"object",scoped:!1}),e.state={},e.tearDown=t=>{e.state={},t()},e.forwardBrackets={},e.process((t,r)=>{if(t.hasData("state"))return e.state=t.getData("state"),void r.done();if(!t.hasStream("action"))return;t.getStream("action").filter(e=>"data"===e.type).map(e=>e.data).forEach(t=>{t.action?(t.state?e.state=t.state:o(`${t.action} was sent without state, using previous state`),r.send({pass:{action:t.action,state:e.state,payload:t.payload}})):i("Received action without expected payload",t)}),r.done()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((t,r)=>{if(!t.hasData("in"))return;const n=t.getData("in");if(!e.params||!e.params.user||!e.params.user["flowhub-token"])return void r.sendDone({out:n});const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4===o.readyState){if(![200,201].includes(o.status)){let{message:e}=JSON.parse(o.responseText);return-1!==e.indexOf('"message":')&&({message:e}=JSON.parse(e)),void r.done(new Error(e))}r.sendDone({out:n})}};const i=JSON.stringify({repo:n.payload.repo,active:!0});o.open("POST","https://api.flowhub.io/projects",!0),o.setRequestHeader("Authorization",`Bearer ${n.state.user["flowhub-token"]}`),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.send(i)})}},function(e,t,r){const n=r(0),o=r(80),{isDefaultRuntime:i}=r(28);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("user",{datatype:"object",required:!0}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"in",params:"user",out:"out",async:!0},(t,r,n,s)=>{if(["opener","microflo"].includes(t.protocol))return n.send(t),void s();if(i(t))return n.send(t),void s();if(!(e.params&&e.params.user&&e.params.user["flowhub-token"]&&e.params.user["flowhub-user"]&&e.params.user["flowhub-user"].id))return n.send(t),void s();const a=t;a.user=e.params.user["flowhub-user"].id,t.secret||(a.secret=null),new o.Runtime(t,{host:"https://api.flowhub.io"}).register(e.params.user["flowhub-token"],e=>{e?s(e):(n.send(t),s())})})}},function(e,t,r){const n=r(0),o=r(27);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("user",{datatype:"object"}),e.outPorts.add("user",{datatype:"object"}),e.outPorts.add("redirect",{datatype:"string"}),n.helpers.WirePattern(e,{in:"user",out:["user","redirect"],async:!0},(e,t,r,n)=>{const i=(null!=e.plan?e.plan.type:void 0)||"free",s=(null!=e.github?e.github.token:void 0)||"",a=(null!=e.github?e.github.username:void 0)||"";((e,t)=>{if(!e)return void t(null,null);const r=new XMLHttpRequest,n=new FileReader;r.open("GET",e,!0),r.responseType="blob",r.onload=()=>200!==r.status?t(new Error(`Avatar request returned ${r.status}`)):(n.onload=e=>t(null,e.target.result),n.readAsDataURL(r.response)),r.onerror=()=>t(new Error("Avatar request failed")),r.send()})(e.avatar,(t,c)=>{const u={"flowhub-avatar":c,"flowhub-plan":i,"flowhub-token":s,"flowhub-user":JSON.stringify(e),"github-token":s,"github-username":a};c||delete u["flowhub-avatar"],Object.keys(u).forEach(e=>{const t=u[e];localStorage.setItem(e,t)}),u["flowhub-user"]=e,r.user.send(u),((e,t)=>{const r=o.parse(window.location.href);delete r.search;const n=o.format(r);if(n!==r){if(null!=window.history?window.history.replaceState:void 0)return window.history.replaceState({},"clear",r.pathname),void t();e.send(n),t()}else t()})(r.redirect,n)})})}},function(e,t,r){const n=r(0),o=["flowhub-theme","flowhub-debug"];t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("user",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","user"))return;const[r,n]=e.getData("in","user"),i=Object.keys(r);for(let e=0;e<i.length;e+=1){const s=i[e],a=r[s];if(-1===o.indexOf(s))return void t.done(new Error(`${s} is not a valid preference`));localStorage.setItem(s,a),n[s]=a}t.sendDone({out:n})})}},function(e,t,r){const n=r(0),o=r(21),i=(e,t,r,n)=>((e,t,r)=>{const n=o.api();n.token(t);const i=n.get(e);return i.on("success",e=>{e.body?r(null,e.body):r(new Error("No result received"))}),i.on("error",e=>r(e.body)),i()})(`/repos/${e}/git/trees/${t}`,r,n),s=(e,t,r,n,o,a,c)=>{const u=[],p=[];return t.tree.forEach(t=>{const n=t;n.fullPath=`${e}${n.path}`,"tree"!==n.type?r.forEach(e=>{const t=e;if(n.fullPath===t.path||n.fullPath===t.path.replace(".fbp",".json")){if("graph"===t.type)return t.local.properties.sha=n.sha,t.local.properties.changed=!1,p.push(t),void a.graph.send(t.local);t.local.sha=n.sha,t.local.changed=!1,p.push(t),"spec"!==t.type?a.component.send(t.local):a.spec.send(t.local)}}):u.push(n)}),p.forEach(e=>{r.splice(r.indexOf(e),1)}),0===r.length?c():u.forEach(e=>i(n,e.sha,o,(t,i)=>t?c(t):s(`${e.fullPath}/`,i,r,n,o,a,c)))};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("tree",{datatype:"object"}),e.inPorts.add("repository",{datatype:"string"}),e.inPorts.add("token",{datatype:"string",description:"GitHub API token",required:!0}),e.outPorts.add("graph",{datatype:"object"}),e.outPorts.add("component",{datatype:"object"}),e.outPorts.add("spec",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:["in","tree","repository"],params:"token",out:["graph","component","spec"],async:!0},(t,r,n,o)=>t.tree.tree&&(null!=t.in.push?t.in.push.length:void 0)?s("",t.tree,t.in.push,t.repository,e.params.token,n,o):o()),e}},function(e,t){e.exports={inports:{db:{process:"Write",port:"db"},store:{process:"Store",port:"in"},item:{process:"EnsureId",port:"in"}},outports:{item:{process:"Put",port:"value"},error:{process:"Errors",port:"out"}},groups:[],processes:{HoldMode:{component:"strings/SendString"},Store:{component:"core/Repeat"},Write:{component:"indexeddb/BeginTransaction"},GetStore:{component:"indexeddb/GetStore"},Put:{component:"indexeddb/Put"},EnsureId:{component:"ui/EnsureId"},Errors:{component:"core/Merge"}},connections:[{data:"readwrite",tgt:{process:"HoldMode",port:"string"}},{src:{process:"Store",port:"out"},tgt:{process:"HoldMode",port:"in"}},{src:{process:"HoldMode",port:"out"},tgt:{process:"Write",port:"mode"}},{src:{process:"Store",port:"out"},tgt:{process:"Write",port:"stores"}},{src:{process:"Store",port:"out"},tgt:{process:"GetStore",port:"name"}},{src:{process:"Write",port:"transaction"},tgt:{process:"GetStore",port:"transaction"}},{src:{process:"GetStore",port:"store"},tgt:{process:"Put",port:"store"}},{src:{process:"EnsureId",port:"out"},tgt:{process:"Put",port:"value"}},{src:{process:"Write",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"GetStore",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"Put",port:"error"},tgt:{process:"Errors",port:"in"}}],caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{project:{process:"OriginalProject",port:"out"},graph:{process:"OriginalGraph",port:"out"},component:{process:"OriginalComponent",port:"out"},spec:{process:"OriginalSpec",port:"out"},runtime:{process:"OriginalRuntime",port:"out"},error:{process:"Errors",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},GetProjectsDb:{component:"ui/GetActionValues"},SaveProject:{component:"ui/Save"},ProjectsStore:{component:"strings/SendString"},OriginalProject:{component:"core/SendNext"},ConvertProject:{component:"ui/CleanProject"},Errors:{component:"core/Merge"},GetGraphsDb:{component:"ui/GetActionValues"},SaveGraph:{component:"ui/Save"},GraphsStore:{component:"strings/SendString"},OriginalGraph:{component:"core/SendNext"},ConvertGraph:{component:"objects/CallMethod"},GetComponentsDb:{component:"ui/GetActionValues"},SaveComponent:{component:"ui/Save"},ComponentsStore:{component:"strings/SendString"},OriginalComponent:{component:"core/SendNext"},GetSpecsDb:{component:"ui/GetActionValues"},SaveSpec:{component:"ui/Save"},SpecsStore:{component:"strings/SendString"},OriginalSpec:{component:"core/SendNext"},GetRuntimesDb:{component:"ui/GetActionValues"},SaveRuntime:{component:"ui/Save"},RuntimesStore:{component:"strings/SendString"},OriginalRuntime:{component:"core/SendNext"}},connections:[{data:"storage:save:project,storage:save:graph,storage:save:component,storage:save:spec,storage:save:runtime",tgt:{process:"Dispatch",port:"routes"}},{data:"db",tgt:{process:"GetProjectsDb",port:"keys"}},{src:{process:"GetProjectsDb",port:"values",index:0},tgt:{process:"SaveProject",port:"db"}},{data:"projects",tgt:{process:"ProjectsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"GetProjectsDb",port:"in"}},{src:{process:"GetProjectsDb",port:"out"},tgt:{process:"OriginalProject",port:"data"}},{src:{process:"SaveProject",port:"item"},tgt:{process:"OriginalProject",port:"in"}},{src:{process:"GetProjectsDb",port:"out"},tgt:{process:"ProjectsStore",port:"in"}},{src:{process:"ProjectsStore",port:"out"},tgt:{process:"SaveProject",port:"store"}},{src:{process:"GetProjectsDb",port:"out"},tgt:{process:"ConvertProject",port:"in"}},{src:{process:"ConvertProject",port:"out"},tgt:{process:"SaveProject",port:"item"}},{src:{process:"SaveProject",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetGraphsDb",port:"keys"}},{src:{process:"GetGraphsDb",port:"values",index:0},tgt:{process:"SaveGraph",port:"db"}},{data:"graphs",tgt:{process:"GraphsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"GetGraphsDb",port:"in"}},{src:{process:"GetGraphsDb",port:"out"},tgt:{process:"OriginalGraph",port:"data"}},{src:{process:"SaveGraph",port:"item"},tgt:{process:"OriginalGraph",port:"in"}},{src:{process:"GetGraphsDb",port:"out"},tgt:{process:"GraphsStore",port:"in"}},{src:{process:"GraphsStore",port:"out"},tgt:{process:"SaveGraph",port:"store"}},{data:"toJSON",tgt:{process:"ConvertGraph",port:"method"}},{src:{process:"GetGraphsDb",port:"out"},tgt:{process:"ConvertGraph",port:"in"}},{src:{process:"ConvertGraph",port:"out"},tgt:{process:"SaveGraph",port:"item"}},{src:{process:"SaveGraph",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetComponentsDb",port:"keys"}},{src:{process:"GetComponentsDb",port:"values",index:0},tgt:{process:"SaveComponent",port:"db"}},{data:"components",tgt:{process:"ComponentsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"GetComponentsDb",port:"in"}},{src:{process:"GetComponentsDb",port:"out"},tgt:{process:"OriginalComponent",port:"data"}},{src:{process:"SaveComponent",port:"item"},tgt:{process:"OriginalComponent",port:"in"}},{src:{process:"GetComponentsDb",port:"out"},tgt:{process:"ComponentsStore",port:"in"}},{src:{process:"ComponentsStore",port:"out"},tgt:{process:"SaveComponent",port:"store"}},{src:{process:"GetComponentsDb",port:"out"},tgt:{process:"SaveComponent",port:"item"}},{src:{process:"SaveComponent",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetSpecsDb",port:"keys"}},{src:{process:"GetSpecsDb",port:"values",index:0},tgt:{process:"SaveSpec",port:"db"}},{data:"specs",tgt:{process:"SpecsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetSpecsDb",port:"in"}},{src:{process:"GetSpecsDb",port:"out"},tgt:{process:"OriginalSpec",port:"data"}},{src:{process:"SaveSpec",port:"item"},tgt:{process:"OriginalSpec",port:"in"}},{src:{process:"GetSpecsDb",port:"out"},tgt:{process:"SpecsStore",port:"in"}},{src:{process:"SpecsStore",port:"out"},tgt:{process:"SaveSpec",port:"store"}},{src:{process:"GetSpecsDb",port:"out"},tgt:{process:"SaveSpec",port:"item"}},{src:{process:"SaveSpec",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetRuntimesDb",port:"keys"}},{src:{process:"GetRuntimesDb",port:"values",index:0},tgt:{process:"SaveRuntime",port:"db"}},{data:"runtimes",tgt:{process:"RuntimesStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"GetRuntimesDb",port:"in"}},{src:{process:"GetRuntimesDb",port:"out"},tgt:{process:"OriginalRuntime",port:"data"}},{src:{process:"SaveRuntime",port:"item"},tgt:{process:"OriginalRuntime",port:"in"}},{src:{process:"GetRuntimesDb",port:"out"},tgt:{process:"RuntimesStore",port:"in"}},{src:{process:"RuntimesStore",port:"out"},tgt:{process:"SaveRuntime",port:"store"}},{src:{process:"GetRuntimesDb",port:"out"},tgt:{process:"SaveRuntime",port:"item"}},{src:{process:"SaveRuntime",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Errors",port:"in"}}],caseSensitive:!1}},function(e,t,r){const n=r(0),o=r(293),i=(e,t,r)=>{const n=e,i=t;return n.id&&i[n.id]?Promise.resolve(i[n.id]):(n.secret||(n.secret=""),o(n,{skipValidation:!0,connectionTimeout:3e3}).then(e=>{if(r.send({instance:e}),!e.definition.id)return e;const t=n.id;return i[t]=e,e.isConnected()||e.once("connected",()=>{e.definition.id!==t&&(delete i[t],i[e.definition.id]=e)}),e}))};t.getComponent=()=>{const e=new n.Component;return e.description="Holder for runtime instances",e.inPorts.add("initial",{description:"Initialize client for all stored runtime definitions",datatype:"object"}),e.inPorts.add("updated",{description:"Update client instance for a runtime definition",datatype:"object"}),e.inPorts.add("in",{description:"Get client instance for a route definition",datatype:"object",addressable:!0}),e.outPorts.add("instance",{description:"Client instance when created",datatype:"object"}),e.outPorts.add("out",{description:"Route runtime client was matched for",datatype:"object",addressable:!0}),e.outPorts.add("client",{description:"Runtime client instance",datatype:"object",addressable:!0}),e.outPorts.add("updated",{description:"Updated runtime definition",datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.clients={},e.tearDown=t=>(e.clients={},t()),e.process((t,r)=>{if(t.hasData("initial")){let n=t.getData("initial");return n||(n=[]),void Promise.all(n.map(t=>i(t,e.clients,r))).then(()=>r.done(),e=>r.done(e))}if(t.hasData("updated")){const n=t.getData("updated"),o=n.payload||n;o.secret||(o.secret=""),i(o,e.clients,r).then(()=>(r.send({updated:n}),r.done()),e=>r.done(e))}const o=t.attached("in").filter(e=>t.hasData(["in",e]));o.length&&Promise.all(o.map(n=>{const o=t.getData(["in",n]);if(!o.runtime)return Promise.reject(new Error("No runtime defined"));let{runtime:s}=o;return"string"==typeof s&&(s={id:s},o.runtime=s),i(s,e.clients,r).then(e=>{return{client:e,route:o,idx:n}})})).then(e=>(()=>{const t=[];return e.forEach(e=>{t.push(r.send({client:new n.IP("data",e.client,{index:e.idx}),out:new n.IP("data",e.route,{index:e.idx})}))}),t})()).then(()=>r.done(),e=>r.done(e))}),e}},function(e,t,r){const n=r(120),{EventEmitter:o}=r(8),i=r(34),{timedPromise:s,addressToProtocol:a}=r(303),{canSend:c,canReceive:u}=r(304),p=r(305)(),l=r(338),h=r(340);class d extends o{constructor(e,t){super(),this.definition=e;const r=n.getTransport(e.protocol);this.transport=new r(this.definition),this.options=t,this.options.connectionTimeout||(this.options.connectionTimeout=1e3),this.options.commandTimeout||(this.options.commandTimeout=1e3),this.options.skipPermissions||(this.options.skipPermissions=!1),this.options.skipValidation||(this.options.skipValidation=!1),this.prepareCommands()}validate(e,t){return p(e,t).catch(e=>this.options.skipValidation?(this.protocolError(e),Promise.resolve(t)):Promise.reject(e))}isConnected(){return this.transport.isConnected()}connect(){return s((e,t)=>{if(this.isConnected())return void e(this.definition);let r=null;const n=o=>{"runtime"===o.command?(this.transport.removeListener("error",r),this.validate("/runtime/output/runtime",o).then(()=>{this.prepareAdapter(o.payload.version),e(this.definition),this.emit("connected",this.definition),this.transport.once("disconnected",()=>{this.emit("disconnected",this.definition)})},e=>{this.transport.disconnect(),t(e)})):this.transport.once("runtime",n)};r=e=>{let r=e;e instanceof Error||(r=new Error(`Connection to ${this.definition.address} failed`)),this.transport.removeListener("runtime",n),this.transport.disconnect(),t(r)},this.transport.once("runtime",n),this.transport.once("error",r),this.transport.connect()},this.options.connectionTimeout,`Connection to ${this.definition.address} timed out`)}disconnect(){return new Promise(e=>{this.isConnected()?(this.transport.once("disconnected",()=>{e(null)}),this.transport.disconnect()):e(null)})}observe(e){return l(this,e)}signal(e){this.emit("signal",e),this.emit(e.protocol,{command:e.command,payload:e.payload})}protocolError(e){this.emit("protocolError",e)}canSend(e,t){return new Promise((r,n)=>{this.options.skipPermissions?r(null):c(e,t,this.definition.capabilities)?r(null):n(new Error(`Not permitted to send ${e}:${t} messages`))})}canReceive(e,t){return new Promise((r,n)=>{this.options.skipPermissions?r(null):u(e,t,this.definition.capabilities)?r(null):n(new Error(`Not permitted to receive ${e}:${t} messages`))})}prepareCommands(){this.protocol={},Object.keys(i).forEach(e=>{if(!i[e].input)return;const t={};Object.keys(i[e].input).forEach(r=>{t[r]=(t={})=>{const n=t;return n.secret=this.definition.secret,this.validate(`/${e}/${i[e].input[r].id}`,{protocol:e,command:r,payload:n}).then(()=>new Promise((e,t)=>{this.adapter||t(new Error("FBP client must be connected to the runtime before sending commands")),e(null)})).then(()=>this.canSend(e,r)).then(()=>this.adapter.send(e,r,n))}}),this.protocol[e]=t}),this.protocol.graph.send=(e,t=!1)=>{const r=e.name||e.properties.id,{properties:n,nodes:o,edges:i,initializers:s,inports:a,outports:c}=e;return this.protocol.graph.clear({id:r,name:e.name,main:t,library:n.library||this.definition.namespace,icon:n.icon||"",description:n.description||""}).then(()=>Promise.all(o.map(e=>this.protocol.graph.addnode({id:e.id,component:e.component,metadata:e.metadata,graph:r})))).then(()=>Promise.all(i.map(e=>this.protocol.graph.addedge({src:e.from,tgt:e.to,metadata:e.metadata,graph:r})))).then(()=>Promise.all(s.map(e=>this.protocol.graph.addinitial({src:e.from,tgt:e.to,metadata:e.metadata,graph:r})))).then(()=>Promise.all(Object.keys(a).map(e=>this.protocol.graph.addinport({public:e,node:a[e].process,port:a[e].port,graph:r})))).then(()=>Promise.all(Object.keys(c).map(e=>this.protocol.graph.addoutport({public:e,node:c[e].process,port:c[e].port,graph:r})))).then(()=>e)}}prepareAdapter(e){if(this.adapter)return;const t=Number.parseFloat(e);if(!(t<=.9))throw new Error(`Unsupported FBP protocol version ${e}`);this.adapter=h(this,t)}}e.exports=(e,t={})=>new Promise((r,o)=>{p("/definition/",e).then(()=>{const i=e;i.protocol=i.protocol||a(i.address),i.protocol?n.transports[i.protocol]?r(new d(i,t)):o(new Error(`Unsupported FBP transport ${i.protocol}`)):o(new Error("Runtime connection protocol is required"))},o)})},function(e,t,r){"use strict";e.exports=function(e){function t(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){var r;function s(){if(s.enabled){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var i=s,a=Number(new Date),c=a-(r||a);i.diff=c,i.prev=r,i.curr=a,r=a,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,r){if("%%"===e)return e;u++;var o=n.formatters[r];if("function"==typeof o){var s=t[u];e=o.call(i,s),t.splice(u,1),u--}return e}),n.formatArgs.call(i,t),(i.log||n.log).apply(i,t)}}return s.namespace=e,s.enabled=n.enabled(e),s.useColors=n.useColors(),s.color=t(e),s.destroy=o,s.extend=i,"function"==typeof n.init&&n.init(s),n.instances.push(s),s}function o(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function i(e,t){return n(this.namespace+(void 0===t?":":t)+e)}return n.debug=n,n.default=n,n.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},n.disable=function(){n.enable("")},n.enable=function(e){var t;n.save(e),n.names=[],n.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(t=0;t<o;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var i=n.instances[t];i.enabled=n.enabled(i.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=r(60),Object.keys(e).forEach(function(t){n[t]=e[t]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o,i,s,a=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")};o=r(43),s=r(121),i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleError=r.handleError.bind(r),r.handleMessage=r.handleMessage.bind(r),r.connecting=!1,r.connection=null,r.protocol="noflo",r.buffer=[],r.container=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),n(t,[{key:"getElement",value:function(){var e,t;return this.container?this.container:(this.container=document.createElement("div"),this.container.classList.add("preview-container"),e=document.createElement("pre"),t=document.createElement("img"),this.container.appendChild(t),this.container.appendChild(e),this.on("network",function(r){var n,o,i;if("output"===r.command)return null!=(o=r.payload).type&&"previewurl"===o.type&&(i=o.url.indexOf(!0)?"&":"?",t.src=o.url+i+"timestamp="+(new Date).getTime()),null!=o.message?(n=o.message.replace(/[\u00A0-\u99999<>\&]/gim,function(e){return"&#"+e.charCodeAt(0)+";"}),e.innerHTML+=n+"\n",e.scrollTop=e.scrollHeight):void 0}),this.on("disconnected",function(){return e.innerHTML=""}),this.container)}},{key:"isConnected",value:function(){return this.connection&&!1===this.connecting}},{key:"connect",value:function(){var e=this;if(!this.connection&&!this.connecting)return this.protocol?this.connection=new s.WebSocket(this.getAddress(),this.protocol):this.connection=new s.WebSocket(this.getAddress()),this.connection.addEventListener("open",function(){return e.connecting=!1,e.sendRuntime("getruntime",{}),e.emit("status",{online:!0,label:"connected"}),e.emit("connected"),e.flush()},!1),this.connection.addEventListener("message",this.handleMessage,!1),this.connection.addEventListener("error",this.handleError,!1),this.connection.addEventListener("close",function(){return e.connection=null,e.emit("status",{online:!1,label:"disconnected"}),e.emit("disconnected")},!1),this.connecting=!0}},{key:"disconnect",value:function(){if(this.connection)return this.connecting=!1,this.connection.close()}},{key:"send",value:function(e,t,r){if(this.connecting)this.buffer.push({protocol:e,command:t,payload:r});else if(this.connection)return this.connection.send(JSON.stringify({protocol:e,command:t,payload:r}))}},{key:"handleError",value:function(e){var r=this;return a(this,t),"noflo"===this.protocol?(delete this.protocol,this.connecting=!1,this.connection=null,void setTimeout(function(){return r.connect()},1)):(this.emit("error",e),this.connection=null,this.connecting=!1)}},{key:"handleMessage",value:function(e){var r;return a(this,t),r=JSON.parse(e.data),this.recvMessage(r)}},{key:"flush",value:function(){var e,t,r,n;for(t=0,r=(n=this.buffer).length;t<r;t++)e=n[t],this.send(e.protocol,e.command,e.payload);return this.buffer=[]}}]),t}(),e.exports=i},function(e,t,r){var n=function(){return this}(),o=n.WebSocket||n.MozWebSocket,i=r(297);function s(e,t){return t?new o(e,t):new o(e)}o&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(e){Object.defineProperty(s,e,{get:function(){return o[e]}})}),e.exports={w3cwebsocket:o?s:null,version:i}},function(e,t,r){e.exports=r(298).version},function(e){e.exports=JSON.parse('{"_from":"websocket@^1.0.8","_id":"websocket@1.0.29","_inBundle":false,"_integrity":"sha512-WhU8jKXC8sTh6ocLSqpZRlOKMNYGwUvjA5+XcIgIk/G3JCaDfkZUr0zA19sVSxJ0TEvm0i5IBzr54RZC4vzW7g==","_location":"/websocket","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"websocket@^1.0.8","name":"websocket","escapedName":"websocket","rawSpec":"^1.0.8","saveSpec":null,"fetchSpec":"^1.0.8"},"_requiredBy":["/fbp-protocol","/fbp-protocol-client"],"_resolved":"https://registry.npmjs.org/websocket/-/websocket-1.0.29.tgz","_shasum":"3f83e49d3279657c58b02a22d90749c806101b98","_spec":"websocket@^1.0.8","_where":"/home/niclas/dev/noflo/noflo-ui/node_modules/fbp-protocol","author":{"name":"Brian McKelvey","email":"theturtle32@gmail.com","url":"https://github.com/theturtle32"},"browser":"lib/browser.js","bugs":{"url":"https://github.com/theturtle32/WebSocket-Node/issues"},"bundleDependencies":false,"config":{"verbose":false},"contributors":[{"name":"Iaki Baz Castillo","email":"ibc@aliax.net","url":"http://dev.sipdoc.net"}],"dependencies":{"debug":"^2.2.0","gulp":"^4.0.2","nan":"^2.11.0","typedarray-to-buffer":"^3.1.5","yaeti":"^0.0.6"},"deprecated":false,"description":"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.","devDependencies":{"buffer-equal":"^1.0.0","faucet":"^0.0.1","gulp-jshint":"^2.0.4","jshint":"^2.0.0","jshint-stylish":"^2.2.1","tape":"^4.9.1"},"directories":{"lib":"./lib"},"engines":{"node":">=0.10.0"},"homepage":"https://github.com/theturtle32/WebSocket-Node","keywords":["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],"license":"Apache-2.0","main":"index","name":"websocket","repository":{"type":"git","url":"git+https://github.com/theturtle32/WebSocket-Node.git"},"scripts":{"gulp":"gulp","install":"(node-gyp rebuild 2> builderror.log) || (exit 0)","test":"faucet test/unit"},"version":"1.0.29"}')},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};var i,s,a=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")};i=r(43),s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.updateIframe=r.updateIframe.bind(r),r.onLoaded=r.onLoaded.bind(r),r.onMessage=r.onMessage.bind(r),r.origin=window.location.origin,r.connecting=!1,r.connected=!1,r.buffer=[],r.iframe=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i),n(t,[{key:"getElement",value:function(){return this.iframe}},{key:"isConnected",value:function(){return this.connected}},{key:"setMain",value:function(e){if(this.graph&&this.graph.removeListener("changeProperties",this.updateIframe),!e)return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setMain",this).call(this,e);e.on("changeProperties",this.updateIframe),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setMain",this).call(this,e),this.updateIframe()}},{key:"setParentElement",value:function(e){return this.iframe=document.createElement("iframe"),this.iframe.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),e.appendChild(this.iframe)}},{key:"connect",value:function(){if(!this.iframe)throw new Error("Unable to connect without a parent element");return this.iframe.addEventListener("load",this.onLoaded,!1),this.connecting=!0,this.emit("status",{online:!1,label:"connecting"}),this.iframe.setAttribute("src",this.getAddress()),this.iframe.id="preview-iframe",window.addEventListener("message",this.onMessage,!1)}},{key:"updateIframe",value:function(){var e;if(a(this,t),this.iframe&&this.graph&&(e=this.graph.properties.environment)&&e.content)return this.send("iframe","setcontent",e.content)}},{key:"disconnect",value:function(){return this.iframe&&this.iframe.removeEventListener("load",this.onLoaded,!1),this.connected=!1,window.removeEventListener("message",this.onMessage,!1),this.emit("status",{online:!1,label:"disconnected"}),this.emit("disconnected")}},{key:"onLoaded",value:function(){var e,r=this;return a(this,t),this.once("capabilities",function(){return e&&clearTimeout(e),r.connecting=!1,r.connected=!0,r.emit("status",{online:!0,label:"connected"}),r.emit("connected"),r.updateIframe(),r.flush()}),this.postMessage("runtime","getruntime",{}),e=setTimeout(function(){return r.postMessage("runtime","getruntime",{})},500)}},{key:"send",value:function(e,t,r){if(!this.connecting)return this.postMessage(e,t,r);this.buffer.push({protocol:e,command:t,payload:r})}},{key:"postMessage",value:function(e,t,r){var n;if(n=this.iframe.contentWindow){try{if("about:blank"===n.location.href)return;if(-1!==n.location.href.indexOf("chrome-extension://"))throw new Error("Use * for IFRAME communications in a Chrome app")}catch(o){return o,void n.postMessage(JSON.stringify({protocol:e,command:t,payload:r}),"*")}return n.postMessage(JSON.stringify({protocol:e,command:t,payload:r}),n.location.href)}}},{key:"onMessage",value:function(e){var r;if(a(this,t),!e.source||e.source===this.iframe.contentWindow)return r="string"==typeof e.data?JSON.parse(e.data):e.data,this.recvMessage(r)}},{key:"flush",value:function(){var e,t,r,n;for(e=0,r=(n=this.buffer).length;e<r;e++)t=n[e],this.postMessage(t.protocol,t.command,t.payload);return this.buffer=[]}}]),t}(),e.exports=s},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o,i;o=r(43),i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.onMessage=r.onMessage.bind(r),r.connecting=!1,r.connected=!1,r.buffer=[],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),n(t,[{key:"getElement",value:function(){return null}},{key:"isConnected",value:function(){return this.connected}},{key:"setParentElement",value:function(e){}},{key:"connect",value:function(){var e=this;return this.connecting=!0,this.emit("status",{online:!1,label:"connecting"}),window.addEventListener("message",this.onMessage,!1),this.once("capabilities",function(){return e.connecting=!1,e.connected=!0,e.emit("status",{online:!0,label:"connected"}),e.emit("connected"),e.flush()}),this.postMessage("runtime","getruntime",{}),setTimeout(function(){return e.postMessage("runtime","getruntime",{})},500)}},{key:"updateIframe",value:function(){}},{key:"disconnect",value:function(){return this.connected=!1,window.removeEventListener("message",this.onMessage,!1),this.emit("status",{online:!1,label:"disconnected"}),this.emit("disconnected")}},{key:"send",value:function(e,t,r){if(!this.connecting)return this.postMessage(e,t,r);this.buffer.push({protocol:e,command:t,payload:r})}},{key:"postMessage",value:function(e,t,r){if(window.opener)return window.opener.postMessage(JSON.stringify({protocol:e,command:t,payload:r}),"*")}},{key:"onMessage",value:function(e){var r;if(function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")}(this,t),!e.source||e.source===this.iframe.contentWindow)return r="string"==typeof e.data?JSON.parse(e.data):e.data,this.recvMessage(r)}},{key:"flush",value:function(){var e,t,r,n;for(e=0,r=(n=this.buffer).length;e<r;e++)t=n[e],this.postMessage(t.protocol,t.command,t.payload);return this.buffer=[]}}]),t}(),e.exports=i},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o,i,s,a=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")};o=r(43),s=r(81)("fbp-protocol-client:webrtc"),i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleError=r.handleError.bind(r),r.handleMessage=r.handleMessage.bind(r),r.peer=null,r.connecting=!1,r.connection=null,r.protocol="webrtc",r.buffer=[],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),n(t,[{key:"getElement",value:function(){return null}},{key:"isConnected",value:function(){return null!==this.connection}},{key:"connect",value:function(){var e,t,r,n,o=this;if(!this.connection&&!this.connecting)return-1!==(e=this.getAddress()).indexOf("#")?(n=e.split("#")[0],t=e.split("#")[1]):(n="https://api.flowhub.io",t=e),r={room:t,debug:!0,channels:{chat:!0},signaller:n,capture:!1,constraints:!1,expectedLocalStreams:0},this.peer=RTC(r),this.peer.on("channel:opened:chat",function(e,t){return o.connection=t,o.connection.onmessage=function(e){return s("message",e.data),o.handleMessage(e.data)},o.connecting=!1,o.sendRuntime("getruntime",{}),o.emit("status",{online:!0,label:"connected"}),o.emit("connected"),o.flush()}),this.peer.on("channel:closed:chat",function(e,t){return t.onmessage=null,o.connection=null,o.emit("status",{online:!1,label:"disconnected"}),o.emit("disconnected")}),this.connecting=!0}},{key:"disconnect",value:function(){if(this.connection)return this.connecting=!1,this.connection.close(),this.connection=null,this.emit("disconnected")}},{key:"send",value:function(e,t,r){var n;if(n={protocol:e,command:t,payload:r},this.connecting)this.buffer.push(n);else if(this.connection)return s("send",n),this.connection.send(JSON.stringify(n))}},{key:"handleError",value:function(e){return a(this,t),this.connection=null,this.connecting=!1}},{key:"handleMessage",value:function(e){var r;return a(this,t),r=JSON.parse(e),this.recvMessage(r)}},{key:"flush",value:function(){var e,t,r,n;for(e=0,r=(n=this.buffer).length;e<r;e++)t=n[e],this.send(t.protocol,t.command,t.payload);return this.buffer=[]}}]),t}(),e.exports=i},function(e,t,r){"use strict";t.sendGraph=function(e,t,r,n){var o,i,s,a,c,u,p,l,h,d,f,m,g,y,v,b,w,E,x;if((null!=(g=e.properties.environment)?g.type:void 0)&&"all"!==(y=e.properties.environment.type)&&y!==t.definition.type)return r(new Error("Graph type "+e.properties.environment.type+" doesn't match runtime type "+t.definition.type));if(!t.canDo("protocol:graph"))return r(new Error("Runtime doesn't support graph protocol"));for(i=e.name||e.properties.id,t.sendGraph("clear",{id:i,name:e.name,main:n,library:e.properties.project,icon:e.properties.icon||"",description:e.properties.description||""}),s=0,p=(v=e.nodes).length;s<p;s++)d=v[s],t.sendGraph("addnode",{id:d.id,component:d.component,metadata:d.metadata,graph:i});for(c=0,l=(b=e.edges).length;c<l;c++)o=b[c],t.sendGraph("addedge",{src:{node:o.from.node,port:o.from.port},tgt:{node:o.to.node,port:o.to.port},metadata:o.metadata,graph:i});for(u=0,h=(w=e.initializers).length;u<h;u++)a=w[u],t.sendGraph("addinitial",{src:{data:a.from.data},tgt:{node:a.to.node,port:a.to.port},metadata:a.metadata,graph:i});if(e.inports)for(m in E=e.inports)f=E[m],t.sendGraph("addinport",{public:m,node:f.process,port:f.port,graph:i});if(e.outports)for(m in x=e.outports)f=x[m],t.sendGraph("addoutport",{public:m,node:f.process,port:f.port,graph:i});return r()}},function(e,t,r){const{parse:n}=r(27);t.addressToProtocol=e=>{const t=n(e);switch(t.protocol){case"ws:":case"wss:":return"websocket";case"http:":case"https:":return t.query&&-1!==t.query.indexOf("fbp_protocol=webrtc")?"webrtc":"iframe";default:return null}},t.timedPromise=(e,t,r="Request timed out")=>Promise.race([new Promise(e),new Promise((e,n)=>{setTimeout(()=>{n(new Error(r))},t)})])},function(e,t,r){const n=r(34);function o(e,t,r=!0){return n.shared.capabilities.items._enumDescriptions.filter(n=>r?!(!n.inputs||!n.inputs.length)&&-1!==n.inputs.indexOf(`${e}:${t}`):!(!n.outputs||!n.outputs.length)&&-1!==n.outputs.indexOf(`${e}:${t}`)).map(e=>e.name)}t.canSend=(e,t,r)=>{if("runtime"===e&&"getruntime"===t)return!0;const n=o(e,t,!0);return r.filter(e=>-1!==n.indexOf(e)).length>0},t.canReceive=(e,t,r)=>{if("runtime"===e&&"runtime"===t)return!0;const n=o(e,t,!1);return r.filter(e=>-1!==n.indexOf(e)).length>0}},function(e,t,r){const n=r(122),o=r(131),i=r(34),s=r(337);e.exports=()=>{const e=new n({extendRefs:!0});return e.addMetaSchema(o),e._opts.defaultMeta="http://json-schema.org/draft-04/schema#",Object.keys(i).forEach(t=>{i[t].id=`/${t}/`,e.addSchema(i[t])}),e.addSchema(s),(t,r)=>new Promise((n,o)=>{const[i,s,a]=t.slice(1).split("/");if(!s)return e.validate(t,r)?void n(r):void o(new Error(`Runtime definition ${e.errorsText()}`));const c=r;c.protocol=i,e.validate(t,c)?n(r):o("input"!==s?new Error(`Runtime sent invalid payload for ${i}:${a}: ${e.errorsText()}`):new Error(`Client sent invalid payload for ${i}:${a}: ${e.errorsText()}`))})}},function(e,t,r){"use strict";var n=r(82),o=r(35),i=r(84),s=r(124),a=r(125),c=r(126),u=o.ucs2length,p=r(83),l=i.Validation;function h(e,t,r){for(var n=0;n<this._compilations.length;n++){var o=this._compilations[n];if(o.schema==e&&o.root==t&&o.baseId==r)return n}return-1}function d(e,t){return"var pattern"+e+" = new RegExp("+o.toQuotedString(t[e])+");"}function f(e){return"var default"+e+" = defaults["+e+"];"}function m(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function g(e){return"var customRule"+e+" = customRules["+e+"];"}function y(e,t){if(!e.length)return"";for(var r="",n=0;n<e.length;n++)r+=t(n,e);return r}e.exports=function e(t,r,v,b){var w=this,E=this._opts,x=[void 0],C={},S=[],k={},P=[],_={},A=[];r=r||{schema:t,refVal:x,refs:C};var D=function(e,t,r){var n=h.call(this,e,t,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:e,root:t,baseId:r},{index:n,compiling:!1})}.call(this,t,r,b);var O=this._compilations[D.index];if(D.compiling)return O.callValidate=function e(){var t=O.validate;var r=t.apply(null,arguments);e.errors=t.errors;return r};var T=this._formats;var N=this.RULES;try{var I=j(t,r,v,b);O.validate=I;var R=O.callValidate;return R&&(R.schema=I.schema,R.errors=null,R.refs=I.refs,R.refVal=I.refVal,R.root=I.root,R.$async=I.$async,E.sourceCode&&(R.source=I.source)),I}finally{(function(e,t,r){var n=h.call(this,e,t,r);n>=0&&this._compilations.splice(n,1)}).call(this,t,r,b)}function j(t,s,h,v){var b=!s||s&&s.schema==t;if(s.schema!=r.schema)return e.call(w,t,s,h,v);var k,_=!0===t.$async,D=a({isTop:!0,schema:t,isRoot:b,baseId:v,root:s,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:i.MissingRef,RULES:N,validate:a,util:o,resolve:n,resolveRef:F,usePattern:G,useDefault:B,useCustomRule:U,opts:E,formats:T,logger:w.logger,self:w});D=y(x,m)+y(S,d)+y(P,f)+y(A,g)+D,E.processCode&&(D=E.processCode(D));try{var O=new Function("self","RULES","formats","root","refVal","defaults","customRules","co","equal","ucs2length","ValidationError",D);k=O(w,N,T,r,x,P,A,c,p,u,l),x[0]=k}catch(e){throw w.logger.error("Error compiling schema, function code:",D),e}return k.schema=t,k.errors=null,k.refs=C,k.refVal=x,k.root=b?k:s,_&&(k.$async=!0),!0===E.sourceCode&&(k.source={code:D,patterns:S,defaults:P}),k}function F(t,o,i){o=n.url(t,o);var s,a,c=C[o];if(void 0!==c)return L(s=x[c],a="refVal["+c+"]");if(!i&&r.refs){var u=r.refs[o];if(void 0!==u)return s=r.refVal[u],a=M(o,s),L(s,a)}a=M(o);var p=n.call(w,j,r,o);if(void 0===p){var l=v&&v[o];l&&(p=n.inlineRef(l,E.inlineRefs)?l:e.call(w,l,r,v,t))}if(void 0!==p)return function(e,t){var r=C[e];x[r]=t}(o,p),L(p,a);!function(e){delete C[e]}(o)}function M(e,t){var r=x.length;return x[r]=t,C[e]=r,"refVal"+r}function L(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&e.$async}}function G(e){var t=k[e];return void 0===t&&(t=k[e]=S.length,S[t]=e),"pattern"+t}function B(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return o.toQuotedString(e);case"object":if(null===e)return"null";var t=s(e),r=_[t];return void 0===r&&(r=_[t]=P.length,P[r]=e),"default"+r}}function U(e,t,r,n){var o=e.definition.validateSchema;if(o&&!1!==w._opts.validateSchema){var i=o(t);if(!i){var s="keyword schema is invalid: "+w.errorsText(o.errors);if("log"!=w._opts.validateSchema)throw new Error(s);w.logger.error(s)}}var a,c=e.definition.compile,u=e.definition.inline,p=e.definition.macro;if(c)a=c.call(w,t,r,n);else if(p)a=p.call(w,t,r,n),!1!==E.validateSchema&&w.validateSchema(a,!0);else if(u)a=u.call(w,n,e.keyword,t,r);else if(!(a=e.definition.validate))return;if(void 0===a)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var l=A.length;return A[l]=a,{code:"customRule"+l,validate:a}}}},function(e,t,r){"use strict";e.exports=function(e){for(var t,r=0,n=e.length,o=0;o<n;)r++,(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<n&&56320==(64512&(t=e.charCodeAt(o)))&&o++;return r}},function(e,t,r){"use strict";var n=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),function e(t,r,o,i,s,a,c,u,p){if(o&&"object"==typeof o&&!Array.isArray(o))for(var l in r(o,i,s,a,c,u,p),o){var h=o[l];if(Array.isArray(h)){if(l in n.arrayKeywords)for(var d=0;d<h.length;d++)e(t,r,h[d],i+"/"+l+"/"+d,s,i,l,o,d)}else if(l in n.propsKeywords){if(h&&"object"==typeof h)for(var f in h)e(t,r,h[f],i+"/"+l+"/"+f.replace(/~/g,"~0").replace(/\//g,"~1"),s,i,l,o,f)}else(l in n.keywords||t.allKeys&&!(l in n.skipKeywords))&&e(t,r,h,i+"/"+l,s,i,l,o)}}(t,r,e,"",e)};n.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},n.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},n.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},n.skipKeywords={enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},function(e,t,r){"use strict";var n=e.exports=function(){this._cache={}};n.prototype.put=function(e,t){this._cache[e]=t},n.prototype.get=function(e){return this._cache[e]},n.prototype.del=function(e){delete this._cache[e]},n.prototype.clear=function(){this._cache={}}},function(e,t,r){"use strict";var n=r(35),o=/^\d\d\d\d-(\d\d)-(\d\d)$/,i=[0,31,29,31,30,31,30,31,31,30,31,30,31],s=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,a=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,c=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?$/i,u=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#.\/;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,p=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,l=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,h=/^(?:\/(?:[^~\/]|~0|~1)*)*$|^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,d=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~\/]|~0|~1)*)*)$/;function f(e){return e="full"==e?"full":"fast",n.copy(f[e])}function m(e){var t=e.match(o);if(!t)return!1;var r=+t[1],n=+t[2];return r>=1&&r<=12&&n>=1&&n<=i[r]}function g(e,t){var r=e.match(s);if(!r)return!1;var n=r[1],o=r[2],i=r[3],a=r[5];return n<=23&&o<=59&&i<=59&&(!t||a)}e.exports=f,f.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^[0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*)(?::|\/)\/?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/\/)?[^\s]*$/i,"uri-template":u,url:p,email:/^[a-z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:w,uuid:l,"json-pointer":h,"relative-json-pointer":d},f.full={date:m,time:g,"date-time":function(e){var t=e.split(y);return 2==t.length&&m(t[0])&&g(t[1],!0)},uri:function(e){return v.test(e)&&c.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@\/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@\/?]|%[0-9a-f]{2})*)?$/i,"uri-template":u,url:p,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&''*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:function(e){return e.length<=255&&a.test(e)},ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:w,uuid:l,"json-pointer":h,"relative-json-pointer":d};var y=/t|\s/i;var v=/\/|:/;var b=/[^\\]\\Z/;function w(e){if(b.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},function(e,t,r){"use strict";var n=r(312),o=r(35).toHash;e.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","uniqueItems","contains","items"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf"]}],t=["type"];return e.all=o(t),e.types=o(["number","integer","string","array","object","boolean","null"]),e.forEach(function(r){r.rules=r.rules.map(function(r){var o;if("object"==typeof r){var i=Object.keys(r)[0];o=r[i],r=i,o.forEach(function(r){t.push(r),e.all[r]=!0})}return t.push(r),e.all[r]={keyword:r,code:n[r],implements:o}}),r.type&&(e.types[r.type]=r)}),e.keywords=o(t.concat(["additionalItems","$schema","$id","id","title","description","default","definitions"])),e.custom={},e}},function(e,t,r){"use strict";e.exports={$ref:r(313),allOf:r(314),anyOf:r(315),const:r(316),contains:r(317),dependencies:r(318),enum:r(319),format:r(320),items:r(321),maximum:r(127),minimum:r(127),maxItems:r(128),minItems:r(128),maxLength:r(129),minLength:r(129),maxProperties:r(130),minProperties:r(130),multipleOf:r(322),not:r(323),oneOf:r(324),pattern:r(325),properties:r(326),propertyNames:r(327),required:r(328),uniqueItems:r(329),validate:r(125)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o,i=" ",s=e.level,a=e.dataLevel,c=e.schema[t],u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(a||""),h="valid"+s;if("#"==c||"#/"==c)e.isRoot?(n=e.async,o="validate"):(n=!0===e.root.schema.$async,o="root.refVal[0]");else{var d=e.resolveRef(e.baseId,c,e.isRoot);if(void 0===d){var f=e.MissingRefError.message(e.baseId,c);if("fail"==e.opts.missingRefs){e.logger.error(f),(v=v||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",!1!==e.opts.messages&&(i+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(i+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),i+=" } "):i+=" {} ";var m=i;i=v.pop(),!e.compositeRule&&p?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",p&&(i+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,c,f);e.logger.warn(f),p&&(i+=" if (true) { ")}}else if(d.inline){var g=e.util.copy(e);g.level++;var y="valid"+g.level;g.schema=d.schema,g.schemaPath="",g.errSchemaPath=c,i+=" "+e.validate(g).replace(/validate\.schema/g,d.code)+" ",p&&(i+=" if ("+y+") { ")}else n=!0===d.$async,o=d.code}if(o){var v;(v=v||[]).push(i),i="",e.opts.passContext?i+=" "+o+".call(this, ":i+=" "+o+"( ",i+=" "+l+", (dataPath || '')",'""'!=e.errorPath&&(i+=" + "+e.errorPath);var b=i+=" , "+(a?"data"+(a-1||""):"parentData")+" , "+(a?e.dataPathArr[a]:"parentDataProperty")+", rootData)  ";if(i=v.pop(),n){if(!e.async)throw new Error("async schema referenced by sync schema");p&&(i+=" var "+h+"; "),i+=" try { "+e.yieldAwait+" "+b+"; ",p&&(i+=" "+h+" = true; "),i+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",p&&(i+=" "+h+" = false; "),i+=" } ",p&&(i+=" if ("+h+") { ")}else i+=" if (!"+b+") { if (vErrors === null) vErrors = "+o+".errors; else vErrors = vErrors.concat("+o+".errors); errors = vErrors.length; } ",p&&(i+=" else { ")}return i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.schema[t],i=e.schemaPath+e.util.getProperty(t),s=e.errSchemaPath+"/"+t,a=!e.opts.allErrors,c=e.util.copy(e),u="";c.level++;var p="valid"+c.level,l=c.baseId,h=!0,d=o;if(d)for(var f,m=-1,g=d.length-1;m<g;)f=d[m+=1],e.util.schemaHasRules(f,e.RULES.all)&&(h=!1,c.schema=f,c.schemaPath=i+"["+m+"]",c.errSchemaPath=s+"/"+m,n+="  "+e.validate(c)+" ",c.baseId=l,a&&(n+=" if ("+p+") { ",u+="}"));return a&&(n+=h?" if (true) { ":" "+u.slice(0,-1)+" "),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="valid"+o,h="errs__"+o,d=e.util.copy(e),f="";d.level++;var m="valid"+d.level;if(s.every(function(t){return e.util.schemaHasRules(t,e.RULES.all)})){var g=d.baseId;n+=" var "+h+" = errors; var "+l+" = false;  ";var y=e.compositeRule;e.compositeRule=d.compositeRule=!0;var v=s;if(v)for(var b,w=-1,E=v.length-1;w<E;)b=v[w+=1],d.schema=b,d.schemaPath=a+"["+w+"]",d.errSchemaPath=c+"/"+w,n+="  "+e.validate(d)+" ",d.baseId=g,n+=" "+l+" = "+l+" || "+m+"; if (!"+l+") { ",f+="}";e.compositeRule=d.compositeRule=y,n+=" "+f+" if (!"+l+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } "),n=e.util.cleanUpCode(n)}else u&&(n+=" if (true) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="valid"+o,h=e.opts.$data&&s&&s.$data;h&&(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; "),h||(n+=" var schema"+o+" = validate.schema"+a+";"),n+="var "+l+" = equal("+p+", schema"+o+"); if (!"+l+") {   ";var d=d||[];d.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to constant' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var f=n;return n=d.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+f+"]); ":n+=" validate.errors = ["+f+"]; return false; ":n+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",u&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="valid"+o,h="errs__"+o,d=e.util.copy(e);d.level++;var f="valid"+d.level,m="i"+o,g=d.dataLevel=e.dataLevel+1,y="data"+g,v=e.baseId,b=e.util.schemaHasRules(s,e.RULES.all);if(n+="var "+h+" = errors;var "+l+";",b){var w=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=s,d.schemaPath=a,d.errSchemaPath=c,n+=" var "+f+" = false; for (var "+m+" = 0; "+m+" < "+p+".length; "+m+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var E=p+"["+m+"]";d.dataPathArr[g]=m;var x=e.validate(d);d.baseId=v,e.util.varOccurences(x,y)<2?n+=" "+e.util.varReplace(x,y,E)+" ":n+=" var "+y+" = "+E+"; "+x+" ",n+=" if ("+f+") break; }  ",e.compositeRule=d.compositeRule=w,n+="  if (!"+f+") {"}else n+=" if ("+p+".length == 0) {";var C=C||[];C.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should contain a valid item' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var S=n;return n=C.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+S+"]); ":n+=" validate.errors = ["+S+"]; return false; ":n+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",b&&(n+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(n+=" } "),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="errs__"+o,h=e.util.copy(e),d="";h.level++;var f="valid"+h.level,m={},g={},y=e.opts.ownProperties;for(E in s){var v=s[E],b=Array.isArray(v)?g:m;b[E]=v}n+="var "+l+" = errors;";var w=e.errorPath;for(var E in n+="var missing"+o+";",g)if((b=g[E]).length){if(n+=" if ( "+p+e.util.getProperty(E)+" !== undefined ",y&&(n+=" && Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(E)+"') "),u){n+=" && ( ";var x=b;if(x)for(var C=-1,S=x.length-1;C<S;){O=x[C+=1],C&&(n+=" || "),n+=" ( ( "+(R=p+(I=e.util.getProperty(O)))+" === undefined ",y&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(O)+"') "),n+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?O:I)+") ) "}n+=")) {  ";var k="missing"+o,P="' + "+k+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,k,!0):w+" + "+k);var _=_||[];_.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(E)+"', missingProperty: '"+P+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==b.length?n+="property "+e.util.escapeQuotes(b[0]):n+="properties "+e.util.escapeQuotes(b.join(", ")),n+=" when property "+e.util.escapeQuotes(E)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var A=n;n=_.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+A+"]); ":n+=" validate.errors = ["+A+"]; return false; ":n+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var D=b;if(D)for(var O,T=-1,N=D.length-1;T<N;){O=D[T+=1];var I=e.util.getProperty(O),R=(P=e.util.escapeQuotes(O),p+I);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,O,e.opts.jsonPointers)),n+=" if ( "+R+" === undefined ",y&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(O)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(E)+"', missingProperty: '"+P+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==b.length?n+="property "+e.util.escapeQuotes(b[0]):n+="properties "+e.util.escapeQuotes(b.join(", ")),n+=" when property "+e.util.escapeQuotes(E)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",u&&(d+="}",n+=" else { ")}e.errorPath=w;var j=h.baseId;for(var E in m){v=m[E];e.util.schemaHasRules(v,e.RULES.all)&&(n+=" "+f+" = true; if ( "+p+e.util.getProperty(E)+" !== undefined ",y&&(n+=" && Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(E)+"') "),n+=") { ",h.schema=v,h.schemaPath=a+e.util.getProperty(E),h.errSchemaPath=c+"/"+e.util.escapeFragment(E),n+="  "+e.validate(h)+" ",h.baseId=j,n+=" }  ",u&&(n+=" if ("+f+") { ",d+="}"))}return u&&(n+="   "+d+" if ("+l+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="valid"+o,h=e.opts.$data&&s&&s.$data;h&&(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ");var d="i"+o,f="schema"+o;h||(n+=" var "+f+" = validate.schema"+a+";"),n+="var "+l+";",h&&(n+=" if (schema"+o+" === undefined) "+l+" = true; else if (!Array.isArray(schema"+o+")) "+l+" = false; else {"),n+=l+" = false;for (var "+d+"=0; "+d+"<"+f+".length; "+d+"++) if (equal("+p+", "+f+"["+d+"])) { "+l+" = true; break; }",h&&(n+="  }  "),n+=" if (!"+l+") {   ";var m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValues: schema"+o+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var g=n;return n=m.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",u&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||"");if(!1===e.opts.format)return u&&(n+=" if (true) { "),n;var l,h=e.opts.$data&&s&&s.$data;h?(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ",l="schema"+o):l=s;var d=e.opts.unknownFormats,f=Array.isArray(d);if(h){n+=" var "+(m="format"+o)+" = formats["+l+"]; var "+(g="isObject"+o)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(y="formatType"+o)+" = "+g+" && "+m+".type || 'string'; if ("+g+") { ",e.async&&(n+=" var async"+o+" = "+m+".async; "),n+=" "+m+" = "+m+".validate; } if (  ",h&&(n+=" ("+l+" !== undefined && typeof "+l+" != 'string') || "),n+=" (","ignore"!=d&&(n+=" ("+l+" && !"+m+" ",f&&(n+=" && self._opts.unknownFormats.indexOf("+l+") == -1 "),n+=") || "),n+=" ("+m+" && "+y+" == '"+r+"' && !(typeof "+m+" == 'function' ? ",e.async?n+=" (async"+o+" ? "+e.yieldAwait+" "+m+"("+p+") : "+m+"("+p+")) ":n+=" "+m+"("+p+") ",n+=" : "+m+".test("+p+"))))) {"}else{var m;if(!(m=e.formats[s])){if("ignore"==d)return e.logger.warn('unknown format "'+s+'" ignored in schema at path "'+e.errSchemaPath+'"'),u&&(n+=" if (true) { "),n;if(f&&d.indexOf(s)>=0)return u&&(n+=" if (true) { "),n;throw new Error('unknown format "'+s+'" is used in schema at path "'+e.errSchemaPath+'"')}var g,y=(g="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(g){var v=!0===m.async;m=m.validate}if(y!=r)return u&&(n+=" if (true) { "),n;if(v){if(!e.async)throw new Error("async format in sync schema");var b="formats"+e.util.getProperty(s)+".validate";n+=" if (!("+e.yieldAwait+" "+b+"("+p+"))) { "}else{n+=" if (! ";b="formats"+e.util.getProperty(s);g&&(b+=".validate"),n+="function"==typeof m?" "+b+"("+p+") ":" "+b+".test("+p+") ",n+=") { "}}var w=w||[];w.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",n+=h?""+l:""+e.util.toQuotedString(s),n+="  } ",!1!==e.opts.messages&&(n+=" , message: 'should match format \"",n+=h?"' + "+l+" + '":""+e.util.escapeQuotes(s),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+a:""+e.util.toQuotedString(s),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var E=n;return n=w.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+E+"]); ":n+=" validate.errors = ["+E+"]; return false; ":n+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="valid"+o,h="errs__"+o,d=e.util.copy(e),f="";d.level++;var m="valid"+d.level,g="i"+o,y=d.dataLevel=e.dataLevel+1,v="data"+y,b=e.baseId;if(n+="var "+h+" = errors;var "+l+";",Array.isArray(s)){var w=e.schema.additionalItems;if(!1===w){n+=" "+l+" = "+p+".length <= "+s.length+"; ";var E=c;c=e.errSchemaPath+"/additionalItems",n+="  if (!"+l+") {   ";var x=x||[];x.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+s.length+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have more than "+s.length+" items' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var C=n;n=x.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+C+"]); ":n+=" validate.errors = ["+C+"]; return false; ":n+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",c=E,u&&(f+="}",n+=" else { ")}var S=s;if(S)for(var k,P=-1,_=S.length-1;P<_;)if(k=S[P+=1],e.util.schemaHasRules(k,e.RULES.all)){n+=" "+m+" = true; if ("+p+".length > "+P+") { ";var A=p+"["+P+"]";d.schema=k,d.schemaPath=a+"["+P+"]",d.errSchemaPath=c+"/"+P,d.errorPath=e.util.getPathExpr(e.errorPath,P,e.opts.jsonPointers,!0),d.dataPathArr[y]=P;var D=e.validate(d);d.baseId=b,e.util.varOccurences(D,v)<2?n+=" "+e.util.varReplace(D,v,A)+" ":n+=" var "+v+" = "+A+"; "+D+" ",n+=" }  ",u&&(n+=" if ("+m+") { ",f+="}")}if("object"==typeof w&&e.util.schemaHasRules(w,e.RULES.all)){d.schema=w,d.schemaPath=e.schemaPath+".additionalItems",d.errSchemaPath=e.errSchemaPath+"/additionalItems",n+=" "+m+" = true; if ("+p+".length > "+s.length+") {  for (var "+g+" = "+s.length+"; "+g+" < "+p+".length; "+g+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);A=p+"["+g+"]";d.dataPathArr[y]=g;D=e.validate(d);d.baseId=b,e.util.varOccurences(D,v)<2?n+=" "+e.util.varReplace(D,v,A)+" ":n+=" var "+v+" = "+A+"; "+D+" ",u&&(n+=" if (!"+m+") break; "),n+=" } }  ",u&&(n+=" if ("+m+") { ",f+="}")}}else if(e.util.schemaHasRules(s,e.RULES.all)){d.schema=s,d.schemaPath=a,d.errSchemaPath=c,n+="  for (var "+g+" = 0; "+g+" < "+p+".length; "+g+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);A=p+"["+g+"]";d.dataPathArr[y]=g;D=e.validate(d);d.baseId=b,e.util.varOccurences(D,v)<2?n+=" "+e.util.varReplace(D,v,A)+" ":n+=" var "+v+" = "+A+"; "+D+" ",u&&(n+=" if (!"+m+") break; "),n+=" }"}return u&&(n+=" "+f+" if ("+h+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(s||""),h=e.opts.$data&&a&&a.$data;h?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a,o+="var division"+i+";if (",h&&(o+=" "+n+" !== undefined && ( typeof "+n+" != 'number' || "),o+=" (division"+i+" = "+l+" / "+n+", ",e.opts.multipleOfPrecision?o+=" Math.abs(Math.round(division"+i+") - division"+i+") > 1e-"+e.opts.multipleOfPrecision+" ":o+=" division"+i+" !== parseInt(division"+i+") ",o+=" ) ",h&&(o+="  )  "),o+=" ) {   ";var d=d||[];d.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { multipleOf: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should be multiple of ",o+=h?"' + "+n:n+"'"),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var f=o;return o=d.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+f+"]); ":o+=" validate.errors = ["+f+"]; return false; ":o+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="errs__"+o,h=e.util.copy(e);h.level++;var d="valid"+h.level;if(e.util.schemaHasRules(s,e.RULES.all)){h.schema=s,h.schemaPath=a,h.errSchemaPath=c,n+=" var "+l+" = errors;  ";var f,m=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1,h.opts.allErrors&&(f=h.opts.allErrors,h.opts.allErrors=!1),n+=" "+e.validate(h)+" ",h.createErrors=!0,f&&(h.opts.allErrors=f),e.compositeRule=h.compositeRule=m,n+=" if ("+d+") {   ";var g=g||[];g.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var y=n;n=g.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+l+"; if (vErrors !== null) { if ("+l+") vErrors.length = "+l+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(n+=" if (false) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="valid"+o,h="errs__"+o,d=e.util.copy(e),f="";d.level++;var m="valid"+d.level;n+="var "+h+" = errors;var prevValid"+o+" = false;var "+l+" = false;";var g=d.baseId,y=e.compositeRule;e.compositeRule=d.compositeRule=!0;var v=s;if(v)for(var b,w=-1,E=v.length-1;w<E;)b=v[w+=1],e.util.schemaHasRules(b,e.RULES.all)?(d.schema=b,d.schemaPath=a+"["+w+"]",d.errSchemaPath=c+"/"+w,n+="  "+e.validate(d)+" ",d.baseId=g):n+=" var "+m+" = true; ",w&&(n+=" if ("+m+" && prevValid"+o+") "+l+" = false; else { ",f+="}"),n+=" if ("+m+") "+l+" = prevValid"+o+" = true;";return e.compositeRule=d.compositeRule=y,n+=f+"if (!"+l+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(n+=" } "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(s||""),h=e.opts.$data&&a&&a.$data;h?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a,o+="if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'string') || "),o+=" !"+(h?"(new RegExp("+n+"))":e.usePattern(a))+".test("+l+") ) {   ";var d=d||[];d.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { pattern:  ",o+=h?""+n:""+e.util.toQuotedString(a),o+="  } ",!1!==e.opts.messages&&(o+=" , message: 'should match pattern \"",o+=h?"' + "+n+" + '":""+e.util.escapeQuotes(a),o+="\"' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+e.util.toQuotedString(a),o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var f=o;return o=d.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+f+"]); ":o+=" validate.errors = ["+f+"]; return false; ":o+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="valid"+o,h="errs__"+o,d=e.util.copy(e),f="";d.level++;var m="valid"+d.level,g="key"+o,y="idx"+o,v=d.dataLevel=e.dataLevel+1,b="data"+v,w="dataProperties"+o,E=Object.keys(s||{}),x=e.schema.patternProperties||{},C=Object.keys(x),S=e.schema.additionalProperties,k=E.length||C.length,P=!1===S,_="object"==typeof S&&Object.keys(S).length,A=e.opts.removeAdditional,D=P||_||A,O=e.opts.ownProperties,T=e.baseId,N=e.schema.required;if(N&&(!e.opts.v5||!N.$data)&&N.length<e.opts.loopRequired)var I=e.util.toHash(N);if(e.opts.patternGroups)var R=e.schema.patternGroups||{},j=Object.keys(R);if(n+="var "+h+" = errors;var "+m+" = true;",O&&(n+=" var "+w+" = undefined;"),D){if(n+=O?" "+w+" = "+w+" || Object.keys("+p+"); for (var "+y+"=0; "+y+"<"+w+".length; "+y+"++) { var "+g+" = "+w+"["+y+"]; ":" for (var "+g+" in "+p+") { ",k){if(n+=" var isAdditional"+o+" = !(false ",E.length)if(E.length>5)n+=" || validate.schema"+a+"["+g+"] ";else{var F=E;if(F)for(var M=-1,L=F.length-1;M<L;)Z=F[M+=1],n+=" || "+g+" == "+e.util.toQuotedString(Z)+" "}if(C.length){var G=C;if(G)for(var B=-1,U=G.length-1;B<U;)ce=G[B+=1],n+=" || "+e.usePattern(ce)+".test("+g+") "}if(e.opts.patternGroups&&j.length){var $=j;if($){B=-1;for(var q=$.length-1;B<q;)he=$[B+=1],n+=" || "+e.usePattern(he)+".test("+g+") "}}n+=" ); if (isAdditional"+o+") { "}if("all"==A)n+=" delete "+p+"["+g+"]; ";else{var z=e.errorPath,H="' + "+g+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers)),P)if(A)n+=" delete "+p+"["+g+"]; ";else{n+=" "+m+" = false; ";var V=c;c=e.errSchemaPath+"/additionalProperties",(Ee=Ee||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+H+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have additional properties' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var X=n;n=Ee.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+X+"]); ":n+=" validate.errors = ["+X+"]; return false; ":n+=" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=V,u&&(n+=" break; ")}else if(_)if("failing"==A){n+=" var "+h+" = errors;  ";var W=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=S,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var J=p+"["+g+"]";d.dataPathArr[v]=g;var Y=e.validate(d);d.baseId=T,e.util.varOccurences(Y,b)<2?n+=" "+e.util.varReplace(Y,b,J)+" ":n+=" var "+b+" = "+J+"; "+Y+" ",n+=" if (!"+m+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+p+"["+g+"]; }  ",e.compositeRule=d.compositeRule=W}else{d.schema=S,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);J=p+"["+g+"]";d.dataPathArr[v]=g;Y=e.validate(d);d.baseId=T,e.util.varOccurences(Y,b)<2?n+=" "+e.util.varReplace(Y,b,J)+" ":n+=" var "+b+" = "+J+"; "+Y+" ",u&&(n+=" if (!"+m+") break; ")}e.errorPath=z}k&&(n+=" } "),n+=" }  ",u&&(n+=" if ("+m+") { ",f+="}")}var K=e.opts.useDefaults&&!e.compositeRule;if(E.length){var Q=E;if(Q)for(var Z,ee=-1,te=Q.length-1;ee<te;){var re=s[Z=Q[ee+=1]];if(e.util.schemaHasRules(re,e.RULES.all)){var ne=e.util.getProperty(Z),oe=(J=p+ne,K&&void 0!==re.default);d.schema=re,d.schemaPath=a+ne,d.errSchemaPath=c+"/"+e.util.escapeFragment(Z),d.errorPath=e.util.getPath(e.errorPath,Z,e.opts.jsonPointers),d.dataPathArr[v]=e.util.toQuotedString(Z);Y=e.validate(d);if(d.baseId=T,e.util.varOccurences(Y,b)<2){Y=e.util.varReplace(Y,b,J);var ie=J}else{ie=b;n+=" var "+b+" = "+J+"; "}if(oe)n+=" "+Y+" ";else{if(I&&I[Z]){n+=" if ( "+ie+" === undefined ",O&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(Z)+"') "),n+=") { "+m+" = false; ";z=e.errorPath,V=c;var se=e.util.escapeQuotes(Z);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(z,Z,e.opts.jsonPointers)),c=e.errSchemaPath+"/required",(Ee=Ee||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+se+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+se+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";X=n;n=Ee.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+X+"]); ":n+=" validate.errors = ["+X+"]; return false; ":n+=" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=V,e.errorPath=z,n+=" } else { "}else u?(n+=" if ( "+ie+" === undefined ",O&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(Z)+"') "),n+=") { "+m+" = true; } else { "):(n+=" if ("+ie+" !== undefined ",O&&(n+=" &&   Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(Z)+"') "),n+=" ) { ");n+=" "+Y+" } "}}u&&(n+=" if ("+m+") { ",f+="}")}}if(C.length){var ae=C;if(ae)for(var ce,ue=-1,pe=ae.length-1;ue<pe;){re=x[ce=ae[ue+=1]];if(e.util.schemaHasRules(re,e.RULES.all)){d.schema=re,d.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ce),d.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ce),n+=O?" "+w+" = "+w+" || Object.keys("+p+"); for (var "+y+"=0; "+y+"<"+w+".length; "+y+"++) { var "+g+" = "+w+"["+y+"]; ":" for (var "+g+" in "+p+") { ",n+=" if ("+e.usePattern(ce)+".test("+g+")) { ",d.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);J=p+"["+g+"]";d.dataPathArr[v]=g;Y=e.validate(d);d.baseId=T,e.util.varOccurences(Y,b)<2?n+=" "+e.util.varReplace(Y,b,J)+" ":n+=" var "+b+" = "+J+"; "+Y+" ",u&&(n+=" if (!"+m+") break; "),n+=" } ",u&&(n+=" else "+m+" = true; "),n+=" }  ",u&&(n+=" if ("+m+") { ",f+="}")}}}if(e.opts.patternGroups&&j.length){var le=j;if(le)for(var he,de=-1,fe=le.length-1;de<fe;){var me=R[he=le[de+=1]];re=me.schema;if(e.util.schemaHasRules(re,e.RULES.all)){d.schema=re,d.schemaPath=e.schemaPath+".patternGroups"+e.util.getProperty(he)+".schema",d.errSchemaPath=e.errSchemaPath+"/patternGroups/"+e.util.escapeFragment(he)+"/schema",n+=" var pgPropCount"+o+" = 0;  ",n+=O?" "+w+" = "+w+" || Object.keys("+p+"); for (var "+y+"=0; "+y+"<"+w+".length; "+y+"++) { var "+g+" = "+w+"["+y+"]; ":" for (var "+g+" in "+p+") { ",n+=" if ("+e.usePattern(he)+".test("+g+")) { pgPropCount"+o+"++; ",d.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);J=p+"["+g+"]";d.dataPathArr[v]=g;Y=e.validate(d);d.baseId=T,e.util.varOccurences(Y,b)<2?n+=" "+e.util.varReplace(Y,b,J)+" ":n+=" var "+b+" = "+J+"; "+Y+" ",u&&(n+=" if (!"+m+") break; "),n+=" } ",u&&(n+=" else "+m+" = true; "),n+=" }  ",u&&(n+=" if ("+m+") { ",f+="}");var ge=me.minimum,ye=me.maximum;if(void 0!==ge||void 0!==ye){n+=" var "+l+" = true; ";V=c;if(void 0!==ge){var ve=ge,be="minimum",we="less";n+=" "+l+" = pgPropCount"+o+" >= "+ge+"; ",c=e.errSchemaPath+"/patternGroups/minimum",n+="  if (!"+l+") {   ",(Ee=Ee||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'patternGroups' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { reason: '"+be+"', limit: "+ve+", pattern: '"+e.util.escapeQuotes(he)+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have "+we+" than "+ve+' properties matching pattern "'+e.util.escapeQuotes(he)+"\"' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";X=n;n=Ee.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+X+"]); ":n+=" validate.errors = ["+X+"]; return false; ":n+=" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",void 0!==ye&&(n+=" else ")}if(void 0!==ye){var Ee;ve=ye,be="maximum",we="more";n+=" "+l+" = pgPropCount"+o+" <= "+ye+"; ",c=e.errSchemaPath+"/patternGroups/maximum",n+="  if (!"+l+") {   ",(Ee=Ee||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'patternGroups' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { reason: '"+be+"', limit: "+ve+", pattern: '"+e.util.escapeQuotes(he)+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have "+we+" than "+ve+' properties matching pattern "'+e.util.escapeQuotes(he)+"\"' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";X=n;n=Ee.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+X+"]); ":n+=" validate.errors = ["+X+"]; return false; ":n+=" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "}c=V,u&&(n+=" if ("+l+") { ",f+="}")}}}}return u&&(n+=" "+f+" if ("+h+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="errs__"+o,h=e.util.copy(e);h.level++;var d="valid"+h.level;if(e.util.schemaHasRules(s,e.RULES.all)){h.schema=s,h.schemaPath=a,h.errSchemaPath=c;var f="key"+o,m="idx"+o,g="i"+o,y="' + "+f+" + '",v="data"+(h.dataLevel=e.dataLevel+1),b="dataProperties"+o,w=e.opts.ownProperties,E=e.baseId;n+=" var "+l+" = errors; ",w&&(n+=" var "+b+" = undefined; "),n+=w?" "+b+" = "+b+" || Object.keys("+p+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+f+" = "+b+"["+m+"]; ":" for (var "+f+" in "+p+") { ",n+=" var startErrs"+o+" = errors; ";var x=f,C=e.compositeRule;e.compositeRule=h.compositeRule=!0;var S=e.validate(h);h.baseId=E,e.util.varOccurences(S,v)<2?n+=" "+e.util.varReplace(S,v,x)+" ":n+=" var "+v+" = "+x+"; "+S+" ",e.compositeRule=h.compositeRule=C,n+=" if (!"+d+") { for (var "+g+"=startErrs"+o+"; "+g+"<errors; "+g+"++) { vErrors["+g+"].propertyName = "+f+"; }   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { propertyName: '"+y+"' } ",!1!==e.opts.messages&&(n+=" , message: 'property name \\'"+y+"\\' is invalid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),u&&(n+=" break; "),n+=" } }"}return u&&(n+="  if ("+l+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="valid"+o,h=e.opts.$data&&s&&s.$data;h&&(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ");var d="schema"+o;if(!h)if(s.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var f=[],m=s;if(m)for(var g,y=-1,v=m.length-1;y<v;){g=m[y+=1];var b=e.schema.properties[g];b&&e.util.schemaHasRules(b,e.RULES.all)||(f[f.length]=g)}}else f=s;if(h||f.length){var w=e.errorPath,E=h||f.length>=e.opts.loopRequired,x=e.opts.ownProperties;if(u)if(n+=" var missing"+o+"; ",E){h||(n+=" var "+d+" = validate.schema"+a+"; ");var C="' + "+(D="schema"+o+"["+(P="i"+o)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,D,e.opts.jsonPointers)),n+=" var "+l+" = true; ",h&&(n+=" if (schema"+o+" === undefined) "+l+" = true; else if (!Array.isArray(schema"+o+")) "+l+" = false; else {"),n+=" for (var "+P+" = 0; "+P+" < "+d+".length; "+P+"++) { "+l+" = "+p+"["+d+"["+P+"]] !== undefined ",x&&(n+=" &&   Object.prototype.hasOwnProperty.call("+p+", "+d+"["+P+"]) "),n+="; if (!"+l+") break; } ",h&&(n+="  }  "),n+="  if (!"+l+") {   ",(A=A||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+C+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var S=n;n=A.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+S+"]); ":n+=" validate.errors = ["+S+"]; return false; ":n+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var k=f;if(k)for(var P=-1,_=k.length-1;P<_;){T=k[P+=1],P&&(n+=" || "),n+=" ( ( "+(j=p+(R=e.util.getProperty(T)))+" === undefined ",x&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(T)+"') "),n+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?T:R)+") ) "}n+=") {  ";var A;C="' + "+(D="missing"+o)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,D,!0):w+" + "+D),(A=A||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+C+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";S=n;n=A.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+S+"]); ":n+=" validate.errors = ["+S+"]; return false; ":n+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(E){h||(n+=" var "+d+" = validate.schema"+a+"; ");var D;C="' + "+(D="schema"+o+"["+(P="i"+o)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,D,e.opts.jsonPointers)),h&&(n+=" if ("+d+" && !Array.isArray("+d+")) {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+C+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+d+" !== undefined) { "),n+=" for (var "+P+" = 0; "+P+" < "+d+".length; "+P+"++) { if ("+p+"["+d+"["+P+"]] === undefined ",x&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", "+d+"["+P+"]) "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+C+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(n+="  }  ")}else{var O=f;if(O)for(var T,N=-1,I=O.length-1;N<I;){T=O[N+=1];var R=e.util.getProperty(T),j=(C=e.util.escapeQuotes(T),p+R);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,T,e.opts.jsonPointers)),n+=" if ( "+j+" === undefined ",x&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(T)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+C+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=w}else u&&(n+=" if (true) {");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(s||""),h="valid"+i,d=e.opts.$data&&a&&a.$data;if(d?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a,(a||d)&&!1!==e.opts.uniqueItems){d&&(o+=" var "+h+"; if ("+n+" === false || "+n+" === undefined) "+h+" = true; else if (typeof "+n+" != 'boolean') "+h+" = false; else { "),o+=" var "+h+" = true; if ("+l+".length > 1) { var i = "+l+".length, j; outer: for (;i--;) { for (j = i; j--;) { if (equal("+l+"[i], "+l+"[j])) { "+h+" = false; break outer; } } } } ",d&&(o+="  }  "),o+=" if (!"+h+") {   ";var f=f||[];f.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(o+=" , schema:  ",o+=d?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var m=o;o=f.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",p&&(o+=" else { ")}else p&&(o+=" if (true) { ");return o}},function(e,t,r){"use strict";var n=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var o,i=t[r].split("/"),s=e;for(o=1;o<i.length;o++)s=s[i[o]];for(o=0;o<n.length;o++){var a=n[o],c=s[a];c&&(s[a]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/$data.json#"}]})}}return e}},function(e,t,r){"use strict";e.exports=function(e){var t=e._opts.defaultMeta,r="string"==typeof t?{$ref:t}:e.getSchema("http://json-schema.org/draft-06/schema")?{$ref:"http://json-schema.org/draft-06/schema"}:{};e.addKeyword("patternGroups",{metaSchema:{type:"object",additionalProperties:{type:"object",required:["schema"],properties:{maximum:{type:"integer",minimum:0},minimum:{type:"integer",minimum:0},schema:r},additionalProperties:!1}}}),e.RULES.all.properties.implements.push("patternGroups")}},function(e,t,r){"use strict";var n=r(84).MissingRef;e.exports=function e(t,r,o){var i=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(o=r,r=void 0);var s=a(t).then(function(){var e=i._addSchema(t,void 0,r);return e.validate||function e(t){try{return i._compile(t)}catch(e){if(e instanceof n)return function o(e){var o=e.missingSchema;if(u(o))throw new Error("Schema "+o+" is loaded but "+e.missingRef+" cannot be resolved");var s=i._loadingSchemas[o];s||(s=i._loadingSchemas[o]=i._opts.loadSchema(o)).then(c,c);return s.then(function(e){if(!u(o))return a(e).then(function(){u(o)||i.addSchema(e,o,void 0,r)})}).then(function(){return function e(t){try{return i._compile(t)}catch(e){if(e instanceof n)return o(e);throw e}function o(n){var o=n.missingSchema;if(u(o))throw new Error("Schema "+o+" is loaded but "+n.missingRef+" cannot be resolved");var s=i._loadingSchemas[o];return s||(s=i._loadingSchemas[o]=i._opts.loadSchema(o)).then(c,c),s.then(function(e){if(!u(o))return a(e).then(function(){u(o)||i.addSchema(e,o,void 0,r)})}).then(function(){return e(t)});function c(){delete i._loadingSchemas[o]}function u(e){return i._refs[e]||i._schemas[e]}}}(t)});function c(){delete i._loadingSchemas[o]}function u(e){return i._refs[e]||i._schemas[e]}}(e);throw e}function o(n){var o=n.missingSchema;if(u(o))throw new Error("Schema "+o+" is loaded but "+n.missingRef+" cannot be resolved");var s=i._loadingSchemas[o];return s||(s=i._loadingSchemas[o]=i._opts.loadSchema(o)).then(c,c),s.then(function(e){if(!u(o))return a(e).then(function(){u(o)||i.addSchema(e,o,void 0,r)})}).then(function(){return e(t)});function c(){delete i._loadingSchemas[o]}function u(e){return i._refs[e]||i._schemas[e]}}}(e)});o&&s.then(function(e){o(null,e)},o);return s;function a(t){var r=t.$schema;return r&&!i.getSchema(r)?e.call(i,{$ref:r},!0):Promise.resolve()}}},function(e,t,r){"use strict";var n=/^[a-z_$][a-z0-9_$-]*$/i,o=r(334);e.exports={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!n.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){if(t.macro&&void 0!==t.valid)throw new Error('"valid" option cannot be used with macro keywords');var i=t.type;if(Array.isArray(i)){var s,a=i.length;for(s=0;s<a;s++)l(i[s]);for(s=0;s<a;s++)p(e,i[s],t)}else i&&l(i),p(e,i,t);var c=!0===t.$data&&this._opts.$data;if(c&&!t.validate)throw new Error('$data support: "validate" function is not defined');var u=t.metaSchema;u&&(c&&(u={anyOf:[u,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/$data.json#"}]}),t.validateSchema=this.compile(u,!0))}function p(e,t,n){for(var i,s=0;s<r.length;s++){var a=r[s];if(a.type==t){i=a;break}}i||(i={type:t,rules:[]},r.push(i));var c={keyword:e,definition:n,custom:!0,code:o,implements:n.implements};i.rules.push(c),r.custom[e]=c}function l(e){if(!r.types[e])throw new Error("Unknown type "+e)}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var n=t[r].rules,o=0;o<n.length;o++)if(n[o].keyword==e){n.splice(o,1);break}return this}}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o,i=" ",s=e.level,a=e.dataLevel,c=e.schema[t],u=e.schemaPath+e.util.getProperty(t),p=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(a||""),d="valid"+s,f="errs__"+s,m=e.opts.$data&&c&&c.$data;m?(i+=" var schema"+s+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",o="schema"+s):o=c;var g,y,v,b,w,E="definition"+s,x=this.definition,C="";if(m&&x.$data){w="keywordValidate"+s;var S=x.validateSchema;i+=" var "+E+" = RULES.custom['"+t+"'].definition; var "+w+" = "+E+".validate;"}else{if(!(b=e.useCustomRule(this,c,e.schema,e)))return;o="validate.schema"+u,w=b.code,g=x.compile,y=x.inline,v=x.macro}var k=w+".errors",P="i"+s,_="ruleErr"+s,A=x.async;if(A&&!e.async)throw new Error("async keyword in sync schema");if(y||v||(i+=k+" = null;"),i+="var "+f+" = errors;var "+d+";",m&&x.$data&&(C+="}",i+=" if ("+o+" === undefined) { "+d+" = true; } else { ",S&&(C+="}",i+=" "+d+" = "+E+".validateSchema("+o+"); if ("+d+") { ")),y)x.statements?i+=" "+b.validate+" ":i+=" "+d+" = "+b.validate+"; ";else if(v){var D=e.util.copy(e);C="";D.level++;var O="valid"+D.level;D.schema=b.validate,D.schemaPath="";var T=e.compositeRule;e.compositeRule=D.compositeRule=!0;var N=e.validate(D).replace(/validate\.schema/g,w);e.compositeRule=D.compositeRule=T,i+=" "+N}else{(F=F||[]).push(i),i="",i+="  "+w+".call( ",e.opts.passContext?i+="this":i+="self",g||!1===x.schema?i+=" , "+h+" ":i+=" , "+o+" , "+h+" , validate.schema"+e.schemaPath+" ",i+=" , (dataPath || '')",'""'!=e.errorPath&&(i+=" + "+e.errorPath);var I=a?"data"+(a-1||""):"parentData",R=a?e.dataPathArr[a]:"parentDataProperty",j=i+=" , "+I+" , "+R+" , rootData )  ";i=F.pop(),!1===x.errors?(i+=" "+d+" = ",A&&(i+=""+e.yieldAwait),i+=j+"; "):i+=A?" var "+(k="customErrors"+s)+" = null; try { "+d+" = "+e.yieldAwait+j+"; } catch (e) { "+d+" = false; if (e instanceof ValidationError) "+k+" = e.errors; else throw e; } ":" "+k+" = null; "+d+" = "+j+"; "}if(x.modifying&&(i+=" if ("+I+") "+h+" = "+I+"["+R+"];"),i+=""+C,x.valid)l&&(i+=" if (true) { ");else{var F;i+=" if ( ",void 0===x.valid?(i+=" !",i+=v?""+O:""+d):i+=" "+!x.valid+" ",i+=") { ",n=this.keyword,(F=F||[]).push(i),i="",(F=F||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var M=i;i=F.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+M+"]); ":i+=" validate.errors = ["+M+"]; return false; ":i+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var L=i;i=F.pop(),y?x.errors?"full"!=x.errors&&(i+="  for (var "+P+"="+f+"; "+P+"<errors; "+P+"++) { var "+_+" = vErrors["+P+"]; if ("+_+".dataPath === undefined) "+_+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+_+".schemaPath === undefined) { "+_+'.schemaPath = "'+p+'"; } ',e.opts.verbose&&(i+=" "+_+".schema = "+o+"; "+_+".data = "+h+"; "),i+=" } "):!1===x.errors?i+=" "+L+" ":(i+=" if ("+f+" == errors) { "+L+" } else {  for (var "+P+"="+f+"; "+P+"<errors; "+P+"++) { var "+_+" = vErrors["+P+"]; if ("+_+".dataPath === undefined) "+_+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+_+".schemaPath === undefined) { "+_+'.schemaPath = "'+p+'"; } ',e.opts.verbose&&(i+=" "+_+".schema = "+o+"; "+_+".data = "+h+"; "),i+=" } } "):v?(i+="   var err =   ",!1!==e.createErrors?(i+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; ")):!1===x.errors?i+=" "+L+" ":(i+=" if (Array.isArray("+k+")) { if (vErrors === null) vErrors = "+k+"; else vErrors = vErrors.concat("+k+"); errors = vErrors.length;  for (var "+P+"="+f+"; "+P+"<errors; "+P+"++) { var "+_+" = vErrors["+P+"]; if ("+_+".dataPath === undefined) "+_+".dataPath = (dataPath || '') + "+e.errorPath+";  "+_+'.schemaPath = "'+p+'";  ',e.opts.verbose&&(i+=" "+_+".schema = "+o+"; "+_+".data = "+h+"; "),i+=" } } else { "+L+" } "),i+=" } ",l&&(i+=" else { ")}return i}},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-06/schema#","$id":"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/$data.json#","description":"Meta-schema for $data reference (JSON-schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-06/schema#","$id":"http://json-schema.org/draft-06/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"title":{"type":"string"},"description":{"type":"string"},"default":{},"examples":{"type":"array","items":{}},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":{}},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":{},"enum":{"type":"array","minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":{}}')},function(e){e.exports=JSON.parse('{"id":"/definition/","type":"object","properties":{"id":{"type":"string","format":"uuid"},"label":{"type":"string"},"address":{"type":"string"},"type":{"type":"string"},"protocol":{"type":"string"},"secret":{"type":"string"},"allCapabilities":{"$ref":"/shared/capabilities"},"capabilities":{"$ref":"/shared/capabilities"}},"required":["address"],"additionalProperties":true}')},function(e,t,r){const n=r(44)("fbp-client:observer"),o=r(44)("fbp-client:observer:ignored");function i(e,t){return"*"===t||e===t}function s(e,t){if("function"==typeof t)return t(e);return t.filter(t=>{const[r,n]=t.split(":");return i(e.protocol,r)&&i(e.command,n)}).length>0}function a(e){const t=`${e.protocol}:${e.command}`;let r=`Unexpected ${t} message`,n="";"runtime:packet"===t&&e.payload.payload&&e.payload.payload.message&&(r=e.payload.payload.message,n=e.payload.payload.stack),"network:data"===t&&e.payload.src&&"error"===e.payload.src.port&&(r=e.payload.data.message||e.payload.data,n=e.payload.data.stack),e.payload.error&&(r=e.payload.error,n=e.payload.stack);const o=new Error(r);return o.signature=t,n&&(o.stack=n),o}class c{constructor(e,t){this.client=e,this.signals=[],this.protocolErrors=[],this.listener=null,this.errorListener=null,this.subscribe(t)}subscribe(e){this.listener=t=>{s(t,e)?(n(`Observed ${t.protocol}:${t.command}`),this.signals.push(t)):o(`${t.protocol}:${t.command}`)},this.client.on("signal",this.listener),this.client.options.skipValidation||(this.errorListener=e=>{this.protocolErrors.push(e)},this.client.on("protocolError",this.errorListener))}unsubscribe(){this.listener&&(this.client.removeListener("signal",this.listener),this.listener=null),this.errorListener&&(this.client.removeListener("protocolError",this.errorListener),this.errorListener=null)}until(e,t){return new Promise((r,o)=>{if(this.protocolErrors.length){const e=this.protocolErrors[0];return n(`Failed with protocol error ${e.message}`),e.signals=this.signals.slice(0),this.unsubscribe(),this.signals=[],void o(e)}for(let i=0;i<this.signals.length;i+=1){const c=this.signals[i];if(s(c,t)){const e=a(c);return n(`Failed with ${c.protocol}:${c.command}`),e.signals=this.signals.slice(0,i+1),this.unsubscribe(),this.signals=[],void o(e)}if(s(c,e)){n(`Succeeded with ${c.protocol}:${c.command}`);const e=this.signals.slice(0,i+1);return this.unsubscribe(),this.signals=[],void r(e)}}let i=null;const c=u=>{if(s(u,t)){n(`Failed with ${u.protocol}:${u.command}`);const e=a(u);return e.signals=this.signals.slice(0),this.unsubscribe(),this.client.removeListener("signal",c),this.client.options.skipValidation||this.client.removeListener("protocolError",i),this.signals=[],void o(e)}if(s(u,e)){n(`Succeeded with ${u.protocol}:${u.command}`);const e=this.signals.slice(0);this.unsubscribe(),this.client.removeListener("signal",c),this.client.options.skipValidation||this.client.removeListener("protocolError",i),this.signals=[],r(e)}};i=e=>{n(`Failed with protocol error ${e.message}`);const t=e;t.signals=this.signals.slice(0),this.unsubscribe(),this.client.removeListener("signal",c),this.client.options.skipValidation||this.client.removeListener("protocolError",i),this.signals=[],o(t)},this.client.on("signal",c),this.client.options.skipValidation||this.client.on("protocolError",i)})}}e.exports=(e,t)=>new c(e,t)},function(e,t,r){"use strict";e.exports=function(e){function t(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){var r;function s(){if(s.enabled){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var i=s,a=Number(new Date),c=a-(r||a);i.diff=c,i.prev=r,i.curr=a,r=a,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,r){if("%%"===e)return e;u++;var o=n.formatters[r];if("function"==typeof o){var s=t[u];e=o.call(i,s),t.splice(u,1),u--}return e}),n.formatArgs.call(i,t),(i.log||n.log).apply(i,t)}}return s.namespace=e,s.enabled=n.enabled(e),s.useColors=n.useColors(),s.color=t(e),s.destroy=o,s.extend=i,"function"==typeof n.init&&n.init(s),n.instances.push(s),s}function o(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function i(e,t){return n(this.namespace+(void 0===t?":":t)+e)}return n.debug=n,n.default=n,n.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},n.disable=function(){n.enable("")},n.enable=function(e){var t;n.save(e),n.names=[],n.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(t=0;t<o;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var i=n.instances[t];i.enabled=n.enabled(i.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=r(60),Object.keys(e).forEach(function(t){n[t]=e[t]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}},function(e,t,r){const n=r(44)("fbp-client:adapter:signal"),o=r(44)("fbp-client:adapter:request"),i=r(44)("fbp-client:adapter:response");class s{constructor(e,t){this.client=e,this.commands=[],this.listener=null,this.version=t,this.subscribe(),this.tick()}subscribe(){this.client.transport.on("message",e=>{this.listener?this.listener(e):(n(`${e.protocol}:${e.command}`),this.client.validate(`/${e.protocol}/output/${e.command}`,e).then(()=>this.client.canReceive(e.protocol,e.command)).then(()=>this.client.signal(e),e=>this.client.protocolError(e)))}),this.client.transport.on("status",({online:e})=>{e&&this.tick()})}send(e,t,r){return new Promise((s,a)=>{const c=[];this.commands.push(()=>{let u=null;this.listener=r=>{this.client.validate(`/${r.protocol}/output/${r.command}`,r).then(()=>this.client.canReceive(r.protocol,r.command)).then(()=>{if(!(r=>{if(r.protocol!==e)return!1;const n=[];switch(`${e}:${t}`){case"runtime:packet":n.push("packetsent");break;case"component:getsource":n.push("source");break;case"component:source":n.push("component");break;case"component:list":n.push("component"),n.push("componentsready");break;case"network:start":n.push("started");break;case"network:stop":n.push("stopped");break;case"network:getstatus":n.push("status");break;default:n.push(t)}return n.push("error"),-1!==n.indexOf(r.command)})(r))return n(`${r.protocol}:${r.command}`),void this.client.signal(r);if(u&&(clearTimeout(u),u=null),i(`${r.protocol}:${r.command} for request ${e}:${t}`),"error"===r.command){const e=new Error(r.payload.message);return e.stack=r.payload.stack,this.listener=null,a(e),void this.tick()}if("component"===e&&"list"===t)return"componentsready"===r.command?(this.listener=null,s(c),void this.tick()):void c.push(r.payload);this.listener=null,s(r.payload),this.tick()},e=>{this.listener=null,a(e),this.tick()})},o(`${e}:${t}`),this.client.transport.send(e,t,r),"component"!==e&&(u="runtime"===e&&"packet"===t&&this.version<=.6?setTimeout(()=>{this.listener=null,s(r),this.tick()},10):setTimeout(()=>{this.listener=null,a(new Error(`${e}:${t} timed out`)),this.tick()},this.client.options.commandTimeout))}),this.tick()})}tick(){if(!this.commands.length)return;if(!this.client.isConnected())return;if(this.listener)return;this.commands.shift()()}}e.exports=(e,t)=>new s(e,t)},function(e,t,r){const n=r(0),o=()=>{const e=localStorage.getItem("noflo-ui-graphs"),t=[];return e?(e.split(",").forEach(e=>{const r=(e=>{const t=localStorage.getItem(e);if(!t)return null;const r=JSON.parse(t);return r.id=e,r.project="",r})(e);r&&t.push(r)}),t):t};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("graphstore",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("graphstore"))return;const r=e.getData("graphstore");if("undefined"!=typeof chrome&&chrome.storage)return void t.done();try{localStorage.getItem("noflo")}catch(e){return void t.done()}const n=o();if(0===n.length)return void t.done();let i=0;const s=()=>{(i+=1)===n.length&&t.done()};n.forEach(e=>{r.put(e).onsuccess=s})})}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{context:{process:"MergeContext",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},CleanEdges:{component:"ui/CleanAction"},CreateEdgeCtx:{component:"objects/CreateObject"},SetEdges:{component:"ui/SetToContext"},MergeContext:{component:"core/Merge"},CleanNodes:{component:"ui/CleanAction"},CreateNodeCtx:{component:"objects/CreateObject"},SetNodes:{component:"ui/SetToContext"},CleanSearch:{component:"ui/CleanAction"},CleanSearchResults:{component:"ui/CleanAction"},CleanGraph:{component:"ui/CleanAction"},GetGraph:{component:"objects/GetObjectKey"},SendGraphKey:{component:"strings/SendString"},FindNodesInGraph:{component:"ui/FindNodesInGraph"},CleanSearchterm:{component:"ui/CleanAction"},GetSearchTerm:{component:"objects/GetObjectKey"},SendSearchKey:{component:"strings/SendString"},NodesToContext:{component:"ui/SearchGraphNodeToContext"}},connections:[{data:"context:edges,context:nodes,context:search_library,context:search_graph,context:search_library_result,context:graph",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"CleanEdges",port:"in"}},{src:{process:"CleanEdges",port:"out"},tgt:{process:"CreateEdgeCtx",port:"start"}},{src:{process:"CreateEdgeCtx",port:"out"},tgt:{process:"SetEdges",port:"context"}},{data:"edges",tgt:{process:"SetEdges",port:"key"}},{src:{process:"CleanEdges",port:"out"},tgt:{process:"SetEdges",port:"value"}},{src:{process:"SetEdges",port:"context"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"CleanNodes",port:"in"}},{src:{process:"CleanNodes",port:"out"},tgt:{process:"CreateNodeCtx",port:"start"}},{src:{process:"CreateNodeCtx",port:"out"},tgt:{process:"SetNodes",port:"context"}},{data:"nodes",tgt:{process:"SetNodes",port:"key"}},{src:{process:"CleanNodes",port:"out"},tgt:{process:"SetNodes",port:"value"}},{src:{process:"SetNodes",port:"context"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"CleanSearch",port:"in"}},{src:{process:"CleanSearch",port:"out"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"CleanSearchResults",port:"in"}},{src:{process:"CleanSearchResults",port:"out"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:5},tgt:{process:"CleanGraph",port:"in"}},{src:{process:"CleanGraph",port:"out"},tgt:{process:"GetGraph",port:"in"}},{data:"graph",tgt:{process:"SendGraphKey",port:"string"}},{src:{process:"SendGraphKey",port:"out"},tgt:{process:"GetGraph",port:"key"}},{src:{process:"CleanGraph",port:"out"},tgt:{process:"SendGraphKey",port:"in"}},{src:{process:"GetGraph",port:"out"},tgt:{process:"FindNodesInGraph",port:"graph"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"CleanSearchterm",port:"in"}},{src:{process:"CleanSearchterm",port:"out"},tgt:{process:"GetSearchTerm",port:"in"}},{data:"search",tgt:{process:"SendSearchKey",port:"string"}},{src:{process:"SendSearchKey",port:"out"},tgt:{process:"GetSearchTerm",port:"key"}},{src:{process:"CleanSearchterm",port:"out"},tgt:{process:"SendSearchKey",port:"in"}},{src:{process:"GetSearchTerm",port:"out"},tgt:{process:"FindNodesInGraph",port:"search"}},{src:{process:"FindNodesInGraph",port:"nodes"},tgt:{process:"NodesToContext",port:"nodes"}},{src:{process:"NodesToContext",port:"context"},tgt:{process:"MergeContext",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"search"},caseSensitive:!1}},function(e,t){e.exports={inports:{db:{process:"Write",port:"db"},store:{process:"Store",port:"in"},item:{process:"EnsureId",port:"in"}},outports:{key:{process:"Delete",port:"key"},error:{process:"Errors",port:"out"}},groups:[],processes:{HoldMode:{component:"strings/SendString"},Store:{component:"core/Repeat"},Write:{component:"indexeddb/BeginTransaction"},GetStore:{component:"indexeddb/GetStore"},Delete:{component:"indexeddb/Delete"},EnsureId:{component:"ui/EnsureId"},Errors:{component:"core/Merge"}},connections:[{data:"readwrite",tgt:{process:"HoldMode",port:"string"}},{src:{process:"Store",port:"out"},tgt:{process:"HoldMode",port:"in"}},{src:{process:"HoldMode",port:"out"},tgt:{process:"Write",port:"mode"}},{src:{process:"Store",port:"out"},tgt:{process:"Write",port:"stores"}},{src:{process:"Store",port:"out"},tgt:{process:"GetStore",port:"name"}},{src:{process:"Write",port:"transaction"},tgt:{process:"GetStore",port:"transaction"}},{src:{process:"GetStore",port:"store"},tgt:{process:"Delete",port:"store"}},{src:{process:"EnsureId",port:"id"},tgt:{process:"Delete",port:"key"}},{src:{process:"Write",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"GetStore",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"Delete",port:"error"},tgt:{process:"Errors",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"trash"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{project:{process:"DeleteProject",port:"key"},graph:{process:"DeleteGraph",port:"key"},component:{process:"DeleteComponent",port:"key"},spec:{process:"DeleteSpec",port:"key"},runtime:{process:"DeleteRuntime",port:"key"},error:{process:"Errors",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},GetProjectsDb:{component:"ui/GetActionValues"},DeleteProject:{component:"ui/Delete"},ProjectsStore:{component:"strings/SendString"},Errors:{component:"core/Merge"},GetGraphsDb:{component:"ui/GetActionValues"},DeleteGraph:{component:"ui/Delete"},GraphsStore:{component:"strings/SendString"},GetComponentsDb:{component:"ui/GetActionValues"},DeleteComponent:{component:"ui/Delete"},ComponentsStore:{component:"strings/SendString"},GetSpecsDb:{component:"ui/GetActionValues"},DeleteSpec:{component:"ui/Delete"},SpecsStore:{component:"strings/SendString"},GetRuntimesDb:{component:"ui/GetActionValues"},DeleteRuntime:{component:"ui/Delete"},RuntimesStore:{component:"strings/SendString"}},connections:[{data:"storage:delete:project,storage:delete:graph,storage:delete:component,storage:delete:spec,storage:delete:runtime",tgt:{process:"Dispatch",port:"routes"}},{data:"db",tgt:{process:"GetProjectsDb",port:"keys"}},{src:{process:"GetProjectsDb",port:"values",index:0},tgt:{process:"DeleteProject",port:"db"}},{data:"projects",tgt:{process:"ProjectsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"GetProjectsDb",port:"in"}},{src:{process:"GetProjectsDb",port:"out"},tgt:{process:"ProjectsStore",port:"in"}},{src:{process:"ProjectsStore",port:"out"},tgt:{process:"DeleteProject",port:"store"}},{src:{process:"GetProjectsDb",port:"out"},tgt:{process:"DeleteProject",port:"item"}},{src:{process:"DeleteProject",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetGraphsDb",port:"keys"}},{src:{process:"GetGraphsDb",port:"values",index:0},tgt:{process:"DeleteGraph",port:"db"}},{data:"graphs",tgt:{process:"GraphsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"GetGraphsDb",port:"in"}},{src:{process:"GetGraphsDb",port:"out"},tgt:{process:"GraphsStore",port:"in"}},{src:{process:"GraphsStore",port:"out"},tgt:{process:"DeleteGraph",port:"store"}},{src:{process:"GetGraphsDb",port:"out"},tgt:{process:"DeleteGraph",port:"item"}},{src:{process:"DeleteGraph",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetComponentsDb",port:"keys"}},{src:{process:"GetComponentsDb",port:"values",index:0},tgt:{process:"DeleteComponent",port:"db"}},{data:"components",tgt:{process:"ComponentsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"GetComponentsDb",port:"in"}},{src:{process:"GetComponentsDb",port:"out"},tgt:{process:"ComponentsStore",port:"in"}},{src:{process:"ComponentsStore",port:"out"},tgt:{process:"DeleteComponent",port:"store"}},{src:{process:"GetComponentsDb",port:"out"},tgt:{process:"DeleteComponent",port:"item"}},{src:{process:"DeleteComponent",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetSpecsDb",port:"keys"}},{src:{process:"GetSpecsDb",port:"values",index:0},tgt:{process:"DeleteSpec",port:"db"}},{data:"specs",tgt:{process:"SpecsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetSpecsDb",port:"in"}},{src:{process:"GetSpecsDb",port:"out"},tgt:{process:"SpecsStore",port:"in"}},{src:{process:"SpecsStore",port:"out"},tgt:{process:"DeleteSpec",port:"store"}},{src:{process:"GetSpecsDb",port:"out"},tgt:{process:"DeleteSpec",port:"item"}},{src:{process:"DeleteSpec",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetRuntimesDb",port:"keys"}},{src:{process:"GetRuntimesDb",port:"values",index:0},tgt:{process:"DeleteRuntime",port:"db"}},{data:"runtimes",tgt:{process:"RuntimesStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"GetRuntimesDb",port:"in"}},{src:{process:"GetRuntimesDb",port:"out"},tgt:{process:"RuntimesStore",port:"in"}},{src:{process:"RuntimesStore",port:"out"},tgt:{process:"DeleteRuntime",port:"store"}},{src:{process:"GetRuntimesDb",port:"out"},tgt:{process:"DeleteRuntime",port:"item"}},{src:{process:"DeleteRuntime",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Errors",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"trash-o"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{pass:{process:"Dispatch",port:"pass"},new:{process:"NewActions",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},ApplicationRedirectAction:{component:"ui/SetAction"},NewActions:{component:"core/Merge"},OpenMainAction:{component:"ui/SetAction"},SaveGraphAction:{component:"ui/SetAction"},SaveComponentAction:{component:"ui/SetAction"},SaveSpecAction:{component:"ui/SetAction"},SaveProjectAction:{component:"ui/SetAction"},GithubPullAction:{component:"ui/SetAction"},GithubOperationAction:{component:"ui/SetAction"},GithubLoadingAction:{component:"ui/SetAction"},GithubReadyAction:{component:"ui/SetAction"},ErrorAction:{component:"ui/SetAction"},CheckRepo:{component:"ui/CheckRepoExists"},CheckGist:{component:"ui/CheckGistExists"},GetGistToken:{component:"ui/GetUserToken"},GetGist:{component:"ui/GistToProject"},GetPrepareToken:{component:"ui/GetUserToken"},GithubSynchronization:{component:"ui/GithubSynchronization"},GetSyncToken:{component:"ui/GetUserToken"},GetPullToken:{component:"ui/GetUserToken"}},connections:[{data:"github:open,github:gist,github:sync:prepare,github:sync:synchronize,github:sync:pull",tgt:{process:"Dispatch",port:"routes"}},{data:"application:sethash",tgt:{process:"ApplicationRedirectAction",port:"action"}},{src:{process:"ApplicationRedirectAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"main:open",tgt:{process:"OpenMainAction",port:"action"}},{src:{process:"OpenMainAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:graph",tgt:{process:"SaveGraphAction",port:"action"}},{src:{process:"SaveGraphAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:component",tgt:{process:"SaveComponentAction",port:"action"}},{src:{process:"SaveComponentAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:spec",tgt:{process:"SaveSpecAction",port:"action"}},{src:{process:"SaveSpecAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:project",tgt:{process:"SaveProjectAction",port:"action"}},{src:{process:"SaveProjectAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"github:sync:pull",tgt:{process:"GithubPullAction",port:"action"}},{src:{process:"GithubPullAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"github:operation",tgt:{process:"GithubOperationAction",port:"action"}},{src:{process:"GithubOperationAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"github:loading",tgt:{process:"GithubLoadingAction",port:"action"}},{src:{process:"GithubLoadingAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"github:ready",tgt:{process:"GithubReadyAction",port:"action"}},{src:{process:"GithubReadyAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"github:error",tgt:{process:"ErrorAction",port:"action"}},{src:{process:"ErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"CheckRepo",port:"in"}},{src:{process:"CheckRepo",port:"existing"},tgt:{process:"ApplicationRedirectAction",port:"in"}},{src:{process:"CheckRepo",port:"openmain"},tgt:{process:"OpenMainAction",port:"in"}},{src:{process:"CheckRepo",port:"new"},tgt:{process:"GithubPullAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"CheckGist",port:"in"}},{src:{process:"CheckGist",port:"existing"},tgt:{process:"ApplicationRedirectAction",port:"in"}},{src:{process:"CheckGist",port:"new"},tgt:{process:"GetGistToken",port:"in"}},{data:"1",tgt:{process:"GetGistToken",port:"limit"}},{src:{process:"GetGistToken",port:"token"},tgt:{process:"GetGist",port:"token"}},{src:{process:"GetGistToken",port:"out"},tgt:{process:"GithubLoadingAction",port:"in"}},{src:{process:"GetGistToken",port:"out"},tgt:{process:"GetGist",port:"in"}},{src:{process:"GetGistToken",port:"error"},tgt:{process:"ErrorAction",port:"in"}},{src:{process:"GetGist",port:"graph"},tgt:{process:"SaveGraphAction",port:"in"}},{src:{process:"GetGist",port:"component"},tgt:{process:"SaveComponentAction",port:"in"}},{src:{process:"GetGist",port:"project"},tgt:{process:"GithubReadyAction",port:"in"}},{src:{process:"GetGist",port:"project"},tgt:{process:"SaveProjectAction",port:"in"}},{src:{process:"GetGist",port:"error"},tgt:{process:"ErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"GetPrepareToken",port:"in"}},{src:{process:"GetPrepareToken",port:"token"},tgt:{process:"GithubSynchronization",port:"token"}},{src:{process:"GetPrepareToken",port:"out"},tgt:{process:"GithubLoadingAction",port:"in"}},{src:{process:"GetPrepareToken",port:"out"},tgt:{process:"GithubSynchronization",port:"prepare"}},{src:{process:"GetPrepareToken",port:"error"},tgt:{process:"ErrorAction",port:"in"}},{src:{process:"GithubSynchronization",port:"operation"},tgt:{process:"GithubReadyAction",port:"in"}},{src:{process:"GithubSynchronization",port:"operation"},tgt:{process:"GithubOperationAction",port:"in"}},{src:{process:"GithubSynchronization",port:"error"},tgt:{process:"ErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetSyncToken",port:"in"}},{src:{process:"GetSyncToken",port:"token"},tgt:{process:"GithubSynchronization",port:"token"}},{src:{process:"GetSyncToken",port:"out"},tgt:{process:"GithubSynchronization",port:"sync"}},{src:{process:"GetSyncToken",port:"error"},tgt:{process:"ErrorAction",port:"in"}},{src:{process:"GithubSynchronization",port:"graph"},tgt:{process:"SaveGraphAction",port:"in"}},{src:{process:"GithubSynchronization",port:"component"},tgt:{process:"SaveComponentAction",port:"in"}},{src:{process:"GithubSynchronization",port:"spec"},tgt:{process:"SaveSpecAction",port:"in"}},{src:{process:"GithubSynchronization",port:"project"},tgt:{process:"SaveProjectAction",port:"in"}},{src:{process:"GithubSynchronization",port:"loading"},tgt:{process:"GithubLoadingAction",port:"in"}},{src:{process:"GithubSynchronization",port:"ready"},tgt:{process:"GithubReadyAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"GetPullToken",port:"in"}},{src:{process:"GetPullToken",port:"token"},tgt:{process:"GithubSynchronization",port:"token"}},{src:{process:"GetPullToken",port:"out"},tgt:{process:"GithubSynchronization",port:"pull"}},{src:{process:"GetPullToken",port:"error"},tgt:{process:"ErrorAction",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"github"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{context:{process:"MergeContext",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},CleanOps:{component:"ui/CleanAction"},OpsToContext:{component:"ui/SetToContext"},CreateCtx:{component:"ui/CreateEmptyContext"},MergeContext:{component:"core/Merge"},ErrorToCtx:{component:"ui/ErrorToContext"},Loading:{component:"ui/CreateLoadingContext"},Ready:{component:"ui/CreateEmptyContext"}},connections:[{data:"github:operation,github:error,github:loading,github:ready",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"CleanOps",port:"in"}},{data:"syncOperation",tgt:{process:"OpsToContext",port:"key"}},{src:{process:"CleanOps",port:"out"},tgt:{process:"OpsToContext",port:"value"}},{src:{process:"CleanOps",port:"out"},tgt:{process:"CreateCtx",port:"start"}},{src:{process:"CreateCtx",port:"out"},tgt:{process:"OpsToContext",port:"context"}},{src:{process:"OpsToContext",port:"context"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"ErrorToCtx",port:"error"}},{src:{process:"ErrorToCtx",port:"out"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"Loading",port:"start"}},{src:{process:"Loading",port:"out"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"Ready",port:"start"}},{src:{process:"Ready",port:"out"},tgt:{process:"MergeContext",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"github"},caseSensitive:!1}},function(e,t){e.exports={inports:{token:{process:"Token",port:"in"},prepare:{process:"RepoToPrepare",port:"in"},sync:{process:"DoSync",port:"in"},pull:{process:"PullRepo",port:"in"}},outports:{operation:{process:"MergeOps",port:"out"},component:{process:"UpdatedComponent",port:"out"},graph:{process:"UpdatedGraph",port:"out"},spec:{process:"UpdatedSpec",port:"out"},project:{process:"BlobToEntry",port:"project"},loading:{process:"Loading",port:"out"},ready:{process:"Ready",port:"out"},error:{process:"Errors",port:"out"}},groups:[],processes:{SendRepoKey:{component:"strings/SendString"},GetRepoToPrepare:{component:"objects/GetObjectKey"},RepoToPrepare:{component:"core/Split"},Token:{component:"core/Repeat"},GetReference:{component:"github/GetReference"},CheckSyncState:{component:"ui/CheckSyncState"},SendProjectKey:{component:"strings/SendString"},GetProject:{component:"objects/GetObjectKey"},Errors:{component:"core/Merge"},MergeOps:{component:"core/Merge"},DoSync:{component:"core/Repeat"},PreparePulls:{component:"ui/PreparePulls"},GetBlob:{component:"github/GetBlob"},BlobToEntry:{component:"ui/BlobToEntry"},CompletePulls:{component:"flow/Race"},UpdatedComponent:{component:"core/Merge"},UpdatedGraph:{component:"core/Merge"},UpdatedSpec:{component:"core/Merge"},Ready:{component:"core/Repeat"},PreparePush:{component:"ui/PreparePush"},UpdateFromTree:{component:"ui/UpdateFromTree"},CreateTree:{component:"github/CreateTree"},SendTreeSha:{component:"strings/SendString"},GetTreeSha:{component:"objects/GetObjectKey"},CreateCommit:{component:"github/CreateCommit"},UpdateReference:{component:"github/UpdateReference"},SendPullRepo:{component:"strings/SendString"},GetPullRepo:{component:"objects/GetObjectKey"},PullRepo:{component:"core/Split"},Loading:{component:"core/Repeat"},GetPullReference:{component:"github/GetReference"},CheckPullState:{component:"ui/CheckSyncState"},SendPullProject:{component:"strings/SendString"},GetPullProject:{component:"objects/GetObjectKey"}},connections:[{data:"repo",tgt:{process:"SendRepoKey",port:"string"}},{src:{process:"SendRepoKey",port:"out"},tgt:{process:"GetRepoToPrepare",port:"key"}},{src:{process:"RepoToPrepare",port:"out"},tgt:{process:"GetRepoToPrepare",port:"in"}},{src:{process:"RepoToPrepare",port:"out"},tgt:{process:"SendRepoKey",port:"in"}},{src:{process:"Token",port:"out"},tgt:{process:"GetReference",port:"token"}},{src:{process:"GetRepoToPrepare",port:"out"},tgt:{process:"GetReference",port:"repository"}},{src:{process:"GetReference",port:"reference"},tgt:{process:"CheckSyncState",port:"reference"}},{data:"project",tgt:{process:"SendProjectKey",port:"string"}},{src:{process:"SendProjectKey",port:"out"},tgt:{process:"GetProject",port:"key"}},{src:{process:"GetRepoToPrepare",port:"object"},tgt:{process:"GetProject",port:"in"}},{src:{process:"GetProject",port:"out"},tgt:{process:"CheckSyncState",port:"project"}},{src:{process:"GetRepoToPrepare",port:"object"},tgt:{process:"SendProjectKey",port:"in"}},{src:{process:"Token",port:"out"},tgt:{process:"CheckSyncState",port:"token"}},{src:{process:"GetReference",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"CheckSyncState",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"CheckSyncState",port:"noop"},tgt:{process:"MergeOps",port:"in"}},{src:{process:"CheckSyncState",port:"local"},tgt:{process:"MergeOps",port:"in"}},{src:{process:"CheckSyncState",port:"remote"},tgt:{process:"MergeOps",port:"in"}},{src:{process:"CheckSyncState",port:"both"},tgt:{process:"MergeOps",port:"in"}},{src:{process:"DoSync",port:"out"},tgt:{process:"PreparePulls",port:"in"}},{src:{process:"Token",port:"out"},tgt:{process:"GetBlob",port:"token"}},{src:{process:"PreparePulls",port:"out"},tgt:{process:"BlobToEntry",port:"operation"}},{src:{process:"PreparePulls",port:"repository"},tgt:{process:"GetBlob",port:"repository"}},{src:{process:"PreparePulls",port:"sha"},tgt:{process:"GetBlob",port:"sha"}},{src:{process:"GetBlob",port:"out"},tgt:{process:"CompletePulls",port:"in",index:0}},{src:{process:"CompletePulls",port:"out"},tgt:{process:"BlobToEntry",port:"blob"}},{src:{process:"GetBlob",port:"error"},tgt:{process:"CompletePulls",port:"error"}},{src:{process:"CompletePulls",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"BlobToEntry",port:"component"},tgt:{process:"UpdatedComponent",port:"in"}},{src:{process:"BlobToEntry",port:"graph"},tgt:{process:"UpdatedGraph",port:"in"}},{src:{process:"BlobToEntry",port:"spec"},tgt:{process:"UpdatedSpec",port:"in"}},{src:{process:"BlobToEntry",port:"project"},tgt:{process:"Ready",port:"in"}},{src:{process:"BlobToEntry",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"DoSync",port:"out"},tgt:{process:"PreparePush",port:"in"}},{src:{process:"PreparePush",port:"out"},tgt:{process:"UpdateFromTree",port:"in"}},{src:{process:"PreparePush",port:"basetree"},tgt:{process:"CreateTree",port:"base"}},{src:{process:"Token",port:"out"},tgt:{process:"CreateTree",port:"token"}},{src:{process:"PreparePush",port:"tree"},tgt:{process:"CreateTree",port:"tree"}},{src:{process:"PreparePush",port:"repository"},tgt:{process:"CreateTree",port:"repository"}},{src:{process:"CreateTree",port:"out"},tgt:{process:"UpdateFromTree",port:"tree"}},{src:{process:"PreparePush",port:"repository"},tgt:{process:"UpdateFromTree",port:"repository"}},{src:{process:"Token",port:"out"},tgt:{process:"UpdateFromTree",port:"token"}},{data:"sha",tgt:{process:"SendTreeSha",port:"string"}},{src:{process:"SendTreeSha",port:"out"},tgt:{process:"GetTreeSha",port:"key"}},{src:{process:"CreateTree",port:"out"},tgt:{process:"GetTreeSha",port:"in"}},{src:{process:"CreateTree",port:"out"},tgt:{process:"SendTreeSha",port:"in"}},{src:{process:"GetTreeSha",port:"out"},tgt:{process:"CreateCommit",port:"tree"}},{src:{process:"Token",port:"out"},tgt:{process:"CreateCommit",port:"token"}},{src:{process:"PreparePush",port:"message"},tgt:{process:"CreateCommit",port:"message"}},{src:{process:"PreparePush",port:"parentcommits"},tgt:{process:"CreateCommit",port:"parents"}},{src:{process:"PreparePush",port:"repository"},tgt:{process:"CreateCommit",port:"repository"}},{src:{process:"CreateCommit",port:"out"},tgt:{process:"UpdateReference",port:"commit"}},{src:{process:"PreparePush",port:"ref"},tgt:{process:"UpdateReference",port:"reference"}},{src:{process:"Token",port:"out"},tgt:{process:"UpdateReference",port:"token"}},{src:{process:"PreparePush",port:"repository"},tgt:{process:"UpdateReference",port:"repository"}},{src:{process:"UpdateFromTree",port:"component"},tgt:{process:"UpdatedComponent",port:"in"}},{src:{process:"UpdateFromTree",port:"graph"},tgt:{process:"UpdatedGraph",port:"in"}},{src:{process:"UpdateFromTree",port:"spec"},tgt:{process:"UpdatedSpec",port:"in"}},{src:{process:"UpdateFromTree",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"CreateTree",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"CreateCommit",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"UpdateReference",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"repo",tgt:{process:"SendPullRepo",port:"string"}},{src:{process:"SendPullRepo",port:"out"},tgt:{process:"GetPullRepo",port:"key"}},{src:{process:"PullRepo",port:"out"},tgt:{process:"Loading",port:"in"}},{src:{process:"PullRepo",port:"out"},tgt:{process:"GetPullRepo",port:"in"}},{src:{process:"PullRepo",port:"out"},tgt:{process:"SendPullRepo",port:"in"}},{src:{process:"Token",port:"out"},tgt:{process:"GetPullReference",port:"token"}},{src:{process:"GetPullRepo",port:"out"},tgt:{process:"GetPullReference",port:"repository"}},{src:{process:"GetPullReference",port:"reference"},tgt:{process:"CheckPullState",port:"reference"}},{data:"project",tgt:{process:"SendPullProject",port:"string"}},{src:{process:"SendPullProject",port:"out"},tgt:{process:"GetPullProject",port:"key"}},{src:{process:"GetPullRepo",port:"object"},tgt:{process:"GetPullProject",port:"in"}},{src:{process:"GetPullProject",port:"out"},tgt:{process:"CheckPullState",port:"project"}},{src:{process:"GetPullRepo",port:"object"},tgt:{process:"SendPullProject",port:"in"}},{src:{process:"Token",port:"out"},tgt:{process:"CheckPullState",port:"token"}},{src:{process:"GetPullReference",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"CheckPullState",port:"remote"},tgt:{process:"DoSync",port:"in"}},{src:{process:"CheckPullState",port:"error"},tgt:{process:"Errors",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"github-alt"},caseSensitive:!1}},function(e,t){e.exports={inports:{db:{process:"Read",port:"db"},store:{process:"Store",port:"in"}},outports:{item:{process:"Query",port:"item"},empty:{process:"Query",port:"empty"},error:{process:"Errors",port:"out"}},groups:[],processes:{HoldQuery:{component:"strings/SendString"},HoldMode:{component:"strings/SendString"},Store:{component:"core/Repeat"},Read:{component:"indexeddb/BeginTransaction"},GetStore:{component:"indexeddb/GetStore"},Query:{component:"indexeddb/Query"},Errors:{component:"core/Merge"}},connections:[{data:"",tgt:{process:"HoldQuery",port:"string"}},{data:"readonly",tgt:{process:"HoldMode",port:"string"}},{src:{process:"Store",port:"out"},tgt:{process:"HoldQuery",port:"in"}},{src:{process:"Store",port:"out"},tgt:{process:"HoldMode",port:"in"}},{src:{process:"HoldMode",port:"out"},tgt:{process:"Read",port:"mode"}},{src:{process:"Store",port:"out"},tgt:{process:"Read",port:"stores"}},{src:{process:"Store",port:"out"},tgt:{process:"GetStore",port:"name"}},{src:{process:"Read",port:"transaction"},tgt:{process:"GetStore",port:"transaction"}},{src:{process:"GetStore",port:"store"},tgt:{process:"Query",port:"store"}},{src:{process:"HoldQuery",port:"out"},tgt:{process:"Query",port:"all"}},{src:{process:"Read",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"GetStore",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"Query",port:"error"},tgt:{process:"Errors",port:"in"}}],properties:{environment:{type:"noflo-browser"}},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{project:{process:"LoadProjects",port:"item"},graph:{process:"ConvertGraph",port:"out"},component:{process:"LoadComponents",port:"item"},spec:{process:"LoadSpecs",port:"item"},runtime:{process:"Runtimes",port:"out"},complete:{process:"Collect",port:"out"},error:{process:"Errors",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},GetProjectsDb:{component:"ui/GetActionValues"},LoadProjects:{component:"ui/Load"},ProjectsStore:{component:"strings/SendString"},GetGraphsDb:{component:"ui/GetActionValues"},LoadGraphs:{component:"ui/Load"},GraphsStore:{component:"strings/SendString"},ConvertGraph:{component:"graph/LoadJson"},GetComponentsDb:{component:"ui/GetActionValues"},LoadComponents:{component:"ui/Load"},ComponentsStore:{component:"strings/SendString"},GetSpecsDb:{component:"ui/GetActionValues"},LoadSpecs:{component:"ui/Load"},SpecsStore:{component:"strings/SendString"},GetRuntimesDb:{component:"ui/GetActionValues"},LoadRuntimes:{component:"ui/Load"},RuntimesStore:{component:"strings/SendString"},Runtimes:{component:"core/Merge"},SplitAction:{component:"core/Split"},GetAllRuntimesDb:{component:"ui/GetActionValues"},LoadAllRuntimes:{component:"ui/Load"},AllRuntimesStore:{component:"strings/SendString"},Collect:{component:"ui/CollectInitialData"},Errors:{component:"core/Merge"}},connections:[{data:"storage:load:projects,storage:load:graphs,storage:load:components,storage:load:specs,storage:load:runtimes,storage:load:all",tgt:{process:"Dispatch",port:"routes"}},{data:"db",tgt:{process:"GetProjectsDb",port:"keys"}},{src:{process:"GetProjectsDb",port:"values",index:0},tgt:{process:"LoadProjects",port:"db"}},{data:"projects",tgt:{process:"ProjectsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"GetProjectsDb",port:"in"}},{src:{process:"GetProjectsDb",port:"out"},tgt:{process:"ProjectsStore",port:"in"}},{src:{process:"ProjectsStore",port:"out"},tgt:{process:"LoadProjects",port:"store"}},{src:{process:"LoadProjects",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetGraphsDb",port:"keys"}},{src:{process:"GetGraphsDb",port:"values",index:0},tgt:{process:"LoadGraphs",port:"db"}},{data:"graphs",tgt:{process:"GraphsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"GetGraphsDb",port:"in"}},{src:{process:"GetGraphsDb",port:"out"},tgt:{process:"GraphsStore",port:"in"}},{src:{process:"GraphsStore",port:"out"},tgt:{process:"LoadGraphs",port:"store"}},{src:{process:"LoadGraphs",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"LoadGraphs",port:"item"},tgt:{process:"ConvertGraph",port:"in"}},{src:{process:"ConvertGraph",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetComponentsDb",port:"keys"}},{src:{process:"GetComponentsDb",port:"values",index:0},tgt:{process:"LoadComponents",port:"db"}},{data:"components",tgt:{process:"ComponentsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"GetComponentsDb",port:"in"}},{src:{process:"GetComponentsDb",port:"out"},tgt:{process:"ComponentsStore",port:"in"}},{src:{process:"ComponentsStore",port:"out"},tgt:{process:"LoadComponents",port:"store"}},{src:{process:"LoadComponents",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetSpecsDb",port:"keys"}},{src:{process:"GetSpecsDb",port:"values",index:0},tgt:{process:"LoadSpecs",port:"db"}},{data:"specs",tgt:{process:"SpecsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetSpecsDb",port:"in"}},{src:{process:"GetSpecsDb",port:"out"},tgt:{process:"SpecsStore",port:"in"}},{src:{process:"SpecsStore",port:"out"},tgt:{process:"LoadSpecs",port:"store"}},{src:{process:"LoadSpecs",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetRuntimesDb",port:"keys"}},{src:{process:"GetRuntimesDb",port:"values",index:0},tgt:{process:"LoadRuntimes",port:"db"}},{data:"runtimes",tgt:{process:"RuntimesStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"GetRuntimesDb",port:"in"}},{src:{process:"GetRuntimesDb",port:"out"},tgt:{process:"RuntimesStore",port:"in"}},{src:{process:"RuntimesStore",port:"out"},tgt:{process:"LoadRuntimes",port:"store"}},{src:{process:"LoadRuntimes",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"LoadRuntimes",port:"item"},tgt:{process:"Runtimes",port:"in"}},{src:{process:"Dispatch",port:"handle",index:5},tgt:{process:"SplitAction",port:"in"}},{src:{process:"SplitAction",port:"out"},tgt:{process:"GetProjectsDb",port:"in"}},{src:{process:"SplitAction",port:"out"},tgt:{process:"GetGraphsDb",port:"in"}},{src:{process:"SplitAction",port:"out"},tgt:{process:"GetComponentsDb",port:"in"}},{src:{process:"SplitAction",port:"out"},tgt:{process:"GetSpecsDb",port:"in"}},{data:"db",tgt:{process:"GetAllRuntimesDb",port:"keys"}},{src:{process:"GetAllRuntimesDb",port:"values",index:0},tgt:{process:"LoadAllRuntimes",port:"db"}},{data:"runtimes",tgt:{process:"AllRuntimesStore",port:"string"}},{src:{process:"SplitAction",port:"out"},tgt:{process:"GetAllRuntimesDb",port:"in"}},{src:{process:"GetAllRuntimesDb",port:"out"},tgt:{process:"AllRuntimesStore",port:"in"}},{src:{process:"AllRuntimesStore",port:"out"},tgt:{process:"LoadAllRuntimes",port:"store"}},{src:{process:"LoadAllRuntimes",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"LoadAllRuntimes",port:"item"},tgt:{process:"Runtimes",port:"in"}},{src:{process:"LoadProjects",port:"item"},tgt:{process:"Collect",port:"project"}},{src:{process:"LoadProjects",port:"empty"},tgt:{process:"Collect",port:"project"}},{src:{process:"ConvertGraph",port:"out"},tgt:{process:"Collect",port:"graph"}},{src:{process:"LoadGraphs",port:"empty"},tgt:{process:"Collect",port:"graph"}},{src:{process:"LoadComponents",port:"item"},tgt:{process:"Collect",port:"component"}},{src:{process:"LoadComponents",port:"empty"},tgt:{process:"Collect",port:"component"}},{src:{process:"LoadSpecs",port:"item"},tgt:{process:"Collect",port:"spec"}},{src:{process:"LoadSpecs",port:"empty"},tgt:{process:"Collect",port:"spec"}},{src:{process:"Runtimes",port:"out"},tgt:{process:"Collect",port:"runtime"}},{src:{process:"LoadAllRuntimes",port:"empty"},tgt:{process:"Collect",port:"runtime"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Errors",port:"in"}}],properties:{environment:{type:"noflo-browser"}},caseSensitive:!1}},function(e,t){e.exports={inports:{name:{process:"Open",port:"name"}},outports:{error:{process:"Errors",port:"out"},db:{process:"Open",port:"db"}},groups:[],processes:{Open:{component:"indexeddb/Open"},Errors:{component:"core/Merge"},Upgrade:{component:"indexeddb/UpgradeRouter"},CreateProjects:{component:"indexeddb/CreateStore"},CreateGraphs:{component:"indexeddb/CreateStore"},GraphProject:{component:"indexeddb/CreateIndex"},Migrate:{component:"ui/MigrateLocalStorage"},CreateComponents:{component:"indexeddb/CreateStore"},ComponentProject:{component:"indexeddb/CreateIndex"},CreateRuntimes:{component:"indexeddb/CreateStore"},CreateJournals:{component:"indexeddb/CreateStore"},JournalGraph:{component:"indexeddb/CreateIndex"},CreateSpecs:{component:"indexeddb/CreateStore"},SpecProject:{component:"indexeddb/CreateIndex"},DatabaseReady:{component:"ui/DatabaseReady"}},connections:[{src:{process:"Open",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"4",tgt:{process:"Open",port:"version"}},{src:{process:"Open",port:"upgrade"},tgt:{process:"Upgrade",port:"upgrade"}},{data:"projects",tgt:{process:"CreateProjects",port:"name"}},{data:"id",tgt:{process:"CreateProjects",port:"keypath"}},{src:{process:"Upgrade",port:"versions"},tgt:{process:"CreateProjects",port:"db"}},{src:{process:"CreateProjects",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"graphs",tgt:{process:"CreateGraphs",port:"name"}},{data:"id",tgt:{process:"CreateGraphs",port:"keypath"}},{src:{process:"CreateProjects",port:"db"},tgt:{process:"CreateGraphs",port:"db"}},{src:{process:"CreateGraphs",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"project",tgt:{process:"GraphProject",port:"name"}},{data:"project",tgt:{process:"GraphProject",port:"keypath"}},{src:{process:"CreateGraphs",port:"store"},tgt:{process:"GraphProject",port:"store"}},{src:{process:"GraphProject",port:"store"},tgt:{process:"Migrate",port:"graphstore"}},{src:{process:"GraphProject",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"components",tgt:{process:"CreateComponents",port:"name"}},{data:"id",tgt:{process:"CreateComponents",port:"keypath"}},{src:{process:"CreateGraphs",port:"db"},tgt:{process:"CreateComponents",port:"db"}},{src:{process:"CreateComponents",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"project",tgt:{process:"ComponentProject",port:"name"}},{data:"project",tgt:{process:"ComponentProject",port:"keypath"}},{src:{process:"CreateComponents",port:"store"},tgt:{process:"ComponentProject",port:"store"}},{src:{process:"ComponentProject",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"runtimes",tgt:{process:"CreateRuntimes",port:"name"}},{data:"id",tgt:{process:"CreateRuntimes",port:"keypath"}},{src:{process:"Upgrade",port:"versions"},tgt:{process:"CreateRuntimes",port:"db"}},{src:{process:"CreateRuntimes",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"journals",tgt:{process:"CreateJournals",port:"name"}},{data:"id",tgt:{process:"CreateJournals",port:"keypath"}},{src:{process:"Upgrade",port:"versions"},tgt:{process:"CreateJournals",port:"db"}},{src:{process:"CreateJournals",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"graph",tgt:{process:"JournalGraph",port:"name"}},{data:"graph",tgt:{process:"JournalGraph",port:"keypath"}},{src:{process:"CreateJournals",port:"store"},tgt:{process:"JournalGraph",port:"store"}},{src:{process:"JournalGraph",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"specs",tgt:{process:"CreateSpecs",port:"name"}},{data:"id",tgt:{process:"CreateSpecs",port:"keypath"}},{src:{process:"Upgrade",port:"versions"},tgt:{process:"CreateSpecs",port:"db"}},{src:{process:"CreateSpecs",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"project",tgt:{process:"SpecProject",port:"name"}},{data:"project",tgt:{process:"SpecProject",port:"keypath"}},{src:{process:"CreateSpecs",port:"store"},tgt:{process:"SpecProject",port:"store"}},{src:{process:"SpecProject",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"Open",port:"db"},tgt:{process:"DatabaseReady",port:"in"}}],properties:{environment:{type:"noflo-browser"}},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{pass:{process:"Passed",port:"out"},new:{process:"NewActions",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},Passed:{component:"core/Repeat"},RuntimeSaveAction:{component:"ui/SetAction"},NewActions:{component:"core/Merge"},RuntimeDeleteAction:{component:"ui/SetAction"},RegistryProjectsAction:{component:"ui/SetAction"},RegistryErrorAction:{component:"ui/SetAction"},GetUserStateFetch:{component:"ui/GetActionValues"},GetRuntimes:{component:"ui/GetRemoteRuntimes"},GetUserStatePut:{component:"ui/GetActionValues"},SaveRuntime:{component:"ui/StoreRemoteRuntime"},GetUserStateDel:{component:"ui/GetActionValues"},RemoveRuntime:{component:"ui/RemoveRemoteRuntime"},GetUserStateProjects:{component:"ui/GetActionValues"},GetRemoteProjects:{component:"ui/GetRemoteProjects"},StoreRemoteProject:{component:"ui/StoreRemoteProject"},GetUserStateDelRepo:{component:"ui/GetActionValues"},RemoveRepository:{component:"ui/RemoveRemoteProject"}},connections:[{data:"flowhub:runtimes:fetch,flowhub:runtimes:register,flowhub:runtimes:remove,flowhub:projects:fetch,github:sync:pull,github:sync:prepare,flowhub:projects:remove",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Passed",port:"in"}},{data:"storage:save:runtime",tgt:{process:"RuntimeSaveAction",port:"action"}},{src:{process:"RuntimeSaveAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:delete:runtime",tgt:{process:"RuntimeDeleteAction",port:"action"}},{src:{process:"RuntimeDeleteAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"flowhub:projects",tgt:{process:"RegistryProjectsAction",port:"action"}},{src:{process:"RegistryProjectsAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"flowhub:error",tgt:{process:"RegistryErrorAction",port:"action"}},{src:{process:"RegistryErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"user,runtimes",tgt:{process:"GetUserStateFetch",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"GetUserStateFetch",port:"in"}},{src:{process:"GetUserStateFetch",port:"values",index:0},tgt:{process:"GetRuntimes",port:"user"}},{src:{process:"GetUserStateFetch",port:"values",index:1},tgt:{process:"GetRuntimes",port:"runtimes"}},{src:{process:"GetRuntimes",port:"runtime"},tgt:{process:"RuntimeSaveAction",port:"in"}},{src:{process:"GetRuntimes",port:"error"},tgt:{process:"RegistryErrorAction",port:"in"}},{data:"user",tgt:{process:"GetUserStatePut",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"GetUserStatePut",port:"in"}},{src:{process:"GetUserStatePut",port:"values",index:0},tgt:{process:"SaveRuntime",port:"user"}},{src:{process:"GetUserStatePut",port:"out"},tgt:{process:"SaveRuntime",port:"in"}},{src:{process:"SaveRuntime",port:"out"},tgt:{process:"RuntimeSaveAction",port:"in"}},{src:{process:"SaveRuntime",port:"error"},tgt:{process:"RegistryErrorAction",port:"in"}},{data:"user",tgt:{process:"GetUserStateDel",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"GetUserStateDel",port:"in"}},{src:{process:"GetUserStateDel",port:"values",index:0},tgt:{process:"RemoveRuntime",port:"user"}},{src:{process:"GetUserStateDel",port:"out"},tgt:{process:"RemoveRuntime",port:"in"}},{src:{process:"RemoveRuntime",port:"out"},tgt:{process:"RuntimeDeleteAction",port:"in"}},{src:{process:"RemoveRuntime",port:"error"},tgt:{process:"RegistryErrorAction",port:"in"}},{data:"user",tgt:{process:"GetUserStateProjects",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetUserStateProjects",port:"in"}},{src:{process:"GetUserStateProjects",port:"values",index:0},tgt:{process:"GetRemoteProjects",port:"user"}},{src:{process:"GetRemoteProjects",port:"projects"},tgt:{process:"RegistryProjectsAction",port:"in"}},{src:{process:"GetRemoteProjects",port:"error"},tgt:{process:"RegistryErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"StoreRemoteProject",port:"in"}},{src:{process:"StoreRemoteProject",port:"out"},tgt:{process:"Passed",port:"in"}},{src:{process:"StoreRemoteProject",port:"error"},tgt:{process:"RegistryErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:5},tgt:{process:"StoreRemoteProject",port:"in"}},{data:"user",tgt:{process:"GetUserStateDelRepo",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:6},tgt:{process:"GetUserStateDelRepo",port:"in"}},{src:{process:"GetUserStateDelRepo",port:"values",index:0},tgt:{process:"RemoveRepository",port:"user"}},{src:{process:"GetUserStateDelRepo",port:"out"},tgt:{process:"RemoveRepository",port:"in"}},{src:{process:"RemoveRepository",port:"error"},tgt:{process:"RegistryErrorAction",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"address-card-o"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{context:{process:"MergeContext",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},CleanOps:{component:"ui/CleanAction"},OpsToContext:{component:"ui/SetToContext"},CreateCtx:{component:"ui/CreateEmptyContext"},MergeContext:{component:"core/Merge"},ErrorToCtx:{component:"ui/ErrorToContext"}},connections:[{data:"flowhub:projects,flowhub:error",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"CleanOps",port:"in"}},{data:"remoteProjects",tgt:{process:"OpsToContext",port:"key"}},{src:{process:"CleanOps",port:"out"},tgt:{process:"OpsToContext",port:"value"}},{src:{process:"CleanOps",port:"out"},tgt:{process:"CreateCtx",port:"start"}},{src:{process:"CreateCtx",port:"out"},tgt:{process:"OpsToContext",port:"context"}},{src:{process:"OpsToContext",port:"context"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"ErrorToCtx",port:"error"}},{src:{process:"ErrorToCtx",port:"out"},tgt:{process:"MergeContext",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"address-card-o"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{pass:{process:"Passed",port:"out"},new:{process:"NewActions",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},Passed:{component:"core/Merge"},ProjectSaveAction:{component:"ui/SetAction"},NewActions:{component:"core/Merge"},GraphSaveAction:{component:"ui/SetAction"},ComponentSaveAction:{component:"ui/SetAction"},RuntimeRegisterAction:{component:"ui/SetAction"},RuntimeSaveAction:{component:"ui/SetAction"},RuntimeErrorAction:{component:"ui/SetAction"},RuntimeOpenedAction:{component:"ui/SetAction"},RuntimeOpeningAction:{component:"ui/SetAction"},RuntimeStatusAction:{component:"ui/SetAction"},RuntimeComponentsAction:{component:"ui/SetAction"},RuntimeComponentAction:{component:"ui/SetAction"},RuntimeStartedAction:{component:"ui/SetAction"},RuntimeStoppedAction:{component:"ui/SetAction"},RuntimePacketAction:{component:"ui/SetAction"},RuntimeIconAction:{component:"ui/SetAction"},RuntimeOutputAction:{component:"ui/SetAction"},RuntimeNetworkErrorAction:{component:"ui/SetAction"},RuntimeProcessErrorAction:{component:"ui/SetAction"},RuntimeProtocolErrorAction:{component:"ui/SetAction"},ApplicationRecreateAction:{component:"ui/SetAction"},StorageOpenedAction:{component:"ui/SetAction"},StorageReadyAction:{component:"ui/SetAction"},ContextEdgesAction:{component:"ui/SetAction"},GetRuntimesState:{component:"ui/GetActionValues"},PopulateRuntimeData:{component:"ui/PopulateRuntimeData"},OpenLiveMode:{component:"ui/OpenLiveMode"},GetProjectRuntimesState:{component:"ui/GetActionValues"},PopulateProjectRuntime:{component:"ui/PopulateProjectRuntime"},OpenProjectMode:{component:"ui/OpenProjectMode"},GetEdgeState:{component:"ui/GetActionValues"},HasEdgeRuntime:{component:"ui/HasActionRuntime"},SendEdges:{component:"ui/SendEdges"},GetRuntimeToProjectValues:{component:"ui/GetActionValues"},RuntimeToProject:{component:"ui/RuntimeToProject"},GetStoredRuntimes:{component:"ui/GetActionValues"},EnsureLocalRuntimes:{component:"ui/EnsureLocalRuntimes"},GetClient:{component:"ui/GetRuntimeClient"},ListenRuntime:{component:"ui/ListenRuntime"},GetStartValues:{component:"ui/GetActionValues"},StartNetwork:{component:"ui/StartNetwork"},GetStopValues:{component:"ui/GetActionValues"},StopNetwork:{component:"ui/StopNetwork"},GetReconnectValues:{component:"ui/GetActionValues"},ReconnectRuntime:{component:"ui/ReconnectRuntime"},GetComponentValues:{component:"ui/GetActionValues"},SendComponentChanges:{component:"ui/SendComponentChanges"},GetGraphChangeValues:{component:"ui/GetActionValues"},SendGraphChanges:{component:"ui/SendGraphChanges"}},connections:[{data:"runtime:open,storage:opened,context:edges,project:fromruntime,storage:ready,storage:stored:runtime,runtime:start,runtime:stop,runtime:reconnect,runtime:sendComponent,runtime:sendGraphChanges",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Passed",port:"in"}},{data:"storage:save:project",tgt:{process:"ProjectSaveAction",port:"action"}},{src:{process:"ProjectSaveAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:graph",tgt:{process:"GraphSaveAction",port:"action"}},{src:{process:"GraphSaveAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:component",tgt:{process:"ComponentSaveAction",port:"action"}},{src:{process:"ComponentSaveAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"flowhub:runtimes:register",tgt:{process:"RuntimeRegisterAction",port:"action"}},{src:{process:"RuntimeRegisterAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:runtime",tgt:{process:"RuntimeSaveAction",port:"action"}},{src:{process:"RuntimeSaveAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:error",tgt:{process:"RuntimeErrorAction",port:"action"}},{src:{process:"RuntimeErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:opened",tgt:{process:"RuntimeOpenedAction",port:"action"}},{src:{process:"RuntimeOpenedAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:opening",tgt:{process:"RuntimeOpeningAction",port:"action"}},{src:{process:"RuntimeOpeningAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:status",tgt:{process:"RuntimeStatusAction",port:"action"}},{src:{process:"RuntimeStatusAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:components",tgt:{process:"RuntimeComponentsAction",port:"action"}},{src:{process:"RuntimeComponentsAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:component",tgt:{process:"RuntimeComponentAction",port:"action"}},{src:{process:"RuntimeComponentAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:started",tgt:{process:"RuntimeStartedAction",port:"action"}},{src:{process:"RuntimeStartedAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:stopped",tgt:{process:"RuntimeStoppedAction",port:"action"}},{src:{process:"RuntimeStoppedAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:packet",tgt:{process:"RuntimePacketAction",port:"action"}},{src:{process:"RuntimePacketAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:icon",tgt:{process:"RuntimeIconAction",port:"action"}},{src:{process:"RuntimeIconAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:output",tgt:{process:"RuntimeOutputAction",port:"action"}},{src:{process:"RuntimeOutputAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:networkerror",tgt:{process:"RuntimeNetworkErrorAction",port:"action"}},{src:{process:"RuntimeNetworkErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:processerror",tgt:{process:"RuntimeProcessErrorAction",port:"action"}},{src:{process:"RuntimeProcessErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:protocolerror",tgt:{process:"RuntimeProtocolErrorAction",port:"action"}},{src:{process:"RuntimeProtocolErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"application:recreatestate",tgt:{process:"ApplicationRecreateAction",port:"action"}},{src:{process:"ApplicationRecreateAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:opened",tgt:{process:"StorageOpenedAction",port:"action"}},{src:{process:"StorageOpenedAction",port:"out"},tgt:{process:"Passed",port:"in"}},{data:"storage:ready",tgt:{process:"StorageReadyAction",port:"action"}},{src:{process:"StorageReadyAction",port:"out"},tgt:{process:"Passed",port:"in"}},{data:"context:edges",tgt:{process:"ContextEdgesAction",port:"action"}},{src:{process:"ContextEdgesAction",port:"out"},tgt:{process:"Passed",port:"in"}},{data:"runtimes",tgt:{process:"GetRuntimesState",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"GetRuntimesState",port:"in"}},{src:{process:"GetRuntimesState",port:"values",index:0},tgt:{process:"PopulateRuntimeData",port:"runtimes"}},{src:{process:"GetRuntimesState",port:"out"},tgt:{process:"PopulateRuntimeData",port:"in"}},{src:{process:"PopulateRuntimeData",port:"out"},tgt:{process:"GetClient",port:"in",index:0}},{src:{process:"PopulateRuntimeData",port:"out"},tgt:{process:"RuntimeOpeningAction",port:"in"}},{src:{process:"PopulateRuntimeData",port:"new"},tgt:{process:"GetClient",port:"updated"}},{src:{process:"PopulateRuntimeData",port:"new"},tgt:{process:"RuntimeSaveAction",port:"in"}},{src:{process:"PopulateRuntimeData",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{src:{process:"GetClient",port:"out",index:0},tgt:{process:"OpenLiveMode",port:"in"}},{src:{process:"GetClient",port:"client",index:0},tgt:{process:"OpenLiveMode",port:"client"}},{src:{process:"OpenLiveMode",port:"out"},tgt:{process:"RuntimeOpenedAction",port:"in"}},{src:{process:"OpenLiveMode",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"runtimes",tgt:{process:"GetProjectRuntimesState",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"GetProjectRuntimesState",port:"in"}},{src:{process:"GetProjectRuntimesState",port:"values",index:0},tgt:{process:"PopulateProjectRuntime",port:"runtimes"}},{src:{process:"GetProjectRuntimesState",port:"out"},tgt:{process:"PopulateProjectRuntime",port:"in"}},{src:{process:"PopulateProjectRuntime",port:"out"},tgt:{process:"GetClient",port:"in",index:1}},{src:{process:"PopulateProjectRuntime",port:"skipped"},tgt:{process:"StorageOpenedAction",port:"in"}},{src:{process:"GetClient",port:"out",index:1},tgt:{process:"OpenProjectMode",port:"in"}},{src:{process:"GetClient",port:"client",index:1},tgt:{process:"OpenProjectMode",port:"client"}},{src:{process:"OpenProjectMode",port:"out"},tgt:{process:"StorageOpenedAction",port:"in"}},{src:{process:"OpenProjectMode",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"graphs",tgt:{process:"GetEdgeState",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"HasEdgeRuntime",port:"in"}},{src:{process:"HasEdgeRuntime",port:"out"},tgt:{process:"GetEdgeState",port:"in"}},{src:{process:"HasEdgeRuntime",port:"missed"},tgt:{process:"Passed",port:"in"}},{src:{process:"GetEdgeState",port:"state"},tgt:{process:"GetClient",port:"in",index:2}},{src:{process:"GetClient",port:"client",index:2},tgt:{process:"SendEdges",port:"client"}},{src:{process:"GetEdgeState",port:"values",index:0},tgt:{process:"SendEdges",port:"graphs"}},{src:{process:"GetEdgeState",port:"out"},tgt:{process:"SendEdges",port:"edges"}},{src:{process:"SendEdges",port:"out"},tgt:{process:"ContextEdgesAction",port:"in"}},{src:{process:"SendEdges",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetRuntimeToProjectValues",port:"in"}},{src:{process:"GetRuntimeToProjectValues",port:"out"},tgt:{process:"GetClient",port:"in",index:3}},{src:{process:"GetClient",port:"out",index:3},tgt:{process:"RuntimeToProject",port:"in"}},{src:{process:"GetClient",port:"client",index:3},tgt:{process:"RuntimeToProject",port:"client"}},{src:{process:"RuntimeToProject",port:"project"},tgt:{process:"ProjectSaveAction",port:"in"}},{src:{process:"RuntimeToProject",port:"graph"},tgt:{process:"GraphSaveAction",port:"in"}},{src:{process:"RuntimeToProject",port:"component"},tgt:{process:"ComponentSaveAction",port:"in"}},{src:{process:"RuntimeToProject",port:"runtime"},tgt:{process:"RuntimeRegisterAction",port:"in"}},{src:{process:"RuntimeToProject",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"runtimes",tgt:{process:"GetStoredRuntimes",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"GetStoredRuntimes",port:"in"}},{src:{process:"GetStoredRuntimes",port:"values",index:0},tgt:{process:"EnsureLocalRuntimes",port:"in"}},{src:{process:"EnsureLocalRuntimes",port:"out"},tgt:{process:"RuntimeSaveAction",port:"in"}},{src:{process:"EnsureLocalRuntimes",port:"runtimes"},tgt:{process:"GetClient",port:"initial"}},{src:{process:"GetStoredRuntimes",port:"out"},tgt:{process:"StorageReadyAction",port:"in"}},{src:{process:"GetClient",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{src:{process:"GetClient",port:"instance"},tgt:{process:"ListenRuntime",port:"in"}},{src:{process:"ListenRuntime",port:"runtimeupdate"},tgt:{process:"RuntimeRegisterAction",port:"in"}},{src:{process:"ListenRuntime",port:"status"},tgt:{process:"RuntimeStatusAction",port:"in"}},{src:{process:"ListenRuntime",port:"components"},tgt:{process:"RuntimeComponentsAction",port:"in"}},{src:{process:"ListenRuntime",port:"component"},tgt:{process:"RuntimeComponentAction",port:"in"}},{src:{process:"ListenRuntime",port:"started"},tgt:{process:"RuntimeStartedAction",port:"in"}},{src:{process:"ListenRuntime",port:"stopped"},tgt:{process:"RuntimeStoppedAction",port:"in"}},{src:{process:"ListenRuntime",port:"packet"},tgt:{process:"RuntimePacketAction",port:"in"}},{src:{process:"ListenRuntime",port:"icon"},tgt:{process:"RuntimeIconAction",port:"in"}},{src:{process:"ListenRuntime",port:"output"},tgt:{process:"RuntimeOutputAction",port:"in"}},{src:{process:"ListenRuntime",port:"networkerror"},tgt:{process:"RuntimeNetworkErrorAction",port:"in"}},{src:{process:"ListenRuntime",port:"processerror"},tgt:{process:"RuntimeProcessErrorAction",port:"in"}},{src:{process:"ListenRuntime",port:"protocolerror"},tgt:{process:"RuntimeProtocolErrorAction",port:"in"}},{src:{process:"ListenRuntime",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:5},tgt:{process:"GetClient",port:"updated"}},{src:{process:"GetClient",port:"updated"},tgt:{process:"Passed",port:"in"}},{src:{process:"Dispatch",port:"handle",index:6},tgt:{process:"GetStartValues",port:"in"}},{src:{process:"GetStartValues",port:"out"},tgt:{process:"GetClient",port:"in",index:4}},{src:{process:"GetClient",port:"out",index:4},tgt:{process:"StartNetwork",port:"in"}},{src:{process:"GetClient",port:"client",index:4},tgt:{process:"StartNetwork",port:"client"}},{src:{process:"StartNetwork",port:"out"},tgt:{process:"RuntimeStartedAction",port:"in"}},{src:{process:"StartNetwork",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:7},tgt:{process:"GetStopValues",port:"in"}},{src:{process:"GetStopValues",port:"out"},tgt:{process:"GetClient",port:"in",index:5}},{src:{process:"GetClient",port:"out",index:5},tgt:{process:"StopNetwork",port:"in"}},{src:{process:"GetClient",port:"client",index:5},tgt:{process:"StopNetwork",port:"client"}},{src:{process:"StopNetwork",port:"out"},tgt:{process:"RuntimeStoppedAction",port:"in"}},{src:{process:"StopNetwork",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:8},tgt:{process:"GetReconnectValues",port:"in"}},{src:{process:"GetReconnectValues",port:"out"},tgt:{process:"GetClient",port:"in",index:6}},{src:{process:"GetClient",port:"out",index:6},tgt:{process:"ReconnectRuntime",port:"in"}},{src:{process:"GetClient",port:"client",index:6},tgt:{process:"ReconnectRuntime",port:"client"}},{src:{process:"ReconnectRuntime",port:"out"},tgt:{process:"ApplicationRecreateAction",port:"in"}},{src:{process:"ReconnectRuntime",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"project",tgt:{process:"GetComponentValues",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:9},tgt:{process:"GetComponentValues",port:"in"}},{src:{process:"GetComponentValues",port:"out"},tgt:{process:"GetClient",port:"in",index:7}},{src:{process:"GetClient",port:"out",index:7},tgt:{process:"SendComponentChanges",port:"in"}},{src:{process:"GetClient",port:"client",index:7},tgt:{process:"SendComponentChanges",port:"client"}},{src:{process:"GetComponentValues",port:"values",index:0},tgt:{process:"SendComponentChanges",port:"project"}},{src:{process:"SendComponentChanges",port:"out"},tgt:{process:"RuntimeComponentAction",port:"in"}},{src:{process:"SendComponentChanges",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"project",tgt:{process:"GetGraphChangeValues",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:10},tgt:{process:"GetGraphChangeValues",port:"in"}},{src:{process:"GetGraphChangeValues",port:"out"},tgt:{process:"GetClient",port:"in",index:8}},{src:{process:"GetClient",port:"out",index:8},tgt:{process:"SendGraphChanges",port:"in"}},{src:{process:"GetClient",port:"client",index:8},tgt:{process:"SendGraphChanges",port:"client"}},{src:{process:"GetGraphChangeValues",port:"values",index:0},tgt:{process:"SendGraphChanges",port:"project"}},{src:{process:"SendGraphChanges",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"cogs"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{pass:{process:"Passed",port:"out"},new:{process:"NewActions",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},Passed:{component:"core/Merge"},StorageDbAction:{component:"ui/SetAction"},NewActions:{component:"core/Merge"},StorageReadyAction:{component:"ui/SetAction"},StorageInitialLoadAction:{component:"ui/SetAction"},StorageInitialDataAction:{component:"ui/SetAction"},StorageProjectAction:{component:"ui/SetAction"},StorageGraphAction:{component:"ui/SetAction"},StorageComponentAction:{component:"ui/SetAction"},StorageSpecAction:{component:"ui/SetAction"},StorageRuntimeAction:{component:"ui/SetAction"},RemovedProjectAction:{component:"ui/SetAction"},RemovedGraphAction:{component:"ui/SetAction"},RemovedComponentAction:{component:"ui/SetAction"},RemovedSpecAction:{component:"ui/SetAction"},RemovedRuntimeAction:{component:"ui/SetAction"},StorageErrorAction:{component:"ui/SetAction"},StorageOpenAction:{component:"ui/SetAction"},ApplicationHashAction:{component:"ui/SetAction"},DbName:{component:"strings/SendString"},PrepareStorage:{component:"ui/PrepareStorage"},LoadData:{component:"ui/LoadData"},SplitSave:{component:"core/Split"},OpenNewProject:{component:"ui/OpenNewProject"},SaveData:{component:"ui/SaveData"},DeleteData:{component:"ui/DeleteData"},OpenProject:{component:"ui/OpenProject"}},connections:[{data:"noflo:ready,storage:load:*,storage:save:*,storage:delete:*,storage:open",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Passed",port:"in"}},{data:"storage:db",tgt:{process:"StorageDbAction",port:"action"}},{src:{process:"StorageDbAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:ready",tgt:{process:"StorageReadyAction",port:"action"}},{src:{process:"StorageReadyAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:load:all",tgt:{process:"StorageInitialLoadAction",port:"action"}},{src:{process:"StorageInitialLoadAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:stored:initial",tgt:{process:"StorageInitialDataAction",port:"action"}},{src:{process:"StorageInitialDataAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:stored:project",tgt:{process:"StorageProjectAction",port:"action"}},{src:{process:"StorageProjectAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:stored:graph",tgt:{process:"StorageGraphAction",port:"action"}},{src:{process:"StorageGraphAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:stored:component",tgt:{process:"StorageComponentAction",port:"action"}},{src:{process:"StorageComponentAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:stored:spec",tgt:{process:"StorageSpecAction",port:"action"}},{src:{process:"StorageSpecAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:stored:runtime",tgt:{process:"StorageRuntimeAction",port:"action"}},{src:{process:"StorageRuntimeAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:removed:project",tgt:{process:"RemovedProjectAction",port:"action"}},{src:{process:"RemovedProjectAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:removed:graph",tgt:{process:"RemovedGraphAction",port:"action"}},{src:{process:"RemovedGraphAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:removed:component",tgt:{process:"RemovedComponentAction",port:"action"}},{src:{process:"RemovedComponentAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:removed:spec",tgt:{process:"RemovedSpecAction",port:"action"}},{src:{process:"RemovedSpecAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:removed:runtime",tgt:{process:"RemovedRuntimeAction",port:"action"}},{src:{process:"RemovedRuntimeAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:error",tgt:{process:"StorageErrorAction",port:"action"}},{src:{process:"StorageErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:opened",tgt:{process:"StorageOpenAction",port:"action"}},{src:{process:"StorageOpenAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"application:sethash",tgt:{process:"ApplicationHashAction",port:"action"}},{src:{process:"ApplicationHashAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"noflo-ui",tgt:{process:"DbName",port:"string"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"DbName",port:"in"}},{src:{process:"DbName",port:"out"},tgt:{process:"PrepareStorage",port:"name"}},{src:{process:"PrepareStorage",port:"db"},tgt:{process:"StorageDbAction",port:"in"}},{src:{process:"PrepareStorage",port:"db"},tgt:{process:"StorageInitialLoadAction",port:"in"}},{src:{process:"PrepareStorage",port:"error"},tgt:{process:"StorageErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"LoadData",port:"in"}},{src:{process:"LoadData",port:"complete"},tgt:{process:"StorageInitialDataAction",port:"in"}},{src:{process:"LoadData",port:"complete"},tgt:{process:"StorageReadyAction",port:"in"}},{src:{process:"LoadData",port:"error"},tgt:{process:"StorageErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"SplitSave",port:"in"}},{src:{process:"SplitSave",port:"out"},tgt:{process:"OpenNewProject",port:"in"}},{src:{process:"SplitSave",port:"out"},tgt:{process:"SaveData",port:"in"}},{src:{process:"SaveData",port:"project"},tgt:{process:"OpenNewProject",port:"project"}},{src:{process:"OpenNewProject",port:"out"},tgt:{process:"StorageProjectAction",port:"in"}},{src:{process:"OpenNewProject",port:"hash"},tgt:{process:"ApplicationHashAction",port:"in"}},{src:{process:"SaveData",port:"graph"},tgt:{process:"StorageGraphAction",port:"in"}},{src:{process:"SaveData",port:"component"},tgt:{process:"StorageComponentAction",port:"in"}},{src:{process:"SaveData",port:"spec"},tgt:{process:"StorageSpecAction",port:"in"}},{src:{process:"SaveData",port:"runtime"},tgt:{process:"StorageRuntimeAction",port:"in"}},{src:{process:"SaveData",port:"error"},tgt:{process:"StorageErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"DeleteData",port:"in"}},{src:{process:"DeleteData",port:"project"},tgt:{process:"RemovedProjectAction",port:"in"}},{src:{process:"DeleteData",port:"graph"},tgt:{process:"RemovedGraphAction",port:"in"}},{src:{process:"DeleteData",port:"component"},tgt:{process:"RemovedComponentAction",port:"in"}},{src:{process:"DeleteData",port:"spec"},tgt:{process:"RemovedSpecAction",port:"in"}},{src:{process:"DeleteData",port:"runtime"},tgt:{process:"RemovedRuntimeAction",port:"in"}},{src:{process:"DeleteData",port:"error"},tgt:{process:"StorageErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"OpenProject",port:"in"}},{src:{process:"OpenProject",port:"out"},tgt:{process:"StorageOpenAction",port:"in"}},{src:{process:"OpenProject",port:"error"},tgt:{process:"StorageErrorAction",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"database"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{pass:{process:"Passed",port:"out"},new:{process:"NewActions",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},Passed:{component:"core/Repeat"},ApplicationUrlAction:{component:"ui/SetAction"},NewActions:{component:"core/Merge"},ApplicationRedirectAction:{component:"ui/SetAction"},ApplicationHashAction:{component:"ui/SetAction"},NofloReady:{component:"core/Split"},InitialURL:{component:"ui/GetUrl"},SplitReady:{component:"core/Split"},Async:{component:"core/RepeatAsync"},ListenHash:{component:"interaction/ListenHash"},Redirect:{component:"ui/SetUrl"},HashToAction:{component:"ui/Router"},SetUrlHash:{component:"ui/SetUrlHash"},SendCurrentHash:{component:"ui/SendCurrentHash"}},connections:[{data:"noflo:ready,storage:ready,application:redirect,application:hash,application:sethash,application:recreatestate",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Passed",port:"in"}},{data:"application:url",tgt:{process:"ApplicationUrlAction",port:"action"}},{src:{process:"ApplicationUrlAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"application:redirect",tgt:{process:"ApplicationRedirectAction",port:"action"}},{src:{process:"ApplicationRedirectAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"application:hash",tgt:{process:"ApplicationHashAction",port:"action"}},{src:{process:"ApplicationHashAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"NofloReady",port:"in"}},{src:{process:"NofloReady",port:"out"},tgt:{process:"Passed",port:"in"}},{src:{process:"NofloReady",port:"out"},tgt:{process:"InitialURL",port:"in"}},{src:{process:"InitialURL",port:"out"},tgt:{process:"ApplicationUrlAction",port:"in"}},{src:{process:"ListenHash",port:"initial"},tgt:{process:"ApplicationHashAction",port:"in"}},{src:{process:"ListenHash",port:"change"},tgt:{process:"ApplicationHashAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"SplitReady",port:"in"}},{src:{process:"SplitReady",port:"out"},tgt:{process:"Async",port:"in"}},{src:{process:"Async",port:"out"},tgt:{process:"ListenHash",port:"start"}},{src:{process:"SplitReady",port:"out"},tgt:{process:"Passed",port:"in"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"Redirect",port:"in"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"HashToAction",port:"in"}},{src:{process:"HashToAction",port:"route"},tgt:{process:"NewActions",port:"in"}},{src:{process:"HashToAction",port:"redirect"},tgt:{process:"ApplicationRedirectAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"SetUrlHash",port:"in"}},{src:{process:"Dispatch",port:"handle",index:5},tgt:{process:"SendCurrentHash",port:"in"}},{src:{process:"SendCurrentHash",port:"out"},tgt:{process:"ApplicationHashAction",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"slack"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{pass:{process:"Dispatch",port:"pass"},new:{process:"NewActions",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},UserInfoAction:{component:"ui/SetAction"},NewActions:{component:"core/Merge"},UserErrorAction:{component:"ui/SetAction"},ApplicationRedirectAction:{component:"ui/SetAction"},RegistryRuntimesFetch:{component:"ui/SetAction"},UserLogoutAction:{component:"ui/SetAction"},CheckQuery:{component:"ui/CheckTokenGrant"},ExchangeToken:{component:"ui/ExchangeGrantToken"},GetRemoteUser:{component:"ui/GetRemoteUser"},StoreUser:{component:"ui/StoreUser"},LoadUser:{component:"ui/LoadUserData"},RefreshUser:{component:"ui/RefreshRemoteUser"},Login:{component:"ui/LoginOAuth"},Reset:{component:"ui/ClearUserData"},GetUserStateForUpdate:{component:"ui/GetActionValues"},StoreUserPreferences:{component:"ui/StoreUserPreferences"}},connections:[{data:"application:url,user:login,user:logout,user:update",tgt:{process:"Dispatch",port:"routes"}},{data:"user:info",tgt:{process:"UserInfoAction",port:"action"}},{src:{process:"UserInfoAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"user:error",tgt:{process:"UserErrorAction",port:"action"}},{src:{process:"UserErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"application:redirect",tgt:{process:"ApplicationRedirectAction",port:"action"}},{src:{process:"ApplicationRedirectAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"flowhub:runtimes:fetch",tgt:{process:"RegistryRuntimesFetch",port:"action"}},{src:{process:"RegistryRuntimesFetch",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"user:logout",tgt:{process:"UserLogoutAction",port:"action"}},{src:{process:"UserLogoutAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"CheckQuery",port:"in"}},{src:{process:"CheckQuery",port:"code"},tgt:{process:"ExchangeToken",port:"code"}},{src:{process:"CheckQuery",port:"error"},tgt:{process:"UserErrorAction",port:"in"}},{src:{process:"ExchangeToken",port:"token"},tgt:{process:"GetRemoteUser",port:"token"}},{src:{process:"ExchangeToken",port:"error"},tgt:{process:"UserErrorAction",port:"in"}},{src:{process:"GetRemoteUser",port:"user"},tgt:{process:"StoreUser",port:"user"}},{src:{process:"GetRemoteUser",port:"error"},tgt:{process:"UserErrorAction",port:"in"}},{src:{process:"StoreUser",port:"user"},tgt:{process:"UserInfoAction",port:"in"}},{src:{process:"StoreUser",port:"user"},tgt:{process:"RegistryRuntimesFetch",port:"in"}},{src:{process:"StoreUser",port:"redirect"},tgt:{process:"ApplicationRedirectAction",port:"in"}},{src:{process:"CheckQuery",port:"pass"},tgt:{process:"LoadUser",port:"start"}},{src:{process:"LoadUser",port:"user"},tgt:{process:"UserInfoAction",port:"in"}},{src:{process:"LoadUser",port:"user"},tgt:{process:"RefreshUser",port:"in"}},{src:{process:"RefreshUser",port:"pass"},tgt:{process:"UserInfoAction",port:"in"}},{src:{process:"RefreshUser",port:"updated"},tgt:{process:"StoreUser",port:"user"}},{src:{process:"RefreshUser",port:"invalid"},tgt:{process:"UserLogoutAction",port:"in"}},{src:{process:"LoadUser",port:"error"},tgt:{process:"UserErrorAction",port:"in"}},{src:{process:"RefreshUser",port:"error"},tgt:{process:"UserErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"Login",port:"in"}},{src:{process:"Login",port:"codeurl"},tgt:{process:"CheckQuery",port:"in"}},{src:{process:"Login",port:"redirect"},tgt:{process:"ApplicationRedirectAction",port:"in"}},{src:{process:"Login",port:"error"},tgt:{process:"UserErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"Reset",port:"clear"}},{src:{process:"Reset",port:"user"},tgt:{process:"UserInfoAction",port:"in"}},{data:"user",tgt:{process:"GetUserStateForUpdate",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetUserStateForUpdate",port:"in"}},{src:{process:"GetUserStateForUpdate",port:"values",index:0},tgt:{process:"StoreUserPreferences",port:"user"}},{src:{process:"GetUserStateForUpdate",port:"out"},tgt:{process:"StoreUserPreferences",port:"in"}},{src:{process:"StoreUserPreferences",port:"out"},tgt:{process:"UserInfoAction",port:"in"}},{src:{process:"StoreUserPreferences",port:"error"},tgt:{process:"UserErrorAction",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"user-circle"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{context:{process:"MergeContext",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},CleanUser:{component:"ui/CleanAction"},UserToContext:{component:"ui/SetToContext"},CreateCtx:{component:"ui/CreateEmptyContext"},MergeContext:{component:"core/Merge"},ErrorToCtx:{component:"ui/ErrorToContext"}},connections:[{data:"user:info,user:error",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"CleanUser",port:"in"}},{data:"user",tgt:{process:"UserToContext",port:"key"}},{src:{process:"CleanUser",port:"out"},tgt:{process:"UserToContext",port:"value"}},{src:{process:"CleanUser",port:"out"},tgt:{process:"CreateCtx",port:"start"}},{src:{process:"CreateCtx",port:"out"},tgt:{process:"UserToContext",port:"context"}},{src:{process:"UserToContext",port:"context"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"ErrorToCtx",port:"error"}},{src:{process:"ErrorToCtx",port:"out"},tgt:{process:"MergeContext",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"user-circle"},caseSensitive:!1}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="This component receives data on multiple input ports and \nsends the same data out to the connected output port",e.icon="compress",e.inPorts.add("in",{datatype:"all",description:"Packet to be forwarded"}),e.outPorts.add("out",{datatype:"all"}),e.process((e,t)=>{const r=e.get("in");return t.sendDone({out:r})})}},function(e,t,r){const n=r(0),{inspect:o}=r(61);t.getComponent=()=>{const e=new n.Component;return e.description="Sends the data items to console.log",e.icon="bug",e.inPorts.add("in",{datatype:"all",description:"Packet to be printed through console.log"}),e.inPorts.add("options",{datatype:"object",description:"Options to be passed to console.log",control:!0}),e.outPorts.add("out",{datatype:"all"}),e.process((e,t)=>{if(!e.hasData("in"))return;if(e.attached("options").length&&!e.hasData("options"))return;let r=null;e.has("options")&&(r=e.getData("options"));const n=e.getData("in");((e,t)=>null!=e?console.log(o(t,e.showHidden,e.depth,e.colors)):console.log(t))(r,n),t.sendDone({out:n})})}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="Forwards packets and metadata in the same way \nit receives them",e.icon="forward",e.inPorts.add("in",{datatype:"all",description:"Packet to forward"}),e.outPorts.add("out",{datatype:"all"}),e.process((e,t)=>{const r=e.get("in");t.sendDone({out:r})})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="Like 'Repeat', except repeat on next tick",e.icon="step-forward",e.inPorts.add("in",{datatype:"all",description:"Packet to forward"}),e.outPorts.add("out",{datatype:"all"}),e.process((e,t)=>{const r=e.get("in");setTimeout(()=>t.sendDone({out:r}),0)})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="Sends next packet in buffer when receiving a bang",e.icon="forward",e.inPorts.add("data",{datatype:"all"}),e.inPorts.add("in",{datatype:"bang"}),e.outPorts.add("out",{datatype:"all"}),e.outPorts.add("empty",{datatype:"bang",required:!1}),e.forwardBrackets={},e.process((t,r)=>{if(!t.hasData("in"))return;const n=t.getData("in");if(!t.hasData("data"))return void r.sendDone({empty:!0});let o=!1;for(;t.has("data");){if(o){if("data"===e.inPorts.data.getBuffer(n.scope)[0].type)break}const i=t.get("data");r.send({out:i}),"data"===i.type&&(o=!0)}r.done()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="expand",e.description="This component receives data on a single input port and \nsends the same data out to all connected output ports",e.inPorts.add("in",{datatype:"all",description:"Packet to be forwarded"}),e.outPorts.add("out",{datatype:"all"}),e.process((e,t)=>{const r=e.get("in");t.sendDone({out:r})})}},function(e,t,r){"use strict";var n;n=r(0),t.getComponent=function(){var e;return(e=new n.Component).description="Like Promise.all, wait for result from all connected inputs and send them or an error out",e.icon="compress",e.inPorts.add("in",{datatype:"all",addressable:!0}),e.inPorts.add("error",{datatype:"object"}),e.outPorts.add("out",{datatype:"array"}),e.outPorts.add("error",{datatype:"object"}),e.pending={},e.tearDown=function(t){return e.pending={},t()},e.forwardBrackets={},e.process(function(t,r){var n,o,i,s;return t.hasData("error")?(o=t.getData("error"),e.pending[t.scope]||(e.pending[t.scope]={resolved:!1,rejected:!1}),e.pending[t.scope].rejected||e.pending[t.scope].resolved?void r.done():(e.pending[t.scope].rejected=!0,void r.sendDone({error:o}))):(i=t.attached("in").filter(function(e){return t.hasStream(["in",e])})).length?(e.pending[t.scope]||(e.pending[t.scope]={resolved:!1,rejected:!1}),e.pending[t.scope].rejected||e.pending[t.scope].resolved?(i.forEach(function(e){var r,n,o,i,s;for(i=[],r=0,o=(s=t.getStream(["in",e])).length;r<o;r++)n=s[r],i.push(n.drop());return i}),void r.done()):(s=t.getStream(["in",i[0]]).filter(function(e){return"data"===e.type}),e.pending[t.scope].resolved=!0,n=s.map(function(e){return e.data}),r.sendDone({out:n}))):void 0})}},function(e,t,r){"use strict";var n,o;n=r(0),o=r(21),t.getComponent=function(){var e;return(e=new n.Component).description="Create a GitHub commit",e.inPorts.add("message",{datatype:"string",description:"Commit message"}),e.inPorts.add("tree",{datatype:"string",description:"Tree SHA"}),e.inPorts.add("parents",{datatype:"array",description:"Parent commits"}),e.inPorts.add("repository",{datatype:"string",description:"Repository path"}),e.inPorts.add("token",{datatype:"string",description:"GitHub API token",required:!0,scoped:!1}),e.outPorts.add("out",{datatype:"string"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:["message","tree","parents","repository"],params:["token"],out:"out",async:!0,forwardGroups:!0},function(t,r,n,i){var s,a;return s=o.api(),e.params.token&&s.token(e.params.token),(a=s.post("/repos/".concat(t.repository,"/git/commits"),{message:t.message,tree:t.tree,parents:t.parents||[]})).on("success",function(e){return n.send(e.body.sha),i()}),a.on("error",function(e){return i(e.error||e.body)}),a()})}},function(e,t,r){"use strict";var n,o;n=r(0),o=r(21),t.getComponent=function(){var e;return(e=new n.Component).description="Create a GitHub tree",e.inPorts.add("tree",{datatype:"array",description:"Tree entries to create"}),e.inPorts.add("repository",{datatype:"string",description:"Repository path"}),e.inPorts.add("base",{datatype:"string",description:"Base tree to create the tree for"}),e.inPorts.add("token",{datatype:"string",description:"GitHub API token",required:!0,scoped:!1}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:["tree","repository"],params:["token","base"],out:"out",async:!0,forwardGroups:!0},function(t,r,n,i){var s,a;return s=o.api(),e.params.token&&s.token(e.params.token),(a=s.post("/repos/".concat(t.repository,"/git/trees"),{tree:t.tree,base_tree:e.params.base})).on("success",function(e){return n.send(e.body),i()}),a.on("error",function(e){return i(e.error||e.body)}),a()})}},function(e,t,r){"use strict";var n,o;n=r(0),o=r(21),t.getComponent=function(){var e;return(e=new n.Component).description="Get a git blob",e.inPorts.add("repository",{datatype:"string",description:"Repository path",required:!0}),e.inPorts.add("sha",{datatype:"string",description:"Blob SHA",required:!0}),e.inPorts.add("token",{datatype:"string",description:"GitHub API token",required:!0,scoped:!1}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:["repository","sha"],params:["token"],out:"out",async:!0,forwardGroups:!0},function(t,r,n,i){var s,a;return s=o.api(),e.params.token&&s.token(e.params.token),(a=s.get("/repos/".concat(t.repository,"/git/blobs/").concat(t.sha))).on("success",function(e){return e.body?(n.beginGroup(t.repository),n.beginGroup(t.sha),n.send(e.body),n.endGroup(),n.endGroup(),i()):i(new Error("no result available"))}),a.on("error",function(e){return i(e.error||e.body)}),a()})}},function(e,t,r){"use strict";var n,o;n=r(0),o=r(21),t.getComponent=function(){var e;return(e=new n.Component).inPorts.add("repository",{datatype:"string"}),e.inPorts.add("token",{datatype:"string",required:!0,scoped:!1}),e.inPorts.add("reference",{datatype:"string",default:"heads/master",required:!0}),e.outPorts.add("reference",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"repository",params:["token","reference"],out:"reference",async:!0,forwardGroups:!0},function(t,r,n,i){var s,a,c,u,p;return s=o.api(),(null!=(c=e.params)?c.token:void 0)&&s.token(e.params.token),a=(null!=(u=e.params)?u.reference:void 0)||"heads/master",(p=s.get("/repos/".concat(t,"/git/refs/").concat(a))).on("success",function(e){if(e.body)return n.beginGroup(t),n.beginGroup(a),n.send(e.body),n.endGroup(),n.endGroup(),i();i(new Error("No result received"))}),p.on("error",function(e){return i(e.error||e.body)}),p()})}},function(e,t,r){"use strict";var n,o;n=r(0),o=r(21),t.getComponent=function(){var e;return(e=new n.Component).inPorts.add("repository",{datatype:"string"}),e.inPorts.add("commit",{datatype:"string",description:"Commit SHA"}),e.inPorts.add("token",{datatype:"string",required:!0,scoped:!1}),e.inPorts.add("reference",{datatype:"string",default:"heads/master",required:!0}),e.inPorts.add("force",{datatype:"boolean",default:!1,required:!0}),e.outPorts.add("reference",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:["repository","commit"],params:["token","reference","force"],out:"reference",async:!0,forwardGroups:!0},function(t,r,n,i){var s,a,c,u,p;return s=o.api(),e.params.token&&s.token(e.params.token),a=(null!=(c=e.params)?c.reference:void 0)||"heads/master","true"===String(null!=(u=e.params)?u.force:void 0),"refs/"===a.substr(0,5)&&(a=a.substr(5)),(p=s.patch("/repos/".concat(t.repository,"/git/refs/").concat(a),{sha:t.commit,force:!1})).on("success",function(e){return n.send(e.body),i()}),p.on("error",function(e){return i(e.error||e.body)}),p()})}},function(e,t,r){"use strict";var n;n=r(0),n=r(0),t.getComponent=function(){var e;return(e=new n.Component).description="Convert a Graph JSON structure into a NoFlo Graph",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process(function(e,t){var r;if(e.hasData("in"))return r=e.getData("in"),n.graph.loadJSON(r,function(e,n){return e?t.done(e):((r.id&&n.properties.id!==r.id||r.project&&n.properties.project!==r.project)&&n.setProperties({id:r.id,project:r.project}),t.sendDone({out:n}))})})}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o;o=r(0),t.getComponent=function(){var e;return(e=new o.Component).description="Start an IndexedDB transaction",e.inPorts.add("stores",{datatype:"string"}),e.inPorts.add("db",{datatype:"object"}),e.inPorts.add("mode",{datatype:"string",default:"readwrite",control:!0}),e.outPorts.add("transaction",{datatype:"object"}),e.outPorts.add("db",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.outPorts.add("complete",{datatype:"bang"}),e.forwardBrackets={stores:["transaction","db","error","complete"]},e.process(function(e,t){var r,o,i,s,a;if(e.hasData("db","stores")){i=e.hasData("mode")?e.getData("mode"):"readwrite";var c=n(e.getData("db","stores"),2);r=c[0],"string"==typeof(s=c[1])&&(s=s.split(","));try{a=r.transaction(s,i)}catch(e){return o=e,t.done(o)}return a.oncomplete=function(){return t.send({complete:!0}),a.onerror=null,a.oncomplete=null,t.done()},a.onerror=function(e){return t.done(e)},t.send({transaction:a}),t.send({db:r})}})}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o;o=r(0),t.getComponent=function(){var e;return(e=new o.Component).description="Add an index to an IndexedDB database",e.inPorts.add("store",{datatype:"object"}),e.inPorts.add("name",{datatype:"string"}),e.inPorts.add("keypath",{datatype:"string"}),e.inPorts.add("unique",{datatype:"boolean",control:!0,default:!1}),e.inPorts.add("multientry",{datatype:"boolean",control:!0,default:!1}),e.outPorts.add("index",{datatype:"object"}),e.outPorts.add("store",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={name:["index","store","error"]},e.process(function(e,t){var r,o,i,s,a,c;if(e.hasData("store","name","keypath")){c=!!e.hasData("unique")&&e.getData("unique"),i=!!e.hasData("multientry")&&e.getData("multientry");var u=n(e.getData("store","name","keypath"),3);return a=u[0],s=u[1],o=u[2],a.onerror=function(e){return t.done(e)},r=a.createIndex(s,o,{unique:c,multiEntry:i}),a.onerror=null,t.sendDone({index:r,store:a})}})}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o;o=r(0),t.getComponent=function(){var e;return(e=new o.Component).description="Add an object store to an IndexedDB database",e.inPorts.add("name",{datatype:"string"}),e.inPorts.add("db",{datatype:"object"}),e.inPorts.add("keypath",{datatype:"string",control:!0}),e.inPorts.add("autoincrement",{datatype:"boolean",control:!0,default:!1}),e.outPorts.add("store",{datatype:"object"}),e.outPorts.add("db",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={name:["store","error"]},e.process(function(e,t){var r,o,i,s,a;if(e.hasData("name","db")){i=e.hasData("keypath")?e.getData("keypath"):"",r=!!e.hasData("autoincrement")&&e.getData("autoincrement");var c=n(e.getData("name","db"),2);return s=c[0],(o=c[1]).transaction.onerror=function(e){return t.done(e)},a=o.createObjectStore(s,{keyPath:i,autoIncrement:r}),o.transaction.onerror=null,t.send({store:a,db:o}),t.done()}})}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o;o=r(0),t.getComponent=function(){var e;return(e=new o.Component).description="Remove an item from an IndexedDB database",e.icon="trash",e.inPorts.add("store",{datatype:"object"}),e.inPorts.add("key",{datatype:"string"}),e.outPorts.add("store",{datatype:"object"}),e.outPorts.add("key",{datatype:"string"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={key:["key","error"]},e.process(function(e,t){var r,o,i;if(e.hasData("store","key")){var s=n(e.getData("store","key"),2);return i=s[0],r=s[1],(o=i.delete(r)).onerror=function(e){return t.done(e)},o.onsuccess=function(e){return t.send({store:i,key:r}),t.done()}}})}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o;o=r(0),t.getComponent=function(){var e;return(e=new o.Component).description="Get an object store from an IndexedDB database",e.inPorts.add("name",{datatype:"string"}),e.inPorts.add("transaction",{datatype:"object"}),e.outPorts.add("store",{datatype:"object"}),e.outPorts.add("transaction",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={name:["store","error"]},e.process(function(e,t){var r,o,i;if(e.hasData("name","transaction")){var s=n(e.getData("name","transaction"),2);return r=s[0],(i=s[1]).onerror=function(e){return t.done(e)},o=i.objectStore(r),i.onerror=null,t.sendDone({store:o,transaction:i})}})}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o,i;i=r(0),o=r(379),t.getComponent=function(){var e;return(e=new i.Component).description="Open an IndexedDB database",e.inPorts.add("name",{datatype:"string"}),e.inPorts.add("version",{datatype:"integer"}),e.outPorts.add("upgrade",{datatype:"object"}),e.outPorts.add("db",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={name:["db","error"]},e.process(function(e,t){var r,i,s;if(e.hasData("name","version")){var a=n(e.getData("name","version"),2);return r=a[0],s=a[1],(i=o.open(r,parseInt(s))).onerror=function(e){return t.done(e)},i.onupgradeneeded=function(e){return t.send({upgrade:{oldVersion:e.oldVersion,newVersion:parseInt(s),db:e.target.result}})},i.onsuccess=function(e){return t.sendDone({db:e.target.result})}}})}},function(e,t){e.exports=window.overrideIndexedDB||window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o;o=r(0),t.getComponent=function(){var e;return(e=new o.Component).description="Store an object into an IndexedDB store",e.inPorts.add("store",{datatype:"object"}),e.inPorts.add("value",{datatype:"all"}),e.outPorts.add("store",{datatype:"object"}),e.outPorts.add("key",{datatype:"string"}),e.outPorts.add("value",{datatype:"all"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={value:["key","value","error"]},e.process(function(e,t){var r,o,i;if(e.hasData("store","value")){var s=n(e.getData("store","value"),2);return o=s[0],i=s[1],r=o.put(i),t.send({store:o}),r.onerror=function(e){return t.done(e)},r.onsuccess=function(e){return t.sendDone({key:e.target.result,value:i})}}})}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o;o=r(0),t.getComponent=function(){var e;return(e=new o.Component).icon="search",e.description="Query a store in an IndexedDB database",e.inPorts.add("store",{datatype:"object"}),e.inPorts.add("range",{datatype:"object"}),e.inPorts.add("all",{datatype:"bang"}),e.outPorts.add("item",{datatype:"all"}),e.outPorts.add("range",{datatype:"object"}),e.outPorts.add("empty",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={all:["item","error"],range:["item","error"]},e.process(function(e,t){var r,i,s,a,c;if(e.hasData("store")){if(r=!1,a=function(e){var n;return(n=e.target.result)?(r||(t.send({item:new o.IP("openBracket")}),r=!0),t.send({item:n.value}),n.continue()):(r?t.send({item:new o.IP("closeBracket")}):t.send({empty:!0}),void t.done())},e.hasData("all")){var u=n(e.getData("store","all"),2);return c=u[0],u[1],(s=c.openCursor()).onerror=function(e){return t.done(e)},void(s.onsuccess=a)}if(e.hasData("range")){var p=n(e.getData("store","range"),2);return c=p[0],i=p[1],t.send({range:i}),(s=c.openCursor(i)).onerror=function(e){return t.done(e)},s.onsuccess=a}}})}},function(e,t,r){"use strict";var n;n=r(0),t.getComponent=function(){var e;return(e=new n.Component).icon="code-fork",e.description="Route upgrades between IndexeDB database versions",e.inPorts.add("upgrade",{datatype:"object"}),e.outPorts.add("versions",{datatype:"object",addressable:!0}),e.outPorts.add("missed",{datatype:"object"}),e.forwardBrackets={upgrade:["versions","missed"]},e.process(function(t,r){var o,i,s;if(t.hasData("upgrade")){for(s=t.getData("upgrade"),i=!1,o=0;o<s.newVersion;)o<s.oldVersion?o++:e.outPorts.versions.isAttached(o)?(r.send({versions:new n.IP("data",s.db,{index:o})}),o++):(o++,i=!0);return i?r.sendDone({missed:s.db}):r.done()}})}},function(e,t,r){"use strict";var n;n=r(0),t.getComponent=function(){var e,t;return(e=new n.Component).description="Listen for hash changes in browser's URL bar",e.icon="slack",e.inPorts.add("start",{datatype:"bang",description:"Start listening for hash changes"}),e.inPorts.add("stop",{datatype:"bang",description:"Stop listening for hash changes"}),e.outPorts.add("initial",{datatype:"string"}),e.outPorts.add("change",{datatype:"string"}),e.current=null,e.subscriber=null,t=function(){if(e.subscriber)return window.removeEventListener("hashchange",e.subscriber.callback,!1),e.subscriber.ctx.deactivate(),e.subscriber=null},e.tearDown=function(r){return e.current=null,t(),r()},e.forwardBrackets={},e.process(function(r,o,i){var s;if(r.hasData("start"))return r.getData("start"),t(),s=function(t){var r,i;if(r=e.current,e.current=window.location.href.split("#")[1]||"",r&&o.send({change:new n.IP("openBracket",r)}),(i={})[t]=e.current,o.send(i),r)return o.send({change:new n.IP("closeBracket",r)})},e.subscriber={callback:function(e){return s("change")},ctx:i},s("initial"),void window.addEventListener("hashchange",e.subscriber.callback,!1);r.hasData("stop")&&(r.getData("stop"),t(),o.done())})}},function(e,t,r){"use strict";var n;n=r(0),t.getComponent=function(){var e,t;return(e=new n.Component).description="Listen to window resize events",e.icon="desktop",e.inPorts.add("start",{datatype:"bang",description:"Start listening for screen resizes"}),e.inPorts.add("stop",{datatype:"bang",description:"Stop listening for screen resizes"}),e.outPorts.add("width",{datatype:"number"}),e.outPorts.add("height",{datatype:"number"}),e.subscriber=null,t=function(){if(e.subscriber)return window.removeEventListener("resize",e.subscriber.callback,!1),e.subscriber.ctx.deactivate(),e.subscriber=null},e.tearDown=function(e){return t(),e()},e.forwardBrackets={},e.process(function(r,n,o){if(r.hasData("start"))return r.getData("start"),t(),e.subscriber={callback:function(e){return n.send({width:window.innerWidth,height:window.innerHeight})},ctx:o},n.send({width:window.innerWidth,height:window.innerHeight}),void window.addEventListener("resize",e.subscriber.callback,!1);r.hasData("stop")&&(r.getData("stop"),t(),n.done())})}},function(e,t,r){"use strict";var n;n=r(0),t.getComponent=function(){var e;return(e=new n.Component).description="call a method on an object",e.icon="gear",e.inPorts=new n.InPorts({in:{datatype:"object",description:"Object on which a method will be called",required:!0},method:{datatype:"string",description:"Name of the method to call",required:!0,control:!0},arguments:{datatype:"all",description:"Arguments given to the method (one argument per IP)"}}),e.outPorts=new n.OutPorts({out:{datatype:"all",description:"Value returned by the method call",required:!0},error:{datatype:"object"}}),e.process(function(e,t){var r,n,o,i;if(e.hasData("method","in")&&(!(e.attached("arguments").length>0)||e.hasData("arguments"))){if(r=[],n=e.getStream("arguments").filter(function(e){return"data"===e.type&&null!=e.data}).map(function(e){return e.data}),r=r.concat(n),(o=e.getData("in"))[i=e.getData("method")])return t.sendDone({out:o[i].apply(o,r)});t.sendDone(new Error("Method '".concat(i,"' not available")))}})}},function(e,t,r){"use strict";var n;n=r(0),t.getComponent=function(){var e;return(e=new n.Component({description:"Create an empty object"})).inPorts=new n.InPorts({start:{datatype:"bang",description:"Signal to create a new object"}}),e.outPorts=new n.OutPorts({out:{datatype:"object",description:"A new empty object"}}),e.forwardBrackets={start:["out"]},e.process(function(e,t){if(e.hasData("start"))return e.getData("start"),t.sendDone({out:{}})})}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o;o=r(0),t.getComponent=function(){var e;return(e=new o.Component).icon="indent",e.inPorts=new o.InPorts({in:{datatype:"object",description:"Object to get keys from",required:!0},key:{datatype:"string",description:"Keys to extract from the object (one key per IP)",required:!0},sendgroup:{datatype:"boolean",description:"true to send keys as groups around value IPs, false otherwise",control:!0,default:!1}}),e.outPorts=new o.OutPorts({out:{datatype:"all",description:"Values extracts from the input object given the input keys (one value per IP, potentially grouped using the key names)"},object:{datatype:"object",description:"Object forwarded from input if at least one property matches the input keys"},missed:{datatype:"object",description:"Object forwarded from input if no property matches the input keys"}}),e.process(function(e,t){var r,i,s,a,c,u;if(e.hasData("in")&&e.hasStream("key")&&(!(e.attached("sendgroup").length>0)||e.hasData("sendgroup")))if(a=e.getStream("key").filter(function(e){return"data"===e.type}).map(function(e){return e.data}),r=e.getData("in"),u="true"===(u=e.getData("sendgroup"))||!0===u,"object"===n(r)){if(null!==r){for(i=0,c=a.length;i<c;i++)void 0===r[s=a[i]]&&(u&&t.send({missed:new o.IP("openBracket",s)}),t.send({missed:new o.IP("data",r)}),u&&t.send({missed:new o.IP("closeBracket",s)})),u&&t.send({out:new o.IP("openBracket",s)}),t.send({out:new o.IP("data",r[s])}),u&&t.send({out:new o.IP("closeBracket",s)});return t.send({object:new o.IP("data",r)}),t.done()}t.sendDone(new Error("Data is NULL"))}else t.sendDone(new Error("Data is not an object"))})}},function(e,t,r){"use strict";var n;n=r(0),t.getComponent=function(){var e;return(e=new n.Component).description="Send a string when receiving a packet",e.inPorts.add("string",{datatype:"string",description:"String to send",control:!0}),e.inPorts.add("in",{datatype:"bang",description:"Send the string out"}),e.outPorts.add("out",{datatype:"string"}),e.process(function(e,t){if(e.has("string","in"))return e.getData("in"),t.sendDone({out:e.getData("string")})})}},function(e,t,r){(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c,u;u=r(0),c=function(t){function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=i(this,s(r).call(this))).metadata=e,t.network=null,t.ready=!0,t.started=!1,t.starting=!1,t.baseDir=null,t.loader=null,t.load=0,t.inPorts=new u.InPorts({graph:{datatype:"all",description:"NoFlo graph definition to be used with the subgraph component",required:!0}}),t.outPorts=new u.OutPorts,t.inPorts.graph.on("ip",function(e){if("data"===e.type)return t.setGraph(e.data,function(e){if(e)return t.error(e)})}),t}var c,p,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(r,u.Component),c=r,(p=[{key:"setGraph",value:function(t,r){var o=this;return this.ready=!1,"object"===n(t)?"function"==typeof t.addNode?void this.createNetwork(t,r):void u.graph.loadJSON(t,function(e,t){return e?r(e):(t.baseDir=o.baseDir,o.createNetwork(t,r))}):("/"!==t.substr(0,1)&&":"!==t.substr(1,1)&&e&&e.cwd&&(t="".concat(e.cwd(),"/").concat(t)),u.graph.loadFile(t,function(e,t){return e?r(e):(t.baseDir=o.baseDir,o.createNetwork(t,r))}))}},{key:"createNetwork",value:function(e,t){var r=this;return this.description=e.properties.description||"",this.icon=e.properties.icon||this.icon,e.name||(e.name=this.nodeId),e.componentLoader=this.loader,u.createNetwork(e,function(e,n){return r.network=n,e?t(e):(r.emit("network",r.network),r.subscribeNetwork(r.network),r.network.connect(function(e){var n,o,i;if(e)return t(e);for(n in i=r.network.processes)o=i[n],r.findEdgePorts(n,o);return r.setToReady(),t()}))},!0)}},{key:"subscribeNetwork",value:function(e){var t,r=this;return t=[],this.network.on("start",function(){var e;return e={},t.push(e),r.activate(e)}),this.network.on("end",function(){var e;if(e=t.pop())return r.deactivate(e)})}},{key:"isExportedInport",value:function(e,t,r){var n,o,i;for(o in i=this.network.graph.inports)if((n=i[o]).process===t&&n.port===r)return o;return!1}},{key:"isExportedOutport",value:function(e,t,r){var n,o,i;for(o in i=this.network.graph.outports)if((n=i[o]).process===t&&n.port===r)return o;return!1}},{key:"setToReady",value:function(){var t=this;return void 0!==e&&e.execPath&&-1!==e.execPath.indexOf("node")?e.nextTick(function(){return t.ready=!0,t.emit("ready")}):setTimeout(function(){return t.ready=!0,t.emit("ready")},0)}},{key:"findEdgePorts",value:function(e,t){var r,n,o,i,s,a=this;for(i in r=t.component.inPorts.ports,n=t.component.outPorts.ports,r)o=r[i],!1!==(s=this.isExportedInport(o,e,i))&&(this.inPorts.add(s,o),this.inPorts[s].on("connect",function(){if(!a.starting&&!a.network.isStarted()){if(!a.network.startupDate)return a.setUp(function(){});a.network.setStarted(!0)}}));for(i in n)o=n[i],!1!==(s=this.isExportedOutport(o,e,i))&&this.outPorts.add(s,o);return!0}},{key:"isReady",value:function(){return this.ready}},{key:"isSubgraph",value:function(){return!0}},{key:"isLegacy",value:function(){return!1}},{key:"setUp",value:function(e){var t=this;if(this.starting=!0,this.isReady())return this.network?this.network.start(function(r){return r?e(r):(t.starting=!1,e())}):e(null);this.once("ready",function(){return t.setUp(e)})}},{key:"tearDown",value:function(e){return this.starting=!1,this.network?this.network.stop(function(t){return t?e(t):e()}):e(null)}}])&&o(c.prototype,p),l&&o(c,l),r}(),t.getComponent=function(e){return new c(e)}}).call(this,r(2))},function(e,t,r){const n=r(391);e.exports=(e,t)=>{const r=document.querySelectorAll("noflo-polymer");return[].forEach.call(r,t=>{((e,t)=>{const r=t.getAttribute("name"),o=t.getAttribute("inports");let i=[];o&&(i=o.split(" "));const s=t.getAttribute("outports");let a=[];s&&(a=s.split(" "));const c=n(r,i,a);e.registerComponent("polymer",r,c)})(e,t)}),t(null)}},function(e,t,r){const n=r(0);e.exports=(e,t,r)=>{return()=>{const o=new n.Component;return o.inPorts.add("selector",{datatype:"string",description:"DOM selector for getting the element"}),o.inPorts.add("element",{datatype:"object",description:"Existing Polymer element instance"}),o.inPorts.add("event",{datatype:"string",description:"Fire an event on polymer element"}),o.outPorts.add("element",{datatype:"object"}),o.outPorts.add("error",{datatype:"object"}),t.forEach(e=>{o.inPorts.add(e,{datatype:"all"})}),r.forEach(e=>{o.outPorts.add(e,{datatype:"all"})}),o.setUp=e=>{o.element=null,o.ctx=null,o.eventHandlers={},e()},o.tearDown=t=>{o.element&&(r.forEach(t=>{"element"!==e&&o.eventHandlers[t]&&o.element.removeEventListener(t,o.eventHandlers[t],!1)}),o.originalFire&&(o.element.fire=o.originalFire,delete o.originalFire),o.element=null,o.eventHandlers={}),o.ctx&&(o.ctx.deactivate(),o.ctx=null),t()},o.bindToElement=(t,n,i)=>{"object"==typeof t?t.tagName===e.toUpperCase()?o.element?n.done(new Error(`${o.nodeId} is already bound to an element. Rebinding not allowed`)):(o.element=t,o.ctx=i,n.send({element:t}),r.forEach(e=>{if("element"!==e){if("event"===e){return o.originalFire=t.fire.bind(t),void(t.fire=(e,t,i)=>{if(-1!==r.indexOf(e))return void o.originalFire(e,t,i);if(-1!==e.indexOf("-changed"))return void o.originalFire(e,t,i);const s=t&&t.value?t.value:t;n.send({event:{action:e,payload:s}}),o.originalFire(e,t,i)})}o.eventHandlers[e]=t=>{const r={};r[e]=t.detail,n.send(r)},t.addEventListener(e,o.eventHandlers[e],!1)}}),o.element.fire("noflo:ready",!0)):n.done(new Error(`${o.nodeId} received a ${t.tagName} element instead of ${e.toUpperCase()}`)):n.done(new Error(`${o.nodeId} received an element that is not an object`))},o.process((e,r,n)=>{if(e.hasData("element")){const t=e.getData("element");return void o.bindToElement(t,r,n)}if(e.hasData("selector")){const t=e.getData("selector"),i=document.querySelector(t);return i?void o.bindToElement(i,r,n):void r.done(new Error(`No element matching '${t}' found`))}if(!o.element)return;let i=!1;if(e.hasData("event")){i=!0;const t=e.getData("event");o.element.fire(e.getData(t))}t.forEach(t=>{if(e.hasData(t)){if("function"==typeof o.element[t])return i=!0,void o.element[t](e.getData(t));if(Array.isArray(o.element[t])){if(!e.hasStream(t))return;i=!0;const r=e.getStream(t).filter(e=>"data"===e.type).map(e=>e.data);o.element[t]=r}else i=!0,o.element[t]=e.getData(t)}}),i&&r.done()}),o}}},function(e,t,r){"use strict";e.exports=function(e){function t(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){var r;function s(){if(s.enabled){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var i=s,a=Number(new Date),c=a-(r||a);i.diff=c,i.prev=r,i.curr=a,r=a,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,r){if("%%"===e)return e;u++;var o=n.formatters[r];if("function"==typeof o){var s=t[u];e=o.call(i,s),t.splice(u,1),u--}return e}),n.formatArgs.call(i,t),(i.log||n.log).apply(i,t)}}return s.namespace=e,s.enabled=n.enabled(e),s.useColors=n.useColors(),s.color=t(e),s.destroy=o,s.extend=i,"function"==typeof n.init&&n.init(s),n.instances.push(s),s}function o(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function i(e,t){return n(this.namespace+(void 0===t?":":t)+e)}return n.debug=n,n.default=n,n.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},n.disable=function(){n.enable("")},n.enable=function(e){var t;n.save(e),n.names=[],n.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(t=0;t<o;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var i=n.instances[t];i.enabled=n.enabled(i.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=r(60),Object.keys(e).forEach(function(t){n[t]=e[t]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}},function(e,t,r){(function(e){var n,o,i,s,a,c,u,p,l,h,d,f,m,g,y,v,b,w,E,x,C={}.hasOwnProperty;o=r(55),n=r(25),f=r(56),x=r(133),u=r(62)("noflo:helpers"),t.WirePattern=function(t,r,n){var o,s,a;if(o="in"in r?r.in:"in",x.isArray(o)||(o=[o]),s="out"in r?r.out:"out",x.isArray(s)||(s=[s]),"error"in r||(r.error="error"),"async"in r||(r.async=!1),"ordered"in r||(r.ordered=!0),"group"in r||(r.group=!1),"field"in r||(r.field=null),"forwardGroups"in r||(r.forwardGroups=!1),r.forwardGroups&&("string"==typeof r.forwardGroups&&(r.forwardGroups=[r.forwardGroups]),"boolean"==typeof r.forwardGroups&&(r.forwardGroups=o)),"receiveStreams"in r||(r.receiveStreams=!1),r.receiveStreams)throw new Error("WirePattern receiveStreams is deprecated");if("sendStreams"in r||(r.sendStreams=!1),r.sendStreams)throw new Error("WirePattern sendStreams is deprecated");return r.async&&(r.sendStreams=s),"params"in r||(r.params=[]),"string"==typeof r.params&&(r.params=[r.params]),"name"in r||(r.name=""),"dropInput"in r||(r.dropInput=!1),"arrayPolicy"in r||(r.arrayPolicy={in:"any",params:"all"}),r.inPorts=o,r.outPorts=s,i(r,n),(r.legacy||(null!=e&&null!=(a=e.env)?a.NOFLO_WIREPATTERN_LEGACY:void 0))&&f.deprecated("noflo.helpers.WirePattern legacy mode is deprecated"),g(t,r,n)},g=function(e,t,r){return b(e,t),E(e),v(e,t),e.ordered=t.ordered,e.process(function(n,o,i){var a,c,d,f,g,y;if(s(t,n,o))return e.params=m(t,n),a=l(t,n),d=p(e,t.inPorts[0],n),f=h(t.outPorts,o),u("WirePattern Process API call with",a,d,e.params,i.scope),g=function(){throw new Error("noflo.helpers.WirePattern postpone is deprecated")},y=function(){throw new Error("noflo.helpers.WirePattern resume is deprecated")},c=w(e,t,o),r.call(e,a,d,f,function(e){return c(),o.done(e)},g,y,n.scope)})},i=function(e,t){if(e.group&&f.deprecated("noflo.helpers.WirePattern group option is deprecated. Please port to Process API"),e.field&&f.deprecated("noflo.helpers.WirePattern field option is deprecated. Please port to Process API"),t.length>4&&f.deprecated("noflo.helpers.WirePattern postpone and resume are deprecated. Please port to Process API"),!e.async)throw new Error("noflo.helpers.WirePattern synchronous is deprecated. Please use async: true");if(t.length<4)throw new Error("noflo.helpers.WirePattern callback doesn't use callback argument");"error"!==e.error&&f.deprecated('noflo.helpers.WirePattern custom error port name is deprecated. Please switch to "error" or port to WirePattern')},b=function(e,t){var r,n,o,i,s;for(s=[],r=0,n=(i=t.params).length;r<n;r++)o=i[r],s.push(e.inPorts[o].options.control=!0);return s},v=function(e,t){var r,n,o,i,s,a,c,u;if(e.forwardBrackets={},t.forwardGroups)for(o=t.inPorts,x.isArray(t.forwardGroups)&&(o=t.forwardGroups),r=0,s=o.length;r<s;r++){for(n=o[r],e.forwardBrackets[n]=[],i=0,a=(u=t.outPorts).length;i<a;i++)c=u[i],e.forwardBrackets[n].push(c);e.outPorts.error&&e.forwardBrackets[n].push("error")}},w=function(e,t,r){var o,i,s,a;return i=[],o=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return f.deprecated("noflo.helpers.WirePattern error method is deprecated. Please send error to callback instead"),i.push({err:t,groups:r}),e.hasErrors=!0},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return f.deprecated("noflo.helpers.WirePattern fail method is deprecated. Please send error to callback instead"),e&&o(e,t),a(),r.done()},a=function(){if(i.length)return t.name&&r.sendIP("error",new n("openBracket",t.name)),i.forEach(function(e){var t,o,i,s,a,c,u,p;for(o=0,s=(c=e.groups).length;o<s;o++)t=c[o],r.sendIP("error",new n("openBracket",t));for(r.sendIP("error",new n("data",e.err)),p=[],i=0,a=(u=e.groups).length;i<a;i++)t=u[i],p.push(r.sendIP("error",new n("closeBracket",t)));return p}),t.name&&r.sendIP("error",new n("closeBracket",t.name)),e.hasErrors=!1,i=[]},e.hasErrors=!1,e.error=o,e.fail=s,a},E=function(e){var t;return t=Object.keys(e.inPorts.ports).filter(function(t){return!!e.inPorts[t].options.control&&!!e.inPorts[t].hasDefault()}),e.sendDefaults=function(){return f.deprecated("noflo.helpers.WirePattern sendDefaults method is deprecated. Please start with a Network"),t.forEach(function(t){var r;return r=o.createSocket(),e.inPorts[t].attach(r),r.send(),r.disconnect(),e.inPorts[t].detach(r)})}},m=function(e,t){var r,n,o,i,s,a,c,u,p;if(!e.params.length)return{};for(c={},r=0,i=(u=e.params).length;r<i;r++)if(a=u[r],t.ports[a].isAddressable())for(c[a]={},o=0,s=(p=t.attached(a)).length;o<s;o++)n=p[o],t.hasData([a,n])&&(c[a][n]=t.getData([a,n]));else c[a]=t.getData(a);return c},y=function(e,t){var r,n,o,i,s,a,c,u,p,l,h;for(p=null,r=[],l=[],o=n=0,a=e.length;n<a;o=++n)if("openBracket"!==(i=e[o]).type){if("closeBracket"!==i.type)t(i,r)?(p=l.slice(0)).push(i):l=[];else if(r.pop(),p&&p.push(i),l.length&&l.pop(),p&&!l.length)break}else r.push(i.data),l.push(i);if(0!==(h=e.indexOf(p[0]))){for(e.splice(h,p.length),p.reverse(),u=[],s=0,c=p.length;s<c;s++)i=p[s],u.push(e.unshift(i));return u}},d=function(e,t,r,n,o){var i;if(t.group||t.field)return t.group&&(i=r.ports[n].getBuffer(r.scope,o),y(i,function(e,t){var n,i,s,a;for(a=r.collatedBy.brackets,o=i=0,s=a.length;i<s;o=++i)if(n=a[o],t[o]!==n)return!1;return!0})),t.field?(e[t.field]=r.collatedBy.field,i=r.ports[n].getBuffer(r.scope,o),y(i,function(r){return r.data[t.field]===e[t.field]})):void 0},l=function(e,t){var r,n,o,i,s,a,c,u,p;for(r={},n=0,s=(u=e.inPorts).length;n<s;n++)if(c=u[n],t.ports[c].isAddressable())for(r[c]={},i=0,a=(p=t.attached(c)).length;i<a;i++)o=p[i],t.hasData([c,o])&&(d(r,e,t,c,o),r[c][o]=t.getData([c,o]));else t.hasData(c)&&(d(r,e,t,c),r[c]=t.getData(c));return 1===e.inPorts.length?r[e.inPorts[0]]:r},p=function(e,t,r){var n,o;return null==(null!=(n=r.result.__bracketContext)?n[t]:void 0)?[]:(null!=(o=r.collatedBy)?o.brackets:void 0)?r.collatedBy.brackets:r.result.__bracketContext[t].filter(function(e){return e.source===t}).map(function(e){return e.ip.data})},h=function(e,t){var r;return r={},e.forEach(function(e){return r[e]={connect:function(){},beginGroup:function(r,o){var i;return(i=new n("openBracket",r)).index=o,t.sendIP(e,i)},send:function(r,o){var i;return(i=new n("data",r)).index=o,t.sendIP(e,i)},endGroup:function(r,o){var i;return(i=new n("closeBracket",r)).index=o,t.sendIP(e,i)},disconnect:function(){}}}),1===e.length?r[e[0]]:r},s=function(e,t,r){var n,o,i,s,u,p,l,h,d,f,m;if(d=c(e,t),s=a(e,t),e.dropInput&&!d){for(h=!1,o=0,p=(m=e.inPorts).length;o<p;o++)if(f=m[o],t.ports[f].isAddressable()){if(!(n=t.attached(f)).length)continue;for(u=0,l=n.length;u<l;u++)for(i=n[u];t.has([f,i]);)h=!0,t.get([f,i]).drop()}else for(;t.has(f);)h=!0,t.get(f).drop();h&&r.done()}return s&&d},c=function(e,t){var r,n,o,i,s,a;for(n=0,o=(s=e.params).length;n<o;n++)if(i=s[n],t.ports[i].isRequired())if(t.ports[i].isAddressable()){if(!(r=t.attached(i)).length)return!1;if(a=r.filter(function(e){return t.hasData([i,e])}),"all"===e.arrayPolicy.params){if(a.length!==r.length)return!1;continue}if(!a.length)return!1}else if(!t.hasData(i))return!1;return!0},a=function(e,t){var r,n,o,i,s,a,c,u,p,l;for(e.group&&(n={},t.collatedBy={brackets:[],ready:!1},o=function(e,t){var r,n,o,i;for(o=n=0,i=e.length;n<i;o=++n)if(r=e[o],t[o]!==r)return!1;return!0},i=function(r,i){var s,a;if(a=i.slice(0),e.group instanceof RegExp){if(!(a=a.slice(0,1)).length)return!1;if(!e.group.test(a[0]))return!1}return t.collatedBy.ready?o(t.collatedBy.brackets,a):(s=a.join(":"),n[s]||(n[s]=[]),-1===n[s].indexOf(u)&&n[s].push(u),e.inPorts.indexOf(u)!==e.inPorts.length-1||n[s].length===e.inPorts.length&&(!t.collatedBy.ready&&(t.collatedBy.ready=!0,t.collatedBy.brackets=a,!0)))}),e.field&&(t.collatedBy={field:void 0,ready:!1}),s=function(r){var n,o,s,a,c,u,p;if(!e.group&&!e.field)return t.hasData(r);if(e.group){for(p=[],[],s=!1,a=0,u=(n=t.ports[r].getBuffer(t.scope)).length;a<u;a++)if("openBracket"!==(c=n[a]).type)if("closeBracket"!==c.type)o=i(c,p);else{if(p.pop(),p.length)continue;if(!o)continue;s=!0}else p.push(c.data);return s}return e.field?t.hasStream(r,function(r){return t.collatedBy.ready?r.data[e.field]===t.collatedBy.field:(t.collatedBy.field=r.data[e.field],t.collatedBy.ready=!0,!0)}):void 0},a=0,c=(p=e.inPorts).length;a<c;a++)if(u=p[a],t.ports[u].isAddressable()){if(!(r=t.attached(u)).length)return!1;if(l=r.filter(function(e){return s([u,e])}),"all"===e.arrayPolicy.in){if(l.length!==r.length)return!1;continue}if(!l.length)return!1}else if(!s(u))return!1;return!0},t.CustomError=function(e,r){var n;return n=new Error(e),t.CustomizeError(n,r)},t.CustomizeError=function(e,t){var r,n;for(r in t)C.call(t,r)&&(n=t[r],e[r]=n);return e}}).call(this,r(2))},function(e,t,r){(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,i,s,a,c,u,p,l,h,d,f,m;o=r(79).ComponentLoader,a=r(114).Network,s=r(25),u=r(55),i=r(33).Graph,p=function(t,r){return t||(t={}),t.name||(t.name=r),t.loader&&(t.baseDir=t.loader.baseDir),!t.baseDir&&e&&e.cwd&&(t.baseDir=e.cwd()),t.loader||(t.loader=new o(t.baseDir)),t.raw||(t.raw=!1),t},d=function(e,t,r){var o;return"object"===n(e)?(e.componentLoader=t.loader,void(o=new a(e,t)).connect(function(e){return e?r(e):r(null,o)})):t.loader.load(e,function(n,s){var c,u,p,l,h;if(n)return r(n);for(h in c=new i(t.name),p=t.name,c.addNode(p,e),u=s.inPorts.ports,l=s.outPorts.ports,u)u[h],c.addInport(h,p,h);for(h in l)l[h],c.addOutport(h,p,h);return c.componentLoader=t.loader,(o=new a(c,t)).connect(function(e){return e?r(e):r(null,o)})})},f=function(e,t,r,n){var o,i,a,c;return Object.keys(e.graph.inports),o={},c=[],i=Object.keys(e.graph.outports),a={},i.forEach(function(t){var r,n;return r=e.graph.outports[t],n=e.getNode(r.process),a[t]=u.createSocket(),n.component.outPorts[r.port].attach(a[t]),a[t].from={process:n,port:r.port},a[t].on("ip",function(e){var r;return(r={})[t]=e,c.push(r)})}),e.once("end",function(){var e,t;for(e in a)(t=a[e]).from.process.component.outPorts[t.from.port].detach(t);return a={},o={},n(null,c)}),e.start(function(r){var i,a,c,p,l,h,d,f;if(r)return n(r);for(d=[],i=0,c=t.length;i<c;i++)a=t[i],d.push(function(){var t;for(p in t=[],a)f=a[p],o[p]||(l=e.graph.inports[p],h=e.getNode(l.process),o[p]=u.createSocket(),h.component.inPorts[l.port].attach(o[p])),s.isIP(f)?o[p].post(f):t.push(o[p].post(new s("data",f)));return t}());return d})},c=function(e,t){var r;if("object"!==n(e))return"simple";if(Array.isArray(e))return e.filter(function(e){return"map"===c(e,t)}).length===e.length?"sequence":"simple";if(!Object.keys(e).length)return"simple";for(r in e)if(e[r],!t.graph.inports[r])return"simple";return"map"},h=function(e,t,r){var n,o;return"sequence"===t?e:"map"===t?[e]:(n=Object.keys(r.graph.inports)[0],r.graph.inports.in&&(n="in"),(o={})[n]=e,[o])},l=function(e,t){var r,n,o,i,s,a;if(t.raw)return e;for(s=null,r=a=[],n=0,o=e.length;n<o;n++)"openBracket"===(i=e[n]).type&&(s=r,r=[],s.push(r)),"data"===i.type&&r.push(i.data),"closeBracket"===i.type&&(r=s);return 1===a.length?a[0]:a},m=function(e,t,r,n){var o,i,s,a,c,u,p,h,d,f,m;if((o=e.filter(function(e){return null!=e.error}).map(function(e){return e.error})).length)return n(l(o,r));if("sequence"===t)return n(null,e.map(function(e){var t,n,o;for(t in n={},e)o=e[t],r.raw?n[t]=o:n[t]=l([o],r);return n}));for(u={},i=0,a=e.length;i<a;i++)for(s in c=e[i])f=c[s],u[s]||(u[s]=[]),u[s].push(f);if(0===(m=Object.keys(u).filter(function(e){return u[e].length>0})).length)return n(null);if(1===m.length&&"simple"===t)return n(null,l(u[m[0]],r));for(h in d={},u)p=u[h],d[h]=l(p,r);return n(null,d)},t.asCallback=function(e,t){return t=p(t,e),function(r,n){return d(e,t,function(e,o){var i,s;return e?n(e):(s=c(r,o),i=h(r,s,o),f(o,i,0,function(e,r){return e?n(e):m(r,s,t,n)}))})}}}).call(this,r(2))},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,i;i=r(396);var s=r(134);o=s.Component,t.asComponent=function(e,t){var r,s,a,c,u,p,l;for(s=!1,p=i(e).filter(function(e){return"callback"!==e.param||(s=!0,!1)}),r=new o(t),a=0,c=p.length;a<c;a++)l={required:!0},void 0!==(u=p[a]).default&&(l.default=u.default,l.required=!1),r.inPorts.add(u.param,l),r.forwardBrackets[u.param]=["out","error"];return p.length||r.inPorts.add("in",{datatype:"bang"}),r.outPorts.add("out"),r.outPorts.add("error"),r.process(function(t,r){var o,i,a,c;if(p.length){for(o=0,i=p.length;o<i;o++)if(u=p[o],!t.hasData(u.param))return;c=p.map(function(e){return t.getData(e.param)})}else{if(!t.hasData("in"))return;t.getData("in"),c=[]}return s?(c.push(function(e,t){return e?r.done(e):r.sendDone(t)}),void(a=e.apply(null,c))):(a=e.apply(null,c))&&"object"===n(a)&&"function"==typeof a.then?void a.then(function(e){return r.sendDone(e)},function(e){return r.done(e)}):r.sendDone(a)}),r}},function(e,t,r){var n=r(139),o=r(397),i=r(398),s=r(399);e.exports=function(e){var t=[],r=e.toString().replace(/\/\*.*?\*\//g,"");r=o(t,r);var a=i(t,r,n.prePatterns).replace(/\n/g,"").replace(/\s*async\s*/,"").match(/(?:function\s*\((.*?)\)|\((.*?)\))|(.*?)\s*=>/);return a=a[1]||a[2]||a[3]||"",i(t,a,n.postPatterns).split(",").filter(function(e){return e}).map(function(e){var r=(e=s(t,e,!0)).split("="),n={param:r[0].trim()};return r[1]&&(n.default=s(t,r.slice(1).join("="))),n})}},function(e,t,r){var n=r(139).stringPatterns,o=r(85);e.exports=function(e,t){for(;;){var r=n.reduce(function(e,r){return e.concat(t.match(r)||[])},[]).sort(function(e,t){return e.length-t.length})[0];if(!r)return t;t=t.replace(r,o(e.push(r)))}}},function(e,t,r){var n=r(85);e.exports=function(e,t,r){return r.forEach(function(r){for(;r.test(t);){var o=r.exec(t)[0];t=t.replace(o,n(e.push(o)))}}),t}},function(module,exports,__webpack_require__){var delim=__webpack_require__(85);module.exports=function(cache,string,skipEval){for(var pattern=/:~:(\d+?):~:/;pattern.test(string);){var id=pattern.exec(string)[1];string=string.replace(delim(id),cache[id-1])}return skipEval?string:eval("("+string+")")}},function(e,t,r){(function(e,r){var n;!function(){var o="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this||{},i=o._,s=Array.prototype,a=Object.prototype,c="undefined"!=typeof Symbol?Symbol.prototype:null,u=s.push,p=s.slice,l=a.toString,h=a.hasOwnProperty,d=Array.isArray,f=Object.keys,m=Object.create,g=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};t.nodeType?o._=y:(!r.nodeType&&r.exports&&(t=r.exports=y),t._=y),y.VERSION="1.9.1";var v,b=function(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,o){return e.call(t,r,n,o)};case 4:return function(r,n,o,i){return e.call(t,r,n,o,i)}}return function(){return e.apply(t,arguments)}},w=function(e,t,r){return y.iteratee!==v?y.iteratee(e,t):null==e?y.identity:y.isFunction(e)?b(e,t,r):y.isObject(e)&&!y.isArray(e)?y.matcher(e):y.property(e)};y.iteratee=v=function(e,t){return w(e,t,1/0)};var E=function(e,t){return t=null==t?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),o=0;o<r;o++)n[o]=arguments[o+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var i=Array(t+1);for(o=0;o<t;o++)i[o]=arguments[o];return i[t]=n,e.apply(this,i)}},x=function(e){if(!y.isObject(e))return{};if(m)return m(e);g.prototype=e;var t=new g;return g.prototype=null,t},C=function(e){return function(t){return null==t?void 0:t[e]}},S=function(e,t){return null!=e&&h.call(e,t)},k=function(e,t){for(var r=t.length,n=0;n<r;n++){if(null==e)return;e=e[t[n]]}return r?e:void 0},P=Math.pow(2,53)-1,_=C("length"),A=function(e){var t=_(e);return"number"==typeof t&&t>=0&&t<=P};y.each=y.forEach=function(e,t,r){var n,o;if(t=b(t,r),A(e))for(n=0,o=e.length;n<o;n++)t(e[n],n,e);else{var i=y.keys(e);for(n=0,o=i.length;n<o;n++)t(e[i[n]],i[n],e)}return e},y.map=y.collect=function(e,t,r){t=w(t,r);for(var n=!A(e)&&y.keys(e),o=(n||e).length,i=Array(o),s=0;s<o;s++){var a=n?n[s]:s;i[s]=t(e[a],a,e)}return i};var D=function(e){var t=function(t,r,n,o){var i=!A(t)&&y.keys(t),s=(i||t).length,a=e>0?0:s-1;for(o||(n=t[i?i[a]:a],a+=e);a>=0&&a<s;a+=e){var c=i?i[a]:a;n=r(n,t[c],c,t)}return n};return function(e,r,n,o){var i=arguments.length>=3;return t(e,b(r,o,4),n,i)}};y.reduce=y.foldl=y.inject=D(1),y.reduceRight=y.foldr=D(-1),y.find=y.detect=function(e,t,r){var n=(A(e)?y.findIndex:y.findKey)(e,t,r);if(void 0!==n&&-1!==n)return e[n]},y.filter=y.select=function(e,t,r){var n=[];return t=w(t,r),y.each(e,function(e,r,o){t(e,r,o)&&n.push(e)}),n},y.reject=function(e,t,r){return y.filter(e,y.negate(w(t)),r)},y.every=y.all=function(e,t,r){t=w(t,r);for(var n=!A(e)&&y.keys(e),o=(n||e).length,i=0;i<o;i++){var s=n?n[i]:i;if(!t(e[s],s,e))return!1}return!0},y.some=y.any=function(e,t,r){t=w(t,r);for(var n=!A(e)&&y.keys(e),o=(n||e).length,i=0;i<o;i++){var s=n?n[i]:i;if(t(e[s],s,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,r,n){return A(e)||(e=y.values(e)),("number"!=typeof r||n)&&(r=0),y.indexOf(e,t,r)>=0},y.invoke=E(function(e,t,r){var n,o;return y.isFunction(t)?o=t:y.isArray(t)&&(n=t.slice(0,-1),t=t[t.length-1]),y.map(e,function(e){var i=o;if(!i){if(n&&n.length&&(e=k(e,n)),null==e)return;i=e[t]}return null==i?i:i.apply(e,r)})}),y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,r){var n,o,i=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=A(e)?e:y.values(e)).length;a<c;a++)null!=(n=e[a])&&n>i&&(i=n);else t=w(t,r),y.each(e,function(e,r,n){((o=t(e,r,n))>s||o===-1/0&&i===-1/0)&&(i=e,s=o)});return i},y.min=function(e,t,r){var n,o,i=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=A(e)?e:y.values(e)).length;a<c;a++)null!=(n=e[a])&&n<i&&(i=n);else t=w(t,r),y.each(e,function(e,r,n){((o=t(e,r,n))<s||o===1/0&&i===1/0)&&(i=e,s=o)});return i},y.shuffle=function(e){return y.sample(e,1/0)},y.sample=function(e,t,r){if(null==t||r)return A(e)||(e=y.values(e)),e[y.random(e.length-1)];var n=A(e)?y.clone(e):y.values(e),o=_(n);t=Math.max(Math.min(t,o),0);for(var i=o-1,s=0;s<t;s++){var a=y.random(s,i),c=n[s];n[s]=n[a],n[a]=c}return n.slice(0,t)},y.sortBy=function(e,t,r){var n=0;return t=w(t,r),y.pluck(y.map(e,function(e,r,o){return{value:e,index:n++,criteria:t(e,r,o)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index}),"value")};var O=function(e,t){return function(r,n,o){var i=t?[[],[]]:{};return n=w(n,o),y.each(r,function(t,o){var s=n(t,o,r);e(i,t,s)}),i}};y.groupBy=O(function(e,t,r){S(e,r)?e[r].push(t):e[r]=[t]}),y.indexBy=O(function(e,t,r){e[r]=t}),y.countBy=O(function(e,t,r){S(e,r)?e[r]++:e[r]=1});var T=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;y.toArray=function(e){return e?y.isArray(e)?p.call(e):y.isString(e)?e.match(T):A(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:A(e)?e.length:y.keys(e).length},y.partition=O(function(e,t,r){e[r?0:1].push(t)},!0),y.first=y.head=y.take=function(e,t,r){return null==e||e.length<1?null==t?void 0:[]:null==t||r?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,r){return p.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))},y.last=function(e,t,r){return null==e||e.length<1?null==t?void 0:[]:null==t||r?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,r){return p.call(e,null==t||r?1:t)},y.compact=function(e){return y.filter(e,Boolean)};var N=function(e,t,r,n){for(var o=(n=n||[]).length,i=0,s=_(e);i<s;i++){var a=e[i];if(A(a)&&(y.isArray(a)||y.isArguments(a)))if(t)for(var c=0,u=a.length;c<u;)n[o++]=a[c++];else N(a,t,r,n),o=n.length;else r||(n[o++]=a)}return n};y.flatten=function(e,t){return N(e,t,!1)},y.without=E(function(e,t){return y.difference(e,t)}),y.uniq=y.unique=function(e,t,r,n){y.isBoolean(t)||(n=r,r=t,t=!1),null!=r&&(r=w(r,n));for(var o=[],i=[],s=0,a=_(e);s<a;s++){var c=e[s],u=r?r(c,s,e):c;t&&!r?(s&&i===u||o.push(c),i=u):r?y.contains(i,u)||(i.push(u),o.push(c)):y.contains(o,c)||o.push(c)}return o},y.union=E(function(e){return y.uniq(N(e,!0,!0))}),y.intersection=function(e){for(var t=[],r=arguments.length,n=0,o=_(e);n<o;n++){var i=e[n];if(!y.contains(t,i)){var s;for(s=1;s<r&&y.contains(arguments[s],i);s++);s===r&&t.push(i)}}return t},y.difference=E(function(e,t){return t=N(t,!0,!0),y.filter(e,function(e){return!y.contains(t,e)})}),y.unzip=function(e){for(var t=e&&y.max(e,_).length||0,r=Array(t),n=0;n<t;n++)r[n]=y.pluck(e,n);return r},y.zip=E(y.unzip),y.object=function(e,t){for(var r={},n=0,o=_(e);n<o;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r};var I=function(e){return function(t,r,n){r=w(r,n);for(var o=_(t),i=e>0?0:o-1;i>=0&&i<o;i+=e)if(r(t[i],i,t))return i;return-1}};y.findIndex=I(1),y.findLastIndex=I(-1),y.sortedIndex=function(e,t,r,n){for(var o=(r=w(r,n,1))(t),i=0,s=_(e);i<s;){var a=Math.floor((i+s)/2);r(e[a])<o?i=a+1:s=a}return i};var R=function(e,t,r){return function(n,o,i){var s=0,a=_(n);if("number"==typeof i)e>0?s=i>=0?i:Math.max(i+a,s):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return n[i=r(n,o)]===o?i:-1;if(o!=o)return(i=t(p.call(n,s,a),y.isNaN))>=0?i+s:-1;for(i=e>0?s:a-1;i>=0&&i<a;i+=e)if(n[i]===o)return i;return-1}};y.indexOf=R(1,y.findIndex,y.sortedIndex),y.lastIndexOf=R(-1,y.findLastIndex),y.range=function(e,t,r){null==t&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/r),0),o=Array(n),i=0;i<n;i++,e+=r)o[i]=e;return o},y.chunk=function(e,t){if(null==t||t<1)return[];for(var r=[],n=0,o=e.length;n<o;)r.push(p.call(e,n,n+=t));return r};var j=function(e,t,r,n,o){if(!(n instanceof t))return e.apply(r,o);var i=x(e.prototype),s=e.apply(i,o);return y.isObject(s)?s:i};y.bind=E(function(e,t,r){if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var n=E(function(o){return j(e,n,t,this,r.concat(o))});return n}),y.partial=E(function(e,t){var r=y.partial.placeholder,n=function(){for(var o=0,i=t.length,s=Array(i),a=0;a<i;a++)s[a]=t[a]===r?arguments[o++]:t[a];for(;o<arguments.length;)s.push(arguments[o++]);return j(e,n,this,this,s)};return n}),y.partial.placeholder=y,y.bindAll=E(function(e,t){var r=(t=N(t,!1,!1)).length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=t[r];e[n]=y.bind(e[n],e)}}),y.memoize=function(e,t){var r=function(n){var o=r.cache,i=""+(t?t.apply(this,arguments):n);return S(o,i)||(o[i]=e.apply(this,arguments)),o[i]};return r.cache={},r},y.delay=E(function(e,t,r){return setTimeout(function(){return e.apply(null,r)},t)}),y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,r){var n,o,i,s,a=0;r||(r={});var c=function(){a=!1===r.leading?0:y.now(),n=null,s=e.apply(o,i),n||(o=i=null)},u=function(){var u=y.now();a||!1!==r.leading||(a=u);var p=t-(u-a);return o=this,i=arguments,p<=0||p>t?(n&&(clearTimeout(n),n=null),a=u,s=e.apply(o,i),n||(o=i=null)):n||!1===r.trailing||(n=setTimeout(c,p)),s};return u.cancel=function(){clearTimeout(n),a=0,n=o=i=null},u},y.debounce=function(e,t,r){var n,o,i=function(t,r){n=null,r&&(o=e.apply(t,r))},s=E(function(s){if(n&&clearTimeout(n),r){var a=!n;n=setTimeout(i,t),a&&(o=e.apply(this,s))}else n=y.delay(i,t,this,s);return o});return s.cancel=function(){clearTimeout(n),n=null},s},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}},y.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},y.before=function(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}},y.once=y.partial(y.before,2),y.restArguments=E;var F=!{toString:null}.propertyIsEnumerable("toString"),M=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],L=function(e,t){var r=M.length,n=e.constructor,o=y.isFunction(n)&&n.prototype||a,i="constructor";for(S(e,i)&&!y.contains(t,i)&&t.push(i);r--;)(i=M[r])in e&&e[i]!==o[i]&&!y.contains(t,i)&&t.push(i)};y.keys=function(e){if(!y.isObject(e))return[];if(f)return f(e);var t=[];for(var r in e)S(e,r)&&t.push(r);return F&&L(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var r in e)t.push(r);return F&&L(e,t),t},y.values=function(e){for(var t=y.keys(e),r=t.length,n=Array(r),o=0;o<r;o++)n[o]=e[t[o]];return n},y.mapObject=function(e,t,r){t=w(t,r);for(var n=y.keys(e),o=n.length,i={},s=0;s<o;s++){var a=n[s];i[a]=t(e[a],a,e)}return i},y.pairs=function(e){for(var t=y.keys(e),r=t.length,n=Array(r),o=0;o<r;o++)n[o]=[t[o],e[t[o]]];return n},y.invert=function(e){for(var t={},r=y.keys(e),n=0,o=r.length;n<o;n++)t[e[r[n]]]=r[n];return t},y.functions=y.methods=function(e){var t=[];for(var r in e)y.isFunction(e[r])&&t.push(r);return t.sort()};var G=function(e,t){return function(r){var n=arguments.length;if(t&&(r=Object(r)),n<2||null==r)return r;for(var o=1;o<n;o++)for(var i=arguments[o],s=e(i),a=s.length,c=0;c<a;c++){var u=s[c];t&&void 0!==r[u]||(r[u]=i[u])}return r}};y.extend=G(y.allKeys),y.extendOwn=y.assign=G(y.keys),y.findKey=function(e,t,r){t=w(t,r);for(var n,o=y.keys(e),i=0,s=o.length;i<s;i++)if(t(e[n=o[i]],n,e))return n};var B,U,$=function(e,t,r){return t in r};y.pick=E(function(e,t){var r={},n=t[0];if(null==e)return r;y.isFunction(n)?(t.length>1&&(n=b(n,t[1])),t=y.allKeys(e)):(n=$,t=N(t,!1,!1),e=Object(e));for(var o=0,i=t.length;o<i;o++){var s=t[o],a=e[s];n(a,s,e)&&(r[s]=a)}return r}),y.omit=E(function(e,t){var r,n=t[0];return y.isFunction(n)?(n=y.negate(n),t.length>1&&(r=t[1])):(t=y.map(N(t,!1,!1),String),n=function(e,r){return!y.contains(t,r)}),y.pick(e,n,r)}),y.defaults=G(y.allKeys,!0),y.create=function(e,t){var r=x(e);return t&&y.extendOwn(r,t),r},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var r=y.keys(t),n=r.length;if(null==e)return!n;for(var o=Object(e),i=0;i<n;i++){var s=r[i];if(t[s]!==o[s]||!(s in o))return!1}return!0},B=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;return("function"===o||"object"===o||"object"==typeof t)&&U(e,t,r,n)},U=function(e,t,r,n){e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var o=l.call(e);if(o!==l.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return c.valueOf.call(e)===c.valueOf.call(t)}var i="[object Array]"===o;if(!i){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(y.isFunction(s)&&s instanceof s&&y.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[];for(var u=(r=r||[]).length;u--;)if(r[u]===e)return n[u]===t;if(r.push(e),n.push(t),i){if((u=e.length)!==t.length)return!1;for(;u--;)if(!B(e[u],t[u],r,n))return!1}else{var p,h=y.keys(e);if(u=h.length,y.keys(t).length!==u)return!1;for(;u--;)if(p=h[u],!S(t,p)||!B(e[p],t[p],r,n))return!1}return r.pop(),n.pop(),!0},y.isEqual=function(e,t){return B(e,t)},y.isEmpty=function(e){return null==e||(A(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length)},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=d||function(e){return"[object Array]"===l.call(e)},y.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){y["is"+e]=function(t){return l.call(t)==="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return S(e,"callee")});var q=o.document&&o.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof q&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return!y.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&isNaN(e)},y.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===l.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){if(!y.isArray(t))return S(e,t);for(var r=t.length,n=0;n<r;n++){var o=t[n];if(null==e||!h.call(e,o))return!1;e=e[o]}return!!r},y.noConflict=function(){return o._=i,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=function(e){return y.isArray(e)?function(t){return k(t,e)}:C(e)},y.propertyOf=function(e){return null==e?function(){}:function(t){return y.isArray(t)?k(e,t):e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,r){var n=Array(Math.max(0,e));t=b(t,r,1);for(var o=0;o<e;o++)n[o]=t(o);return n},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},H=y.invert(z),V=function(e){var t=function(t){return e[t]},r="(?:"+y.keys(e).join("|")+")",n=RegExp(r),o=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(o,t):e}};y.escape=V(z),y.unescape=V(H),y.result=function(e,t,r){y.isArray(t)||(t=[t]);var n=t.length;if(!n)return y.isFunction(r)?r.call(e):r;for(var o=0;o<n;o++){var i=null==e?void 0:e[t[o]];void 0===i&&(i=r,o=n),e=y.isFunction(i)?i.call(e):i}return e};var X=0;y.uniqueId=function(e){var t=++X+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var W=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Y=/\\|'|\r|\n|\u2028|\u2029/g,K=function(e){return"\\"+J[e]};y.template=function(e,t,r){!t&&r&&(t=r),t=y.defaults({},t,y.templateSettings);var n,o=RegExp([(t.escape||W).source,(t.interpolate||W).source,(t.evaluate||W).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(o,function(t,r,n,o,a){return s+=e.slice(i,a).replace(Y,K),i=a+t.length,r?s+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(t.variable||"obj","_",s)}catch(e){throw e.source=s,e}var a=function(e){return n.call(this,e,y)},c=t.variable||"obj";return a.source="function("+c+"){\n"+s+"}",a},y.chain=function(e){var t=y(e);return t._chain=!0,t};var Q=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){return y.each(y.functions(e),function(t){var r=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),Q(this,r.apply(y,e))}}),y},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];y.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0],Q(this,r)}}),y.each(["concat","join","slice"],function(e){var t=s[e];y.prototype[e]=function(){return Q(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return String(this._wrapped)},void 0===(n=function(){return y}.apply(t,[]))||(r.exports=n)}()}).call(this,r(24),r(118)(e))},function(e,t,r){e.exports=r(402)},function(e,t,r){"use strict";var n;n=function(t){return t=t.replace(".json",""),e.exports.schema[t]},e.exports={runner:r(140),subprocess:r(151),mocha:r(468),testsuite:r(87),schema:r(143),getSchema:n,ui:{}}},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(o.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(404),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(24))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,o,i,s,a,c=1,u={},p=!1,l=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick(function(){f(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){f(e.data)},n=function(e){i.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(o=l.documentElement,n=function(e){var t=l.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):n=function(e){setTimeout(f,0,e)}:(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&f(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),n=function(t){e.postMessage(s+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var o={callback:e,args:t};return u[c]=o,n(c),c++},h.clearImmediate=d}function d(e){delete u[e]}function f(e){if(p)setTimeout(f,0,e);else{var t=u[e];if(t){p=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}(t)}finally{d(e),p=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(24),r(2))},function(e,t,r){"use strict";var n,o,i,s;s=r(33),o=r(45),i=r(16)("fbp-spec:protocol"),n=r(86),t.sendGraph=function(e,r,a){var c;if(!1,!r)return a(new Error("Graph not defined"));(c=r.name||r.properties.id)||(c="fixture."+o.randomString(10)),r.name=c,r instanceof s.Graph?(i("sendgraph",c),n.resolve().then(function(){return e.protocol.graph.send(r,!1)}).then(function(){return c}).nodeify(a)):s.graph.loadJSON(r,function(r,n){return r?a(r):t.sendGraph(e,n,a)})},t.startNetwork=function(e,t,r){i("startnetwork",t),n.resolve().then(function(){return e.protocol.network.start({graph:t})}).nodeify(r)},t.stopNetwork=function(e,t,r){i("stopnetwork",t),n.resolve().then(function(){return e.protocol.network.stop({graph:t})}).nodeify(r)},t.sendPackets=function(e,t,r,o){i("sendpackets",t,r),n.all(Object.keys(r).map(function(n){return e.protocol.runtime.packet({event:"data",port:n,payload:r[n],graph:t})})).nodeify(o)},t.getComponents=function(e,t){i("get components"),n.resolve().then(function(){return e.protocol.component.list()}).then(function(e){var t,r,n,o;for(r={},n=0,o=e.length;n<o;n++)r[(t=e[n]).name]=t;return r}).nodeify(t)},t.getCapabilities=function(e,t){var r,o;if(null!=(r=e.definition)&&null!=(o=r.capabilities)?o.length:void 0)return t(null,r.capabilities);n.resolve().then(function(){return e.protocol.runtime.getruntime()}).then(function(e){return e.capabilities}).nodeify(t)},t.getComponentTests=function(e,t){i("get component tests"),n.resolve().then(function(){return e.protocol.component.list()}).then(function(t){return n.all(t.map(function(t){return e.protocol.component.getsource({name:t.name})}))}).then(function(e){var t,r,n,o;for(o={},t=0,r=e.length;t<r;t++)(n=e[t]).tests&&(o[n.library?n.library+"/"+n.name:n.name]=n.tests);return o}).nodeify(t)}},function(e,t,r){function n(e){var r;function n(){if(n.enabled){var e=n,o=+new Date,i=o-(r||o);e.diff=i,e.prev=r,e.curr=o,r=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;c++;var o=t.formatters[n];if("function"==typeof o){var i=s[c];r=o.call(e,i),s.splice(c,1),c--}return r}),t.formatArgs.call(e,s),(n.log||t.log||console.log.bind(console)).apply(e,s)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),n.destroy=o,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var i=t.instances[r];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(407),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){var r=1e3,n=60*r,o=60*n,i=24*o,s=365.25*i;function a(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var c,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*o;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===u&&!1===isNaN(e))return t.long?a(c=e,i,"day")||a(c,o,"hour")||a(c,n,"minute")||a(c,r,"second")||c+" ms":function(e){if(e>=i)return Math.round(e/i)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){"use strict";var n=r(409);e.exports=n},function(e,t,r){"use strict";var n=r(410),o=r(429);function i(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}e.exports.Type=r(9),e.exports.Schema=r(37),e.exports.FAILSAFE_SCHEMA=r(88),e.exports.JSON_SCHEMA=r(142),e.exports.CORE_SCHEMA=r(141),e.exports.DEFAULT_SAFE_SCHEMA=r(47),e.exports.DEFAULT_FULL_SCHEMA=r(63),e.exports.load=n.load,e.exports.loadAll=n.loadAll,e.exports.safeLoad=n.safeLoad,e.exports.safeLoadAll=n.safeLoadAll,e.exports.dump=o.dump,e.exports.safeDump=o.safeDump,e.exports.YAMLException=r(46),e.exports.MINIMAL_SCHEMA=r(88),e.exports.SAFE_SCHEMA=r(47),e.exports.DEFAULT_SCHEMA=r(63),e.exports.scan=i("scan"),e.exports.parse=i("parse"),e.exports.compose=i("compose"),e.exports.addConstructor=i("addConstructor")},function(e,t,r){"use strict";var n=r(36),o=r(46),i=r(411),s=r(47),a=r(63),c=Object.prototype.hasOwnProperty,u=1,p=2,l=3,h=4,d=1,f=2,m=3,g=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,y=/[\x85\u2028\u2029]/,v=/[,\[\]\{\}]/,b=/^(?:!|!!|![a-z\-]+!)$/i,w=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function E(e){return 10===e||13===e}function x(e){return 9===e||32===e}function C(e){return 9===e||32===e||10===e||13===e}function S(e){return 44===e||91===e||93===e||123===e||125===e}function k(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function P(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e?"\t":9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?"":76===e?"\u2028":80===e?"\u2029":""}function _(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var A=new Array(256),D=new Array(256),O=0;O<256;O++)A[O]=P(O)?1:0,D[O]=P(O);function T(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||a,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function N(e,t){return new o(t,new i(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function I(e,t){throw N(e,t)}function R(e,t){e.onWarning&&e.onWarning.call(null,N(e,t))}var j={YAML:function(e,t,r){var n,o,i;null!==e.version&&I(e,"duplication of %YAML directive"),1!==r.length&&I(e,"YAML directive accepts exactly one argument"),null===(n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]))&&I(e,"ill-formed argument of the YAML directive"),o=parseInt(n[1],10),i=parseInt(n[2],10),1!==o&&I(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=i<2,1!==i&&2!==i&&R(e,"unsupported YAML version of the document")},TAG:function(e,t,r){var n,o;2!==r.length&&I(e,"TAG directive accepts exactly two arguments"),n=r[0],o=r[1],b.test(n)||I(e,"ill-formed tag handle (first argument) of the TAG directive"),c.call(e.tagMap,n)&&I(e,'there is a previously declared suffix for "'+n+'" tag handle'),w.test(o)||I(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[n]=o}};function F(e,t,r,n){var o,i,s,a;if(t<r){if(a=e.input.slice(t,r),n)for(o=0,i=a.length;o<i;o+=1)9===(s=a.charCodeAt(o))||32<=s&&s<=1114111||I(e,"expected valid JSON character");else g.test(a)&&I(e,"the stream contains non-printable characters");e.result+=a}}function M(e,t,r,o){var i,s,a,u;for(n.isObject(r)||I(e,"cannot merge mappings; the provided source object is unacceptable"),a=0,u=(i=Object.keys(r)).length;a<u;a+=1)s=i[a],c.call(t,s)||(t[s]=r[s],o[s]=!0)}function L(e,t,r,n,o,i,s,a){var u,p;if(o=String(o),null===t&&(t={}),"tag:yaml.org,2002:merge"===n)if(Array.isArray(i))for(u=0,p=i.length;u<p;u+=1)M(e,t,i[u],r);else M(e,t,i,r);else e.json||c.call(r,o)||!c.call(t,o)||(e.line=s||e.line,e.position=a||e.position,I(e,"duplicated mapping key")),t[o]=i,delete r[o];return t}function G(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):I(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function B(e,t,r){for(var n=0,o=e.input.charCodeAt(e.position);0!==o;){for(;x(o);)o=e.input.charCodeAt(++e.position);if(t&&35===o)do{o=e.input.charCodeAt(++e.position)}while(10!==o&&13!==o&&0!==o);if(!E(o))break;for(G(e),o=e.input.charCodeAt(e.position),n++,e.lineIndent=0;32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position)}return-1!==r&&0!==n&&e.lineIndent<r&&R(e,"deficient indentation"),n}function U(e){var t,r=e.position;return!(45!==(t=e.input.charCodeAt(r))&&46!==t||t!==e.input.charCodeAt(r+1)||t!==e.input.charCodeAt(r+2)||(r+=3,0!==(t=e.input.charCodeAt(r))&&!C(t)))}function $(e,t){1===t?e.result+=" ":t>1&&(e.result+=n.repeat("\n",t-1))}function q(e,t){var r,n,o=e.tag,i=e.anchor,s=[],a=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=s),n=e.input.charCodeAt(e.position);0!==n&&45===n&&C(e.input.charCodeAt(e.position+1));)if(a=!0,e.position++,B(e,!0,-1)&&e.lineIndent<=t)s.push(null),n=e.input.charCodeAt(e.position);else if(r=e.line,V(e,t,l,!1,!0),s.push(e.result),B(e,!0,-1),n=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&0!==n)I(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!a&&(e.tag=o,e.anchor=i,e.kind="sequence",e.result=s,!0)}function z(e){var t,r,n,o,i=!1,s=!1;if(33!==(o=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&I(e,"duplication of a tag property"),60===(o=e.input.charCodeAt(++e.position))?(i=!0,o=e.input.charCodeAt(++e.position)):33===o?(s=!0,r="!!",o=e.input.charCodeAt(++e.position)):r="!",t=e.position,i){do{o=e.input.charCodeAt(++e.position)}while(0!==o&&62!==o);e.position<e.length?(n=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):I(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==o&&!C(o);)33===o&&(s?I(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(t-1,e.position+1),b.test(r)||I(e,"named tag handle cannot contain such characters"),s=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);n=e.input.slice(t,e.position),v.test(n)&&I(e,"tag suffix cannot contain flow indicator characters")}return n&&!w.test(n)&&I(e,"tag name cannot contain such characters: "+n),i?e.tag=n:c.call(e.tagMap,r)?e.tag=e.tagMap[r]+n:"!"===r?e.tag="!"+n:"!!"===r?e.tag="tag:yaml.org,2002:"+n:I(e,'undeclared tag handle "'+r+'"'),!0}function H(e){var t,r;if(38!==(r=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&I(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!C(r)&&!S(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&I(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function V(e,t,r,o,i){var s,a,g,y,v,b,w,P,O=1,T=!1,N=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=a=g=h===r||l===r,o&&B(e,!0,-1)&&(T=!0,e.lineIndent>t?O=1:e.lineIndent===t?O=0:e.lineIndent<t&&(O=-1)),1===O)for(;z(e)||H(e);)B(e,!0,-1)?(T=!0,g=s,e.lineIndent>t?O=1:e.lineIndent===t?O=0:e.lineIndent<t&&(O=-1)):g=!1;if(g&&(g=T||i),1!==O&&h!==r||(w=u===r||p===r?t:t+1,P=e.position-e.lineStart,1===O?g&&(q(e,P)||function(e,t,r){var n,o,i,s,a,c=e.tag,u=e.anchor,l={},d={},f=null,m=null,g=null,y=!1,v=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=l),a=e.input.charCodeAt(e.position);0!==a;){if(n=e.input.charCodeAt(e.position+1),i=e.line,s=e.position,63!==a&&58!==a||!C(n)){if(!V(e,r,p,!1,!0))break;if(e.line===i){for(a=e.input.charCodeAt(e.position);x(a);)a=e.input.charCodeAt(++e.position);if(58===a)C(a=e.input.charCodeAt(++e.position))||I(e,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(L(e,l,d,f,m,null),f=m=g=null),v=!0,y=!1,o=!1,f=e.tag,m=e.result;else{if(!v)return e.tag=c,e.anchor=u,!0;I(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!v)return e.tag=c,e.anchor=u,!0;I(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===a?(y&&(L(e,l,d,f,m,null),f=m=g=null),v=!0,y=!0,o=!0):y?(y=!1,o=!0):I(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,a=n;if((e.line===i||e.lineIndent>t)&&(V(e,t,h,!0,o)&&(y?m=e.result:g=e.result),y||(L(e,l,d,f,m,g,i,s),f=m=g=null),B(e,!0,-1),a=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==a)I(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return y&&L(e,l,d,f,m,null),v&&(e.tag=c,e.anchor=u,e.kind="mapping",e.result=l),v}(e,P,w))||function(e,t){var r,n,o,i,s,a,c,p,l,h,d=!0,f=e.tag,m=e.anchor,g={};if(91===(h=e.input.charCodeAt(e.position)))o=93,a=!1,n=[];else{if(123!==h)return!1;o=125,a=!0,n={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=n),h=e.input.charCodeAt(++e.position);0!==h;){if(B(e,!0,t),(h=e.input.charCodeAt(e.position))===o)return e.position++,e.tag=f,e.anchor=m,e.kind=a?"mapping":"sequence",e.result=n,!0;d||I(e,"missed comma between flow collection entries"),l=null,i=s=!1,63===h&&C(e.input.charCodeAt(e.position+1))&&(i=s=!0,e.position++,B(e,!0,t)),r=e.line,V(e,t,u,!1,!0),p=e.tag,c=e.result,B(e,!0,t),h=e.input.charCodeAt(e.position),!s&&e.line!==r||58!==h||(i=!0,h=e.input.charCodeAt(++e.position),B(e,!0,t),V(e,t,u,!1,!0),l=e.result),a?L(e,n,g,p,c,l):i?n.push(L(e,null,g,p,c,l)):n.push(c),B(e,!0,t),44===(h=e.input.charCodeAt(e.position))?(d=!0,h=e.input.charCodeAt(++e.position)):d=!1}I(e,"unexpected end of the stream within a flow collection")}(e,w)?N=!0:(a&&function(e,t){var r,o,i,s,a,c=d,u=!1,p=!1,l=t,h=0,g=!1;if(124===(s=e.input.charCodeAt(e.position)))o=!1;else{if(62!==s)return!1;o=!0}for(e.kind="scalar",e.result="";0!==s;)if(43===(s=e.input.charCodeAt(++e.position))||45===s)d===c?c=43===s?m:f:I(e,"repeat of a chomping mode identifier");else{if(!((i=48<=(a=s)&&a<=57?a-48:-1)>=0))break;0===i?I(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):p?I(e,"repeat of an indentation width identifier"):(l=t+i-1,p=!0)}if(x(s)){do{s=e.input.charCodeAt(++e.position)}while(x(s));if(35===s)do{s=e.input.charCodeAt(++e.position)}while(!E(s)&&0!==s)}for(;0!==s;){for(G(e),e.lineIndent=0,s=e.input.charCodeAt(e.position);(!p||e.lineIndent<l)&&32===s;)e.lineIndent++,s=e.input.charCodeAt(++e.position);if(!p&&e.lineIndent>l&&(l=e.lineIndent),E(s))h++;else{if(e.lineIndent<l){c===m?e.result+=n.repeat("\n",u?1+h:h):c===d&&u&&(e.result+="\n");break}for(o?x(s)?(g=!0,e.result+=n.repeat("\n",u?1+h:h)):g?(g=!1,e.result+=n.repeat("\n",h+1)):0===h?u&&(e.result+=" "):e.result+=n.repeat("\n",h):e.result+=n.repeat("\n",u?1+h:h),u=!0,p=!0,h=0,r=e.position;!E(s)&&0!==s;)s=e.input.charCodeAt(++e.position);F(e,r,e.position,!1)}}return!0}(e,w)||function(e,t){var r,n,o;if(39!==(r=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=o=e.position;0!==(r=e.input.charCodeAt(e.position));)if(39===r){if(F(e,n,e.position,!0),39!==(r=e.input.charCodeAt(++e.position)))return!0;n=e.position,e.position++,o=e.position}else E(r)?(F(e,n,o,!0),$(e,B(e,!1,t)),n=o=e.position):e.position===e.lineStart&&U(e)?I(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);I(e,"unexpected end of the stream within a single quoted scalar")}(e,w)||function(e,t){var r,n,o,i,s,a,c;if(34!==(a=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;0!==(a=e.input.charCodeAt(e.position));){if(34===a)return F(e,r,e.position,!0),e.position++,!0;if(92===a){if(F(e,r,e.position,!0),E(a=e.input.charCodeAt(++e.position)))B(e,!1,t);else if(a<256&&A[a])e.result+=D[a],e.position++;else if((s=120===(c=a)?2:117===c?4:85===c?8:0)>0){for(o=s,i=0;o>0;o--)(s=k(a=e.input.charCodeAt(++e.position)))>=0?i=(i<<4)+s:I(e,"expected hexadecimal character");e.result+=_(i),e.position++}else I(e,"unknown escape sequence");r=n=e.position}else E(a)?(F(e,r,n,!0),$(e,B(e,!1,t)),r=n=e.position):e.position===e.lineStart&&U(e)?I(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}I(e,"unexpected end of the stream within a double quoted scalar")}(e,w)?N=!0:!function(e){var t,r,n;if(42!==(n=e.input.charCodeAt(e.position)))return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!C(n)&&!S(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&I(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),e.anchorMap.hasOwnProperty(r)||I(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],B(e,!0,-1),!0}(e)?function(e,t,r){var n,o,i,s,a,c,u,p,l=e.kind,h=e.result;if(C(p=e.input.charCodeAt(e.position))||S(p)||35===p||38===p||42===p||33===p||124===p||62===p||39===p||34===p||37===p||64===p||96===p)return!1;if((63===p||45===p)&&(C(n=e.input.charCodeAt(e.position+1))||r&&S(n)))return!1;for(e.kind="scalar",e.result="",o=i=e.position,s=!1;0!==p;){if(58===p){if(C(n=e.input.charCodeAt(e.position+1))||r&&S(n))break}else if(35===p){if(C(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&U(e)||r&&S(p))break;if(E(p)){if(a=e.line,c=e.lineStart,u=e.lineIndent,B(e,!1,-1),e.lineIndent>=t){s=!0,p=e.input.charCodeAt(e.position);continue}e.position=i,e.line=a,e.lineStart=c,e.lineIndent=u;break}}s&&(F(e,o,i,!1),$(e,e.line-a),o=i=e.position,s=!1),x(p)||(i=e.position+1),p=e.input.charCodeAt(++e.position)}return F(e,o,i,!1),!!e.result||(e.kind=l,e.result=h,!1)}(e,w,u===r)&&(N=!0,null===e.tag&&(e.tag="?")):(N=!0,null===e.tag&&null===e.anchor||I(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===O&&(N=g&&q(e,P))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(y=0,v=e.implicitTypes.length;y<v;y+=1)if((b=e.implicitTypes[y]).resolve(e.result)){e.result=b.construct(e.result),e.tag=b.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else c.call(e.typeMap[e.kind||"fallback"],e.tag)?(b=e.typeMap[e.kind||"fallback"][e.tag],null!==e.result&&b.kind!==e.kind&&I(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+b.kind+'", not "'+e.kind+'"'),b.resolve(e.result)?(e.result=b.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):I(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):I(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||N}function X(e){var t,r,n,o,i=e.position,s=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(o=e.input.charCodeAt(e.position))&&(B(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==o));){for(s=!0,o=e.input.charCodeAt(++e.position),t=e.position;0!==o&&!C(o);)o=e.input.charCodeAt(++e.position);for(n=[],(r=e.input.slice(t,e.position)).length<1&&I(e,"directive name must not be less than one character in length");0!==o;){for(;x(o);)o=e.input.charCodeAt(++e.position);if(35===o){do{o=e.input.charCodeAt(++e.position)}while(0!==o&&!E(o));break}if(E(o))break;for(t=e.position;0!==o&&!C(o);)o=e.input.charCodeAt(++e.position);n.push(e.input.slice(t,e.position))}0!==o&&G(e),c.call(j,r)?j[r](e,r,n):R(e,'unknown document directive "'+r+'"')}B(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,B(e,!0,-1)):s&&I(e,"directives end mark is expected"),V(e,e.lineIndent-1,h,!1,!0),B(e,!0,-1),e.checkLineBreaks&&y.test(e.input.slice(i,e.position))&&R(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&U(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,B(e,!0,-1)):e.position<e.length-1&&I(e,"end of the stream or a document separator is expected")}function W(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var r=new T(e,t);for(r.input+="\0";32===r.input.charCodeAt(r.position);)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)X(r);return r.documents}function J(e,t,r){var n,o,i=W(e,r);if("function"!=typeof t)return i;for(n=0,o=i.length;n<o;n+=1)t(i[n])}function Y(e,t){var r=W(e,t);if(0!==r.length){if(1===r.length)return r[0];throw new o("expected a single document in the stream, but found more")}}e.exports.loadAll=J,e.exports.load=Y,e.exports.safeLoadAll=function(e,t,r){if("function"!=typeof t)return J(e,n.extend({schema:s},r));J(e,t,n.extend({schema:s},r))},e.exports.safeLoad=function(e,t){return Y(e,n.extend({schema:s},t))}},function(e,t,r){"use strict";var n=r(36);function o(e,t,r,n,o){this.name=e,this.buffer=t,this.position=r,this.line=n,this.column=o}o.prototype.getSnippet=function(e,t){var r,o,i,s,a;if(!this.buffer)return null;for(e=e||4,t=t||75,r="",o=this.position;o>0&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(o-1));)if(o-=1,this.position-o>t/2-1){r=" ... ",o+=5;break}for(i="",s=this.position;s<this.buffer.length&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(s));)if((s+=1)-this.position>t/2-1){i=" ... ",s-=5;break}return a=this.buffer.slice(o,s),n.repeat(" ",e)+r+a+i+"\n"+n.repeat(" ",e+this.position-o+r.length)+"^"},o.prototype.toString=function(e){var t,r="";return this.name&&(r+='in "'+this.name+'" '),r+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet())&&(r+=":\n"+t),r},e.exports=o},function(e,t,r){"use strict";var n=r(9);e.exports=new n("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})},function(e,t,r){"use strict";var n=r(9);e.exports=new n("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})},function(e,t,r){"use strict";var n=r(9);e.exports=new n("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})},function(e,t,r){"use strict";var n=r(9);e.exports=new n("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},function(e,t,r){"use strict";var n=r(9);e.exports=new n("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})},function(e,t,r){"use strict";var n=r(36),o=r(9);function i(e){return 48<=e&&e<=55}function s(e){return 48<=e&&e<=57}e.exports=new o("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,r,n=e.length,o=0,a=!1;if(!n)return!1;if("-"!==(t=e[o])&&"+"!==t||(t=e[++o]),"0"===t){if(o+1===n)return!0;if("b"===(t=e[++o])){for(o++;o<n;o++)if("_"!==(t=e[o])){if("0"!==t&&"1"!==t)return!1;a=!0}return a&&"_"!==t}if("x"===t){for(o++;o<n;o++)if("_"!==(t=e[o])){if(!(48<=(r=e.charCodeAt(o))&&r<=57||65<=r&&r<=70||97<=r&&r<=102))return!1;a=!0}return a&&"_"!==t}for(;o<n;o++)if("_"!==(t=e[o])){if(!i(e.charCodeAt(o)))return!1;a=!0}return a&&"_"!==t}if("_"===t)return!1;for(;o<n;o++)if("_"!==(t=e[o])){if(":"===t)break;if(!s(e.charCodeAt(o)))return!1;a=!0}return!(!a||"_"===t)&&(":"!==t||/^(:[0-5]?[0-9])+$/.test(e.slice(o)))},construct:function(e){var t,r,n=e,o=1,i=[];return-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(o=-1),t=(n=n.slice(1))[0]),"0"===n?0:"0"===t?"b"===n[1]?o*parseInt(n.slice(2),2):"x"===n[1]?o*parseInt(n,16):o*parseInt(n,8):-1!==n.indexOf(":")?(n.split(":").forEach(function(e){i.unshift(parseInt(e,10))}),n=0,r=1,i.forEach(function(e){n+=e*r,r*=60}),o*n):o*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!n.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},function(e,t,r){"use strict";var n=r(36),o=r(9),i=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var s=/^[-+]?[0-9]+e/;e.exports=new o("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!i.test(e)||"_"===e[e.length-1])},construct:function(e){var t,r,n,o;return r="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,o=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===r?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:t.indexOf(":")>=0?(t.split(":").forEach(function(e){o.unshift(parseFloat(e,10))}),t=0,n=1,o.forEach(function(e){t+=e*n,n*=60}),r*t):r*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||n.isNegativeZero(e))},represent:function(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(n.isNegativeZero(e))return"-0.0";return r=e.toString(10),s.test(r)?r.replace("e",".e"):r},defaultStyle:"lowercase"})},function(e,t,r){"use strict";var n=r(9),o=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),i=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");e.exports=new n("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==o.exec(e)||null!==i.exec(e))},construct:function(e){var t,r,n,s,a,c,u,p,l=0,h=null;if(null===(t=o.exec(e))&&(t=i.exec(e)),null===t)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,s=+t[3],!t[4])return new Date(Date.UTC(r,n,s));if(a=+t[4],c=+t[5],u=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(h=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(h=-h)),p=new Date(Date.UTC(r,n,s,a,c,u,l)),h&&p.setTime(p.getTime()-h),p},instanceOf:Date,represent:function(e){return e.toISOString()}})},function(e,t,r){"use strict";var n=r(9);e.exports=new n("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}})},function(e,t,r){"use strict";var n;try{n=r(54).Buffer}catch(e){}var o=r(9),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";e.exports=new o("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,r,n=0,o=e.length,s=i;for(r=0;r<o;r++)if(!((t=s.indexOf(e.charAt(r)))>64)){if(t<0)return!1;n+=6}return n%8==0},construct:function(e){var t,r,o=e.replace(/[\r\n=]/g,""),s=o.length,a=i,c=0,u=[];for(t=0;t<s;t++)t%4==0&&t&&(u.push(c>>16&255),u.push(c>>8&255),u.push(255&c)),c=c<<6|a.indexOf(o.charAt(t));return 0===(r=s%4*6)?(u.push(c>>16&255),u.push(c>>8&255),u.push(255&c)):18===r?(u.push(c>>10&255),u.push(c>>2&255)):12===r&&u.push(c>>4&255),n?n.from?n.from(u):new n(u):u},predicate:function(e){return n&&n.isBuffer(e)},represent:function(e){var t,r,n="",o=0,s=e.length,a=i;for(t=0;t<s;t++)t%3==0&&t&&(n+=a[o>>18&63],n+=a[o>>12&63],n+=a[o>>6&63],n+=a[63&o]),o=(o<<8)+e[t];return 0===(r=s%3)?(n+=a[o>>18&63],n+=a[o>>12&63],n+=a[o>>6&63],n+=a[63&o]):2===r?(n+=a[o>>10&63],n+=a[o>>4&63],n+=a[o<<2&63],n+=a[64]):1===r&&(n+=a[o>>2&63],n+=a[o<<4&63],n+=a[64],n+=a[64]),n}})},function(e,t,r){"use strict";var n=r(9),o=Object.prototype.hasOwnProperty,i=Object.prototype.toString;e.exports=new n("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,r,n,s,a,c=[],u=e;for(t=0,r=u.length;t<r;t+=1){if(n=u[t],a=!1,"[object Object]"!==i.call(n))return!1;for(s in n)if(o.call(n,s)){if(a)return!1;a=!0}if(!a)return!1;if(-1!==c.indexOf(s))return!1;c.push(s)}return!0},construct:function(e){return null!==e?e:[]}})},function(e,t,r){"use strict";var n=r(9),o=Object.prototype.toString;e.exports=new n("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,r,n,i,s,a=e;for(s=new Array(a.length),t=0,r=a.length;t<r;t+=1){if(n=a[t],"[object Object]"!==o.call(n))return!1;if(1!==(i=Object.keys(n)).length)return!1;s[t]=[i[0],n[i[0]]]}return!0},construct:function(e){if(null===e)return[];var t,r,n,o,i,s=e;for(i=new Array(s.length),t=0,r=s.length;t<r;t+=1)n=s[t],o=Object.keys(n),i[t]=[o[0],n[o[0]]];return i}})},function(e,t,r){"use strict";var n=r(9),o=Object.prototype.hasOwnProperty;e.exports=new n("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,r=e;for(t in r)if(o.call(r,t)&&null!==r[t])return!1;return!0},construct:function(e){return null!==e?e:{}}})},function(e,t,r){"use strict";var n=r(9);e.exports=new n("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(e){return void 0===e},represent:function(){return""}})},function(e,t,r){"use strict";var n=r(9);e.exports=new n("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,r=/\/([gim]*)$/.exec(e),n="";if("/"===t[0]){if(r&&(n=r[1]),n.length>3)return!1;if("/"!==t[t.length-n.length-1])return!1}return!0},construct:function(e){var t=e,r=/\/([gim]*)$/.exec(e),n="";return"/"===t[0]&&(r&&(n=r[1]),t=t.slice(1,t.length-n.length-1)),new RegExp(t,n)},predicate:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},represent:function(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}})},function(e,t,r){"use strict";var n;try{n=r(428)}catch(e){"undefined"!=typeof window&&(n=window.esprima)}var o=r(9);e.exports=new o("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(e){if(null===e)return!1;try{var t="("+e+")",r=n.parse(t,{range:!0});return"Program"===r.type&&1===r.body.length&&"ExpressionStatement"===r.body[0].type&&("ArrowFunctionExpression"===r.body[0].expression.type||"FunctionExpression"===r.body[0].expression.type)}catch(e){return!1}},construct:function(e){var t,r="("+e+")",o=n.parse(r,{range:!0}),i=[];if("Program"!==o.type||1!==o.body.length||"ExpressionStatement"!==o.body[0].type||"ArrowFunctionExpression"!==o.body[0].expression.type&&"FunctionExpression"!==o.body[0].expression.type)throw new Error("Failed to resolve function");return o.body[0].expression.params.forEach(function(e){i.push(e.name)}),t=o.body[0].expression.body.range,"BlockStatement"===o.body[0].expression.body.type?new Function(i,r.slice(t[0]+1,t[1]-1)):new Function(i,"return "+r.slice(t[0],t[1]))},predicate:function(e){return"[object Function]"===Object.prototype.toString.call(e)},represent:function(e){return e.toString()}})},function(e,t,r){var n;n=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}return r.m=e,r.c=t,r.p="",r(0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(3),i=r(8),s=r(15);function a(e,t,r){var s=null,a=function(e,t){r&&r(e,t),s&&s.visit(e,t)},c="function"==typeof r?a:null,u=!1;if(t){u="boolean"==typeof t.comment&&t.comment;var p="boolean"==typeof t.attachComment&&t.attachComment;(u||p)&&((s=new n.CommentHandler).attach=p,t.comment=!0,c=a)}var l,h=!1;t&&"string"==typeof t.sourceType&&(h="module"===t.sourceType),l=t&&"boolean"==typeof t.jsx&&t.jsx?new o.JSXParser(e,t,c):new i.Parser(e,t,c);var d=h?l.parseModule():l.parseScript();return u&&s&&(d.comments=s.comments),l.config.tokens&&(d.tokens=l.tokens),l.config.tolerant&&(d.errors=l.errorHandler.errors),d}t.parse=a,t.parseModule=function(e,t,r){var n=t||{};return n.sourceType="module",a(e,n,r)},t.parseScript=function(e,t,r){var n=t||{};return n.sourceType="script",a(e,n,r)},t.tokenize=function(e,t,r){var n,o=new s.Tokenizer(e,t);n=[];try{for(;;){var i=o.getNextToken();if(!i)break;r&&(i=r(i)),n.push(i)}}catch(e){o.errorHandler.tolerate(e)}return o.errorHandler.tolerant&&(n.errors=o.errors()),n};var c=r(2);t.Syntax=c.Syntax,t.version="4.0.1"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),o=function(){function e(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return e.prototype.insertInnerComments=function(e,t){if(e.type===n.Syntax.BlockStatement&&0===e.body.length){for(var r=[],o=this.leading.length-1;o>=0;--o){var i=this.leading[o];t.end.offset>=i.start&&(r.unshift(i.comment),this.leading.splice(o,1),this.trailing.splice(o,1))}r.length&&(e.innerComments=r)}},e.prototype.findTrailingComments=function(e){var t=[];if(this.trailing.length>0){for(var r=this.trailing.length-1;r>=0;--r){var n=this.trailing[r];n.start>=e.end.offset&&t.unshift(n.comment)}return this.trailing.length=0,t}var o=this.stack[this.stack.length-1];if(o&&o.node.trailingComments){var i=o.node.trailingComments[0];i&&i.range[0]>=e.end.offset&&(t=o.node.trailingComments,delete o.node.trailingComments)}return t},e.prototype.findLeadingComments=function(e){for(var t,r=[];this.stack.length>0;){if(!((i=this.stack[this.stack.length-1])&&i.start>=e.start.offset))break;t=i.node,this.stack.pop()}if(t){for(var n=(t.leadingComments?t.leadingComments.length:0)-1;n>=0;--n){var o=t.leadingComments[n];o.range[1]<=e.start.offset&&(r.unshift(o),t.leadingComments.splice(n,1))}return t.leadingComments&&0===t.leadingComments.length&&delete t.leadingComments,r}for(n=this.leading.length-1;n>=0;--n){var i;(i=this.leading[n]).start<=e.start.offset&&(r.unshift(i.comment),this.leading.splice(n,1))}return r},e.prototype.visitNode=function(e,t){if(!(e.type===n.Syntax.Program&&e.body.length>0)){this.insertInnerComments(e,t);var r=this.findTrailingComments(t),o=this.findLeadingComments(t);o.length>0&&(e.leadingComments=o),r.length>0&&(e.trailingComments=r),this.stack.push({node:e,start:t.start.offset})}},e.prototype.visitComment=function(e,t){var r="L"===e.type[0]?"Line":"Block",n={type:r,value:e.value};if(e.range&&(n.range=e.range),e.loc&&(n.loc=e.loc),this.comments.push(n),this.attach){var o={comment:{type:r,value:e.value,range:[t.start.offset,t.end.offset]},start:t.start.offset};e.loc&&(o.comment.loc=e.loc),e.type=r,this.leading.push(o),this.trailing.push(o)}},e.prototype.visit=function(e,t){"LineComment"===e.type?this.visitComment(e,t):"BlockComment"===e.type?this.visitComment(e,t):this.attach&&this.visitNode(e,t)},e}();t.CommentHandler=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(4),s=r(5),a=r(6),c=r(7),u=r(8),p=r(13),l=r(14);function h(e){var t;switch(e.type){case a.JSXSyntax.JSXIdentifier:t=e.name;break;case a.JSXSyntax.JSXNamespacedName:var r=e;t=h(r.namespace)+":"+h(r.name);break;case a.JSXSyntax.JSXMemberExpression:var n=e;t=h(n.object)+"."+h(n.property)}return t}p.TokenName[100]="JSXIdentifier",p.TokenName[101]="JSXText";var d=function(e){function t(t,r,n){return e.call(this,t,r,n)||this}return o(t,e),t.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():e.prototype.parsePrimaryExpression.call(this)},t.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},t.prototype.finishJSX=function(){this.nextToken()},t.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},t.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.scanXHTMLEntity=function(e){for(var t="&",r=!0,n=!1,o=!1,s=!1;!this.scanner.eof()&&r&&!n;){var a=this.scanner.source[this.scanner.index];if(a===e)break;if(n=";"===a,t+=a,++this.scanner.index,!n)switch(t.length){case 2:o="#"===a;break;case 3:o&&(r=(s="x"===a)||i.Character.isDecimalDigit(a.charCodeAt(0)),o=o&&!s);break;default:r=(r=r&&!(o&&!i.Character.isDecimalDigit(a.charCodeAt(0))))&&!(s&&!i.Character.isHexDigit(a.charCodeAt(0)))}}if(r&&n&&t.length>2){var c=t.substr(1,t.length-2);o&&c.length>1?t=String.fromCharCode(parseInt(c.substr(1),10)):s&&c.length>2?t=String.fromCharCode(parseInt("0"+c.substr(1),16)):o||s||!l.XHTMLEntities[c]||(t=l.XHTMLEntities[c])}return t},t.prototype.lexJSX=function(){var e=this.scanner.source.charCodeAt(this.scanner.index);if(60===e||62===e||47===e||58===e||61===e||123===e||125===e)return{type:7,value:a=this.scanner.source[this.scanner.index++],lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index};if(34===e||39===e){for(var t=this.scanner.index,r=this.scanner.source[this.scanner.index++],n="";!this.scanner.eof();){if((c=this.scanner.source[this.scanner.index++])===r)break;n+="&"===c?this.scanXHTMLEntity(r):c}return{type:8,value:n,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}if(46===e){var o=this.scanner.source.charCodeAt(this.scanner.index+1),s=this.scanner.source.charCodeAt(this.scanner.index+2),a=46===o&&46===s?"...":".";t=this.scanner.index;return this.scanner.index+=a.length,{type:7,value:a,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}if(96===e)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(i.Character.isIdentifierStart(e)&&92!==e){t=this.scanner.index;for(++this.scanner.index;!this.scanner.eof();){var c=this.scanner.source.charCodeAt(this.scanner.index);if(i.Character.isIdentifierPart(c)&&92!==c)++this.scanner.index;else{if(45!==c)break;++this.scanner.index}}return{type:100,value:this.scanner.source.slice(t,this.scanner.index),lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}return this.scanner.lex()},t.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var e=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(e)),e},t.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var e=this.scanner.index,t="";!this.scanner.eof();){var r=this.scanner.source[this.scanner.index];if("{"===r||"<"===r)break;++this.scanner.index,t+=r,i.Character.isLineTerminator(r.charCodeAt(0))&&(++this.scanner.lineNumber,"\r"===r&&"\n"===this.scanner.source[this.scanner.index]&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var n={type:101,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:e,end:this.scanner.index};return t.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(n)),n},t.prototype.peekJSXToken=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.lexJSX();return this.scanner.restoreState(e),t},t.prototype.expectJSX=function(e){var t=this.nextJSXToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},t.prototype.matchJSX=function(e){var t=this.peekJSXToken();return 7===t.type&&t.value===e},t.prototype.parseJSXIdentifier=function(){var e=this.createJSXNode(),t=this.nextJSXToken();return 100!==t.type&&this.throwUnexpectedToken(t),this.finalize(e,new s.JSXIdentifier(t.value))},t.prototype.parseJSXElementName=function(){var e=this.createJSXNode(),t=this.parseJSXIdentifier();if(this.matchJSX(":")){var r=t;this.expectJSX(":");var n=this.parseJSXIdentifier();t=this.finalize(e,new s.JSXNamespacedName(r,n))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var o=t;this.expectJSX(".");var i=this.parseJSXIdentifier();t=this.finalize(e,new s.JSXMemberExpression(o,i))}return t},t.prototype.parseJSXAttributeName=function(){var e,t=this.createJSXNode(),r=this.parseJSXIdentifier();if(this.matchJSX(":")){var n=r;this.expectJSX(":");var o=this.parseJSXIdentifier();e=this.finalize(t,new s.JSXNamespacedName(n,o))}else e=r;return e},t.prototype.parseJSXStringLiteralAttribute=function(){var e=this.createJSXNode(),t=this.nextJSXToken();8!==t.type&&this.throwUnexpectedToken(t);var r=this.getTokenRaw(t);return this.finalize(e,new c.Literal(t.value,r))},t.prototype.parseJSXExpressionAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new s.JSXExpressionContainer(t))},t.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},t.prototype.parseJSXNameValueAttribute=function(){var e=this.createJSXNode(),t=this.parseJSXAttributeName(),r=null;return this.matchJSX("=")&&(this.expectJSX("="),r=this.parseJSXAttributeValue()),this.finalize(e,new s.JSXAttribute(t,r))},t.prototype.parseJSXSpreadAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new s.JSXSpreadAttribute(t))},t.prototype.parseJSXAttributes=function(){for(var e=[];!this.matchJSX("/")&&!this.matchJSX(">");){var t=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();e.push(t)}return e},t.prototype.parseJSXOpeningElement=function(){var e=this.createJSXNode();this.expectJSX("<");var t=this.parseJSXElementName(),r=this.parseJSXAttributes(),n=this.matchJSX("/");return n&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new s.JSXOpeningElement(t,n,r))},t.prototype.parseJSXBoundaryElement=function(){var e=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var t=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(e,new s.JSXClosingElement(t))}var r=this.parseJSXElementName(),n=this.parseJSXAttributes(),o=this.matchJSX("/");return o&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new s.JSXOpeningElement(r,o,n))},t.prototype.parseJSXEmptyExpression=function(){var e=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(e,new s.JSXEmptyExpression)},t.prototype.parseJSXExpressionContainer=function(){var e,t=this.createJSXNode();return this.expectJSX("{"),this.matchJSX("}")?(e=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),e=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(t,new s.JSXExpressionContainer(e))},t.prototype.parseJSXChildren=function(){for(var e=[];!this.scanner.eof();){var t=this.createJSXChildNode(),r=this.nextJSXText();if(r.start<r.end){var n=this.getTokenRaw(r),o=this.finalize(t,new s.JSXText(r.value,n));e.push(o)}if("{"!==this.scanner.source[this.scanner.index])break;var i=this.parseJSXExpressionContainer();e.push(i)}return e},t.prototype.parseComplexJSXElement=function(e){for(var t=[];!this.scanner.eof();){e.children=e.children.concat(this.parseJSXChildren());var r=this.createJSXChildNode(),n=this.parseJSXBoundaryElement();if(n.type===a.JSXSyntax.JSXOpeningElement){var o=n;if(o.selfClosing){var i=this.finalize(r,new s.JSXElement(o,[],null));e.children.push(i)}else t.push(e),e={node:r,opening:o,closing:null,children:[]}}if(n.type===a.JSXSyntax.JSXClosingElement){e.closing=n;var c=h(e.opening.name);if(c!==h(e.closing.name)&&this.tolerateError("Expected corresponding JSX closing tag for %0",c),!(t.length>0))break;i=this.finalize(e.node,new s.JSXElement(e.opening,e.children,e.closing));(e=t[t.length-1]).children.push(i),t.pop()}}return e},t.prototype.parseJSXElement=function(){var e=this.createJSXNode(),t=this.parseJSXOpeningElement(),r=[],n=null;if(!t.selfClosing){var o=this.parseComplexJSXElement({node:e,opening:t,closing:n,children:r});r=o.children,n=o.closing}return this.finalize(e,new s.JSXElement(t,r,n))},t.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var e=this.parseJSXElement();return this.finishJSX(),e},t.prototype.isStartOfExpression=function(){return e.prototype.isStartOfExpression.call(this)||this.match("<")},t}(u.Parser);t.JSXParser=d},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};t.Character={fromCodePoint:function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&r.NonAsciiIdentifierStart.test(t.Character.fromCodePoint(e))},isIdentifierPart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&r.NonAsciiIdentifierPart.test(t.Character.fromCodePoint(e))},isDecimalDigit:function(e){return e>=48&&e<=57},isHexDigit:function(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102},isOctalDigit:function(e){return e>=48&&e<=55}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),o=function(e){this.type=n.JSXSyntax.JSXClosingElement,this.name=e};t.JSXClosingElement=o;var i=function(e,t,r){this.type=n.JSXSyntax.JSXElement,this.openingElement=e,this.children=t,this.closingElement=r};t.JSXElement=i;var s=function(){this.type=n.JSXSyntax.JSXEmptyExpression};t.JSXEmptyExpression=s;var a=function(e){this.type=n.JSXSyntax.JSXExpressionContainer,this.expression=e};t.JSXExpressionContainer=a;var c=function(e){this.type=n.JSXSyntax.JSXIdentifier,this.name=e};t.JSXIdentifier=c;var u=function(e,t){this.type=n.JSXSyntax.JSXMemberExpression,this.object=e,this.property=t};t.JSXMemberExpression=u;var p=function(e,t){this.type=n.JSXSyntax.JSXAttribute,this.name=e,this.value=t};t.JSXAttribute=p;var l=function(e,t){this.type=n.JSXSyntax.JSXNamespacedName,this.namespace=e,this.name=t};t.JSXNamespacedName=l;var h=function(e,t,r){this.type=n.JSXSyntax.JSXOpeningElement,this.name=e,this.selfClosing=t,this.attributes=r};t.JSXOpeningElement=h;var d=function(e){this.type=n.JSXSyntax.JSXSpreadAttribute,this.argument=e};t.JSXSpreadAttribute=d;var f=function(e,t){this.type=n.JSXSyntax.JSXText,this.value=e,this.raw=t};t.JSXText=f},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),o=function(e){this.type=n.Syntax.ArrayExpression,this.elements=e};t.ArrayExpression=o;var i=function(e){this.type=n.Syntax.ArrayPattern,this.elements=e};t.ArrayPattern=i;var s=function(e,t,r){this.type=n.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=r,this.async=!1};t.ArrowFunctionExpression=s;var a=function(e,t,r){this.type=n.Syntax.AssignmentExpression,this.operator=e,this.left=t,this.right=r};t.AssignmentExpression=a;var c=function(e,t){this.type=n.Syntax.AssignmentPattern,this.left=e,this.right=t};t.AssignmentPattern=c;var u=function(e,t,r){this.type=n.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=r,this.async=!0};t.AsyncArrowFunctionExpression=u;var p=function(e,t,r){this.type=n.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=r,this.generator=!1,this.expression=!1,this.async=!0};t.AsyncFunctionDeclaration=p;var l=function(e,t,r){this.type=n.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=r,this.generator=!1,this.expression=!1,this.async=!0};t.AsyncFunctionExpression=l;var h=function(e){this.type=n.Syntax.AwaitExpression,this.argument=e};t.AwaitExpression=h;var d=function(e,t,r){var o="||"===e||"&&"===e;this.type=o?n.Syntax.LogicalExpression:n.Syntax.BinaryExpression,this.operator=e,this.left=t,this.right=r};t.BinaryExpression=d;var f=function(e){this.type=n.Syntax.BlockStatement,this.body=e};t.BlockStatement=f;var m=function(e){this.type=n.Syntax.BreakStatement,this.label=e};t.BreakStatement=m;var g=function(e,t){this.type=n.Syntax.CallExpression,this.callee=e,this.arguments=t};t.CallExpression=g;var y=function(e,t){this.type=n.Syntax.CatchClause,this.param=e,this.body=t};t.CatchClause=y;var v=function(e){this.type=n.Syntax.ClassBody,this.body=e};t.ClassBody=v;var b=function(e,t,r){this.type=n.Syntax.ClassDeclaration,this.id=e,this.superClass=t,this.body=r};t.ClassDeclaration=b;var w=function(e,t,r){this.type=n.Syntax.ClassExpression,this.id=e,this.superClass=t,this.body=r};t.ClassExpression=w;var E=function(e,t){this.type=n.Syntax.MemberExpression,this.computed=!0,this.object=e,this.property=t};t.ComputedMemberExpression=E;var x=function(e,t,r){this.type=n.Syntax.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=r};t.ConditionalExpression=x;var C=function(e){this.type=n.Syntax.ContinueStatement,this.label=e};t.ContinueStatement=C;var S=function(){this.type=n.Syntax.DebuggerStatement};t.DebuggerStatement=S;var k=function(e,t){this.type=n.Syntax.ExpressionStatement,this.expression=e,this.directive=t};t.Directive=k;var P=function(e,t){this.type=n.Syntax.DoWhileStatement,this.body=e,this.test=t};t.DoWhileStatement=P;var _=function(){this.type=n.Syntax.EmptyStatement};t.EmptyStatement=_;var A=function(e){this.type=n.Syntax.ExportAllDeclaration,this.source=e};t.ExportAllDeclaration=A;var D=function(e){this.type=n.Syntax.ExportDefaultDeclaration,this.declaration=e};t.ExportDefaultDeclaration=D;var O=function(e,t,r){this.type=n.Syntax.ExportNamedDeclaration,this.declaration=e,this.specifiers=t,this.source=r};t.ExportNamedDeclaration=O;var T=function(e,t){this.type=n.Syntax.ExportSpecifier,this.exported=t,this.local=e};t.ExportSpecifier=T;var N=function(e){this.type=n.Syntax.ExpressionStatement,this.expression=e};t.ExpressionStatement=N;var I=function(e,t,r){this.type=n.Syntax.ForInStatement,this.left=e,this.right=t,this.body=r,this.each=!1};t.ForInStatement=I;var R=function(e,t,r){this.type=n.Syntax.ForOfStatement,this.left=e,this.right=t,this.body=r};t.ForOfStatement=R;var j=function(e,t,r,o){this.type=n.Syntax.ForStatement,this.init=e,this.test=t,this.update=r,this.body=o};t.ForStatement=j;var F=function(e,t,r,o){this.type=n.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=r,this.generator=o,this.expression=!1,this.async=!1};t.FunctionDeclaration=F;var M=function(e,t,r,o){this.type=n.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=r,this.generator=o,this.expression=!1,this.async=!1};t.FunctionExpression=M;var L=function(e){this.type=n.Syntax.Identifier,this.name=e};t.Identifier=L;var G=function(e,t,r){this.type=n.Syntax.IfStatement,this.test=e,this.consequent=t,this.alternate=r};t.IfStatement=G;var B=function(e,t){this.type=n.Syntax.ImportDeclaration,this.specifiers=e,this.source=t};t.ImportDeclaration=B;var U=function(e){this.type=n.Syntax.ImportDefaultSpecifier,this.local=e};t.ImportDefaultSpecifier=U;var $=function(e){this.type=n.Syntax.ImportNamespaceSpecifier,this.local=e};t.ImportNamespaceSpecifier=$;var q=function(e,t){this.type=n.Syntax.ImportSpecifier,this.local=e,this.imported=t};t.ImportSpecifier=q;var z=function(e,t){this.type=n.Syntax.LabeledStatement,this.label=e,this.body=t};t.LabeledStatement=z;var H=function(e,t){this.type=n.Syntax.Literal,this.value=e,this.raw=t};t.Literal=H;var V=function(e,t){this.type=n.Syntax.MetaProperty,this.meta=e,this.property=t};t.MetaProperty=V;var X=function(e,t,r,o,i){this.type=n.Syntax.MethodDefinition,this.key=e,this.computed=t,this.value=r,this.kind=o,this.static=i};t.MethodDefinition=X;var W=function(e){this.type=n.Syntax.Program,this.body=e,this.sourceType="module"};t.Module=W;var J=function(e,t){this.type=n.Syntax.NewExpression,this.callee=e,this.arguments=t};t.NewExpression=J;var Y=function(e){this.type=n.Syntax.ObjectExpression,this.properties=e};t.ObjectExpression=Y;var K=function(e){this.type=n.Syntax.ObjectPattern,this.properties=e};t.ObjectPattern=K;var Q=function(e,t,r,o,i,s){this.type=n.Syntax.Property,this.key=t,this.computed=r,this.value=o,this.kind=e,this.method=i,this.shorthand=s};t.Property=Q;var Z=function(e,t,r,o){this.type=n.Syntax.Literal,this.value=e,this.raw=t,this.regex={pattern:r,flags:o}};t.RegexLiteral=Z;var ee=function(e){this.type=n.Syntax.RestElement,this.argument=e};t.RestElement=ee;var te=function(e){this.type=n.Syntax.ReturnStatement,this.argument=e};t.ReturnStatement=te;var re=function(e){this.type=n.Syntax.Program,this.body=e,this.sourceType="script"};t.Script=re;var ne=function(e){this.type=n.Syntax.SequenceExpression,this.expressions=e};t.SequenceExpression=ne;var oe=function(e){this.type=n.Syntax.SpreadElement,this.argument=e};t.SpreadElement=oe;var ie=function(e,t){this.type=n.Syntax.MemberExpression,this.computed=!1,this.object=e,this.property=t};t.StaticMemberExpression=ie;var se=function(){this.type=n.Syntax.Super};t.Super=se;var ae=function(e,t){this.type=n.Syntax.SwitchCase,this.test=e,this.consequent=t};t.SwitchCase=ae;var ce=function(e,t){this.type=n.Syntax.SwitchStatement,this.discriminant=e,this.cases=t};t.SwitchStatement=ce;var ue=function(e,t){this.type=n.Syntax.TaggedTemplateExpression,this.tag=e,this.quasi=t};t.TaggedTemplateExpression=ue;var pe=function(e,t){this.type=n.Syntax.TemplateElement,this.value=e,this.tail=t};t.TemplateElement=pe;var le=function(e,t){this.type=n.Syntax.TemplateLiteral,this.quasis=e,this.expressions=t};t.TemplateLiteral=le;var he=function(){this.type=n.Syntax.ThisExpression};t.ThisExpression=he;var de=function(e){this.type=n.Syntax.ThrowStatement,this.argument=e};t.ThrowStatement=de;var fe=function(e,t,r){this.type=n.Syntax.TryStatement,this.block=e,this.handler=t,this.finalizer=r};t.TryStatement=fe;var me=function(e,t){this.type=n.Syntax.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0};t.UnaryExpression=me;var ge=function(e,t,r){this.type=n.Syntax.UpdateExpression,this.operator=e,this.argument=t,this.prefix=r};t.UpdateExpression=ge;var ye=function(e,t){this.type=n.Syntax.VariableDeclaration,this.declarations=e,this.kind=t};t.VariableDeclaration=ye;var ve=function(e,t){this.type=n.Syntax.VariableDeclarator,this.id=e,this.init=t};t.VariableDeclarator=ve;var be=function(e,t){this.type=n.Syntax.WhileStatement,this.test=e,this.body=t};t.WhileStatement=be;var we=function(e,t){this.type=n.Syntax.WithStatement,this.object=e,this.body=t};t.WithStatement=we;var Ee=function(e,t){this.type=n.Syntax.YieldExpression,this.argument=e,this.delegate=t};t.YieldExpression=Ee},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),o=r(10),i=r(11),s=r(7),a=r(12),c=r(2),u=r(13),p=function(){function e(e,t,r){void 0===t&&(t={}),this.config={range:"boolean"==typeof t.range&&t.range,loc:"boolean"==typeof t.loc&&t.loc,source:null,tokens:"boolean"==typeof t.tokens&&t.tokens,comment:"boolean"==typeof t.comment&&t.comment,tolerant:"boolean"==typeof t.tolerant&&t.tolerant},this.config.loc&&t.source&&null!==t.source&&(this.config.source=String(t.source)),this.delegate=r,this.errorHandler=new o.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new a.Scanner(e,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return e.prototype.throwError=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o=Array.prototype.slice.call(arguments,1),i=e.replace(/%(\d)/g,function(e,t){return n.assert(t<o.length,"Message reference must be in range"),o[t]}),s=this.lastMarker.index,a=this.lastMarker.line,c=this.lastMarker.column+1;throw this.errorHandler.createError(s,a,c,i)},e.prototype.tolerateError=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o=Array.prototype.slice.call(arguments,1),i=e.replace(/%(\d)/g,function(e,t){return n.assert(t<o.length,"Message reference must be in range"),o[t]}),s=this.lastMarker.index,a=this.scanner.lineNumber,c=this.lastMarker.column+1;this.errorHandler.tolerateError(s,a,c,i)},e.prototype.unexpectedTokenError=function(e,t){var r,n=t||i.Messages.UnexpectedToken;if(e?(t||(n=2===e.type?i.Messages.UnexpectedEOS:3===e.type?i.Messages.UnexpectedIdentifier:6===e.type?i.Messages.UnexpectedNumber:8===e.type?i.Messages.UnexpectedString:10===e.type?i.Messages.UnexpectedTemplate:i.Messages.UnexpectedToken,4===e.type&&(this.scanner.isFutureReservedWord(e.value)?n=i.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(e.value)&&(n=i.Messages.StrictReservedWord))),r=e.value):r="ILLEGAL",n=n.replace("%0",r),e&&"number"==typeof e.lineNumber){var o=e.start,s=e.lineNumber,a=this.lastMarker.index-this.lastMarker.column,c=e.start-a+1;return this.errorHandler.createError(o,s,c,n)}o=this.lastMarker.index,s=this.lastMarker.line,c=this.lastMarker.column+1;return this.errorHandler.createError(o,s,c,n)},e.prototype.throwUnexpectedToken=function(e,t){throw this.unexpectedTokenError(e,t)},e.prototype.tolerateUnexpectedToken=function(e,t){this.errorHandler.tolerate(this.unexpectedTokenError(e,t))},e.prototype.collectComments=function(){if(this.config.comment){var e=this.scanner.scanComments();if(e.length>0&&this.delegate)for(var t=0;t<e.length;++t){var r=e[t],n=void 0;n={type:r.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(r.slice[0],r.slice[1])},this.config.range&&(n.range=r.range),this.config.loc&&(n.loc=r.loc);var o={start:{line:r.loc.start.line,column:r.loc.start.column,offset:r.range[0]},end:{line:r.loc.end.line,column:r.loc.end.column,offset:r.range[1]}};this.delegate(n,o)}}else this.scanner.scanComments()},e.prototype.getTokenRaw=function(e){return this.scanner.source.slice(e.start,e.end)},e.prototype.convertToken=function(e){var t={type:u.TokenName[e.type],value:this.getTokenRaw(e)};if(this.config.range&&(t.range=[e.start,e.end]),this.config.loc&&(t.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),9===e.type){var r=e.pattern,n=e.flags;t.regex={pattern:r,flags:n}}return t},e.prototype.nextToken=function(){var e=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var t=this.scanner.lex();return this.hasLineTerminator=e.lineNumber!==t.lineNumber,t&&this.context.strict&&3===t.type&&this.scanner.isStrictModeReservedWord(t.value)&&(t.type=4),this.lookahead=t,this.config.tokens&&2!==t.type&&this.tokens.push(this.convertToken(t)),e},e.prototype.nextRegexToken=function(){this.collectComments();var e=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(e))),this.lookahead=e,this.nextToken(),e},e.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},e.prototype.startNode=function(e,t){void 0===t&&(t=0);var r=e.start-e.lineStart,n=e.lineNumber;return r<0&&(r+=t,n--),{index:e.start,line:n,column:r}},e.prototype.finalize=function(e,t){if(this.config.range&&(t.range=[e.index,this.lastMarker.index]),this.config.loc&&(t.loc={start:{line:e.line,column:e.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(t.loc.source=this.config.source)),this.delegate){var r={start:{line:e.line,column:e.column,offset:e.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(t,r)}return t},e.prototype.expect=function(e){var t=this.nextToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var e=this.lookahead;7===e.type&&","===e.value?this.nextToken():7===e.type&&";"===e.value?(this.nextToken(),this.tolerateUnexpectedToken(e)):this.tolerateUnexpectedToken(e,i.Messages.UnexpectedToken)}else this.expect(",")},e.prototype.expectKeyword=function(e){var t=this.nextToken();4===t.type&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.match=function(e){return 7===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchKeyword=function(e){return 4===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchContextualKeyword=function(e){return 3===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchAssign=function(){if(7!==this.lookahead.type)return!1;var e=this.lookahead.value;return"="===e||"*="===e||"**="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e},e.prototype.isolateCoverGrammar=function(e){var t=this.context.isBindingElement,r=this.context.isAssignmentTarget,n=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var o=e.call(this);return null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=t,this.context.isAssignmentTarget=r,this.context.firstCoverInitializedNameError=n,o},e.prototype.inheritCoverGrammar=function(e){var t=this.context.isBindingElement,r=this.context.isAssignmentTarget,n=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var o=e.call(this);return this.context.isBindingElement=this.context.isBindingElement&&t,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&r,this.context.firstCoverInitializedNameError=n||this.context.firstCoverInitializedNameError,o},e.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},e.prototype.parsePrimaryExpression=function(){var e,t,r,n=this.createNode();switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&"await"===this.lookahead.value&&this.tolerateUnexpectedToken(this.lookahead),e=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(n,new s.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,i.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),r=this.getTokenRaw(t),e=this.finalize(n,new s.Literal(t.value,r));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),r=this.getTokenRaw(t),e=this.finalize(n,new s.Literal("true"===t.value,r));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),r=this.getTokenRaw(t),e=this.finalize(n,new s.Literal(null,r));break;case 10:e=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,e=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":e=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":e=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,t=this.nextRegexToken(),r=this.getTokenRaw(t),e=this.finalize(n,new s.RegexLiteral(t.regex,r,t.pattern,t.flags));break;default:e=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?e=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?e=this.finalize(n,new s.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?e=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),e=this.finalize(n,new s.ThisExpression)):e=this.matchKeyword("class")?this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:e=this.throwUnexpectedToken(this.nextToken())}return e},e.prototype.parseSpreadElement=function(){var e=this.createNode();this.expect("...");var t=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(e,new s.SpreadElement(t))},e.prototype.parseArrayInitializer=function(){var e=this.createNode(),t=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),t.push(null);else if(this.match("...")){var r=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),t.push(r)}else t.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(e,new s.ArrayExpression(t))},e.prototype.parsePropertyMethod=function(e){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var t=this.context.strict,r=this.context.allowStrictDirective;this.context.allowStrictDirective=e.simple;var n=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&e.firstRestricted&&this.tolerateUnexpectedToken(e.firstRestricted,e.message),this.context.strict&&e.stricted&&this.tolerateUnexpectedToken(e.stricted,e.message),this.context.strict=t,this.context.allowStrictDirective=r,n},e.prototype.parsePropertyMethodFunction=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters(),n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,r.params,n,!1))},e.prototype.parsePropertyMethodAsyncFunction=function(){var e=this.createNode(),t=this.context.allowYield,r=this.context.await;this.context.allowYield=!1,this.context.await=!0;var n=this.parseFormalParameters(),o=this.parsePropertyMethod(n);return this.context.allowYield=t,this.context.await=r,this.finalize(e,new s.AsyncFunctionExpression(null,n.params,o))},e.prototype.parseObjectPropertyKey=function(){var e,t=this.createNode(),r=this.nextToken();switch(r.type){case 8:case 6:this.context.strict&&r.octal&&this.tolerateUnexpectedToken(r,i.Messages.StrictOctalLiteral);var n=this.getTokenRaw(r);e=this.finalize(t,new s.Literal(r.value,n));break;case 3:case 1:case 5:case 4:e=this.finalize(t,new s.Identifier(r.value));break;case 7:"["===r.value?(e=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):e=this.throwUnexpectedToken(r);break;default:e=this.throwUnexpectedToken(r)}return e},e.prototype.isPropertyKey=function(e,t){return e.type===c.Syntax.Identifier&&e.name===t||e.type===c.Syntax.Literal&&e.value===t},e.prototype.parseObjectProperty=function(e){var t,r=this.createNode(),n=this.lookahead,o=null,a=null,c=!1,u=!1,p=!1,l=!1;if(3===n.type){var h=n.value;this.nextToken(),c=this.match("["),o=(l=!(this.hasLineTerminator||"async"!==h||this.match(":")||this.match("(")||this.match("*")||this.match(",")))?this.parseObjectPropertyKey():this.finalize(r,new s.Identifier(h))}else this.match("*")?this.nextToken():(c=this.match("["),o=this.parseObjectPropertyKey());var d=this.qualifiedPropertyName(this.lookahead);if(3===n.type&&!l&&"get"===n.value&&d)t="get",c=this.match("["),o=this.parseObjectPropertyKey(),this.context.allowYield=!1,a=this.parseGetterMethod();else if(3===n.type&&!l&&"set"===n.value&&d)t="set",c=this.match("["),o=this.parseObjectPropertyKey(),a=this.parseSetterMethod();else if(7===n.type&&"*"===n.value&&d)t="init",c=this.match("["),o=this.parseObjectPropertyKey(),a=this.parseGeneratorMethod(),u=!0;else if(o||this.throwUnexpectedToken(this.lookahead),t="init",this.match(":")&&!l)!c&&this.isPropertyKey(o,"__proto__")&&(e.value&&this.tolerateError(i.Messages.DuplicateProtoProperty),e.value=!0),this.nextToken(),a=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))a=l?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),u=!0;else if(3===n.type){h=this.finalize(r,new s.Identifier(n.value));if(this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),p=!0;var f=this.isolateCoverGrammar(this.parseAssignmentExpression);a=this.finalize(r,new s.AssignmentPattern(h,f))}else p=!0,a=h}else this.throwUnexpectedToken(this.nextToken());return this.finalize(r,new s.Property(t,o,c,a,u,p))},e.prototype.parseObjectInitializer=function(){var e=this.createNode();this.expect("{");for(var t=[],r={value:!1};!this.match("}");)t.push(this.parseObjectProperty(r)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(e,new s.ObjectExpression(t))},e.prototype.parseTemplateHead=function(){n.assert(this.lookahead.head,"Template literal must start with a template head");var e=this.createNode(),t=this.nextToken(),r=t.value,o=t.cooked;return this.finalize(e,new s.TemplateElement({raw:r,cooked:o},t.tail))},e.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var e=this.createNode(),t=this.nextToken(),r=t.value,n=t.cooked;return this.finalize(e,new s.TemplateElement({raw:r,cooked:n},t.tail))},e.prototype.parseTemplateLiteral=function(){var e=this.createNode(),t=[],r=[],n=this.parseTemplateHead();for(r.push(n);!n.tail;)t.push(this.parseExpression()),n=this.parseTemplateElement(),r.push(n);return this.finalize(e,new s.TemplateLiteral(r,t))},e.prototype.reinterpretExpressionAsPattern=function(e){switch(e.type){case c.Syntax.Identifier:case c.Syntax.MemberExpression:case c.Syntax.RestElement:case c.Syntax.AssignmentPattern:break;case c.Syntax.SpreadElement:e.type=c.Syntax.RestElement,this.reinterpretExpressionAsPattern(e.argument);break;case c.Syntax.ArrayExpression:e.type=c.Syntax.ArrayPattern;for(var t=0;t<e.elements.length;t++)null!==e.elements[t]&&this.reinterpretExpressionAsPattern(e.elements[t]);break;case c.Syntax.ObjectExpression:e.type=c.Syntax.ObjectPattern;for(t=0;t<e.properties.length;t++)this.reinterpretExpressionAsPattern(e.properties[t].value);break;case c.Syntax.AssignmentExpression:e.type=c.Syntax.AssignmentPattern,delete e.operator,this.reinterpretExpressionAsPattern(e.left)}},e.prototype.parseGroupExpression=function(){var e;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),e={type:"ArrowParameterPlaceHolder",params:[],async:!1};else{var t=this.lookahead,r=[];if(this.match("..."))e=this.parseRestElement(r),this.expect(")"),this.match("=>")||this.expect("=>"),e={type:"ArrowParameterPlaceHolder",params:[e],async:!1};else{var n=!1;if(this.context.isBindingElement=!0,e=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var o=[];for(this.context.isAssignmentTarget=!1,o.push(e);2!==this.lookahead.type&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var i=0;i<o.length;i++)this.reinterpretExpressionAsPattern(o[i]);n=!0,e={type:"ArrowParameterPlaceHolder",params:o,async:!1}}else if(this.match("...")){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),o.push(this.parseRestElement(r)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1;for(i=0;i<o.length;i++)this.reinterpretExpressionAsPattern(o[i]);n=!0,e={type:"ArrowParameterPlaceHolder",params:o,async:!1}}else o.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(n)break}n||(e=this.finalize(this.startNode(t),new s.SequenceExpression(o)))}if(!n){if(this.expect(")"),this.match("=>")&&(e.type===c.Syntax.Identifier&&"yield"===e.name&&(n=!0,e={type:"ArrowParameterPlaceHolder",params:[e],async:!1}),!n)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),e.type===c.Syntax.SequenceExpression)for(i=0;i<e.expressions.length;i++)this.reinterpretExpressionAsPattern(e.expressions[i]);else this.reinterpretExpressionAsPattern(e);e={type:"ArrowParameterPlaceHolder",params:e.type===c.Syntax.SequenceExpression?e.expressions:[e],async:!1}}this.context.isBindingElement=!1}}}return e},e.prototype.parseArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(e.push(t),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),e},e.prototype.isIdentifierName=function(e){return 3===e.type||4===e.type||1===e.type||5===e.type},e.prototype.parseIdentifierName=function(){var e=this.createNode(),t=this.nextToken();return this.isIdentifierName(t)||this.throwUnexpectedToken(t),this.finalize(e,new s.Identifier(t.value))},e.prototype.parseNewExpression=function(){var e,t=this.createNode(),r=this.parseIdentifierName();if(n.assert("new"===r.name,"New expression must start with `new`"),this.match("."))if(this.nextToken(),3===this.lookahead.type&&this.context.inFunctionBody&&"target"===this.lookahead.value){var o=this.parseIdentifierName();e=new s.MetaProperty(r,o)}else this.throwUnexpectedToken(this.lookahead);else{var i=this.isolateCoverGrammar(this.parseLeftHandSideExpression),a=this.match("(")?this.parseArguments():[];e=new s.NewExpression(i,a),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(t,e)},e.prototype.parseAsyncArgument=function(){var e=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,e},e.prototype.parseAsyncArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(e.push(t),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),e},e.prototype.parseLeftHandSideExpressionAllowCall=function(){var e,t=this.lookahead,r=this.matchContextualKeyword("async"),n=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword("super")&&this.context.inFunctionBody?(e=this.createNode(),this.nextToken(),e=this.finalize(e,new s.Super),this.match("(")||this.match(".")||this.match("[")||this.throwUnexpectedToken(this.lookahead)):e=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var o=this.parseIdentifierName();e=this.finalize(this.startNode(t),new s.StaticMemberExpression(e,o))}else if(this.match("(")){var i=r&&t.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var a=i?this.parseAsyncArguments():this.parseArguments();if(e=this.finalize(this.startNode(t),new s.CallExpression(e,a)),i&&this.match("=>")){for(var c=0;c<a.length;++c)this.reinterpretExpressionAsPattern(a[c]);e={type:"ArrowParameterPlaceHolder",params:a,async:!0}}}else if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");o=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),e=this.finalize(this.startNode(t),new s.ComputedMemberExpression(e,o))}else{if(10!==this.lookahead.type||!this.lookahead.head)break;var u=this.parseTemplateLiteral();e=this.finalize(this.startNode(t),new s.TaggedTemplateExpression(e,u))}return this.context.allowIn=n,e},e.prototype.parseSuper=function(){var e=this.createNode();return this.expectKeyword("super"),this.match("[")||this.match(".")||this.throwUnexpectedToken(this.lookahead),this.finalize(e,new s.Super)},e.prototype.parseLeftHandSideExpression=function(){n.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var e=this.startNode(this.lookahead),t=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var r=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),t=this.finalize(e,new s.ComputedMemberExpression(t,r))}else if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");r=this.parseIdentifierName();t=this.finalize(e,new s.StaticMemberExpression(t,r))}else{if(10!==this.lookahead.type||!this.lookahead.head)break;var o=this.parseTemplateLiteral();t=this.finalize(e,new s.TaggedTemplateExpression(t,o))}return t},e.prototype.parseUpdateExpression=function(){var e,t=this.lookahead;if(this.match("++")||this.match("--")){var r=this.startNode(t),n=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&e.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(i.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment);var o=!0;e=this.finalize(r,new s.UpdateExpression(n.value,e,o)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(e=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&7===this.lookahead.type&&(this.match("++")||this.match("--"))){this.context.strict&&e.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(i.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var a=this.nextToken().value;o=!1;e=this.finalize(this.startNode(t),new s.UpdateExpression(a,e,o))}return e},e.prototype.parseAwaitExpression=function(){var e=this.createNode();this.nextToken();var t=this.parseUnaryExpression();return this.finalize(e,new s.AwaitExpression(t))},e.prototype.parseUnaryExpression=function(){var e;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var t=this.startNode(this.lookahead),r=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),e=this.finalize(t,new s.UnaryExpression(r.value,e)),this.context.strict&&"delete"===e.operator&&e.argument.type===c.Syntax.Identifier&&this.tolerateError(i.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else e=this.context.await&&this.matchContextualKeyword("await")?this.parseAwaitExpression():this.parseUpdateExpression();return e},e.prototype.parseExponentiationExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseUnaryExpression);if(t.type!==c.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var r=t,n=this.isolateCoverGrammar(this.parseExponentiationExpression);t=this.finalize(this.startNode(e),new s.BinaryExpression("**",r,n))}return t},e.prototype.binaryPrecedence=function(e){var t=e.value;return 7===e.type?this.operatorPrecedence[t]||0:4===e.type&&("instanceof"===t||this.context.allowIn&&"in"===t)?7:0},e.prototype.parseBinaryExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseExponentiationExpression),r=this.lookahead,n=this.binaryPrecedence(r);if(n>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var o=[e,this.lookahead],i=t,a=this.isolateCoverGrammar(this.parseExponentiationExpression),c=[i,r.value,a],u=[n];!((n=this.binaryPrecedence(this.lookahead))<=0);){for(;c.length>2&&n<=u[u.length-1];){a=c.pop();var p=c.pop();u.pop(),i=c.pop(),o.pop();var l=this.startNode(o[o.length-1]);c.push(this.finalize(l,new s.BinaryExpression(p,i,a)))}c.push(this.nextToken().value),u.push(n),o.push(this.lookahead),c.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var h=c.length-1;t=c[h];for(var d=o.pop();h>1;){var f=o.pop(),m=d&&d.lineStart;l=this.startNode(f,m),p=c[h-1];t=this.finalize(l,new s.BinaryExpression(p,c[h-2],t)),h-=2,d=f}}return t},e.prototype.parseConditionalExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var r=this.context.allowIn;this.context.allowIn=!0;var n=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=r,this.expect(":");var o=this.isolateCoverGrammar(this.parseAssignmentExpression);t=this.finalize(this.startNode(e),new s.ConditionalExpression(t,n,o)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return t},e.prototype.checkPatternParam=function(e,t){switch(t.type){case c.Syntax.Identifier:this.validateParam(e,t,t.name);break;case c.Syntax.RestElement:this.checkPatternParam(e,t.argument);break;case c.Syntax.AssignmentPattern:this.checkPatternParam(e,t.left);break;case c.Syntax.ArrayPattern:for(var r=0;r<t.elements.length;r++)null!==t.elements[r]&&this.checkPatternParam(e,t.elements[r]);break;case c.Syntax.ObjectPattern:for(r=0;r<t.properties.length;r++)this.checkPatternParam(e,t.properties[r].value)}e.simple=e.simple&&t instanceof s.Identifier},e.prototype.reinterpretAsCoverFormalsList=function(e){var t,r=[e],n=!1;switch(e.type){case c.Syntax.Identifier:break;case"ArrowParameterPlaceHolder":r=e.params,n=e.async;break;default:return null}t={simple:!0,paramSet:{}};for(var o=0;o<r.length;++o){(s=r[o]).type===c.Syntax.AssignmentPattern?s.right.type===c.Syntax.YieldExpression&&(s.right.argument&&this.throwUnexpectedToken(this.lookahead),s.right.type=c.Syntax.Identifier,s.right.name="yield",delete s.right.argument,delete s.right.delegate):n&&s.type===c.Syntax.Identifier&&"await"===s.name&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(t,s),r[o]=s}if(this.context.strict||!this.context.allowYield)for(o=0;o<r.length;++o){var s;(s=r[o]).type===c.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(t.message===i.Messages.StrictParamDupe){var a=this.context.strict?t.stricted:t.firstRestricted;this.throwUnexpectedToken(a,t.message)}return{simple:t.simple,params:r,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.parseAssignmentExpression=function(){var e;if(!this.context.allowYield&&this.matchKeyword("yield"))e=this.parseYieldExpression();else{var t=this.lookahead,r=t;if(e=this.parseConditionalExpression(),3===r.type&&r.lineNumber===this.lookahead.lineNumber&&"async"===r.value&&(3===this.lookahead.type||this.matchKeyword("yield"))){var n=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(n),e={type:"ArrowParameterPlaceHolder",params:[n],async:!0}}if("ArrowParameterPlaceHolder"===e.type||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var o=e.async,a=this.reinterpretAsCoverFormalsList(e);if(a){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var u=this.context.strict,p=this.context.allowStrictDirective;this.context.allowStrictDirective=a.simple;var l=this.context.allowYield,h=this.context.await;this.context.allowYield=!0,this.context.await=o;var d=this.startNode(t);this.expect("=>");var f=void 0;if(this.match("{")){var m=this.context.allowIn;this.context.allowIn=!0,f=this.parseFunctionSourceElements(),this.context.allowIn=m}else f=this.isolateCoverGrammar(this.parseAssignmentExpression);var g=f.type!==c.Syntax.BlockStatement;this.context.strict&&a.firstRestricted&&this.throwUnexpectedToken(a.firstRestricted,a.message),this.context.strict&&a.stricted&&this.tolerateUnexpectedToken(a.stricted,a.message),e=o?this.finalize(d,new s.AsyncArrowFunctionExpression(a.params,f,g)):this.finalize(d,new s.ArrowFunctionExpression(a.params,f,g)),this.context.strict=u,this.context.allowStrictDirective=p,this.context.allowYield=l,this.context.await=h}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment),this.context.strict&&e.type===c.Syntax.Identifier){var y=e;this.scanner.isRestrictedWord(y.name)&&this.tolerateUnexpectedToken(r,i.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(y.name)&&this.tolerateUnexpectedToken(r,i.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(e):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);var v=(r=this.nextToken()).value,b=this.isolateCoverGrammar(this.parseAssignmentExpression);e=this.finalize(this.startNode(t),new s.AssignmentExpression(v,e,b)),this.context.firstCoverInitializedNameError=null}}return e},e.prototype.parseExpression=function(){var e=this.lookahead,t=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var r=[];for(r.push(t);2!==this.lookahead.type&&this.match(",");)this.nextToken(),r.push(this.isolateCoverGrammar(this.parseAssignmentExpression));t=this.finalize(this.startNode(e),new s.SequenceExpression(r))}return t},e.prototype.parseStatementListItem=function(){var e;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,4===this.lookahead.type)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,i.Messages.IllegalExportDeclaration),e=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,i.Messages.IllegalImportDeclaration),e=this.parseImportDeclaration();break;case"const":e=this.parseLexicalDeclaration({inFor:!1});break;case"function":e=this.parseFunctionDeclaration();break;case"class":e=this.parseClassDeclaration();break;case"let":e=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:e=this.parseStatement()}else e=this.parseStatement();return e},e.prototype.parseBlock=function(){var e=this.createNode();this.expect("{");for(var t=[];!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.finalize(e,new s.BlockStatement(t))},e.prototype.parseLexicalBinding=function(e,t){var r=this.createNode(),n=this.parsePattern([],e);this.context.strict&&n.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(i.Messages.StrictVarName);var o=null;return"const"===e?this.matchKeyword("in")||this.matchContextualKeyword("of")||(this.match("=")?(this.nextToken(),o=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(i.Messages.DeclarationMissingInitializer,"const")):(!t.inFor&&n.type!==c.Syntax.Identifier||this.match("="))&&(this.expect("="),o=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(r,new s.VariableDeclarator(n,o))},e.prototype.parseBindingList=function(e,t){for(var r=[this.parseLexicalBinding(e,t)];this.match(",");)this.nextToken(),r.push(this.parseLexicalBinding(e,t));return r},e.prototype.isLexicalDeclaration=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.scanner.lex();return this.scanner.restoreState(e),3===t.type||7===t.type&&"["===t.value||7===t.type&&"{"===t.value||4===t.type&&"let"===t.value||4===t.type&&"yield"===t.value},e.prototype.parseLexicalDeclaration=function(e){var t=this.createNode(),r=this.nextToken().value;n.assert("let"===r||"const"===r,"Lexical declaration must be either let or const");var o=this.parseBindingList(r,e);return this.consumeSemicolon(),this.finalize(t,new s.VariableDeclaration(o,r))},e.prototype.parseBindingRestElement=function(e,t){var r=this.createNode();this.expect("...");var n=this.parsePattern(e,t);return this.finalize(r,new s.RestElement(n))},e.prototype.parseArrayPattern=function(e,t){var r=this.createNode();this.expect("[");for(var n=[];!this.match("]");)if(this.match(","))this.nextToken(),n.push(null);else{if(this.match("...")){n.push(this.parseBindingRestElement(e,t));break}n.push(this.parsePatternWithDefault(e,t)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(r,new s.ArrayPattern(n))},e.prototype.parsePropertyPattern=function(e,t){var r,n,o=this.createNode(),i=!1,a=!1;if(3===this.lookahead.type){var c=this.lookahead;r=this.parseVariableIdentifier();var u=this.finalize(o,new s.Identifier(c.value));if(this.match("=")){e.push(c),a=!0,this.nextToken();var p=this.parseAssignmentExpression();n=this.finalize(this.startNode(c),new s.AssignmentPattern(u,p))}else this.match(":")?(this.expect(":"),n=this.parsePatternWithDefault(e,t)):(e.push(c),a=!0,n=u)}else i=this.match("["),r=this.parseObjectPropertyKey(),this.expect(":"),n=this.parsePatternWithDefault(e,t);return this.finalize(o,new s.Property("init",r,i,n,!1,a))},e.prototype.parseObjectPattern=function(e,t){var r=this.createNode(),n=[];for(this.expect("{");!this.match("}");)n.push(this.parsePropertyPattern(e,t)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(r,new s.ObjectPattern(n))},e.prototype.parsePattern=function(e,t){var r;return this.match("[")?r=this.parseArrayPattern(e,t):this.match("{")?r=this.parseObjectPattern(e,t):(!this.matchKeyword("let")||"const"!==t&&"let"!==t||this.tolerateUnexpectedToken(this.lookahead,i.Messages.LetInLexicalBinding),e.push(this.lookahead),r=this.parseVariableIdentifier(t)),r},e.prototype.parsePatternWithDefault=function(e,t){var r=this.lookahead,n=this.parsePattern(e,t);if(this.match("=")){this.nextToken();var o=this.context.allowYield;this.context.allowYield=!0;var i=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=o,n=this.finalize(this.startNode(r),new s.AssignmentPattern(n,i))}return n},e.prototype.parseVariableIdentifier=function(e){var t=this.createNode(),r=this.nextToken();return 4===r.type&&"yield"===r.value?this.context.strict?this.tolerateUnexpectedToken(r,i.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(r):3!==r.type?this.context.strict&&4===r.type&&this.scanner.isStrictModeReservedWord(r.value)?this.tolerateUnexpectedToken(r,i.Messages.StrictReservedWord):(this.context.strict||"let"!==r.value||"var"!==e)&&this.throwUnexpectedToken(r):(this.context.isModule||this.context.await)&&3===r.type&&"await"===r.value&&this.tolerateUnexpectedToken(r),this.finalize(t,new s.Identifier(r.value))},e.prototype.parseVariableDeclaration=function(e){var t=this.createNode(),r=this.parsePattern([],"var");this.context.strict&&r.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(r.name)&&this.tolerateError(i.Messages.StrictVarName);var n=null;return this.match("=")?(this.nextToken(),n=this.isolateCoverGrammar(this.parseAssignmentExpression)):r.type===c.Syntax.Identifier||e.inFor||this.expect("="),this.finalize(t,new s.VariableDeclarator(r,n))},e.prototype.parseVariableDeclarationList=function(e){var t={inFor:e.inFor},r=[];for(r.push(this.parseVariableDeclaration(t));this.match(",");)this.nextToken(),r.push(this.parseVariableDeclaration(t));return r},e.prototype.parseVariableStatement=function(){var e=this.createNode();this.expectKeyword("var");var t=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(e,new s.VariableDeclaration(t,"var"))},e.prototype.parseEmptyStatement=function(){var e=this.createNode();return this.expect(";"),this.finalize(e,new s.EmptyStatement)},e.prototype.parseExpressionStatement=function(){var e=this.createNode(),t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new s.ExpressionStatement(t))},e.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(i.Messages.StrictFunction),this.parseStatement()},e.prototype.parseIfStatement=function(){var e,t=this.createNode(),r=null;this.expectKeyword("if"),this.expect("(");var n=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement)):(this.expect(")"),e=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),r=this.parseIfClause())),this.finalize(t,new s.IfStatement(n,e,r))},e.prototype.parseDoWhileStatement=function(){var e=this.createNode();this.expectKeyword("do");var t=this.context.inIteration;this.context.inIteration=!0;var r=this.parseStatement();this.context.inIteration=t,this.expectKeyword("while"),this.expect("(");var n=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(e,new s.DoWhileStatement(r,n))},e.prototype.parseWhileStatement=function(){var e,t=this.createNode();this.expectKeyword("while"),this.expect("(");var r=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement);else{this.expect(")");var n=this.context.inIteration;this.context.inIteration=!0,e=this.parseStatement(),this.context.inIteration=n}return this.finalize(t,new s.WhileStatement(r,e))},e.prototype.parseForStatement=function(){var e,t,r,n=null,o=null,a=null,u=!0,p=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){n=this.createNode(),this.nextToken();var l=this.context.allowIn;this.context.allowIn=!1;var h=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=l,1===h.length&&this.matchKeyword("in")){var d=h[0];d.init&&(d.id.type===c.Syntax.ArrayPattern||d.id.type===c.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(i.Messages.ForInOfLoopInitializer,"for-in"),n=this.finalize(n,new s.VariableDeclaration(h,"var")),this.nextToken(),e=n,t=this.parseExpression(),n=null}else 1===h.length&&null===h[0].init&&this.matchContextualKeyword("of")?(n=this.finalize(n,new s.VariableDeclaration(h,"var")),this.nextToken(),e=n,t=this.parseAssignmentExpression(),n=null,u=!1):(n=this.finalize(n,new s.VariableDeclaration(h,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){n=this.createNode();var f=this.nextToken().value;if(this.context.strict||"in"!==this.lookahead.value){l=this.context.allowIn;this.context.allowIn=!1;h=this.parseBindingList(f,{inFor:!0});this.context.allowIn=l,1===h.length&&null===h[0].init&&this.matchKeyword("in")?(n=this.finalize(n,new s.VariableDeclaration(h,f)),this.nextToken(),e=n,t=this.parseExpression(),n=null):1===h.length&&null===h[0].init&&this.matchContextualKeyword("of")?(n=this.finalize(n,new s.VariableDeclaration(h,f)),this.nextToken(),e=n,t=this.parseAssignmentExpression(),n=null,u=!1):(this.consumeSemicolon(),n=this.finalize(n,new s.VariableDeclaration(h,f)))}else n=this.finalize(n,new s.Identifier(f)),this.nextToken(),e=n,t=this.parseExpression(),n=null}else{var m=this.lookahead;l=this.context.allowIn;if(this.context.allowIn=!1,n=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=l,this.matchKeyword("in"))this.context.isAssignmentTarget&&n.type!==c.Syntax.AssignmentExpression||this.tolerateError(i.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(n),e=n,t=this.parseExpression(),n=null;else if(this.matchContextualKeyword("of"))this.context.isAssignmentTarget&&n.type!==c.Syntax.AssignmentExpression||this.tolerateError(i.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(n),e=n,t=this.parseAssignmentExpression(),n=null,u=!1;else{if(this.match(",")){for(var g=[n];this.match(",");)this.nextToken(),g.push(this.isolateCoverGrammar(this.parseAssignmentExpression));n=this.finalize(this.startNode(m),new s.SequenceExpression(g))}this.expect(";")}}if(void 0===e&&(this.match(";")||(o=this.parseExpression()),this.expect(";"),this.match(")")||(a=this.parseExpression())),!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),r=this.finalize(this.createNode(),new s.EmptyStatement);else{this.expect(")");var y=this.context.inIteration;this.context.inIteration=!0,r=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=y}return void 0===e?this.finalize(p,new s.ForStatement(n,o,a,r)):u?this.finalize(p,new s.ForInStatement(e,t,r)):this.finalize(p,new s.ForOfStatement(e,t,r))},e.prototype.parseContinueStatement=function(){var e=this.createNode();this.expectKeyword("continue");var t=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var r=this.parseVariableIdentifier();t=r;var n="$"+r.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,n)||this.throwError(i.Messages.UnknownLabel,r.name)}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.throwError(i.Messages.IllegalContinue),this.finalize(e,new s.ContinueStatement(t))},e.prototype.parseBreakStatement=function(){var e=this.createNode();this.expectKeyword("break");var t=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var r=this.parseVariableIdentifier(),n="$"+r.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,n)||this.throwError(i.Messages.UnknownLabel,r.name),t=r}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.context.inSwitch||this.throwError(i.Messages.IllegalBreak),this.finalize(e,new s.BreakStatement(t))},e.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(i.Messages.IllegalReturn);var e=this.createNode();this.expectKeyword("return");var t=!this.match(";")&&!this.match("}")&&!this.hasLineTerminator&&2!==this.lookahead.type||8===this.lookahead.type||10===this.lookahead.type?this.parseExpression():null;return this.consumeSemicolon(),this.finalize(e,new s.ReturnStatement(t))},e.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(i.Messages.StrictModeWith);var e,t=this.createNode();this.expectKeyword("with"),this.expect("(");var r=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement)):(this.expect(")"),e=this.parseStatement()),this.finalize(t,new s.WithStatement(r,e))},e.prototype.parseSwitchCase=function(){var e,t=this.createNode();this.matchKeyword("default")?(this.nextToken(),e=null):(this.expectKeyword("case"),e=this.parseExpression()),this.expect(":");for(var r=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)r.push(this.parseStatementListItem());return this.finalize(t,new s.SwitchCase(e,r))},e.prototype.parseSwitchStatement=function(){var e=this.createNode();this.expectKeyword("switch"),this.expect("(");var t=this.parseExpression();this.expect(")");var r=this.context.inSwitch;this.context.inSwitch=!0;var n=[],o=!1;for(this.expect("{");!this.match("}");){var a=this.parseSwitchCase();null===a.test&&(o&&this.throwError(i.Messages.MultipleDefaultsInSwitch),o=!0),n.push(a)}return this.expect("}"),this.context.inSwitch=r,this.finalize(e,new s.SwitchStatement(t,n))},e.prototype.parseLabelledStatement=function(){var e,t=this.createNode(),r=this.parseExpression();if(r.type===c.Syntax.Identifier&&this.match(":")){this.nextToken();var n=r,o="$"+n.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,o)&&this.throwError(i.Messages.Redeclaration,"Label",n.name),this.context.labelSet[o]=!0;var a=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),a=this.parseClassDeclaration();else if(this.matchKeyword("function")){var u=this.lookahead,p=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(u,i.Messages.StrictFunction):p.generator&&this.tolerateUnexpectedToken(u,i.Messages.GeneratorInLegacyContext),a=p}else a=this.parseStatement();delete this.context.labelSet[o],e=new s.LabeledStatement(n,a)}else this.consumeSemicolon(),e=new s.ExpressionStatement(r);return this.finalize(t,e)},e.prototype.parseThrowStatement=function(){var e=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(i.Messages.NewlineAfterThrow);var t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new s.ThrowStatement(t))},e.prototype.parseCatchClause=function(){var e=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var t=[],r=this.parsePattern(t),n={},o=0;o<t.length;o++){var a="$"+t[o].value;Object.prototype.hasOwnProperty.call(n,a)&&this.tolerateError(i.Messages.DuplicateBinding,t[o].value),n[a]=!0}this.context.strict&&r.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(r.name)&&this.tolerateError(i.Messages.StrictCatchVariable),this.expect(")");var u=this.parseBlock();return this.finalize(e,new s.CatchClause(r,u))},e.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},e.prototype.parseTryStatement=function(){var e=this.createNode();this.expectKeyword("try");var t=this.parseBlock(),r=this.matchKeyword("catch")?this.parseCatchClause():null,n=this.matchKeyword("finally")?this.parseFinallyClause():null;return r||n||this.throwError(i.Messages.NoCatchOrFinally),this.finalize(e,new s.TryStatement(t,r,n))},e.prototype.parseDebuggerStatement=function(){var e=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(e,new s.DebuggerStatement)},e.prototype.parseStatement=function(){var e;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:e=this.parseExpressionStatement();break;case 7:var t=this.lookahead.value;e="{"===t?this.parseBlock():"("===t?this.parseExpressionStatement():";"===t?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:e=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":e=this.parseBreakStatement();break;case"continue":e=this.parseContinueStatement();break;case"debugger":e=this.parseDebuggerStatement();break;case"do":e=this.parseDoWhileStatement();break;case"for":e=this.parseForStatement();break;case"function":e=this.parseFunctionDeclaration();break;case"if":e=this.parseIfStatement();break;case"return":e=this.parseReturnStatement();break;case"switch":e=this.parseSwitchStatement();break;case"throw":e=this.parseThrowStatement();break;case"try":e=this.parseTryStatement();break;case"var":e=this.parseVariableStatement();break;case"while":e=this.parseWhileStatement();break;case"with":e=this.parseWithStatement();break;default:e=this.parseExpressionStatement()}break;default:e=this.throwUnexpectedToken(this.lookahead)}return e},e.prototype.parseFunctionSourceElements=function(){var e=this.createNode();this.expect("{");var t=this.parseDirectivePrologues(),r=this.context.labelSet,n=this.context.inIteration,o=this.context.inSwitch,i=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;2!==this.lookahead.type&&!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=r,this.context.inIteration=n,this.context.inSwitch=o,this.context.inFunctionBody=i,this.finalize(e,new s.BlockStatement(t))},e.prototype.validateParam=function(e,t,r){var n="$"+r;this.context.strict?(this.scanner.isRestrictedWord(r)&&(e.stricted=t,e.message=i.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(e.paramSet,n)&&(e.stricted=t,e.message=i.Messages.StrictParamDupe)):e.firstRestricted||(this.scanner.isRestrictedWord(r)?(e.firstRestricted=t,e.message=i.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(r)?(e.firstRestricted=t,e.message=i.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet,n)&&(e.stricted=t,e.message=i.Messages.StrictParamDupe)),"function"==typeof Object.defineProperty?Object.defineProperty(e.paramSet,n,{value:!0,enumerable:!0,writable:!0,configurable:!0}):e.paramSet[n]=!0},e.prototype.parseRestElement=function(e){var t=this.createNode();this.expect("...");var r=this.parsePattern(e);return this.match("=")&&this.throwError(i.Messages.DefaultRestParameter),this.match(")")||this.throwError(i.Messages.ParameterAfterRestParameter),this.finalize(t,new s.RestElement(r))},e.prototype.parseFormalParameter=function(e){for(var t=[],r=this.match("...")?this.parseRestElement(t):this.parsePatternWithDefault(t),n=0;n<t.length;n++)this.validateParam(e,t[n],t[n].value);e.simple=e.simple&&r instanceof s.Identifier,e.params.push(r)},e.prototype.parseFormalParameters=function(e){var t;if(t={simple:!0,params:[],firstRestricted:e},this.expect("("),!this.match(")"))for(t.paramSet={};2!==this.lookahead.type&&(this.parseFormalParameter(t),!this.match(")"))&&(this.expect(","),!this.match(")")););return this.expect(")"),{simple:t.simple,params:t.params,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.matchAsyncFunction=function(){var e=this.matchContextualKeyword("async");if(e){var t=this.scanner.saveState();this.scanner.scanComments();var r=this.scanner.lex();this.scanner.restoreState(t),e=t.lineNumber===r.lineNumber&&4===r.type&&"function"===r.value}return e},e.prototype.parseFunctionDeclaration=function(e){var t=this.createNode(),r=this.matchContextualKeyword("async");r&&this.nextToken(),this.expectKeyword("function");var n,o=!r&&this.match("*");o&&this.nextToken();var a=null,c=null;if(!e||!this.match("(")){var u=this.lookahead;a=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(u.value)&&this.tolerateUnexpectedToken(u,i.Messages.StrictFunctionName):this.scanner.isRestrictedWord(u.value)?(c=u,n=i.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(u.value)&&(c=u,n=i.Messages.StrictReservedWord)}var p=this.context.await,l=this.context.allowYield;this.context.await=r,this.context.allowYield=!o;var h=this.parseFormalParameters(c),d=h.params,f=h.stricted;c=h.firstRestricted,h.message&&(n=h.message);var m=this.context.strict,g=this.context.allowStrictDirective;this.context.allowStrictDirective=h.simple;var y=this.parseFunctionSourceElements();return this.context.strict&&c&&this.throwUnexpectedToken(c,n),this.context.strict&&f&&this.tolerateUnexpectedToken(f,n),this.context.strict=m,this.context.allowStrictDirective=g,this.context.await=p,this.context.allowYield=l,r?this.finalize(t,new s.AsyncFunctionDeclaration(a,d,y)):this.finalize(t,new s.FunctionDeclaration(a,d,y,o))},e.prototype.parseFunctionExpression=function(){var e=this.createNode(),t=this.matchContextualKeyword("async");t&&this.nextToken(),this.expectKeyword("function");var r,n=!t&&this.match("*");n&&this.nextToken();var o,a=null,c=this.context.await,u=this.context.allowYield;if(this.context.await=t,this.context.allowYield=!n,!this.match("(")){var p=this.lookahead;a=this.context.strict||n||!this.matchKeyword("yield")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(p.value)&&this.tolerateUnexpectedToken(p,i.Messages.StrictFunctionName):this.scanner.isRestrictedWord(p.value)?(o=p,r=i.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(p.value)&&(o=p,r=i.Messages.StrictReservedWord)}var l=this.parseFormalParameters(o),h=l.params,d=l.stricted;o=l.firstRestricted,l.message&&(r=l.message);var f=this.context.strict,m=this.context.allowStrictDirective;this.context.allowStrictDirective=l.simple;var g=this.parseFunctionSourceElements();return this.context.strict&&o&&this.throwUnexpectedToken(o,r),this.context.strict&&d&&this.tolerateUnexpectedToken(d,r),this.context.strict=f,this.context.allowStrictDirective=m,this.context.await=c,this.context.allowYield=u,t?this.finalize(e,new s.AsyncFunctionExpression(a,h,g)):this.finalize(e,new s.FunctionExpression(a,h,g,n))},e.prototype.parseDirective=function(){var e=this.lookahead,t=this.createNode(),r=this.parseExpression(),n=r.type===c.Syntax.Literal?this.getTokenRaw(e).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(t,n?new s.Directive(r,n):new s.ExpressionStatement(r))},e.prototype.parseDirectivePrologues=function(){for(var e=null,t=[];;){var r=this.lookahead;if(8!==r.type)break;var n=this.parseDirective();t.push(n);var o=n.directive;if("string"!=typeof o)break;"use strict"===o?(this.context.strict=!0,e&&this.tolerateUnexpectedToken(e,i.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(r,i.Messages.IllegalLanguageModeDirective)):!e&&r.octal&&(e=r)}return t},e.prototype.qualifiedPropertyName=function(e){switch(e.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return"["===e.value}return!1},e.prototype.parseGetterMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters();r.params.length>0&&this.tolerateError(i.Messages.BadGetterArity);var n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,r.params,n,!1))},e.prototype.parseSetterMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters();1!==r.params.length?this.tolerateError(i.Messages.BadSetterArity):r.params[0]instanceof s.RestElement&&this.tolerateError(i.Messages.BadSetterRestParameter);var n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,r.params,n,!1))},e.prototype.parseGeneratorMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters();this.context.allowYield=!1;var n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,r.params,n,!0))},e.prototype.isStartOfExpression=function(){var e=!0,t=this.lookahead.value;switch(this.lookahead.type){case 7:e="["===t||"("===t||"{"===t||"+"===t||"-"===t||"!"===t||"~"===t||"++"===t||"--"===t||"/"===t||"/="===t;break;case 4:e="class"===t||"delete"===t||"function"===t||"let"===t||"new"===t||"super"===t||"this"===t||"typeof"===t||"void"===t||"yield"===t}return e},e.prototype.parseYieldExpression=function(){var e=this.createNode();this.expectKeyword("yield");var t=null,r=!1;if(!this.hasLineTerminator){var n=this.context.allowYield;this.context.allowYield=!1,(r=this.match("*"))?(this.nextToken(),t=this.parseAssignmentExpression()):this.isStartOfExpression()&&(t=this.parseAssignmentExpression()),this.context.allowYield=n}return this.finalize(e,new s.YieldExpression(t,r))},e.prototype.parseClassElement=function(e){var t=this.lookahead,r=this.createNode(),n="",o=null,a=null,c=!1,u=!1,p=!1,l=!1;if(this.match("*"))this.nextToken();else if(c=this.match("["),"static"===(o=this.parseObjectPropertyKey()).name&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(t=this.lookahead,p=!0,c=this.match("["),this.match("*")?this.nextToken():o=this.parseObjectPropertyKey()),3===t.type&&!this.hasLineTerminator&&"async"===t.value){var h=this.lookahead.value;":"!==h&&"("!==h&&"*"!==h&&(l=!0,t=this.lookahead,o=this.parseObjectPropertyKey(),3===t.type&&"constructor"===t.value&&this.tolerateUnexpectedToken(t,i.Messages.ConstructorIsAsync))}var d=this.qualifiedPropertyName(this.lookahead);return 3===t.type?"get"===t.value&&d?(n="get",c=this.match("["),o=this.parseObjectPropertyKey(),this.context.allowYield=!1,a=this.parseGetterMethod()):"set"===t.value&&d&&(n="set",c=this.match("["),o=this.parseObjectPropertyKey(),a=this.parseSetterMethod()):7===t.type&&"*"===t.value&&d&&(n="init",c=this.match("["),o=this.parseObjectPropertyKey(),a=this.parseGeneratorMethod(),u=!0),!n&&o&&this.match("(")&&(n="init",a=l?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),u=!0),n||this.throwUnexpectedToken(this.lookahead),"init"===n&&(n="method"),c||(p&&this.isPropertyKey(o,"prototype")&&this.throwUnexpectedToken(t,i.Messages.StaticPrototype),!p&&this.isPropertyKey(o,"constructor")&&(("method"!==n||!u||a&&a.generator)&&this.throwUnexpectedToken(t,i.Messages.ConstructorSpecialMethod),e.value?this.throwUnexpectedToken(t,i.Messages.DuplicateConstructor):e.value=!0,n="constructor")),this.finalize(r,new s.MethodDefinition(o,c,a,n,p))},e.prototype.parseClassElementList=function(){var e=[],t={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():e.push(this.parseClassElement(t));return this.expect("}"),e},e.prototype.parseClassBody=function(){var e=this.createNode(),t=this.parseClassElementList();return this.finalize(e,new s.ClassBody(t))},e.prototype.parseClassDeclaration=function(e){var t=this.createNode(),r=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var n=e&&3!==this.lookahead.type?null:this.parseVariableIdentifier(),o=null;this.matchKeyword("extends")&&(this.nextToken(),o=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var i=this.parseClassBody();return this.context.strict=r,this.finalize(t,new s.ClassDeclaration(n,o,i))},e.prototype.parseClassExpression=function(){var e=this.createNode(),t=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var r=3===this.lookahead.type?this.parseVariableIdentifier():null,n=null;this.matchKeyword("extends")&&(this.nextToken(),n=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var o=this.parseClassBody();return this.context.strict=t,this.finalize(e,new s.ClassExpression(r,n,o))},e.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new s.Module(t))},e.prototype.parseScript=function(){for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new s.Script(t))},e.prototype.parseModuleSpecifier=function(){var e=this.createNode();8!==this.lookahead.type&&this.throwError(i.Messages.InvalidModuleSpecifier);var t=this.nextToken(),r=this.getTokenRaw(t);return this.finalize(e,new s.Literal(t.value,r))},e.prototype.parseImportSpecifier=function(){var e,t,r=this.createNode();return 3===this.lookahead.type?(t=e=this.parseVariableIdentifier(),this.matchContextualKeyword("as")&&(this.nextToken(),t=this.parseVariableIdentifier())):(t=e=this.parseIdentifierName(),this.matchContextualKeyword("as")?(this.nextToken(),t=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(r,new s.ImportSpecifier(t,e))},e.prototype.parseNamedImports=function(){this.expect("{");for(var e=[];!this.match("}");)e.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),e},e.prototype.parseImportDefaultSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName();return this.finalize(e,new s.ImportDefaultSpecifier(t))},e.prototype.parseImportNamespaceSpecifier=function(){var e=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(i.Messages.NoAsAfterImportNamespace),this.nextToken();var t=this.parseIdentifierName();return this.finalize(e,new s.ImportNamespaceSpecifier(t))},e.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(i.Messages.IllegalImportDeclaration);var e,t=this.createNode();this.expectKeyword("import");var r=[];if(8===this.lookahead.type)e=this.parseModuleSpecifier();else{if(this.match("{")?r=r.concat(this.parseNamedImports()):this.match("*")?r.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(r.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?r.push(this.parseImportNamespaceSpecifier()):this.match("{")?r=r.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var n=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause;this.throwError(n,this.lookahead.value)}this.nextToken(),e=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(t,new s.ImportDeclaration(r,e))},e.prototype.parseExportSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName(),r=t;return this.matchContextualKeyword("as")&&(this.nextToken(),r=this.parseIdentifierName()),this.finalize(e,new s.ExportSpecifier(t,r))},e.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(i.Messages.IllegalExportDeclaration);var e,t=this.createNode();if(this.expectKeyword("export"),this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var r=this.parseFunctionDeclaration(!0);e=this.finalize(t,new s.ExportDefaultDeclaration(r))}else if(this.matchKeyword("class")){r=this.parseClassDeclaration(!0);e=this.finalize(t,new s.ExportDefaultDeclaration(r))}else if(this.matchContextualKeyword("async")){r=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression();e=this.finalize(t,new s.ExportDefaultDeclaration(r))}else{this.matchContextualKeyword("from")&&this.throwError(i.Messages.UnexpectedToken,this.lookahead.value);r=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression();this.consumeSemicolon(),e=this.finalize(t,new s.ExportDefaultDeclaration(r))}else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var n=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause;this.throwError(n,this.lookahead.value)}this.nextToken();var o=this.parseModuleSpecifier();this.consumeSemicolon(),e=this.finalize(t,new s.ExportAllDeclaration(o))}else if(4===this.lookahead.type){r=void 0;switch(this.lookahead.value){case"let":case"const":r=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":r=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}e=this.finalize(t,new s.ExportNamedDeclaration(r,[],null))}else if(this.matchAsyncFunction()){r=this.parseFunctionDeclaration();e=this.finalize(t,new s.ExportNamedDeclaration(r,[],null))}else{var a=[],c=null,u=!1;for(this.expect("{");!this.match("}");)u=u||this.matchKeyword("default"),a.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");if(this.expect("}"),this.matchContextualKeyword("from"))this.nextToken(),c=this.parseModuleSpecifier(),this.consumeSemicolon();else if(u){n=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause;this.throwError(n,this.lookahead.value)}else this.consumeSemicolon();e=this.finalize(t,new s.ExportNamedDeclaration(null,a,c))}return e},e}();t.Parser=p},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=function(e,t){if(!e)throw new Error("ASSERT: "+t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.errors=[],this.tolerant=!1}return e.prototype.recordError=function(e){this.errors.push(e)},e.prototype.tolerate=function(e){if(!this.tolerant)throw e;this.recordError(e)},e.prototype.constructError=function(e,t){var r=new Error(e);try{throw r}catch(e){Object.create&&Object.defineProperty&&(r=Object.create(e),Object.defineProperty(r,"column",{value:t}))}return r},e.prototype.createError=function(e,t,r,n){var o="Line "+t+": "+n,i=this.constructError(o,r);return i.index=e,i.lineNumber=t,i.description=n,i},e.prototype.throwError=function(e,t,r,n){throw this.createError(e,t,r,n)},e.prototype.tolerateError=function(e,t,r,n){var o=this.createError(e,t,r,n);if(!this.tolerant)throw o;this.recordError(o)},e}();t.ErrorHandler=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),o=r(4),i=r(11);function s(e){return"0123456789abcdef".indexOf(e.toLowerCase())}function a(e){return"01234567".indexOf(e)}var c=function(){function e(e,t){this.source=e,this.errorHandler=t,this.trackComment=!1,this.isModule=!1,this.length=e.length,this.index=0,this.lineNumber=e.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return e.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},e.prototype.restoreState=function(e){this.index=e.index,this.lineNumber=e.lineNumber,this.lineStart=e.lineStart},e.prototype.eof=function(){return this.index>=this.length},e.prototype.throwUnexpectedToken=function(e){return void 0===e&&(e=i.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.tolerateUnexpectedToken=function(e){void 0===e&&(e=i.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.skipSingleLineComment=function(e){var t,r,n=[];for(this.trackComment&&(n=[],t=this.index-e,r={start:{line:this.lineNumber,column:this.index-this.lineStart-e},end:{}});!this.eof();){var i=this.source.charCodeAt(this.index);if(++this.index,o.Character.isLineTerminator(i)){if(this.trackComment){r.end={line:this.lineNumber,column:this.index-this.lineStart-1};var s={multiLine:!1,slice:[t+e,this.index-1],range:[t,this.index-1],loc:r};n.push(s)}return 13===i&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,n}}if(this.trackComment){r.end={line:this.lineNumber,column:this.index-this.lineStart};s={multiLine:!1,slice:[t+e,this.index],range:[t,this.index],loc:r};n.push(s)}return n},e.prototype.skipMultiLineComment=function(){var e,t,r=[];for(this.trackComment&&(r=[],e=this.index-2,t={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var n=this.source.charCodeAt(this.index);if(o.Character.isLineTerminator(n))13===n&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(42===n){if(47===this.source.charCodeAt(this.index+1)){if(this.index+=2,this.trackComment){t.end={line:this.lineNumber,column:this.index-this.lineStart};var i={multiLine:!0,slice:[e+2,this.index-2],range:[e,this.index],loc:t};r.push(i)}return r}++this.index}else++this.index}if(this.trackComment){t.end={line:this.lineNumber,column:this.index-this.lineStart};i={multiLine:!0,slice:[e+2,this.index],range:[e,this.index],loc:t};r.push(i)}return this.tolerateUnexpectedToken(),r},e.prototype.scanComments=function(){var e;this.trackComment&&(e=[]);for(var t=0===this.index;!this.eof();){var r=this.source.charCodeAt(this.index);if(o.Character.isWhiteSpace(r))++this.index;else if(o.Character.isLineTerminator(r))++this.index,13===r&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,t=!0;else if(47===r)if(47===(r=this.source.charCodeAt(this.index+1))){this.index+=2;var n=this.skipSingleLineComment(2);this.trackComment&&(e=e.concat(n)),t=!0}else{if(42!==r)break;this.index+=2;n=this.skipMultiLineComment();this.trackComment&&(e=e.concat(n))}else if(t&&45===r){if(45!==this.source.charCodeAt(this.index+1)||62!==this.source.charCodeAt(this.index+2))break;this.index+=3;n=this.skipSingleLineComment(3);this.trackComment&&(e=e.concat(n))}else{if(60!==r||this.isModule)break;if("!--"!==this.source.slice(this.index+1,this.index+4))break;this.index+=4;n=this.skipSingleLineComment(4);this.trackComment&&(e=e.concat(n))}}return e},e.prototype.isFutureReservedWord=function(e){switch(e){case"enum":case"export":case"import":case"super":return!0;default:return!1}},e.prototype.isStrictModeReservedWord=function(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},e.prototype.isRestrictedWord=function(e){return"eval"===e||"arguments"===e},e.prototype.isKeyword=function(e){switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}},e.prototype.codePointAt=function(e){var t=this.source.charCodeAt(e);if(t>=55296&&t<=56319){var r=this.source.charCodeAt(e+1);if(r>=56320&&r<=57343)t=1024*(t-55296)+r-56320+65536}return t},e.prototype.scanHexEscape=function(e){for(var t="u"===e?4:2,r=0,n=0;n<t;++n){if(this.eof()||!o.Character.isHexDigit(this.source.charCodeAt(this.index)))return null;r=16*r+s(this.source[this.index++])}return String.fromCharCode(r)},e.prototype.scanUnicodeCodePointEscape=function(){var e=this.source[this.index],t=0;for("}"===e&&this.throwUnexpectedToken();!this.eof()&&(e=this.source[this.index++],o.Character.isHexDigit(e.charCodeAt(0)));)t=16*t+s(e);return(t>1114111||"}"!==e)&&this.throwUnexpectedToken(),o.Character.fromCodePoint(t)},e.prototype.getIdentifier=function(){for(var e=this.index++;!this.eof();){var t=this.source.charCodeAt(this.index);if(92===t)return this.index=e,this.getComplexIdentifier();if(t>=55296&&t<57343)return this.index=e,this.getComplexIdentifier();if(!o.Character.isIdentifierPart(t))break;++this.index}return this.source.slice(e,this.index)},e.prototype.getComplexIdentifier=function(){var e,t=this.codePointAt(this.index),r=o.Character.fromCodePoint(t);for(this.index+=r.length,92===t&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&o.Character.isIdentifierStart(e.charCodeAt(0))||this.throwUnexpectedToken(),r=e);!this.eof()&&(t=this.codePointAt(this.index),o.Character.isIdentifierPart(t));)r+=e=o.Character.fromCodePoint(t),this.index+=e.length,92===t&&(r=r.substr(0,r.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&o.Character.isIdentifierPart(e.charCodeAt(0))||this.throwUnexpectedToken(),r+=e);return r},e.prototype.octalToDecimal=function(e){var t="0"!==e,r=a(e);return!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(t=!0,r=8*r+a(this.source[this.index++]),"0123".indexOf(e)>=0&&!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(r=8*r+a(this.source[this.index++]))),{code:r,octal:t}},e.prototype.scanIdentifier=function(){var e,t=this.index,r=92===this.source.charCodeAt(t)?this.getComplexIdentifier():this.getIdentifier();if(3!==(e=1===r.length?3:this.isKeyword(r)?4:"null"===r?5:"true"===r||"false"===r?1:3)&&t+r.length!==this.index){var n=this.index;this.index=t,this.tolerateUnexpectedToken(i.Messages.InvalidEscapedReservedWord),this.index=n}return{type:e,value:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.scanPunctuator=function(){var e=this.index,t=this.source[this.index];switch(t){case"(":case"{":"{"===t&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,"."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,t="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:">>>="===(t=this.source.substr(this.index,4))?this.index+=4:"==="===(t=t.substr(0,3))||"!=="===t||">>>"===t||"<<="===t||">>="===t||"**="===t?this.index+=3:"&&"===(t=t.substr(0,2))||"||"===t||"=="===t||"!="===t||"+="===t||"-="===t||"*="===t||"/="===t||"++"===t||"--"===t||"<<"===t||">>"===t||"&="===t||"|="===t||"^="===t||"%="===t||"<="===t||">="===t||"=>"===t||"**"===t?this.index+=2:(t=this.source[this.index],"<>=!+-*%&|^/".indexOf(t)>=0&&++this.index)}return this.index===e&&this.throwUnexpectedToken(),{type:7,value:t,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanHexLiteral=function(e){for(var t="";!this.eof()&&o.Character.isHexDigit(this.source.charCodeAt(this.index));)t+=this.source[this.index++];return 0===t.length&&this.throwUnexpectedToken(),o.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+t,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanBinaryLiteral=function(e){for(var t,r="";!this.eof()&&("0"===(t=this.source[this.index])||"1"===t);)r+=this.source[this.index++];return 0===r.length&&this.throwUnexpectedToken(),this.eof()||(t=this.source.charCodeAt(this.index),(o.Character.isIdentifierStart(t)||o.Character.isDecimalDigit(t))&&this.throwUnexpectedToken()),{type:6,value:parseInt(r,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanOctalLiteral=function(e,t){var r="",n=!1;for(o.Character.isOctalDigit(e.charCodeAt(0))?(n=!0,r="0"+this.source[this.index++]):++this.index;!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];return n||0!==r.length||this.throwUnexpectedToken(),(o.Character.isIdentifierStart(this.source.charCodeAt(this.index))||o.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(r,8),octal:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.isImplicitOctalLiteral=function(){for(var e=this.index+1;e<this.length;++e){var t=this.source[e];if("8"===t||"9"===t)return!1;if(!o.Character.isOctalDigit(t.charCodeAt(0)))return!0}return!0},e.prototype.scanNumericLiteral=function(){var e=this.index,t=this.source[e];n.assert(o.Character.isDecimalDigit(t.charCodeAt(0))||"."===t,"Numeric literal must start with a decimal digit or a decimal point");var r="";if("."!==t){if(r=this.source[this.index++],t=this.source[this.index],"0"===r){if("x"===t||"X"===t)return++this.index,this.scanHexLiteral(e);if("b"===t||"B"===t)return++this.index,this.scanBinaryLiteral(e);if("o"===t||"O"===t)return this.scanOctalLiteral(t,e);if(t&&o.Character.isOctalDigit(t.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(t,e)}for(;o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];t=this.source[this.index]}if("."===t){for(r+=this.source[this.index++];o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];t=this.source[this.index]}if("e"===t||"E"===t)if(r+=this.source[this.index++],"+"!==(t=this.source[this.index])&&"-"!==t||(r+=this.source[this.index++]),o.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];else this.throwUnexpectedToken();return o.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(r),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanStringLiteral=function(){var e=this.index,t=this.source[e];n.assert("'"===t||'"'===t,"String literal must starts with a quote"),++this.index;for(var r=!1,s="";!this.eof();){var a=this.source[this.index++];if(a===t){t="";break}if("\\"===a)if((a=this.source[this.index++])&&o.Character.isLineTerminator(a.charCodeAt(0)))++this.lineNumber,"\r"===a&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(a){case"u":if("{"===this.source[this.index])++this.index,s+=this.scanUnicodeCodePointEscape();else{var c=this.scanHexEscape(a);null===c&&this.throwUnexpectedToken(),s+=c}break;case"x":var u=this.scanHexEscape(a);null===u&&this.throwUnexpectedToken(i.Messages.InvalidHexEscapeSequence),s+=u;break;case"n":s+="\n";break;case"r":s+="\r";break;case"t":s+="\t";break;case"b":s+="\b";break;case"f":s+="\f";break;case"v":s+="\v";break;case"8":case"9":s+=a,this.tolerateUnexpectedToken();break;default:if(a&&o.Character.isOctalDigit(a.charCodeAt(0))){var p=this.octalToDecimal(a);r=p.octal||r,s+=String.fromCharCode(p.code)}else s+=a}else{if(o.Character.isLineTerminator(a.charCodeAt(0)))break;s+=a}}return""!==t&&(this.index=e,this.throwUnexpectedToken()),{type:8,value:s,octal:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanTemplate=function(){var e="",t=!1,r=this.index,n="`"===this.source[r],s=!1,a=2;for(++this.index;!this.eof();){var c=this.source[this.index++];if("`"===c){a=1,s=!0,t=!0;break}if("$"===c){if("{"===this.source[this.index]){this.curlyStack.push("${"),++this.index,t=!0;break}e+=c}else if("\\"===c)if(c=this.source[this.index++],o.Character.isLineTerminator(c.charCodeAt(0)))++this.lineNumber,"\r"===c&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(c){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"u":if("{"===this.source[this.index])++this.index,e+=this.scanUnicodeCodePointEscape();else{var u=this.index,p=this.scanHexEscape(c);null!==p?e+=p:(this.index=u,e+=c)}break;case"x":var l=this.scanHexEscape(c);null===l&&this.throwUnexpectedToken(i.Messages.InvalidHexEscapeSequence),e+=l;break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:"0"===c?(o.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(i.Messages.TemplateOctalLiteral),e+="\0"):o.Character.isOctalDigit(c.charCodeAt(0))?this.throwUnexpectedToken(i.Messages.TemplateOctalLiteral):e+=c}else o.Character.isLineTerminator(c.charCodeAt(0))?(++this.lineNumber,"\r"===c&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,e+="\n"):e+=c}return t||this.throwUnexpectedToken(),n||this.curlyStack.pop(),{type:10,value:this.source.slice(r+1,this.index-a),cooked:e,head:n,tail:s,lineNumber:this.lineNumber,lineStart:this.lineStart,start:r,end:this.index}},e.prototype.testRegExp=function(e,t){var r=e,n=this;t.indexOf("u")>=0&&(r=r.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(e,t,r){var o=parseInt(t||r,16);return o>1114111&&n.throwUnexpectedToken(i.Messages.InvalidRegExp),o<=65535?String.fromCharCode(o):""}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,""));try{RegExp(r)}catch(e){this.throwUnexpectedToken(i.Messages.InvalidRegExp)}try{return new RegExp(e,t)}catch(e){return null}},e.prototype.scanRegExpBody=function(){var e=this.source[this.index];n.assert("/"===e,"Regular expression literal must start with a slash");for(var t=this.source[this.index++],r=!1,s=!1;!this.eof();)if(t+=e=this.source[this.index++],"\\"===e)e=this.source[this.index++],o.Character.isLineTerminator(e.charCodeAt(0))&&this.throwUnexpectedToken(i.Messages.UnterminatedRegExp),t+=e;else if(o.Character.isLineTerminator(e.charCodeAt(0)))this.throwUnexpectedToken(i.Messages.UnterminatedRegExp);else if(r)"]"===e&&(r=!1);else{if("/"===e){s=!0;break}"["===e&&(r=!0)}return s||this.throwUnexpectedToken(i.Messages.UnterminatedRegExp),t.substr(1,t.length-2)},e.prototype.scanRegExpFlags=function(){for(var e="";!this.eof();){var t=this.source[this.index];if(!o.Character.isIdentifierPart(t.charCodeAt(0)))break;if(++this.index,"\\"!==t||this.eof())e+=t,t;else if("u"===(t=this.source[this.index])){++this.index;var r=this.index,n=this.scanHexEscape("u");if(null!==n)for(e+=n,"\\u";r<this.index;++r)this.source[r];else this.index=r,e+="u","\\u";this.tolerateUnexpectedToken()}else"\\",this.tolerateUnexpectedToken()}return e},e.prototype.scanRegExp=function(){var e=this.index,t=this.scanRegExpBody(),r=this.scanRegExpFlags();return{type:9,value:"",pattern:t,flags:r,regex:this.testRegExp(t,r),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var e=this.source.charCodeAt(this.index);return o.Character.isIdentifierStart(e)?this.scanIdentifier():40===e||41===e||59===e?this.scanPunctuator():39===e||34===e?this.scanStringLiteral():46===e?o.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():o.Character.isDecimalDigit(e)?this.scanNumericLiteral():96===e||125===e&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():e>=55296&&e<57343&&o.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},e}();t.Scanner=c},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenName={},t.TokenName[1]="Boolean",t.TokenName[2]="<end>",t.TokenName[3]="Identifier",t.TokenName[4]="Keyword",t.TokenName[5]="Null",t.TokenName[6]="Numeric",t.TokenName[7]="Punctuator",t.TokenName[8]="String",t.TokenName[9]="RegularExpression",t.TokenName[10]="Template"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",frasl:"",euro:"",image:"",weierp:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",lang:"",rang:""}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),o=r(12),i=r(13),s=function(){function e(){this.values=[],this.curly=this.paren=-1}return e.prototype.beforeFunctionExpression=function(e){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(e)>=0},e.prototype.isRegexStart=function(){var e=this.values[this.values.length-1],t=null!==e;switch(e){case"this":case"]":t=!1;break;case")":var r=this.values[this.paren-1];t="if"===r||"while"===r||"for"===r||"with"===r;break;case"}":if(t=!1,"function"===this.values[this.curly-3])t=!!(n=this.values[this.curly-4])&&!this.beforeFunctionExpression(n);else if("function"===this.values[this.curly-4]){var n;t=!(n=this.values[this.curly-5])||!this.beforeFunctionExpression(n)}}return t},e.prototype.push=function(e){7===e.type||4===e.type?("{"===e.value?this.curly=this.values.length:"("===e.value&&(this.paren=this.values.length),this.values.push(e.value)):this.values.push(null)},e}(),a=function(){function e(e,t){this.errorHandler=new n.ErrorHandler,this.errorHandler.tolerant=!!t&&("boolean"==typeof t.tolerant&&t.tolerant),this.scanner=new o.Scanner(e,this.errorHandler),this.scanner.trackComment=!!t&&("boolean"==typeof t.comment&&t.comment),this.trackRange=!!t&&("boolean"==typeof t.range&&t.range),this.trackLoc=!!t&&("boolean"==typeof t.loc&&t.loc),this.buffer=[],this.reader=new s}return e.prototype.errors=function(){return this.errorHandler.errors},e.prototype.getNextToken=function(){if(0===this.buffer.length){var e=this.scanner.scanComments();if(this.scanner.trackComment)for(var t=0;t<e.length;++t){var r=e[t],n=this.scanner.source.slice(r.slice[0],r.slice[1]),o={type:r.multiLine?"BlockComment":"LineComment",value:n};this.trackRange&&(o.range=r.range),this.trackLoc&&(o.loc=r.loc),this.buffer.push(o)}if(!this.scanner.eof()){var s=void 0;this.trackLoc&&(s={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var a="/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(a);var c={type:i.TokenName[a.type],value:this.scanner.source.slice(a.start,a.end)};if(this.trackRange&&(c.range=[a.start,a.end]),this.trackLoc&&(s.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},c.loc=s),9===a.type){var u=a.pattern,p=a.flags;c.regex={pattern:u,flags:p}}this.buffer.push(c)}}return this.buffer.shift()},e}();t.Tokenizer=a}])},e.exports=n()},function(e,t,r){"use strict";var n=r(36),o=r(46),i=r(63),s=r(47),a=Object.prototype.toString,c=Object.prototype.hasOwnProperty,u=9,p=10,l=32,h=33,d=34,f=35,m=37,g=38,y=39,v=42,b=44,w=45,E=58,x=62,C=63,S=64,k=91,P=93,_=96,A=123,D=124,O=125,T={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},N=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function I(e){var t,r,i;if(t=e.toString(16).toUpperCase(),e<=255)r="x",i=2;else if(e<=65535)r="u",i=4;else{if(!(e<=4294967295))throw new o("code point within a string may not be greater than 0xFFFFFFFF");r="U",i=8}return"\\"+r+n.repeat("0",i-t.length)+t}function R(e){this.schema=e.schema||i,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=n.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var r,n,o,i,s,a,u;if(null===t)return{};for(r={},o=0,i=(n=Object.keys(t)).length;o<i;o+=1)s=n[o],a=String(t[s]),"!!"===s.slice(0,2)&&(s="tag:yaml.org,2002:"+s.slice(2)),(u=e.compiledTypeMap.fallback[s])&&c.call(u.styleAliases,a)&&(a=u.styleAliases[a]),r[s]=a;return r}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function j(e,t){for(var r,o=n.repeat(" ",t),i=0,s=-1,a="",c=e.length;i<c;)-1===(s=e.indexOf("\n",i))?(r=e.slice(i),i=c):(r=e.slice(i,s+1),i=s+1),r.length&&"\n"!==r&&(a+=o),a+=r;return a}function F(e,t){return"\n"+n.repeat(" ",e.indent*t)}function M(e){return e===l||e===u}function L(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&65279!==e||65536<=e&&e<=1114111}function G(e){return L(e)&&65279!==e&&e!==b&&e!==k&&e!==P&&e!==A&&e!==O&&e!==E&&e!==f}function B(e){return/^\n* /.test(e)}var U=1,$=2,q=3,z=4,H=5;function V(e,t,r,n,o){var i,s,a,c=!1,u=!1,l=-1!==n,T=-1,N=L(a=e.charCodeAt(0))&&65279!==a&&!M(a)&&a!==w&&a!==C&&a!==E&&a!==b&&a!==k&&a!==P&&a!==A&&a!==O&&a!==f&&a!==g&&a!==v&&a!==h&&a!==D&&a!==x&&a!==y&&a!==d&&a!==m&&a!==S&&a!==_&&!M(e.charCodeAt(e.length-1));if(t)for(i=0;i<e.length;i++){if(!L(s=e.charCodeAt(i)))return H;N=N&&G(s)}else{for(i=0;i<e.length;i++){if((s=e.charCodeAt(i))===p)c=!0,l&&(u=u||i-T-1>n&&" "!==e[T+1],T=i);else if(!L(s))return H;N=N&&G(s)}u=u||l&&i-T-1>n&&" "!==e[T+1]}return c||u?r>9&&B(e)?H:u?z:q:N&&!o(e)?U:$}function X(e,t,r,n){e.dump=function(){if(0===t.length)return"''";if(!e.noCompatMode&&-1!==N.indexOf(t))return"'"+t+"'";var i=e.indent*Math.max(1,r),s=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),a=n||e.flowLevel>-1&&r>=e.flowLevel;switch(V(t,a,e.indent,s,function(t){return function(e,t){var r,n;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(e.implicitTypes[r].resolve(t))return!0;return!1}(e,t)})){case U:return t;case $:return"'"+t.replace(/'/g,"''")+"'";case q:return"|"+W(t,e.indent)+J(j(t,i));case z:return">"+W(t,e.indent)+J(j(function(e,t){var r,n,o=/(\n+)([^\n]*)/g,i=(a=e.indexOf("\n"),a=-1!==a?a:e.length,o.lastIndex=a,Y(e.slice(0,a),t)),s="\n"===e[0]||" "===e[0];var a;for(;n=o.exec(e);){var c=n[1],u=n[2];r=" "===u[0],i+=c+(s||r||""===u?"":"\n")+Y(u,t),s=r}return i}(t,s),i));case H:return'"'+function(e){for(var t,r,n,o="",i=0;i<e.length;i++)(t=e.charCodeAt(i))>=55296&&t<=56319&&(r=e.charCodeAt(i+1))>=56320&&r<=57343?(o+=I(1024*(t-55296)+r-56320+65536),i++):(n=T[t],o+=!n&&L(t)?e[i]:n||I(t));return o}(t)+'"';default:throw new o("impossible error: invalid scalar style")}}()}function W(e,t){var r=B(e)?String(t):"",n="\n"===e[e.length-1];return r+(n&&("\n"===e[e.length-2]||"\n"===e)?"+":n?"":"-")+"\n"}function J(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function Y(e,t){if(""===e||" "===e[0])return e;for(var r,n,o=/ [^ ]/g,i=0,s=0,a=0,c="";r=o.exec(e);)(a=r.index)-i>t&&(n=s>i?s:a,c+="\n"+e.slice(i,n),i=n+1),s=a;return c+="\n",e.length-i>t&&s>i?c+=e.slice(i,s)+"\n"+e.slice(s+1):c+=e.slice(i),c.slice(1)}function K(e,t,r){var n,i,s,u,p,l;for(s=0,u=(i=r?e.explicitTypes:e.implicitTypes).length;s<u;s+=1)if(((p=i[s]).instanceOf||p.predicate)&&(!p.instanceOf||"object"==typeof t&&t instanceof p.instanceOf)&&(!p.predicate||p.predicate(t))){if(e.tag=r?p.tag:"?",p.represent){if(l=e.styleMap[p.tag]||p.defaultStyle,"[object Function]"===a.call(p.represent))n=p.represent(t,l);else{if(!c.call(p.represent,l))throw new o("!<"+p.tag+'> tag resolver accepts not "'+l+'" style');n=p.represent[l](t,l)}e.dump=n}return!0}return!1}function Q(e,t,r,n,i,s){e.tag=null,e.dump=r,K(e,r,!1)||K(e,r,!0);var c=a.call(e.dump);n&&(n=e.flowLevel<0||e.flowLevel>t);var u,l,h="[object Object]"===c||"[object Array]"===c;if(h&&(l=-1!==(u=e.duplicates.indexOf(r))),(null!==e.tag&&"?"!==e.tag||l||2!==e.indent&&t>0)&&(i=!1),l&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(h&&l&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),"[object Object]"===c)n&&0!==Object.keys(e.dump).length?(!function(e,t,r,n){var i,s,a,c,u,l,h="",d=e.tag,f=Object.keys(r);if(!0===e.sortKeys)f.sort();else if("function"==typeof e.sortKeys)f.sort(e.sortKeys);else if(e.sortKeys)throw new o("sortKeys must be a boolean or a function");for(i=0,s=f.length;i<s;i+=1)l="",n&&0===i||(l+=F(e,t)),c=r[a=f[i]],Q(e,t+1,a,!0,!0,!0)&&((u=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&p===e.dump.charCodeAt(0)?l+="?":l+="? "),l+=e.dump,u&&(l+=F(e,t)),Q(e,t+1,c,!0,u)&&(e.dump&&p===e.dump.charCodeAt(0)?l+=":":l+=": ",h+=l+=e.dump));e.tag=d,e.dump=h||"{}"}(e,t,e.dump,i),l&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,r){var n,o,i,s,a,c="",u=e.tag,p=Object.keys(r);for(n=0,o=p.length;n<o;n+=1)a=e.condenseFlow?'"':"",0!==n&&(a+=", "),s=r[i=p[n]],Q(e,t,i,!1,!1)&&(e.dump.length>1024&&(a+="? "),a+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Q(e,t,s,!1,!1)&&(c+=a+=e.dump));e.tag=u,e.dump="{"+c+"}"}(e,t,e.dump),l&&(e.dump="&ref_"+u+" "+e.dump));else if("[object Array]"===c){var d=e.noArrayIndent&&t>0?t-1:t;n&&0!==e.dump.length?(!function(e,t,r,n){var o,i,s="",a=e.tag;for(o=0,i=r.length;o<i;o+=1)Q(e,t+1,r[o],!0,!0)&&(n&&0===o||(s+=F(e,t)),e.dump&&p===e.dump.charCodeAt(0)?s+="-":s+="- ",s+=e.dump);e.tag=a,e.dump=s||"[]"}(e,d,e.dump,i),l&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,r){var n,o,i="",s=e.tag;for(n=0,o=r.length;n<o;n+=1)Q(e,t,r[n],!1,!1)&&(0!==n&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=s,e.dump="["+i+"]"}(e,d,e.dump),l&&(e.dump="&ref_"+u+" "+e.dump))}else{if("[object String]"!==c){if(e.skipInvalid)return!1;throw new o("unacceptable kind of an object to dump "+c)}"?"!==e.tag&&X(e,e.dump,t,s)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function Z(e,t){var r,n,o=[],i=[];for(function e(t,r,n){var o,i,s;if(null!==t&&"object"==typeof t)if(-1!==(i=r.indexOf(t)))-1===n.indexOf(i)&&n.push(i);else if(r.push(t),Array.isArray(t))for(i=0,s=t.length;i<s;i+=1)e(t[i],r,n);else for(o=Object.keys(t),i=0,s=o.length;i<s;i+=1)e(t[o[i]],r,n)}(e,o,i),r=0,n=i.length;r<n;r+=1)t.duplicates.push(o[i[r]]);t.usedDuplicates=new Array(n)}function ee(e,t){var r=new R(t=t||{});return r.noRefs||Z(e,r),Q(r,0,e,!0,!0)?r.dump+"\n":""}e.exports.dump=ee,e.exports.safeDump=function(e,t){return ee(e,n.extend({schema:s},t))}},function(e){e.exports=JSON.parse('{"id":"base.json","$schema":"http://json-schema.org/draft-04/schema","title":"Base definitions","definitions":{"JsonPath":{"type":"string","description":"JsonPath, see http://goessner.net/articles/JsonPath/","format":"jsonpath","example":"products.book[2]"}}}')},function(e){e.exports=JSON.parse('{"id":"testcase.json","$schema":"http://json-schema.org/draft-04/schema","title":"Testcase","description":"A single test case","type":"object","properties":{"name":{"type":"string","description":"Name of this testcase/scenario"},"assertion":{"type":"string","description":"Description of what this testcase asserts"},"inputs":{"description":"The inputs send to the fixture input ports, or a sequence of such inputs","oneOf":[{"type":"object"},{"type":"array","items":{"type":"object"}}]},"expect":{"description":"Expected data on fixture output ports.\\nCan either be an object, or a sequence of such objects.\\n","oneOf":[{"$ref":"outputdata.json"},{"type":"array","items":[{"$ref":"outputdata.json"}]}]},"timeout":{"type":"number","description":"Timeout (in milliseconds). Overrides that set in the suite","default":2000},"skip":{"type":"string","description":"Flag to skip testcase.\\nShould be a description of the reason for skipping.\\n"}},"required":["name","assertion","inputs","expect"]}')},function(e){e.exports=JSON.parse('{"id":"testsuite.json","$schema":"http://json-schema.org/draft-04/schema","title":"Test suite","description":"A collection of test cases","type":["object"],"properties":{"topic":{"type":"string","description":"The component/graph under test","example":"MyComponent3"},"name":{"type":"string","description":"Name of this test suite. Topic is used if no name is provided.","default":""},"fixture":{"type":"object","description":"The graph fixture to run for each test case"},"cases":{"type":"array","description":"The test cases","items":{"$ref":"testcase.json"},"default":[]},"timeout":{"type":"number","description":"Timeout (in milliseconds) for setup and default for each test case.","default":2000},"skip":{"type":"string","description":"Flag to skip test suite (and all containing test cases).\\nShould be a description of the reason for skipping.\\n"}},"required":["topic"]}')},function(e){e.exports=JSON.parse('{"id":"testsuites.json","$schema":"http://json-schema.org/draft-04/schema","title":"TestSuite list","description":"Array of TestSuite","type":"array","items":{"$ref":"testsuite.json"}}')},function(e){e.exports=JSON.parse('{"id":"testsuites.json","$schema":"http://json-schema.org/draft-04/schema","title":"Expectation list","description":"Array of Expectation","type":"array","items":{"$ref":"expectation.json"}}')},function(e){e.exports=JSON.parse('{"id":"testsfile.json","$schema":"http://json-schema.org/draft-04/schema","title":"Tests file","description":"One or more suites","oneOf":[{"$ref":"testsuites.json"},{"$ref":"testsuite.json"}]}')},function(e,t,r){e.exports=r(29)},function(e,t,r){
/*!
 * chai
 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Dependencies that are used for multiple exports are required here only once
 */
var n=r(438);
/*!
 * test utility
 */t.test=r(439),
/*!
 * type utility
 */
t.type=r(89),
/*!
 * expectTypes utility
 */
t.expectTypes=r(440),
/*!
 * message utility
 */
t.getMessage=r(441),
/*!
 * actual utility
 */
t.getActual=r(146),
/*!
 * Inspect util
 */
t.inspect=r(64),
/*!
 * Object Display util
 */
t.objDisplay=r(149),
/*!
 * Flag utility
 */
t.flag=r(18),
/*!
 * Flag transferring utility
 */
t.transferFlags=r(31),
/*!
 * Deep equal utility
 */
t.eql=r(443),
/*!
 * Deep path info
 */
t.getPathInfo=n.getPathInfo,
/*!
 * Check if a property exists
 */
t.hasProperty=n.hasProperty,
/*!
 * Function name
 */
t.getName=r(147),
/*!
 * add Property
 */
t.addProperty=r(444),
/*!
 * add Method
 */
t.addMethod=r(445),
/*!
 * overwrite Property
 */
t.overwriteProperty=r(446),
/*!
 * overwrite Method
 */
t.overwriteMethod=r(447),
/*!
 * Add a chainable method
 */
t.addChainableMethod=r(448),
/*!
 * Overwrite chainable method
 */
t.overwriteChainableMethod=r(449),
/*!
 * Compare by inspect method
 */
t.compareByInspect=r(450),
/*!
 * Get own enumerable property symbols method
 */
t.getOwnEnumerablePropertySymbols=r(150),
/*!
 * Get own enumerable properties method
 */
t.getOwnEnumerableProperties=r(451),
/*!
 * Checks error against a given set of criteria
 */
t.checkError=r(452),
/*!
 * Proxify util
 */
t.proxify=r(67),
/*!
 * addLengthGuard util
 */
t.addLengthGuard=r(66),
/*!
 * isProxyEnabled helper
 */
t.isProxyEnabled=r(65),
/*!
 * isNaN method
 */
t.isNaN=r(453)},function(e,t,r){"use strict";function n(e,t){return null!=e&&t in Object(e)}function o(e){return e.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(function(e){var t=/^\[(\d+)\]$/.exec(e);return t?{i:parseFloat(t[1])}:{p:e.replace(/\\([.\[\]])/g,"$1")}})}function i(e,t,r){var n=e,o=null;r=void 0===r?t.length:r;for(var i=0;i<r;i++){var s=t[i];n&&(n=void 0===s.p?n[s.i]:n[s.p],i===r-1&&(o=n))}return o}function s(e,t){var r=o(t),s=r[r.length-1],a={parent:r.length>1?i(e,r,r.length-1):e,name:s.p||s.i,value:i(e,r)};return a.exists=n(a.parent,a.name),a}e.exports={hasProperty:n,getPathInfo:s,getPathValue:function(e,t){return s(e,t).value},setPathValue:function(e,t,r){return function(e,t,r){for(var n=e,o=r.length,i=null,s=0;s<o;s++){var a=null,c=null;if(i=r[s],s===o-1)n[a=void 0===i.p?i.i:i.p]=t;else if(void 0!==i.p&&n[i.p])n=n[i.p];else if(void 0!==i.i&&n[i.i])n=n[i.i];else{var u=r[s+1];a=void 0===i.p?i.i:i.p,c=void 0===u.p?[]:{},n[a]=c,n=n[a]}}}(e,r,o(t)),e}}},function(e,t,r){
/*!
 * Chai - test utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependancies
 */
var n=r(18);e.exports=function(e,t){var r=n(e,"negate"),o=t[0];return r?!o:o}},function(e,t,r){
/*!
 * Chai - expectTypes utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(145),o=r(18),i=r(89);e.exports=function(e,t){var r=o(e,"message"),s=o(e,"ssfi");r=r?r+": ":"",e=o(e,"object"),(t=t.map(function(e){return e.toLowerCase()})).sort();var a=t.map(function(e,r){var n=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an":"a";return(t.length>1&&r===t.length-1?"or ":"")+n+" "+e}).join(", "),c=i(e).toLowerCase();if(!t.some(function(e){return c===e}))throw new n(r+"object tested must be "+a+", but "+c+" given",void 0,s)}},function(e,t,r){
/*!
 * Chai - message composition utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependancies
 */
var n=r(18),o=r(146),i=(r(64),r(149));e.exports=function(e,t){var r=n(e,"negate"),s=n(e,"object"),a=t[3],c=o(e,t),u=r?t[2]:t[1],p=n(e,"message");return"function"==typeof u&&(u=u()),u=(u=u||"").replace(/#\{this\}/g,function(){return i(s)}).replace(/#\{act\}/g,function(){return i(c)}).replace(/#\{exp\}/g,function(){return i(a)}),p?p+": "+u:u}},function(e,t){
/*!
 * Chai - getEnumerableProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){var t=[];for(var r in e)t.push(r);return t}},function(e,t,r){"use strict";
/*!
 * deep-eql
 * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */var n=r(89);function o(){this._key="chai/deep-eql__"+Math.random()+Date.now()}o.prototype={get:function(e){return e[this._key]},set:function(e,t){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:t,configurable:!0})}};var i="function"==typeof WeakMap?WeakMap:o;
/*!
 * Check to see if the MemoizeMap has recorded a result of the two operands
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @returns {Boolean|null} result
*/function s(e,t,r){if(!r||g(e)||g(t))return null;var n=r.get(e);if(n){var o=n.get(t);if("boolean"==typeof o)return o}return null}
/*!
 * Set the result of the equality into the MemoizeMap
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @param {Boolean} result
*/function a(e,t,r,n){if(r&&!g(e)&&!g(t)){var o=r.get(e);o?o.set(t,n):((o=new i).set(t,n),r.set(e,o))}}
/*!
 * Primary Export
 */function c(e,t,r){if(r&&r.comparator)return p(e,t,r);var n=u(e,t);return null!==n?n:p(e,t,r)}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t||!g(e)&&!g(t)&&null}
/*!
 * The main logic of the `deepEqual` function.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (optional) Additional options
 * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
 * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
    complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
    references to blow the stack.
 * @return {Boolean} equal match
*/function p(e,t,r){(r=r||{}).memoize=!1!==r.memoize&&(r.memoize||new i);var o=r&&r.comparator,p=s(e,t,r.memoize);if(null!==p)return p;var g=s(t,e,r.memoize);if(null!==g)return g;if(o){var y=o(e,t);if(!1===y||!0===y)return a(e,t,r.memoize,y),y;var v=u(e,t);if(null!==v)return v}var b=n(e);if(b!==n(t))return a(e,t,r.memoize,!1),!1;a(e,t,r.memoize,!0);var w=function(e,t,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return c(e.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":case"Error":return e===t;case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return h(e,t,n);case"RegExp":
/*!
 * Compare two Regular Expressions for equality.
 *
 * @param {RegExp} leftHandOperand
 * @param {RegExp} rightHandOperand
 * @return {Boolean} result
 */
return function(e,t){return e.toString()===t.toString()}
/*!
 * Compare two Sets/Maps for equality. Faster than other equality functions.
 *
 * @param {Set} leftHandOperand
 * @param {Set} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */(e,t);case"Generator":
/*!
 * Simple equality for generator objects such as those returned by generator functions.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
return function(e,t,r){return h(f(e),f(t),r)}
/*!
 * Determine if the given object has an @@iterator function.
 *
 * @param {Object} target
 * @return {Boolean} `true` if the object has an @@iterator function.
 */(e,t,n);case"DataView":return h(new Uint8Array(e.buffer),new Uint8Array(t.buffer),n);case"ArrayBuffer":return h(new Uint8Array(e),new Uint8Array(t),n);case"Set":case"Map":return l(e,t,n);default:
/*!
 * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
 * for each enumerable key in the object.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
return function(e,t,r){var n=m(e),o=m(t);if(n.length&&n.length===o.length)return n.sort(),o.sort(),!1!==h(n,o)&&
/*!
 * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
 * each key. If any value of the given key is not equal, the function will return false (early).
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
function(e,t,r,n){var o=r.length;if(0===o)return!0;for(var i=0;i<o;i+=1)if(!1===c(e[r[i]],t[r[i]],n))return!1;return!0}(e,t,n,r);var i=d(e),s=d(t);if(i.length&&i.length===s.length)return i.sort(),s.sort(),h(i,s,r);if(0===n.length&&0===i.length&&0===o.length&&0===s.length)return!0;return!1}
/*!
 * Returns true if the argument is a primitive.
 *
 * This intentionally returns true for all objects that can be compared by reference,
 * including functions and symbols.
 *
 * @param {Mixed} value
 * @return {Boolean} result
 */(e,t,n)}}(e,t,b,r);return a(e,t,r.memoize,w),w}function l(e,t,r){if(e.size!==t.size)return!1;if(0===e.size)return!0;var n=[],o=[];return e.forEach(function(e,t){n.push([e,t])}),t.forEach(function(e,t){o.push([e,t])}),h(n.sort(),o.sort(),r)}
/*!
 * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */function h(e,t,r){var n=e.length;if(n!==t.length)return!1;if(0===n)return!0;for(var o=-1;++o<n;)if(!1===c(e[o],t[o],r))return!1;return!0}
/*!
 * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
 * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
 *
 * @param {Object} target
 * @returns {Array} an array of entries from the @@iterator function
 */
function d(e){if(function(e){return"undefined"!=typeof Symbol&&"object"==typeof e&&void 0!==Symbol.iterator&&"function"==typeof e[Symbol.iterator]}(e))try{return f(e[Symbol.iterator]())}catch(e){return[]}return[]}
/*!
 * Gets all entries from a Generator. This will consume the generator - which could have side effects.
 *
 * @param {Generator} target
 * @returns {Array} an array of entries from the Generator.
 */function f(e){for(var t=e.next(),r=[t.value];!1===t.done;)t=e.next(),r.push(t.value);return r}
/*!
 * Gets all own and inherited enumerable keys from a target.
 *
 * @param {Object} target
 * @returns {Array} an array of own and inherited enumerable keys from the target.
 */function m(e){var t=[];for(var r in e)t.push(r);return t}function g(e){return null===e||"object"!=typeof e}e.exports=c,e.exports.MemoizeMap=i},function(e,t,r){
/*!
 * Chai - addProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(29),o=r(18),i=r(65),s=r(31);e.exports=function(e,t,r){r=void 0===r?function(){}:r,Object.defineProperty(e,t,{get:function e(){i()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=r.call(this);if(void 0!==t)return t;var a=new n.Assertion;return s(this,a),a},configurable:!0})}},function(e,t,r){
/*!
 * Chai - addMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(66),o=r(29),i=r(18),s=r(67),a=r(31);e.exports=function(e,t,r){var c=function(){i(this,"lockSsfi")||i(this,"ssfi",c);var e=r.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};n(c,t,!1),e[t]=s(c,t)}},function(e,t,r){
/*!
 * Chai - overwriteProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(29),o=r(18),i=r(65),s=r(31);e.exports=function(e,t,r){var a=Object.getOwnPropertyDescriptor(e,t),c=function(){};a&&"function"==typeof a.get&&(c=a.get),Object.defineProperty(e,t,{get:function e(){i()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=o(this,"lockSsfi");o(this,"lockSsfi",!0);var a=r(c).call(this);if(o(this,"lockSsfi",t),void 0!==a)return a;var u=new n.Assertion;return s(this,u),u},configurable:!0})}},function(e,t,r){
/*!
 * Chai - overwriteMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(66),o=r(29),i=r(18),s=r(67),a=r(31);e.exports=function(e,t,r){var c=e[t],u=function(){throw new Error(t+" is not a function")};c&&"function"==typeof c&&(u=c);var p=function(){i(this,"lockSsfi")||i(this,"ssfi",p);var e=i(this,"lockSsfi");i(this,"lockSsfi",!0);var t=r(u).apply(this,arguments);if(i(this,"lockSsfi",e),void 0!==t)return t;var n=new o.Assertion;return a(this,n),n};n(p,t,!1),e[t]=s(p,t)}},function(e,t,r){
/*!
 * Chai - addChainingMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var n=r(66),o=r(29),i=r(18),s=r(67),a=r(31),c="function"==typeof Object.setPrototypeOf,u=function(){},p=Object.getOwnPropertyNames(u).filter(function(e){var t=Object.getOwnPropertyDescriptor(u,e);return"object"!=typeof t||!t.configurable}),l=Function.prototype.call,h=Function.prototype.apply;e.exports=function(e,t,r,u){"function"!=typeof u&&(u=function(){});var d={method:r,chainingBehavior:u};e.__methods||(e.__methods={}),e.__methods[t]=d,Object.defineProperty(e,t,{get:function(){d.chainingBehavior.call(this);var r=function(){i(this,"lockSsfi")||i(this,"ssfi",r);var e=d.method.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};if(n(r,t,!0),c){var u=Object.create(this);u.call=l,u.apply=h,Object.setPrototypeOf(r,u)}else{Object.getOwnPropertyNames(e).forEach(function(t){if(-1===p.indexOf(t)){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n)}})}return a(this,r),s(r)},configurable:!0})}},function(e,t,r){
/*!
 * Chai - overwriteChainableMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(29),o=r(31);e.exports=function(e,t,r,i){var s=e.__methods[t],a=s.chainingBehavior;s.chainingBehavior=function(){var e=i(a).call(this);if(void 0!==e)return e;var t=new n.Assertion;return o(this,t),t};var c=s.method;s.method=function(){var e=r(c).apply(this,arguments);if(void 0!==e)return e;var t=new n.Assertion;return o(this,t),t}}},function(e,t,r){
/*!
 * Chai - compareByInspect utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependancies
 */
var n=r(64);e.exports=function(e,t){return n(e)<n(t)?-1:1}},function(e,t,r){
/*!
 * Chai - getOwnEnumerableProperties utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependancies
 */
var n=r(150);e.exports=function(e){return Object.keys(e).concat(n(e))}},function(e,t,r){"use strict";var n=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\(\/]+)/;function o(e){var t="";if(void 0===e.name){var r=String(e).match(n);r&&(t=r[1])}else t=e.name;return t}e.exports={compatibleInstance:function(e,t){return t instanceof Error&&e===t},compatibleConstructor:function(e,t){return t instanceof Error?e.constructor===t.constructor||e instanceof t.constructor:(t.prototype instanceof Error||t===Error)&&(e.constructor===t||e instanceof t)},compatibleMessage:function(e,t){var r="string"==typeof e?e:e.message;return t instanceof RegExp?t.test(r):"string"==typeof t&&-1!==r.indexOf(t)},getMessage:function(e){var t="";return e&&e.message?t=e.message:"string"==typeof e&&(t=e),t},getConstructorName:function(e){var t=e;return e instanceof Error?t=o(e.constructor):"function"==typeof e&&(t=o(e).trim()||o(new e)),t}}},function(e,t){e.exports=Number.isNaN||
/*!
 * Chai - isNaN utility
 * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
 * MIT Licensed
 */
function(e){return e!=e}},function(e,t,r){
/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(30);e.exports=function(e,t){
/*!
   * Module dependencies.
   */
var r=e.AssertionError,o=t.flag;
/*!
   * Module export.
   */
/*!
   * Assertion Constructor
   *
   * Creates object for chaining.
   *
   * `Assertion` objects contain metadata in the form of flags. Three flags can
   * be assigned during instantiation by passing arguments to this constructor:
   *
   * - `object`: This flag contains the target of the assertion. For example, in
   *   the assertion `expect(numKittens).to.equal(7);`, the `object` flag will
   *   contain `numKittens` so that the `equal` assertion can reference it when
   *   needed.
   *
   * - `message`: This flag contains an optional custom error message to be
   *   prepended to the error message that's generated by the assertion when it
   *   fails.
   *
   * - `ssfi`: This flag stands for "start stack function indicator". It
   *   contains a function reference that serves as the starting point for
   *   removing frames from the stack trace of the error that's created by the
   *   assertion when it fails. The goal is to provide a cleaner stack trace to
   *   end users by removing Chai's internal functions. Note that it only works
   *   in environments that support `Error.captureStackTrace`, and only when
   *   `Chai.config.includeStack` hasn't been set to `false`.
   *
   * - `lockSsfi`: This flag controls whether or not the given `ssfi` flag
   *   should retain its current value, even as assertions are chained off of
   *   this object. This is usually set to `true` when creating a new assertion
   *   from within another assertion. It's also temporarily set to `true` before
   *   an overwritten assertion gets called by the overwriting assertion.
   *
   * @param {Mixed} obj target of the assertion
   * @param {String} msg (optional) custom error message
   * @param {Function} ssfi (optional) starting point for removing stack frames
   * @param {Boolean} lockSsfi (optional) whether or not the ssfi flag is locked
   * @api private
   */
function i(e,r,n,s){return o(this,"ssfi",n||i),o(this,"lockSsfi",s),o(this,"object",e),o(this,"message",r),t.proxify(this)}e.Assertion=i,Object.defineProperty(i,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),n.includeStack},set:function(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),n.includeStack=e}}),Object.defineProperty(i,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),n.showDiff},set:function(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),n.showDiff=e}}),i.addProperty=function(e,r){t.addProperty(this.prototype,e,r)},i.addMethod=function(e,r){t.addMethod(this.prototype,e,r)},i.addChainableMethod=function(e,r,n){t.addChainableMethod(this.prototype,e,r,n)},i.overwriteProperty=function(e,r){t.overwriteProperty(this.prototype,e,r)},i.overwriteMethod=function(e,r){t.overwriteMethod(this.prototype,e,r)},i.overwriteChainableMethod=function(e,r,n){t.overwriteChainableMethod(this.prototype,e,r,n)},i.prototype.assert=function(e,i,s,a,c,u){var p=t.test(this,arguments);if(!1!==u&&(u=!0),void 0===a&&void 0===c&&(u=!1),!0!==n.showDiff&&(u=!1),!p){i=t.getMessage(this,arguments);var l=t.getActual(this,arguments);throw new r(i,{actual:l,expected:a,showDiff:u},n.includeStack?this.assert:o(this,"ssfi"))}},
/*!
   * ### ._obj
   *
   * Quick reference to stored `actual` value for plugin developers.
   *
   * @api private
   */
Object.defineProperty(i.prototype,"_obj",{get:function(){return o(this,"object")},set:function(e){o(this,"object",e)}})}},function(e,t){
/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){var r=e.Assertion,n=e.AssertionError,o=t.flag;function i(e,r){r&&o(this,"message",r),e=e.toLowerCase();var n=o(this,"object"),i=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";this.assert(e===t.type(n).toLowerCase(),"expected #{this} to be "+i+e,"expected #{this} not to be "+i+e)}function s(e,r){return t.isNaN(e)&&t.isNaN(r)||e===r}function a(){o(this,"contains",!0)}function c(e,i){i&&o(this,"message",i);var a=o(this,"object"),c=t.type(a).toLowerCase(),u=o(this,"message"),p=o(this,"negate"),l=o(this,"ssfi"),h=o(this,"deep"),d=h?"deep ":"";u=u?u+": ":"";var f=!1;switch(c){case"string":f=-1!==a.indexOf(e);break;case"weakset":if(h)throw new n(u+"unable to use .deep.include with WeakSet",void 0,l);f=a.has(e);break;case"map":var m=h?t.eql:s;a.forEach(function(t){f=f||m(t,e)});break;case"set":h?a.forEach(function(r){f=f||t.eql(r,e)}):f=a.has(e);break;case"array":f=h?a.some(function(r){return t.eql(r,e)}):-1!==a.indexOf(e);break;default:if(e!==Object(e))throw new n(u+"object tested must be an array, a map, an object, a set, a string, or a weakset, but "+c+" given",void 0,l);var g=Object.keys(e),y=null,v=0;if(g.forEach(function(i){var s=new r(a);if(t.transferFlags(this,s,!0),o(s,"lockSsfi",!0),p&&1!==g.length)try{s.property(i,e[i])}catch(e){if(!t.checkError.compatibleConstructor(e,n))throw e;null===y&&(y=e),v++}else s.property(i,e[i])},this),p&&g.length>1&&v===g.length)throw y;return}this.assert(f,"expected #{this} to "+d+"include "+t.inspect(e),"expected #{this} to not "+d+"include "+t.inspect(e))}function u(){var e=o(this,"object"),r=t.type(e);this.assert("Arguments"===r,"expected #{this} to be arguments but got "+r,"expected #{this} to not be arguments")}function p(e,t){t&&o(this,"message",t);var r=o(this,"object");if(o(this,"deep"))return this.eql(e);this.assert(e===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function l(e,r){r&&o(this,"message",r),this.assert(t.eql(e,o(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function h(e,i){i&&o(this,"message",i);var s=o(this,"object"),a=o(this,"doLength"),c=o(this,"message"),u=c?c+": ":"",p=o(this,"ssfi"),l=t.type(s).toLowerCase(),h=t.type(e).toLowerCase(),d=!0;if(a&&new r(s,c,p,!0).to.have.property("length"),a||"date"!==l||"date"===h)if("number"===h||!a&&"number"!==l)if(a||"date"===l||"number"===l)d=!1;else{errorMessage=u+"expected "+("string"===l?"'"+s+"'":s)+" to be a number or a date"}else errorMessage=u+"the argument to above must be a number";else errorMessage=u+"the argument to above must be a date";if(d)throw new n(errorMessage,void 0,p);if(a){var f=s.length;this.assert(f>e,"expected #{this} to have a length above #{exp} but got #{act}","expected #{this} to not have a length above #{exp}",e,f)}else this.assert(s>e,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",e)}function d(e,i){i&&o(this,"message",i);var s=o(this,"object"),a=o(this,"doLength"),c=o(this,"message"),u=c?c+": ":"",p=o(this,"ssfi"),l=t.type(s).toLowerCase(),h=t.type(e).toLowerCase(),d=!0;if(a&&new r(s,c,p,!0).to.have.property("length"),a||"date"!==l||"date"===h)if("number"===h||!a&&"number"!==l)if(a||"date"===l||"number"===l)d=!1;else{errorMessage=u+"expected "+("string"===l?"'"+s+"'":s)+" to be a number or a date"}else errorMessage=u+"the argument to least must be a number";else errorMessage=u+"the argument to least must be a date";if(d)throw new n(errorMessage,void 0,p);if(a){var f=s.length;this.assert(f>=e,"expected #{this} to have a length at least #{exp} but got #{act}","expected #{this} to have a length below #{exp}",e,f)}else this.assert(s>=e,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",e)}function f(e,i){i&&o(this,"message",i);var s=o(this,"object"),a=o(this,"doLength"),c=o(this,"message"),u=c?c+": ":"",p=o(this,"ssfi"),l=t.type(s).toLowerCase(),h=t.type(e).toLowerCase(),d=!0;if(a&&new r(s,c,p,!0).to.have.property("length"),a||"date"!==l||"date"===h)if("number"===h||!a&&"number"!==l)if(a||"date"===l||"number"===l)d=!1;else{errorMessage=u+"expected "+("string"===l?"'"+s+"'":s)+" to be a number or a date"}else errorMessage=u+"the argument to below must be a number";else errorMessage=u+"the argument to below must be a date";if(d)throw new n(errorMessage,void 0,p);if(a){var f=s.length;this.assert(f<e,"expected #{this} to have a length below #{exp} but got #{act}","expected #{this} to not have a length below #{exp}",e,f)}else this.assert(s<e,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",e)}function m(e,i){i&&o(this,"message",i);var s=o(this,"object"),a=o(this,"doLength"),c=o(this,"message"),u=c?c+": ":"",p=o(this,"ssfi"),l=t.type(s).toLowerCase(),h=t.type(e).toLowerCase(),d=!0;if(a&&new r(s,c,p,!0).to.have.property("length"),a||"date"!==l||"date"===h)if("number"===h||!a&&"number"!==l)if(a||"date"===l||"number"===l)d=!1;else{errorMessage=u+"expected "+("string"===l?"'"+s+"'":s)+" to be a number or a date"}else errorMessage=u+"the argument to most must be a number";else errorMessage=u+"the argument to most must be a date";if(d)throw new n(errorMessage,void 0,p);if(a){var f=s.length;this.assert(f<=e,"expected #{this} to have a length at most #{exp} but got #{act}","expected #{this} to have a length above #{exp}",e,f)}else this.assert(s<=e,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",e)}function g(e,r){r&&o(this,"message",r);var i=o(this,"object"),s=o(this,"ssfi"),a=o(this,"message");try{var c=i instanceof e}catch(r){if(r instanceof TypeError)throw new n((a=a?a+": ":"")+"The instanceof assertion needs a constructor but "+t.type(e)+" was given.",void 0,s);throw r}var u=t.getName(e);null===u&&(u="an unnamed constructor"),this.assert(c,"expected #{this} to be an instance of "+u,"expected #{this} to not be an instance of "+u)}function y(e,r,i){i&&o(this,"message",i);var s=o(this,"nested"),a=o(this,"own"),c=o(this,"message"),u=o(this,"object"),p=o(this,"ssfi");if(s&&a)throw new n((c=c?c+": ":"")+'The "nested" and "own" flags cannot be combined.',void 0,p);if(null==u)throw new n((c=c?c+": ":"")+"Target cannot be null or undefined.",void 0,p);var l,h=o(this,"deep"),d=o(this,"negate"),f=s?t.getPathInfo(u,e):null,m=s?f.value:u[e],g="";h&&(g+="deep "),a&&(g+="own "),s&&(g+="nested "),g+="property ",l=a?Object.prototype.hasOwnProperty.call(u,e):s?f.exists:t.hasProperty(u,e),d&&1!==arguments.length||this.assert(l,"expected #{this} to have "+g+t.inspect(e),"expected #{this} to not have "+g+t.inspect(e)),arguments.length>1&&this.assert(l&&(h?t.eql(r,m):r===m),"expected #{this} to have "+g+t.inspect(e)+" of #{exp}, but got #{act}","expected #{this} to not have "+g+t.inspect(e)+" of #{act}",r,m),o(this,"object",m)}function v(e,t,r){o(this,"own",!0),y.apply(this,arguments)}function b(e,r,n){"string"==typeof r&&(n=r,r=null),n&&o(this,"message",n);var i=o(this,"object"),s=Object.getOwnPropertyDescriptor(Object(i),e);s&&r?this.assert(t.eql(r,s),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to match "+t.inspect(r)+", got "+t.inspect(s),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to not match "+t.inspect(r),r,s,!0):this.assert(s,"expected #{this} to have an own property descriptor for "+t.inspect(e),"expected #{this} to not have an own property descriptor for "+t.inspect(e)),o(this,"object",s)}function w(){o(this,"doLength",!0)}function E(e,t){t&&o(this,"message",t);var n=o(this,"object"),i=o(this,"message"),s=o(this,"ssfi");new r(n,i,s,!0).to.have.property("length");var a=n.length;this.assert(a==e,"expected #{this} to have a length of #{exp} but got #{act}","expected #{this} to not have a length of #{act}",e,a)}function x(e,t){t&&o(this,"message",t);var r=o(this,"object");this.assert(e.exec(r),"expected #{this} to match "+e,"expected #{this} not to match "+e)}function C(e){var r,i=o(this,"object"),s=t.type(i),a=t.type(e),c=o(this,"ssfi"),u=o(this,"deep"),p="",l=!0,h=o(this,"message"),d=(h=h?h+": ":"")+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if("Map"===s||"Set"===s)p=u?"deeply ":"",f=[],i.forEach(function(e,t){f.push(t)}),"Array"!==a&&(e=Array.prototype.slice.call(arguments));else{switch(f=t.getOwnEnumerableProperties(i),a){case"Array":if(arguments.length>1)throw new n(d,void 0,c);break;case"Object":if(arguments.length>1)throw new n(d,void 0,c);e=Object.keys(e);break;default:e=Array.prototype.slice.call(arguments)}e=e.map(function(e){return"symbol"==typeof e?e:String(e)})}if(!e.length)throw new n(h+"keys required",void 0,c);var f,m=e.length,g=o(this,"any"),y=o(this,"all"),v=e;if(g||y||(y=!0),g&&(l=v.some(function(e){return f.some(function(r){return u?t.eql(e,r):e===r})})),y&&(l=v.every(function(e){return f.some(function(r){return u?t.eql(e,r):e===r})}),o(this,"contains")||(l=l&&e.length==f.length)),m>1){var b=(e=e.map(function(e){return t.inspect(e)})).pop();y&&(r=e.join(", ")+", and "+b),g&&(r=e.join(", ")+", or "+b)}else r=t.inspect(e[0]);r=(m>1?"keys ":"key ")+r,r=(o(this,"contains")?"contain ":"have ")+r,this.assert(l,"expected #{this} to "+p+r,"expected #{this} to not "+p+r,v.slice(0).sort(t.compareByInspect),f.sort(t.compareByInspect),!0)}function S(e,n,i){i&&o(this,"message",i);var s,a=o(this,"object"),c=o(this,"ssfi"),u=o(this,"message"),p=o(this,"negate")||!1;new r(a,u,c,!0).is.a("function"),(e instanceof RegExp||"string"==typeof e)&&(n=e,e=null);try{a()}catch(e){s=e}var l=void 0===e&&void 0===n,h=Boolean(e&&n),d=!1,f=!1;if(l||!l&&!p){var m="an error";e instanceof Error?m="#{exp}":e&&(m=t.checkError.getConstructorName(e)),this.assert(s,"expected #{this} to throw "+m,"expected #{this} to not throw an error but #{act} was thrown",e&&e.toString(),s instanceof Error?s.toString():"string"==typeof s?s:s&&t.checkError.getConstructorName(s))}if(e&&s){if(e instanceof Error)t.checkError.compatibleInstance(s,e)===p&&(h&&p?d=!0:this.assert(p,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(s&&!p?" but #{act} was thrown":""),e.toString(),s.toString()));t.checkError.compatibleConstructor(s,e)===p&&(h&&p?d=!0:this.assert(p,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(s?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),s instanceof Error?s.toString():s&&t.checkError.getConstructorName(s)))}if(s&&null!=n){var g="including";n instanceof RegExp&&(g="matching"),t.checkError.compatibleMessage(s,n)===p&&(h&&p?f=!0:this.assert(p,"expected #{this} to throw error "+g+" #{exp} but got #{act}","expected #{this} to throw error not "+g+" #{exp}",n,t.checkError.getMessage(s)))}d&&f&&this.assert(p,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(s?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),s instanceof Error?s.toString():s&&t.checkError.getConstructorName(s)),o(this,"object",s)}function k(e,r){r&&o(this,"message",r);var n=o(this,"object"),i=o(this,"itself"),s="function"!=typeof n||i?n[e]:n.prototype[e];this.assert("function"==typeof s,"expected #{this} to respond to "+t.inspect(e),"expected #{this} to not respond to "+t.inspect(e))}function P(e,r){r&&o(this,"message",r);var n=e(o(this,"object"));this.assert(n,"expected #{this} to satisfy "+t.objDisplay(e),"expected #{this} to not satisfy"+t.objDisplay(e),!o(this,"negate"),n)}function _(e,t,i){i&&o(this,"message",i);var s=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");if(new r(s,a,c,!0).is.a("number"),"number"!=typeof e||"number"!=typeof t)throw new n((a=a?a+": ":"")+"the arguments to closeTo or approximately must be numbers",void 0,c);this.assert(Math.abs(s-e)<=t,"expected #{this} to be close to "+e+" +/- "+t,"expected #{this} not to be close to "+e+" +/- "+t)}function A(e,t,n){n&&o(this,"message",n);var i,s=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new r(s,a,c,!0).is.a("function"),t?(new r(e,a,c,!0).to.have.property(t),i=e[t]):(new r(e,a,c,!0).is.a("function"),i=e()),s();var u=null==t?e():e[t],p=null==t?i:"."+t;o(this,"deltaMsgObj",p),o(this,"initialDeltaValue",i),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","change"),o(this,"realDelta",u!==i),this.assert(i!==u,"expected "+p+" to change","expected "+p+" to not change")}function D(e,t,n){n&&o(this,"message",n);var i,s=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new r(s,a,c,!0).is.a("function"),t?(new r(e,a,c,!0).to.have.property(t),i=e[t]):(new r(e,a,c,!0).is.a("function"),i=e()),new r(i,a,c,!0).is.a("number"),s();var u=null==t?e():e[t],p=null==t?i:"."+t;o(this,"deltaMsgObj",p),o(this,"initialDeltaValue",i),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","increase"),o(this,"realDelta",u-i),this.assert(u-i>0,"expected "+p+" to increase","expected "+p+" to not increase")}function O(e,t,n){n&&o(this,"message",n);var i,s=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new r(s,a,c,!0).is.a("function"),t?(new r(e,a,c,!0).to.have.property(t),i=e[t]):(new r(e,a,c,!0).is.a("function"),i=e()),new r(i,a,c,!0).is.a("number"),s();var u=null==t?e():e[t],p=null==t?i:"."+t;o(this,"deltaMsgObj",p),o(this,"initialDeltaValue",i),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","decrease"),o(this,"realDelta",i-u),this.assert(u-i<0,"expected "+p+" to decrease","expected "+p+" to not decrease")}["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does"].forEach(function(e){r.addProperty(e)}),r.addProperty("not",function(){o(this,"negate",!0)}),r.addProperty("deep",function(){o(this,"deep",!0)}),r.addProperty("nested",function(){o(this,"nested",!0)}),r.addProperty("own",function(){o(this,"own",!0)}),r.addProperty("ordered",function(){o(this,"ordered",!0)}),r.addProperty("any",function(){o(this,"any",!0),o(this,"all",!1)}),r.addProperty("all",function(){o(this,"all",!0),o(this,"any",!1)}),r.addChainableMethod("an",i),r.addChainableMethod("a",i),r.addChainableMethod("include",c,a),r.addChainableMethod("contain",c,a),r.addChainableMethod("contains",c,a),r.addChainableMethod("includes",c,a),r.addProperty("ok",function(){this.assert(o(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")}),r.addProperty("true",function(){this.assert(!0===o(this,"object"),"expected #{this} to be true","expected #{this} to be false",!o(this,"negate"))}),r.addProperty("false",function(){this.assert(!1===o(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!o(this,"negate"))}),r.addProperty("null",function(){this.assert(null===o(this,"object"),"expected #{this} to be null","expected #{this} not to be null")}),r.addProperty("undefined",function(){this.assert(void 0===o(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")}),r.addProperty("NaN",function(){this.assert(t.isNaN(o(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")}),r.addProperty("exist",function(){var e=o(this,"object");this.assert(null!=e,"expected #{this} to exist","expected #{this} to not exist")}),r.addProperty("empty",function(){var e,r=o(this,"object"),i=o(this,"ssfi"),s=o(this,"message");switch(s=s?s+": ":"",t.type(r).toLowerCase()){case"array":case"string":e=r.length;break;case"map":case"set":e=r.size;break;case"weakmap":case"weakset":throw new n(s+".empty was passed a weak collection",void 0,i);case"function":var a=s+".empty was passed a function "+t.getName(r);throw new n(a.trim(),void 0,i);default:if(r!==Object(r))throw new n(s+".empty was passed non-string primitive "+t.inspect(r),void 0,i);e=Object.keys(r).length}this.assert(0===e,"expected #{this} to be empty","expected #{this} not to be empty")}),r.addProperty("arguments",u),r.addProperty("Arguments",u),r.addMethod("equal",p),r.addMethod("equals",p),r.addMethod("eq",p),r.addMethod("eql",l),r.addMethod("eqls",l),r.addMethod("above",h),r.addMethod("gt",h),r.addMethod("greaterThan",h),r.addMethod("least",d),r.addMethod("gte",d),r.addMethod("below",f),r.addMethod("lt",f),r.addMethod("lessThan",f),r.addMethod("most",m),r.addMethod("lte",m),r.addMethod("within",function(e,i,s){s&&o(this,"message",s);var a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),p=u?u+": ":"",l=o(this,"ssfi"),h=t.type(a).toLowerCase(),d=t.type(e).toLowerCase(),f=t.type(i).toLowerCase(),m=!0,g="date"===d&&"date"===f?e.toUTCString()+".."+i.toUTCString():e+".."+i;if(c&&new r(a,u,l,!0).to.have.property("length"),c||"date"!==h||"date"===d&&"date"===f)if("number"===d&&"number"===f||!c&&"number"!==h)if(c||"date"===h||"number"===h)m=!1;else{errorMessage=p+"expected "+("string"===h?"'"+a+"'":a)+" to be a number or a date"}else errorMessage=p+"the arguments to within must be numbers";else errorMessage=p+"the arguments to within must be dates";if(m)throw new n(errorMessage,void 0,l);if(c){var y=a.length;this.assert(y>=e&&y<=i,"expected #{this} to have a length within "+g,"expected #{this} to not have a length within "+g)}else this.assert(a>=e&&a<=i,"expected #{this} to be within "+g,"expected #{this} to not be within "+g)}),r.addMethod("instanceof",g),r.addMethod("instanceOf",g),r.addMethod("property",y),r.addMethod("ownProperty",v),r.addMethod("haveOwnProperty",v),r.addMethod("ownPropertyDescriptor",b),r.addMethod("haveOwnPropertyDescriptor",b),r.addChainableMethod("length",E,w),r.addChainableMethod("lengthOf",E,w),r.addMethod("match",x),r.addMethod("matches",x),r.addMethod("string",function(e,n){n&&o(this,"message",n);var i=o(this,"object"),s=o(this,"message"),a=o(this,"ssfi");new r(i,s,a,!0).is.a("string"),this.assert(~i.indexOf(e),"expected #{this} to contain "+t.inspect(e),"expected #{this} to not contain "+t.inspect(e))}),r.addMethod("keys",C),r.addMethod("key",C),r.addMethod("throw",S),r.addMethod("throws",S),r.addMethod("Throw",S),r.addMethod("respondTo",k),r.addMethod("respondsTo",k),r.addProperty("itself",function(){o(this,"itself",!0)}),r.addMethod("satisfy",P),r.addMethod("satisfies",P),r.addMethod("closeTo",_),r.addMethod("approximately",_),r.addMethod("members",function(e,n){n&&o(this,"message",n);var i=o(this,"object"),s=o(this,"message"),a=o(this,"ssfi");new r(i,s,a,!0).to.be.an("array"),new r(e,s,a,!0).to.be.an("array");var c,u,p,l=o(this,"contains"),h=o(this,"ordered");l?(u="expected #{this} to be "+(c=h?"an ordered superset":"a superset")+" of #{exp}",p="expected #{this} to not be "+c+" of #{exp}"):(u="expected #{this} to have the same "+(c=h?"ordered members":"members")+" as #{exp}",p="expected #{this} to not have the same "+c+" as #{exp}");var d=o(this,"deep")?t.eql:void 0;this.assert(function(e,t,r,n,o){if(!n){if(e.length!==t.length)return!1;t=t.slice()}return e.every(function(e,i){if(o)return r?r(e,t[i]):e===t[i];if(!r){var s=t.indexOf(e);return-1!==s&&(n||t.splice(s,1),!0)}return t.some(function(o,i){return!!r(e,o)&&(n||t.splice(i,1),!0)})})}(e,i,d,l,h),u,p,e,i,!0)}),r.addMethod("oneOf",function(e,t){t&&o(this,"message",t);var n=o(this,"object"),i=o(this,"message"),s=o(this,"ssfi");new r(e,i,s,!0).to.be.an("array"),this.assert(e.indexOf(n)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",e,n)}),r.addMethod("change",A),r.addMethod("changes",A),r.addMethod("increase",D),r.addMethod("increases",D),r.addMethod("decrease",O),r.addMethod("decreases",O),r.addMethod("by",function(e,t){t&&o(this,"message",t);var r,n=o(this,"deltaMsgObj"),i=o(this,"initialDeltaValue"),s=o(this,"finalDeltaValue"),a=o(this,"deltaBehavior"),c=o(this,"realDelta");r="change"===a?Math.abs(s-i)===Math.abs(e):c===Math.abs(e),this.assert(r,"expected "+n+" to "+a+" by "+e,"expected "+n+" to not "+a+" by "+e)}),r.addProperty("extensible",function(){var e=o(this,"object"),t=e===Object(e)&&Object.isExtensible(e);this.assert(t,"expected #{this} to be extensible","expected #{this} to not be extensible")}),r.addProperty("sealed",function(){var e=o(this,"object"),t=e!==Object(e)||Object.isSealed(e);this.assert(t,"expected #{this} to be sealed","expected #{this} to not be sealed")}),r.addProperty("frozen",function(){var e=o(this,"object"),t=e!==Object(e)||Object.isFrozen(e);this.assert(t,"expected #{this} to be frozen","expected #{this} to not be frozen")}),r.addProperty("finite",function(e){var t=o(this,"object");this.assert("number"==typeof t&&isFinite(t),"expected #{this} to be a finite number","expected #{this} to not be a finite number")})}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){e.expect=function(t,r){return new e.Assertion(t,r)},e.expect.fail=function(t,r,n,o){throw n=n||"expect.fail()",new e.AssertionError(n,{actual:t,expected:r,operator:o},e.expect.fail)}}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){var r=e.Assertion;function n(){Object.defineProperty(Object.prototype,"should",{set:function(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})},get:function e(){return this instanceof String||this instanceof Number||this instanceof Boolean||"function"==typeof Symbol&&this instanceof Symbol?new r(this.valueOf(),null,e):new r(this,null,e)},configurable:!0});var t={fail:function(r,n,o,i){throw o=o||"should.fail()",new e.AssertionError(o,{actual:r,expected:n,operator:i},t.fail)},equal:function(e,t,n){new r(e,n).to.equal(t)},Throw:function(e,t,n,o){new r(e,o).to.Throw(t,n)},exist:function(e,t){new r(e,t).to.exist},not:{}};return t.not.equal=function(e,t,n){new r(e,n).to.not.equal(t)},t.not.Throw=function(e,t,n,o){new r(e,o).to.not.Throw(t,n)},t.not.exist=function(e,t){new r(e,t).to.not.exist},t.throw=t.Throw,t.not.throw=t.not.Throw,t}e.should=n,e.Should=n}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){
/*!
   * Chai dependencies.
   */
var r=e.Assertion,n=t.flag,o=e.assert=function(t,n){new r(null,null,e.assert,!0).assert(t,n,"[ negation message unavailable ]")};
/*!
   * Module export.
   */o.fail=function(t,r,n,i){throw n=n||"assert.fail()",new e.AssertionError(n,{actual:t,expected:r,operator:i},o.fail)},o.isOk=function(e,t){new r(e,t,o.isOk,!0).is.ok},o.isNotOk=function(e,t){new r(e,t,o.isNotOk,!0).is.not.ok},o.equal=function(e,t,i){var s=new r(e,i,o.equal,!0);s.assert(t==n(s,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e,!0)},o.notEqual=function(e,t,i){var s=new r(e,i,o.notEqual,!0);s.assert(t!=n(s,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e,!0)},o.strictEqual=function(e,t,n){new r(e,n,o.strictEqual,!0).to.equal(t)},o.notStrictEqual=function(e,t,n){new r(e,n,o.notStrictEqual,!0).to.not.equal(t)},o.deepEqual=o.deepStrictEqual=function(e,t,n){new r(e,n,o.deepEqual,!0).to.eql(t)},o.notDeepEqual=function(e,t,n){new r(e,n,o.notDeepEqual,!0).to.not.eql(t)},o.isAbove=function(e,t,n){new r(e,n,o.isAbove,!0).to.be.above(t)},o.isAtLeast=function(e,t,n){new r(e,n,o.isAtLeast,!0).to.be.least(t)},o.isBelow=function(e,t,n){new r(e,n,o.isBelow,!0).to.be.below(t)},o.isAtMost=function(e,t,n){new r(e,n,o.isAtMost,!0).to.be.most(t)},o.isTrue=function(e,t){new r(e,t,o.isTrue,!0).is.true},o.isNotTrue=function(e,t){new r(e,t,o.isNotTrue,!0).to.not.equal(!0)},o.isFalse=function(e,t){new r(e,t,o.isFalse,!0).is.false},o.isNotFalse=function(e,t){new r(e,t,o.isNotFalse,!0).to.not.equal(!1)},o.isNull=function(e,t){new r(e,t,o.isNull,!0).to.equal(null)},o.isNotNull=function(e,t){new r(e,t,o.isNotNull,!0).to.not.equal(null)},o.isNaN=function(e,t){new r(e,t,o.isNaN,!0).to.be.NaN},o.isNotNaN=function(e,t){new r(e,t,o.isNotNaN,!0).not.to.be.NaN},o.exists=function(e,t){new r(e,t,o.exists,!0).to.exist},o.notExists=function(e,t){new r(e,t,o.notExists,!0).to.not.exist},o.isUndefined=function(e,t){new r(e,t,o.isUndefined,!0).to.equal(void 0)},o.isDefined=function(e,t){new r(e,t,o.isDefined,!0).to.not.equal(void 0)},o.isFunction=function(e,t){new r(e,t,o.isFunction,!0).to.be.a("function")},o.isNotFunction=function(e,t){new r(e,t,o.isNotFunction,!0).to.not.be.a("function")},o.isObject=function(e,t){new r(e,t,o.isObject,!0).to.be.a("object")},o.isNotObject=function(e,t){new r(e,t,o.isNotObject,!0).to.not.be.a("object")},o.isArray=function(e,t){new r(e,t,o.isArray,!0).to.be.an("array")},o.isNotArray=function(e,t){new r(e,t,o.isNotArray,!0).to.not.be.an("array")},o.isString=function(e,t){new r(e,t,o.isString,!0).to.be.a("string")},o.isNotString=function(e,t){new r(e,t,o.isNotString,!0).to.not.be.a("string")},o.isNumber=function(e,t){new r(e,t,o.isNumber,!0).to.be.a("number")},o.isNotNumber=function(e,t){new r(e,t,o.isNotNumber,!0).to.not.be.a("number")},o.isFinite=function(e,t){new r(e,t,o.isFinite,!0).to.be.finite},o.isBoolean=function(e,t){new r(e,t,o.isBoolean,!0).to.be.a("boolean")},o.isNotBoolean=function(e,t){new r(e,t,o.isNotBoolean,!0).to.not.be.a("boolean")},o.typeOf=function(e,t,n){new r(e,n,o.typeOf,!0).to.be.a(t)},o.notTypeOf=function(e,t,n){new r(e,n,o.notTypeOf,!0).to.not.be.a(t)},o.instanceOf=function(e,t,n){new r(e,n,o.instanceOf,!0).to.be.instanceOf(t)},o.notInstanceOf=function(e,t,n){new r(e,n,o.notInstanceOf,!0).to.not.be.instanceOf(t)},o.include=function(e,t,n){new r(e,n,o.include,!0).include(t)},o.notInclude=function(e,t,n){new r(e,n,o.notInclude,!0).not.include(t)},o.deepInclude=function(e,t,n){new r(e,n,o.deepInclude,!0).deep.include(t)},o.notDeepInclude=function(e,t,n){new r(e,n,o.notDeepInclude,!0).not.deep.include(t)},o.nestedInclude=function(e,t,n){new r(e,n,o.nestedInclude,!0).nested.include(t)},o.notNestedInclude=function(e,t,n){new r(e,n,o.notNestedInclude,!0).not.nested.include(t)},o.deepNestedInclude=function(e,t,n){new r(e,n,o.deepNestedInclude,!0).deep.nested.include(t)},o.notDeepNestedInclude=function(e,t,n){new r(e,n,o.notDeepNestedInclude,!0).not.deep.nested.include(t)},o.ownInclude=function(e,t,n){new r(e,n,o.ownInclude,!0).own.include(t)},o.notOwnInclude=function(e,t,n){new r(e,n,o.notOwnInclude,!0).not.own.include(t)},o.deepOwnInclude=function(e,t,n){new r(e,n,o.deepOwnInclude,!0).deep.own.include(t)},o.notDeepOwnInclude=function(e,t,n){new r(e,n,o.notDeepOwnInclude,!0).not.deep.own.include(t)},o.match=function(e,t,n){new r(e,n,o.match,!0).to.match(t)},o.notMatch=function(e,t,n){new r(e,n,o.notMatch,!0).to.not.match(t)},o.property=function(e,t,n){new r(e,n,o.property,!0).to.have.property(t)},o.notProperty=function(e,t,n){new r(e,n,o.notProperty,!0).to.not.have.property(t)},o.propertyVal=function(e,t,n,i){new r(e,i,o.propertyVal,!0).to.have.property(t,n)},o.notPropertyVal=function(e,t,n,i){new r(e,i,o.notPropertyVal,!0).to.not.have.property(t,n)},o.deepPropertyVal=function(e,t,n,i){new r(e,i,o.deepPropertyVal,!0).to.have.deep.property(t,n)},o.notDeepPropertyVal=function(e,t,n,i){new r(e,i,o.notDeepPropertyVal,!0).to.not.have.deep.property(t,n)},o.ownProperty=function(e,t,n){new r(e,n,o.ownProperty,!0).to.have.own.property(t)},o.notOwnProperty=function(e,t,n){new r(e,n,o.notOwnProperty,!0).to.not.have.own.property(t)},o.ownPropertyVal=function(e,t,n,i){new r(e,i,o.ownPropertyVal,!0).to.have.own.property(t,n)},o.notOwnPropertyVal=function(e,t,n,i){new r(e,i,o.notOwnPropertyVal,!0).to.not.have.own.property(t,n)},o.deepOwnPropertyVal=function(e,t,n,i){new r(e,i,o.deepOwnPropertyVal,!0).to.have.deep.own.property(t,n)},o.notDeepOwnPropertyVal=function(e,t,n,i){new r(e,i,o.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(t,n)},o.nestedProperty=function(e,t,n){new r(e,n,o.nestedProperty,!0).to.have.nested.property(t)},o.notNestedProperty=function(e,t,n){new r(e,n,o.notNestedProperty,!0).to.not.have.nested.property(t)},o.nestedPropertyVal=function(e,t,n,i){new r(e,i,o.nestedPropertyVal,!0).to.have.nested.property(t,n)},o.notNestedPropertyVal=function(e,t,n,i){new r(e,i,o.notNestedPropertyVal,!0).to.not.have.nested.property(t,n)},o.deepNestedPropertyVal=function(e,t,n,i){new r(e,i,o.deepNestedPropertyVal,!0).to.have.deep.nested.property(t,n)},o.notDeepNestedPropertyVal=function(e,t,n,i){new r(e,i,o.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(t,n)},o.lengthOf=function(e,t,n){new r(e,n,o.lengthOf,!0).to.have.lengthOf(t)},o.hasAnyKeys=function(e,t,n){new r(e,n,o.hasAnyKeys,!0).to.have.any.keys(t)},o.hasAllKeys=function(e,t,n){new r(e,n,o.hasAllKeys,!0).to.have.all.keys(t)},o.containsAllKeys=function(e,t,n){new r(e,n,o.containsAllKeys,!0).to.contain.all.keys(t)},o.doesNotHaveAnyKeys=function(e,t,n){new r(e,n,o.doesNotHaveAnyKeys,!0).to.not.have.any.keys(t)},o.doesNotHaveAllKeys=function(e,t,n){new r(e,n,o.doesNotHaveAllKeys,!0).to.not.have.all.keys(t)},o.hasAnyDeepKeys=function(e,t,n){new r(e,n,o.hasAnyDeepKeys,!0).to.have.any.deep.keys(t)},o.hasAllDeepKeys=function(e,t,n){new r(e,n,o.hasAllDeepKeys,!0).to.have.all.deep.keys(t)},o.containsAllDeepKeys=function(e,t,n){new r(e,n,o.containsAllDeepKeys,!0).to.contain.all.deep.keys(t)},o.doesNotHaveAnyDeepKeys=function(e,t,n){new r(e,n,o.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(t)},o.doesNotHaveAllDeepKeys=function(e,t,n){new r(e,n,o.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(t)},o.throws=function(e,t,i,s){("string"==typeof t||t instanceof RegExp)&&(i=t,t=null);var a=new r(e,s,o.throws,!0).to.throw(t,i);return n(a,"object")},o.doesNotThrow=function(e,t,n,i){("string"==typeof t||t instanceof RegExp)&&(n=t,t=null),new r(e,i,o.doesNotThrow,!0).to.not.throw(t,n)},o.operator=function(i,s,a,c){var u;switch(s){case"==":u=i==a;break;case"===":u=i===a;break;case">":u=i>a;break;case">=":u=i>=a;break;case"<":u=i<a;break;case"<=":u=i<=a;break;case"!=":u=i!=a;break;case"!==":u=i!==a;break;default:throw c=c?c+": ":c,new e.AssertionError(c+'Invalid operator "'+s+'"',void 0,o.operator)}var p=new r(u,c,o.operator,!0);p.assert(!0===n(p,"object"),"expected "+t.inspect(i)+" to be "+s+" "+t.inspect(a),"expected "+t.inspect(i)+" to not be "+s+" "+t.inspect(a))},o.closeTo=function(e,t,n,i){new r(e,i,o.closeTo,!0).to.be.closeTo(t,n)},o.approximately=function(e,t,n,i){new r(e,i,o.approximately,!0).to.be.approximately(t,n)},o.sameMembers=function(e,t,n){new r(e,n,o.sameMembers,!0).to.have.same.members(t)},o.notSameMembers=function(e,t,n){new r(e,n,o.notSameMembers,!0).to.not.have.same.members(t)},o.sameDeepMembers=function(e,t,n){new r(e,n,o.sameDeepMembers,!0).to.have.same.deep.members(t)},o.notSameDeepMembers=function(e,t,n){new r(e,n,o.notSameDeepMembers,!0).to.not.have.same.deep.members(t)},o.sameOrderedMembers=function(e,t,n){new r(e,n,o.sameOrderedMembers,!0).to.have.same.ordered.members(t)},o.notSameOrderedMembers=function(e,t,n){new r(e,n,o.notSameOrderedMembers,!0).to.not.have.same.ordered.members(t)},o.sameDeepOrderedMembers=function(e,t,n){new r(e,n,o.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(t)},o.notSameDeepOrderedMembers=function(e,t,n){new r(e,n,o.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(t)},o.includeMembers=function(e,t,n){new r(e,n,o.includeMembers,!0).to.include.members(t)},o.notIncludeMembers=function(e,t,n){new r(e,n,o.notIncludeMembers,!0).to.not.include.members(t)},o.includeDeepMembers=function(e,t,n){new r(e,n,o.includeDeepMembers,!0).to.include.deep.members(t)},o.notIncludeDeepMembers=function(e,t,n){new r(e,n,o.notIncludeDeepMembers,!0).to.not.include.deep.members(t)},o.includeOrderedMembers=function(e,t,n){new r(e,n,o.includeOrderedMembers,!0).to.include.ordered.members(t)},o.notIncludeOrderedMembers=function(e,t,n){new r(e,n,o.notIncludeOrderedMembers,!0).to.not.include.ordered.members(t)},o.includeDeepOrderedMembers=function(e,t,n){new r(e,n,o.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(t)},o.notIncludeDeepOrderedMembers=function(e,t,n){new r(e,n,o.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(t)},o.oneOf=function(e,t,n){new r(e,n,o.oneOf,!0).to.be.oneOf(t)},o.changes=function(e,t,n,i){3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.changes,!0).to.change(t,n)},o.changesBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);new r(e,s,o.changesBy,!0).to.change(t,n).by(i)},o.doesNotChange=function(e,t,n,i){return 3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.doesNotChange,!0).to.not.change(t,n)},o.changesButNotBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);new r(e,s,o.changesButNotBy,!0).to.change(t,n).but.not.by(i)},o.increases=function(e,t,n,i){return 3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.increases,!0).to.increase(t,n)},o.increasesBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);new r(e,s,o.increasesBy,!0).to.increase(t,n).by(i)},o.doesNotIncrease=function(e,t,n,i){return 3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.doesNotIncrease,!0).to.not.increase(t,n)},o.increasesButNotBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);new r(e,s,o.increasesButNotBy,!0).to.increase(t,n).but.not.by(i)},o.decreases=function(e,t,n,i){return 3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.decreases,!0).to.decrease(t,n)},o.decreasesBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);new r(e,s,o.decreasesBy,!0).to.decrease(t,n).by(i)},o.doesNotDecrease=function(e,t,n,i){return 3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.doesNotDecrease,!0).to.not.decrease(t,n)},o.doesNotDecreaseBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);return new r(e,s,o.doesNotDecreaseBy,!0).to.not.decrease(t,n).by(i)},o.decreasesButNotBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);new r(e,s,o.decreasesButNotBy,!0).to.decrease(t,n).but.not.by(i)}
/*!
   * ### .ifError(object)
   *
   * Asserts if value is not a false value, and throws if it is a true value.
   * This is added to allow for chai to be a drop-in replacement for Node's
   * assert class.
   *
   *     var err = new Error('I am a custom error');
   *     assert.ifError(err); // Rethrows err!
   *
   * @name ifError
   * @param {Object} object
   * @namespace Assert
   * @api public
   */,o.ifError=function(e){if(e)throw e},o.isExtensible=function(e,t){new r(e,t,o.isExtensible,!0).to.be.extensible},o.isNotExtensible=function(e,t){new r(e,t,o.isNotExtensible,!0).to.not.be.extensible},o.isSealed=function(e,t){new r(e,t,o.isSealed,!0).to.be.sealed},o.isNotSealed=function(e,t){new r(e,t,o.isNotSealed,!0).to.not.be.sealed},o.isFrozen=function(e,t){new r(e,t,o.isFrozen,!0).to.be.frozen},o.isNotFrozen=function(e,t){new r(e,t,o.isNotFrozen,!0).to.not.be.frozen},o.isEmpty=function(e,t){new r(e,t,o.isEmpty,!0).to.be.empty},o.isNotEmpty=function(e,t){new r(e,t,o.isNotEmpty,!0).to.not.be.empty},
/*!
   * Aliases.
   */
function e(t,r){return o[r]=o[t],e}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__,require;!function(require){"use strict";Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var isNode=!!module.exports,allowedResultTypes=["value","path","parent","parentProperty","all"],vm=isNode?__webpack_require__(460):{runInNewContext:function(expr,context){return eval(Object.keys(context).reduce(function(e,t){return"var "+t+"="+JSON.stringify(context[t]).replace(/\u2028|\u2029/g,function(e){return"\\u202"+("\u2028"===e?"8":"9")})+";"+e},expr))}};function push(e,t){return(e=e.slice()).push(t),e}function unshift(e,t){return(t=t.slice()).unshift(e),t}function JSONPath(e,t,r,n){if(!(this instanceof JSONPath))try{return new JSONPath(e,t,r,n)}catch(e){if(!e.avoidNew)throw e;return e.value}var o=(e=e||{}).hasOwnProperty("json")&&e.hasOwnProperty("path");if(this.json=e.json||r,this.path=e.path||t,this.resultType=e.resultType&&e.resultType.toLowerCase()||"value",this.flatten=e.flatten||!1,this.wrap=!e.hasOwnProperty("wrap")||e.wrap,this.sandbox=e.sandbox||{},this.preventEval=e.preventEval||!1,this.parent=e.parent||null,this.parentProperty=e.parentProperty||null,this.callback=e.callback||null,this.otherTypeCallback=e.otherTypeCallback||function(){throw"You must supply an otherTypeCallback callback option with the @other() operator."},!1!==e.autostart){var i=this.evaluate({path:o?e.path:t,json:o?e.json:r});if(!i||"object"!=typeof i)throw{avoidNew:!0,value:i,message:"JSONPath should not be called with 'new' (it prevents return of (unwrapped) scalar values)"};return i}}JSONPath.prototype.evaluate=function(e,t,r,n){var o=this,i=this.flatten,s=this.wrap,a=this.parent,c=this.parentProperty;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=n||this.otherTypeCallback,t=t||this.json,(e=e||this.path)&&"object"==typeof e){if(!e.path)throw"You must supply a 'path' property when providing an object argument to JSONPath.evaluate().";t=e.hasOwnProperty("json")?e.json:t,i=e.hasOwnProperty("flatten")?e.flatten:i,this.currResultType=e.hasOwnProperty("resultType")?e.resultType:this.currResultType,this.currSandbox=e.hasOwnProperty("sandbox")?e.sandbox:this.currSandbox,s=e.hasOwnProperty("wrap")?e.wrap:s,this.currPreventEval=e.hasOwnProperty("preventEval")?e.preventEval:this.currPreventEval,r=e.hasOwnProperty("callback")?e.callback:r,this.currOtherTypeCallback=e.hasOwnProperty("otherTypeCallback")?e.otherTypeCallback:this.currOtherTypeCallback,a=e.hasOwnProperty("parent")?e.parent:a,c=e.hasOwnProperty("parentProperty")?e.parentProperty:c,e=e.path}if(a=a||null,c=c||null,Array.isArray(e)&&(e=JSONPath.toPathString(e)),e&&t&&-1!==allowedResultTypes.indexOf(this.currResultType)){this._obj=t;var u=JSONPath.toPathArray(e);"$"===u[0]&&u.length>1&&u.shift();var p=this._trace(u,t,["$"],a,c,r);return(p=p.filter(function(e){return e&&!e.isParentSelector})).length?1!==p.length||s||Array.isArray(p[0].value)?p.reduce(function(e,t){var r=o._getPreferredOutput(t);return i&&Array.isArray(r)?e=e.concat(r):e.push(r),e},[]):this._getPreferredOutput(p[0]):s?[]:void 0}},JSONPath.prototype._getPreferredOutput=function(e){var t=this.currResultType;switch(t){case"all":return e.path=JSONPath.toPathString(e.path),e;case"value":case"parent":case"parentProperty":return e[t];case"path":return JSONPath.toPathString(e[t])}},JSONPath.prototype._handleCallback=function(e,t,r){if(t){var n=this._getPreferredOutput(e);e.path=JSONPath.toPathString(e.path),t(n,r,e)}},JSONPath.prototype._trace=function(e,t,r,n,o,i){var s,a=this;if(!e.length)return s={path:r,value:t,parent:n,parentProperty:o},this._handleCallback(s,i,"value"),s;var c=e[0],u=e.slice(1),p=[];function l(e){p=p.concat(e)}if(t&&t.hasOwnProperty(c))l(this._trace(u,t[c],push(r,c),t,c,i));else if("*"===c)this._walk(c,u,t,r,n,o,i,function(e,t,r,n,o,i,s,c){l(a._trace(unshift(e,r),n,o,i,s,c))});else if(".."===c)l(this._trace(u,t,r,n,o,i)),this._walk(c,u,t,r,n,o,i,function(e,t,r,n,o,i,s,c){"object"==typeof n[e]&&l(a._trace(unshift(t,r),n[e],push(o,e),n,e,c))});else if("("===c[0]){if(this.currPreventEval)throw"Eval [(expr)] prevented in JSONPath expression.";l(this._trace(unshift(this._eval(c,t,r[r.length-1],r.slice(0,-1),n,o),u),t,r,n,o,i))}else{if("^"===c)return r.length?{path:r.slice(0,-1),expr:u,isParentSelector:!0}:[];if("~"===c)return s={path:push(r,c),value:o,parent:n,parentProperty:null},this._handleCallback(s,i,"property"),s;if("$"===c)l(this._trace(u,t,r,null,null,i));else if(0===c.indexOf("?(")){if(this.currPreventEval)throw"Eval [?(expr)] prevented in JSONPath expression.";this._walk(c,u,t,r,n,o,i,function(e,t,r,n,o,i,s,c){a._eval(t.replace(/^\?\((.*?)\)$/,"$1"),n[e],e,o,i,s)&&l(a._trace(unshift(e,r),n,o,i,s,c))})}else if(c.indexOf(",")>-1){var h,d;for(h=c.split(","),d=0;d<h.length;d++)l(this._trace(unshift(h[d],u),t,r,n,o,i))}else if("@"===c[0]){var f=!1,m=c.slice(1,-2);switch(m){case"boolean":case"string":case"undefined":case"function":typeof t===m&&(f=!0);break;case"number":typeof t===m&&isFinite(t)&&(f=!0);break;case"nonFinite":"number"!=typeof t||isFinite(t)||(f=!0);break;case"object":t&&typeof t===m&&(f=!0);break;case"array":Array.isArray(t)&&(f=!0);break;case"other":f=this.currOtherTypeCallback(t,r,n,o);break;case"integer":t!==+t||!isFinite(t)||t%1||(f=!0);break;case"null":null===t&&(f=!0)}if(f)return s={path:r,value:t,parent:n,parentProperty:o},this._handleCallback(s,i,"value"),s}else/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(c)&&l(this._slice(c,u,t,r,n,o,i))}return p.reduce(function(e,r){return e.concat(r.isParentSelector?a._trace(r.expr,t,r.path,n,o,i):r)},[])},JSONPath.prototype._walk=function(e,t,r,n,o,i,s,a){var c,u,p;if(Array.isArray(r))for(c=0,u=r.length;c<u;c++)a(c,e,t,r,n,o,i,s);else if("object"==typeof r)for(p in r)r.hasOwnProperty(p)&&a(p,e,t,r,n,o,i,s)},JSONPath.prototype._slice=function(e,t,r,n,o,i,s){if(Array.isArray(r)){var a,c=r.length,u=e.split(":"),p=u[0]&&parseInt(u[0],10)||0,l=u[1]&&parseInt(u[1],10)||c,h=u[2]&&parseInt(u[2],10)||1;p=p<0?Math.max(0,p+c):Math.min(c,p),l=l<0?Math.max(0,l+c):Math.min(c,l);var d=[];for(a=p;a<l;a+=h)d=d.concat(this._trace(unshift(a,t),r,n,o,i,s));return d}},JSONPath.prototype._eval=function(e,t,r,n,o,i){if(!this._obj||!t)return!1;e.indexOf("@parentProperty")>-1&&(this.currSandbox._$_parentProperty=i,e=e.replace(/@parentProperty/g,"_$_parentProperty")),e.indexOf("@parent")>-1&&(this.currSandbox._$_parent=o,e=e.replace(/@parent/g,"_$_parent")),e.indexOf("@property")>-1&&(this.currSandbox._$_property=r,e=e.replace(/@property/g,"_$_property")),e.indexOf("@path")>-1&&(this.currSandbox._$_path=JSONPath.toPathString(n.concat([r])),e=e.replace(/@path/g,"_$_path")),e.indexOf("@")>-1&&(this.currSandbox._$_v=t,e=e.replace(/@/g,"_$_v"));try{return vm.runInNewContext(e,this.currSandbox)}catch(t){throw console.log(t),new Error("jsonPath: "+t.message+": "+e)}},JSONPath.cache={},JSONPath.toPathString=function(e){var t,r,n=e,o="$";for(t=1,r=n.length;t<r;t++)o+=/~|@.*\(\)/.test(n[t])?n[t]:/^[0-9*]+$/.test(n[t])?"["+n[t]+"]":"['"+n[t]+"']";return o},JSONPath.toPathArray=function(e){var t=JSONPath.cache;if(t[e])return t[e];var r=[],n=e.replace(/@(?:null|boolean|number|string|array|object|integer|undefined|nonFinite|function|other)\(\)/g,";$&;").replace(/~/g,";~;").replace(/[\['](\??\(.*?\))[\]']/g,function(e,t){return"[#"+(r.push(t)-1)+"]"}).replace(/\['([^'\]]*)'\]/g,function(e,t){return"['"+t.replace(/\./g,"%@%")+"']"}).replace(/'?\.'?(?![^\[]*\])|\['?/g,";").replace(/%@%/g,".").replace(/(?:;)?(\^+)(?:;)?/g,function(e,t){return";"+t.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").split(";").map(function(e){var t=e.match(/#([0-9]+)/);return t&&t[1]?r[t[1]]:e});return t[e]=n,t[e]},JSONPath.eval=function(e,t,r){return JSONPath(r,t,e)},__WEBPACK_AMD_DEFINE_RESULT__=function(){return JSONPath}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(void 0===require?null:require)},function(module,exports){var indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1},Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,r){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(e){return function(e,t,r){e[t]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var r=t.contentWindow,n=r.eval,o=r.execScript;!n&&o&&(o.call(r,"null"),n=r.eval),forEach(Object_keys(e),function(t){r[t]=e[t]}),forEach(globals,function(t){e[t]&&(r[t]=e[t])});var i=Object_keys(r),s=n.call(r,this.code);return forEach(Object_keys(r),function(t){(t in e||-1===indexOf(i,t))&&(e[t]=r[t])}),forEach(globals,function(t){t in e||defineProp(e,t,r[t])}),document.body.removeChild(t),s},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),r=this.runInContext(t);return e&&forEach(Object_keys(t),function(r){e[r]=t[r]}),r},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var r=Script(t);return r[e].apply(r,[].slice.call(arguments,1))}}),exports.isContext=function(e){return e instanceof Context},exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(r){t[r]=e[r]}),t}},function(e,t,r){const n=r(120),{EventEmitter:o}=r(8),i=r(34),{timedPromise:s,addressToProtocol:a}=r(462),{canSend:c,canReceive:u}=r(463),p=r(464)(),l=r(466),h=r(467);class d extends o{constructor(e,t){super(),this.definition=e;const r=n.getTransport(e.protocol);this.transport=new r(this.definition),this.options=t,this.options.connectionTimeout||(this.options.connectionTimeout=1e3),this.options.commandTimeout||(this.options.commandTimeout=1e3),this.options.skipPermissions||(this.options.skipPermissions=!1),this.options.skipValidation||(this.options.skipValidation=!1),this.prepareCommands()}validate(e,t){return p(e,t).catch(e=>this.options.skipValidation?(this.protocolError(e),Promise.resolve(t)):Promise.reject(e))}isConnected(){return this.transport.isConnected()}connect(){return s((e,t)=>{if(this.isConnected())return void e(this.definition);let r=null;const n=o=>{"runtime"===o.command?(this.transport.removeListener("error",r),this.validate("/runtime/output/runtime",o).then(()=>{this.prepareAdapter(o.payload.version),e(this.definition),this.emit("connected",this.definition),this.transport.once("disconnected",()=>{this.emit("disconnected",this.definition)})},e=>{this.transport.disconnect(),t(e)})):this.transport.once("runtime",n)};r=e=>{let r=e;e instanceof Error||(r=new Error(`Connection to ${this.definition.address} failed`)),this.transport.removeListener("runtime",n),this.transport.disconnect(),t(r)},this.transport.once("runtime",n),this.transport.once("error",r),this.transport.connect()},this.options.connectionTimeout,`Connection to ${this.definition.address} timed out`)}disconnect(){return new Promise(e=>{this.isConnected()?(this.transport.once("disconnected",()=>{e(null)}),this.transport.disconnect()):e(null)})}observe(e){return l(this,e)}signal(e){this.emit("signal",e),this.emit(e.protocol,{command:e.command,payload:e.payload})}protocolError(e){this.emit("protocolError",e)}canSend(e,t){return new Promise((r,n)=>{this.options.skipPermissions?r(null):c(e,t,this.definition.capabilities)?r(null):n(new Error(`Not permitted to send ${e}:${t} messages`))})}canReceive(e,t){return new Promise((r,n)=>{this.options.skipPermissions?r(null):u(e,t,this.definition.capabilities)?r(null):n(new Error(`Not permitted to receive ${e}:${t} messages`))})}prepareCommands(){this.protocol={},Object.keys(i).forEach(e=>{if(!i[e].input)return;const t={};Object.keys(i[e].input).forEach(r=>{t[r]=(t={})=>{const n=t;return n.secret=this.definition.secret,this.validate(`/${e}/${i[e].input[r].id}`,{protocol:e,command:r,payload:n}).then(()=>new Promise((e,t)=>{this.adapter||t(new Error("FBP client must be connected to the runtime before sending commands")),e(null)})).then(()=>this.canSend(e,r)).then(()=>this.adapter.send(e,r,n))}}),this.protocol[e]=t}),this.protocol.graph.send=(e,t=!1)=>{const r=e.name||e.properties.id,{properties:n,nodes:o,edges:i,initializers:s,inports:a,outports:c}=e;return this.protocol.graph.clear({id:r,name:e.name,main:t,library:n.library||n.project||this.definition.namespace,icon:n.icon||"",description:n.description||""}).then(()=>Promise.all(o.map(e=>this.protocol.graph.addnode({id:e.id,component:e.component,metadata:e.metadata,graph:r})))).then(()=>Promise.all(i.map(e=>this.protocol.graph.addedge({src:e.from,tgt:e.to,metadata:e.metadata,graph:r})))).then(()=>Promise.all(s.map(e=>this.protocol.graph.addinitial({src:e.from,tgt:e.to,metadata:e.metadata,graph:r})))).then(()=>Promise.all(Object.keys(a).map(e=>this.protocol.graph.addinport({public:e,node:a[e].process,port:a[e].port,graph:r})))).then(()=>Promise.all(Object.keys(c).map(e=>this.protocol.graph.addoutport({public:e,node:c[e].process,port:c[e].port,graph:r})))).then(()=>e)}}prepareAdapter(e){if(this.adapter)return;const t=Number.parseFloat(e);if(!(t<=.9))throw new Error(`Unsupported FBP protocol version ${e}`);this.adapter=h(this,t)}}e.exports=(e,t={})=>new Promise((r,o)=>{p("/definition/",e).then(()=>{const i=e;i.protocol=i.protocol||a(i.address),i.protocol?n.transports[i.protocol]?r(new d(i,t)):o(new Error(`Unsupported FBP transport ${i.protocol}`)):o(new Error("Runtime connection protocol is required"))},o)})},function(e,t,r){const{parse:n}=r(27);t.addressToProtocol=e=>{const t=n(e);switch(t.protocol){case"ws:":case"wss:":return"websocket";case"http:":case"https:":return t.query&&-1!==t.query.indexOf("fbp_protocol=webrtc")?"webrtc":"iframe";default:return null}},t.timedPromise=(e,t,r="Request timed out")=>Promise.race([new Promise(e),new Promise((e,n)=>{setTimeout(()=>{n(new Error(r))},t)})])},function(e,t,r){const n=r(34);function o(e,t,r=!0){return n.shared.capabilities.items._enumDescriptions.filter(n=>r?!(!n.inputs||!n.inputs.length)&&-1!==n.inputs.indexOf(`${e}:${t}`):!(!n.outputs||!n.outputs.length)&&-1!==n.outputs.indexOf(`${e}:${t}`)).map(e=>e.name)}t.canSend=(e,t,r)=>{if("runtime"===e&&"getruntime"===t)return!0;const n=o(e,t,!0);return r.filter(e=>-1!==n.indexOf(e)).length>0},t.canReceive=(e,t,r)=>{if("runtime"===e&&"runtime"===t)return!0;const n=o(e,t,!1);return r.filter(e=>-1!==n.indexOf(e)).length>0}},function(e,t,r){const n=r(122),o=r(131),i=r(34),s=r(465);e.exports=()=>{const e=new n({extendRefs:!0});return e.addMetaSchema(o),e._opts.defaultMeta="http://json-schema.org/draft-04/schema#",Object.keys(i).forEach(t=>{i[t].id=`/${t}/`,e.addSchema(i[t])}),e.addSchema(s),(t,r)=>new Promise((n,o)=>{const[i,s,a]=t.slice(1).split("/");if(!s)return e.validate(t,r)?void n(r):void o(new Error(`Runtime definition ${e.errorsText()}`));const c=r;c.protocol=i,e.validate(t,c)?n(r):o("input"!==s?new Error(`Runtime sent invalid payload for ${i}:${a}: ${e.errorsText()}`):new Error(`Client sent invalid payload for ${i}:${a}: ${e.errorsText()}`))})}},function(e){e.exports=JSON.parse('{"id":"/definition/","type":"object","properties":{"id":{"type":"string","format":"uuid"},"label":{"type":"string"},"address":{"type":"string"},"type":{"type":"string"},"protocol":{"type":"string"},"secret":{"type":"string"},"allCapabilities":{"$ref":"/shared/capabilities"},"capabilities":{"$ref":"/shared/capabilities"}},"required":["address"],"additionalProperties":true}')},function(e,t,r){const n=r(16)("fbp-client:observer"),o=r(16)("fbp-client:observer:ignored");function i(e,t){return"*"===t||e===t}function s(e,t){if("function"==typeof t)return t(e);return t.filter(t=>{const[r,n]=t.split(":");return i(e.protocol,r)&&i(e.command,n)}).length>0}function a(e){const t=`${e.protocol}:${e.command}`;let r=`Unexpected ${t} message`,n="";"runtime:packet"===t&&e.payload.payload&&e.payload.payload.message&&(r=e.payload.payload.message,n=e.payload.payload.stack),"network:data"===t&&e.payload.src&&"error"===e.payload.src.port&&(r=e.payload.data.message||e.payload.data,n=e.payload.data.stack),e.payload.error&&(r=e.payload.error,n=e.payload.stack);const o=new Error(r);return o.signature=t,n&&(o.stack=n),o}class c{constructor(e,t){this.client=e,this.signals=[],this.protocolErrors=[],this.listener=null,this.errorListener=null,this.subscribe(t)}subscribe(e){this.listener=t=>{s(t,e)?(n(`Observed ${t.protocol}:${t.command}`),this.signals.push(t)):o(`${t.protocol}:${t.command}`)},this.client.on("signal",this.listener),this.client.options.skipValidation||(this.errorListener=e=>{this.protocolErrors.push(e)},this.client.on("protocolError",this.errorListener))}unsubscribe(){this.listener&&(this.client.removeListener("signal",this.listener),this.listener=null),this.errorListener&&(this.client.removeListener("protocolError",this.errorListener),this.errorListener=null)}until(e,t){return new Promise((r,o)=>{if(this.protocolErrors.length){const e=this.protocolErrors[0];return n(`Failed with protocol error ${e.message}`),e.signals=this.signals.slice(0),this.unsubscribe(),this.signals=[],void o(e)}for(let i=0;i<this.signals.length;i+=1){const c=this.signals[i];if(s(c,t)){const e=a(c);return n(`Failed with ${c.protocol}:${c.command}`),e.signals=this.signals.slice(0,i+1),this.unsubscribe(),this.signals=[],void o(e)}if(s(c,e)){n(`Succeeded with ${c.protocol}:${c.command}`);const e=this.signals.slice(0,i+1);return this.unsubscribe(),this.signals=[],void r(e)}}let i=null;const c=u=>{if(s(u,t)){n(`Failed with ${u.protocol}:${u.command}`);const e=a(u);return e.signals=this.signals.slice(0),this.unsubscribe(),this.client.removeListener("signal",c),this.client.options.skipValidation||this.client.removeListener("protocolError",i),this.signals=[],void o(e)}if(s(u,e)){n(`Succeeded with ${u.protocol}:${u.command}`);const e=this.signals.slice(0);this.unsubscribe(),this.client.removeListener("signal",c),this.client.options.skipValidation||this.client.removeListener("protocolError",i),this.signals=[],r(e)}};i=e=>{n(`Failed with protocol error ${e.message}`);const t=e;t.signals=this.signals.slice(0),this.unsubscribe(),this.client.removeListener("signal",c),this.client.options.skipValidation||this.client.removeListener("protocolError",i),this.signals=[],o(t)},this.client.on("signal",c),this.client.options.skipValidation||this.client.on("protocolError",i)})}}e.exports=(e,t)=>new c(e,t)},function(e,t,r){const n=r(16)("fbp-client:adapter:signal"),o=r(16)("fbp-client:adapter:request"),i=r(16)("fbp-client:adapter:response");class s{constructor(e,t){this.client=e,this.commands=[],this.listener=null,this.version=t,this.subscribe(),this.tick()}subscribe(){this.client.transport.on("message",e=>{this.listener?this.listener(e):(n(`${e.protocol}:${e.command}`),this.client.validate(`/${e.protocol}/output/${e.command}`,e).then(()=>this.client.canReceive(e.protocol,e.command)).then(()=>this.client.signal(e),e=>this.client.protocolError(e)))}),this.client.transport.on("status",({online:e})=>{e&&this.tick()})}send(e,t,r){return new Promise((s,a)=>{const c=[];this.commands.push(()=>{let u=null;this.listener=r=>{this.client.validate(`/${r.protocol}/output/${r.command}`,r).then(()=>this.client.canReceive(r.protocol,r.command)).then(()=>{if(!(r=>{if(r.protocol!==e)return!1;const n=[];switch(`${e}:${t}`){case"runtime:packet":n.push("packetsent");break;case"component:getsource":n.push("source");break;case"component:source":n.push("component");break;case"component:list":n.push("component"),n.push("componentsready");break;case"network:start":n.push("started");break;case"network:stop":n.push("stopped");break;case"network:getstatus":n.push("status");break;default:n.push(t)}return n.push("error"),-1!==n.indexOf(r.command)})(r))return n(`${r.protocol}:${r.command}`),void this.client.signal(r);if(u&&(clearTimeout(u),u=null),i(`${r.protocol}:${r.command} for request ${e}:${t}`),"error"===r.command){const e=new Error(r.payload.message);return e.stack=r.payload.stack,this.listener=null,a(e),void this.tick()}if("component"===e&&"list"===t)return"componentsready"===r.command?(this.listener=null,s(c),void this.tick()):void c.push(r.payload);this.listener=null,s(r.payload),this.tick()},e=>{this.listener=null,a(e),this.tick()})},o(`${e}:${t}`),this.client.transport.send(e,t,r),"component"!==e&&(u="runtime"===e&&"packet"===t&&this.version<=.6?setTimeout(()=>{this.listener=null,s(r),this.tick()},10):setTimeout(()=>{this.listener=null,a(new Error(`${e}:${t} timed out`)),this.tick()},this.client.options.commandTimeout))}),this.tick()})}tick(){if(!this.commands.length)return;if(!this.client.isConnected())return;if(this.listener)return;this.commands.shift()()}}e.exports=(e,t)=>new s(e,t)},function(e,t,r){"use strict";var n,o,i,s,a,c,u;a=r(140),n=a.Runner,u=r(87),i=r(144),c=r(151),o=r(16)("fbp-spec:mocha"),s=function(e,t){return(t.skip?describe.skip:describe)(""+t.name,function(){return beforeEach(function(r){return null!=t.timeout&&this.timeout(t.timeout),e.setupSuite(t,r)}),afterEach(function(r){return e.teardownSuite(t,r)}),t.cases.forEach(function(r){return(r.skip?describe.skip:describe)(r.name,function(){return it(r.assertion,function(n){return null!=t.timeout&&this.timeout(t.timeout),null!=r.timeout&&this.timeout(r.timeout),a.runTestAndCheck(e,r,function(e,t){return n(e||t.error)})})})})})},t.run=function(e,t,r){var a,p,l,h,d,f,m,g,y,v,b;null==r.starttimeout&&(r.starttimeout=5e3),null==r.fixturetimeout&&(r.fixturetimeout=2e3),m={connectTimeout:r.starttimeout,commandTimeout:r.commandtimeout},f=new n(e,m);try{b=u.getSuitesSync(t)}catch(e){throw a=e,console.log("Unable to get suites:",a),a}for(h=null,g=function(t){var r;return e.command?(r={},h=c.start(e.command,r,t)):t(null)},y=function(e){return h&&h.kill(),e(null)},before(function(e){return this.timeout(r.starttimeout+500),g(function(t){return o("started",t),i.noError(t),f.connect(e)}),null}),after(function(e){return y(function(t){return o("stopped",t),i.noError(t),f.disconnect(e)}),null}),d=[],p=0,l=b.length;p<l;p++)null==(v=b[p]).timeout&&(v.timeout=r.fixturetimeout),d.push(s(f,v));return d}},function(e,t,r){var n={};n.fbpGraph=r(470),n.Ease=r(474),"undefined"!=typeof window&&void 0===window.Ease&&(window.Ease=n.Ease);var o={contextPortSize:36,zbpBig:1.2,zbpNormal:.4,zbpSmall:.01,config:{nodeSize:72,nodeWidth:72,nodeRadius:8,nodeHeight:72,autoSizeNode:!0,maxPortCount:9,nodeHeightIncrement:12,focusAnimationDuration:1500}};for(var i in o)n[i]=o[i];"undefined"!=typeof window&&(window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);var s={TheGraph:n};n.factories=r(68),n.merge=r(70),r(491).register(s),r(569).register(s),r(570).register(s),r(571).register(s),r(572).register(s),r(573).register(s),r(574).register(s),r(575).register(s),r(576).register(s),r(577).register(s),n.menu=r(578),n.Menu=n.menu.Menu,n.factories.menu=n.menu.factories,n.config.menu=n.menu.config,n.config.menu.iconRect.rx=n.config.nodeRadius,n.config.menu.iconRect.ry=n.config.nodeRadius,n.modalbg=r(184),n.ModalBG=n.modalbg.ModalBG,n.config.ModalBG=n.config.factories,n.factories.ModalBG=n.modalbg.factories,n.FONT_AWESOME=r(186);var a=r(76);n.findMinMax=a.findMinMax,n.findNodeFit=a.findNodeFit,n.findFit=a.findFit,n.tooltip=r(579),n.Tooltip=n.tooltip.Tooltip,n.config.tooltip=n.tooltip.config,n.factories.tooltip=n.tooltip.factories,n.mixins=r(77),n.arcs=r(108),n.TextBG=r(185),n.SVGImage=r(158),n.thumb=r(187),n.nav=r(580),n.autolayout=r(581),n.library=r(582),n.clipboard=r(188),n.editor=r(583),n.render=r(584),n.render.register(s),e.exports=n},function(e,t,r){t.graph=r(471),t.Graph=t.graph.Graph,t.journal=r(473),t.Journal=t.journal.Journal},function(e,t,r){(function(){var e,n,o,i,s,a,c={}.hasOwnProperty;e=r(8).EventEmitter,o=r(53),s=r(472),n=function(t){function n(e,t){this.name=null!=e?e:"",null==t&&(t={}),this.properties={},this.nodes=[],this.edges=[],this.initializers=[],this.exports=[],this.inports={},this.outports={},this.groups=[],this.transaction={id:null,depth:0},this.caseSensitive=t.caseSensitive||!1}return function(e,t){for(var r in t)c.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(n,e),n.prototype.name="",n.prototype.caseSensitive=!1,n.prototype.properties={},n.prototype.nodes=[],n.prototype.edges=[],n.prototype.initializers=[],n.prototype.exports=[],n.prototype.inports={},n.prototype.outports={},n.prototype.groups=[],n.prototype.getPortName=function(e){return this.caseSensitive?e:e.toLowerCase()},n.prototype.startTransaction=function(e,t){if(this.transaction.id)throw Error("Nested transactions not supported");return this.transaction.id=e,this.transaction.depth=1,this.emit("startTransaction",e,t)},n.prototype.endTransaction=function(e,t){if(!this.transaction.id)throw Error("Attempted to end non-existing transaction");return this.transaction.id=null,this.transaction.depth=0,this.emit("endTransaction",e,t)},n.prototype.checkTransactionStart=function(){return this.transaction.id?"implicit"===this.transaction.id?this.transaction.depth+=1:void 0:this.startTransaction("implicit")},n.prototype.checkTransactionEnd=function(){if("implicit"===this.transaction.id&&(this.transaction.depth-=1),0===this.transaction.depth)return this.endTransaction("implicit")},n.prototype.setProperties=function(e){var t,r,n;for(r in this.checkTransactionStart(),t=o(this.properties),e)n=e[r],this.properties[r]=n;return this.emit("changeProperties",this.properties,t),this.checkTransactionEnd()},n.prototype.addExport=function(e,t,r,n){var o;if(null==n&&(n={x:0,y:0}),s.deprecated("fbp-graph.Graph exports is deprecated: please use specific inport or outport instead"),this.getNode(t))return this.checkTransactionStart(),o={public:this.getPortName(e),process:t,port:this.getPortName(r),metadata:n},this.exports.push(o),this.emit("addExport",o),this.checkTransactionEnd()},n.prototype.removeExport=function(e){var t,r,n,o,i,a;for(s.deprecated("fbp-graph.Graph exports is deprecated: please use specific inport or outport instead"),e=this.getPortName(e),r=null,o=n=0,i=(a=this.exports).length;n<i;o=++n)(t=a[o]).public===e&&(r=t);if(r)return this.checkTransactionStart(),this.exports.splice(this.exports.indexOf(r),1),this.emit("removeExport",r),this.checkTransactionEnd()},n.prototype.addInport=function(e,t,r,n){if(this.getNode(t))return e=this.getPortName(e),this.checkTransactionStart(),this.inports[e]={process:t,port:this.getPortName(r),metadata:n},this.emit("addInport",e,this.inports[e]),this.checkTransactionEnd()},n.prototype.removeInport=function(e){var t;if(e=this.getPortName(e),this.inports[e])return this.checkTransactionStart(),t=this.inports[e],this.setInportMetadata(e,{}),delete this.inports[e],this.emit("removeInport",e,t),this.checkTransactionEnd()},n.prototype.renameInport=function(e,t){if(e=this.getPortName(e),t=this.getPortName(t),this.inports[e])return this.checkTransactionStart(),this.inports[t]=this.inports[e],delete this.inports[e],this.emit("renameInport",e,t),this.checkTransactionEnd()},n.prototype.setInportMetadata=function(e,t){var r,n,i;if(e=this.getPortName(e),this.inports[e]){for(n in this.checkTransactionStart(),r=o(this.inports[e].metadata),this.inports[e].metadata||(this.inports[e].metadata={}),t)null!=(i=t[n])?this.inports[e].metadata[n]=i:delete this.inports[e].metadata[n];return this.emit("changeInport",e,this.inports[e],r),this.checkTransactionEnd()}},n.prototype.addOutport=function(e,t,r,n){if(this.getNode(t))return e=this.getPortName(e),this.checkTransactionStart(),this.outports[e]={process:t,port:this.getPortName(r),metadata:n},this.emit("addOutport",e,this.outports[e]),this.checkTransactionEnd()},n.prototype.removeOutport=function(e){var t;if(e=this.getPortName(e),this.outports[e])return this.checkTransactionStart(),t=this.outports[e],this.setOutportMetadata(e,{}),delete this.outports[e],this.emit("removeOutport",e,t),this.checkTransactionEnd()},n.prototype.renameOutport=function(e,t){if(e=this.getPortName(e),t=this.getPortName(t),this.outports[e])return this.checkTransactionStart(),this.outports[t]=this.outports[e],delete this.outports[e],this.emit("renameOutport",e,t),this.checkTransactionEnd()},n.prototype.setOutportMetadata=function(e,t){var r,n,i;if(e=this.getPortName(e),this.outports[e]){for(n in this.checkTransactionStart(),r=o(this.outports[e].metadata),this.outports[e].metadata||(this.outports[e].metadata={}),t)null!=(i=t[n])?this.outports[e].metadata[n]=i:delete this.outports[e].metadata[n];return this.emit("changeOutport",e,this.outports[e],r),this.checkTransactionEnd()}},n.prototype.addGroup=function(e,t,r){var n;return this.checkTransactionStart(),n={name:e,nodes:t,metadata:r},this.groups.push(n),this.emit("addGroup",n),this.checkTransactionEnd()},n.prototype.renameGroup=function(e,t){var r,n,o,i;for(this.checkTransactionStart(),n=0,o=(i=this.groups).length;n<o;n++)(r=i[n])&&r.name===e&&(r.name=t,this.emit("renameGroup",e,t));return this.checkTransactionEnd()},n.prototype.removeGroup=function(e){var t,r,n,o;for(this.checkTransactionStart(),r=0,n=(o=this.groups).length;r<n;r++)(t=o[r])&&t.name===e&&(this.setGroupMetadata(t.name,{}),this.groups.splice(this.groups.indexOf(t),1),this.emit("removeGroup",t));return this.checkTransactionEnd()},n.prototype.setGroupMetadata=function(e,t){var r,n,i,s,a,c,u;for(this.checkTransactionStart(),i=0,a=(c=this.groups).length;i<a;i++)if((n=c[i])&&n.name===e){for(s in r=o(n.metadata),t)null!=(u=t[s])?n.metadata[s]=u:delete n.metadata[s];this.emit("changeGroup",n,r)}return this.checkTransactionEnd()},n.prototype.addNode=function(e,t,r){var n;return this.checkTransactionStart(),r||(r={}),n={id:e,component:t,metadata:r},this.nodes.push(n),this.emit("addNode",n),this.checkTransactionEnd(),n},n.prototype.removeNode=function(e){var t,r,n,o,i,s,a,c,u,p,l,h,d,f,m,g,y,v,b,w,E,x,C,S,k,P,_,A,D,O,T,N;if(E=this.getNode(e)){for(this.checkTransactionStart(),N=[],o=0,p=(P=this.edges).length;o<p;o++)(t=P[o]).from.node!==E.id&&t.to.node!==E.id||N.push(t);for(a=0,l=N.length;a<l;a++)t=N[a],this.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);for(N=[],c=0,h=(_=this.initializers).length;c<h;c++)(s=_[c]).to.node===E.id&&N.push(s);for(u=0,d=N.length;u<d;u++)s=N[u],this.removeInitial(s.to.node,s.to.port);for(N=[],b=0,f=(A=this.exports).length;b<f;b++)r=A[b],this.getPortName(e)===r.process&&N.push(r);for(w=0,m=N.length;w<m;w++)r=N[w],this.removeExport(r.public);for(S in N=[],D=this.inports)D[S].process===e&&N.push(S);for(x=0,g=N.length;x<g;x++)S=N[x],this.removeInport(S);for(S in N=[],O=this.outports)O[S].process===e&&N.push(S);for(C=0,y=N.length;C<y;C++)S=N[C],this.removeOutport(S);for(k=0,v=(T=this.groups).length;k<v;k++)(n=T[k])&&-1!==(i=n.nodes.indexOf(e))&&n.nodes.splice(i,1);return this.setNodeMetadata(e,{}),-1!==this.nodes.indexOf(E)&&this.nodes.splice(this.nodes.indexOf(E),1),this.emit("removeNode",E),this.checkTransactionEnd()}},n.prototype.getNode=function(e){var t,r,n,o;for(t=0,r=(o=this.nodes).length;t<r;t++)if((n=o[t])&&n.id===e)return n;return null},n.prototype.renameNode=function(e,t){var r,n,o,i,s,a,c,u,p,l,h,d,f,m,g,y,v,b,w,E,x,C;if(this.checkTransactionStart(),m=this.getNode(e)){for(m.id=t,i=0,l=(v=this.edges).length;i<l;i++)(r=v[i])&&(r.from.node===e&&(r.from.node=t),r.to.node===e&&(r.to.node=t));for(c=0,h=(b=this.initializers).length;c<h;c++)(s=b[c])&&s.to.node===e&&(s.to.node=t);for(y in w=this.inports)(g=w[y]).process===e&&(g.process=t);for(y in E=this.outports)(g=E[y]).process===e&&(g.process=t);for(u=0,d=(x=this.exports).length;u<d;u++)(n=x[u]).process===e&&(n.process=t);for(p=0,f=(C=this.groups).length;p<f;p++)(o=C[p])&&-1!==(a=o.nodes.indexOf(e))&&(o.nodes[a]=t);return this.emit("renameNode",e,t),this.checkTransactionEnd()}},n.prototype.setNodeMetadata=function(e,t){var r,n,i,s;if(i=this.getNode(e)){for(n in this.checkTransactionStart(),r=o(i.metadata),i.metadata||(i.metadata={}),t)null!=(s=t[n])?i.metadata[n]=s:delete i.metadata[n];return this.emit("changeNode",i,r),this.checkTransactionEnd()}},n.prototype.addEdge=function(e,t,r,n,o){var i,s,a,c;for(null==o&&(o={}),t=this.getPortName(t),n=this.getPortName(n),s=0,a=(c=this.edges).length;s<a;s++)if((i=c[s]).from.node===e&&i.from.port===t&&i.to.node===r&&i.to.port===n)return;if(this.getNode(e)&&this.getNode(r))return this.checkTransactionStart(),i={from:{node:e,port:t},to:{node:r,port:n},metadata:o},this.edges.push(i),this.emit("addEdge",i),this.checkTransactionEnd(),i},n.prototype.addEdgeIndex=function(e,t,r,n,o,i,s){var a;if(null==s&&(s={}),this.getNode(e)&&this.getNode(n))return t=this.getPortName(t),o=this.getPortName(o),null===i&&(i=void 0),null===r&&(r=void 0),s||(s={}),this.checkTransactionStart(),a={from:{node:e,port:t,index:r},to:{node:n,port:o,index:i},metadata:s},this.edges.push(a),this.emit("addEdge",a),this.checkTransactionEnd(),a},n.prototype.removeEdge=function(e,t,r,n){var o,i,s,a,c,u,p,l,h,d,f,m;if(this.checkTransactionStart(),t=this.getPortName(t),n=this.getPortName(n),m=[],f=[],r&&n)for(s=i=0,u=(h=this.edges).length;i<u;s=++i)(o=h[s]).from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n?(this.setEdgeMetadata(o.from.node,o.from.port,o.to.node,o.to.port,{}),m.push(o)):f.push(o);else for(s=a=0,p=(d=this.edges).length;a<p;s=++a)(o=d[s]).from.node===e&&o.from.port===t||o.to.node===e&&o.to.port===t?(this.setEdgeMetadata(o.from.node,o.from.port,o.to.node,o.to.port,{}),m.push(o)):f.push(o);for(this.edges=f,c=0,l=m.length;c<l;c++)o=m[c],this.emit("removeEdge",o);return this.checkTransactionEnd()},n.prototype.getEdge=function(e,t,r,n){var o,i,s,a,c;for(t=this.getPortName(t),n=this.getPortName(n),s=i=0,a=(c=this.edges).length;i<a;s=++i)if((o=c[s])&&o.from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n)return o;return null},n.prototype.setEdgeMetadata=function(e,t,r,n,i){var s,a,c,u;if(a=this.getEdge(e,t,r,n)){for(c in this.checkTransactionStart(),s=o(a.metadata),a.metadata||(a.metadata={}),i)null!=(u=i[c])?a.metadata[c]=u:delete a.metadata[c];return this.emit("changeEdge",a,s),this.checkTransactionEnd()}},n.prototype.addInitial=function(e,t,r,n){var o;if(this.getNode(t))return r=this.getPortName(r),this.checkTransactionStart(),o={from:{data:e},to:{node:t,port:r},metadata:n},this.initializers.push(o),this.emit("addInitial",o),this.checkTransactionEnd(),o},n.prototype.addInitialIndex=function(e,t,r,n,o){var i;if(this.getNode(t))return null===n&&(n=void 0),r=this.getPortName(r),this.checkTransactionStart(),i={from:{data:e},to:{node:t,port:r,index:n},metadata:o},this.initializers.push(i),this.emit("addInitial",i),this.checkTransactionEnd(),i},n.prototype.addGraphInitial=function(e,t,r){var n;if(n=this.inports[t])return this.addInitial(e,n.process,n.port,r)},n.prototype.addGraphInitialIndex=function(e,t,r,n){var o;if(o=this.inports[t])return this.addInitialIndex(e,o.process,o.port,r,n)},n.prototype.removeInitial=function(e,t){var r,n,o,i,s,a,c,u,p;for(t=this.getPortName(t),this.checkTransactionStart(),p=[],u=[],o=n=0,s=(c=this.initializers).length;n<s;o=++n)(r=c[o]).to.node===e&&r.to.port===t?p.push(r):u.push(r);for(this.initializers=u,i=0,a=p.length;i<a;i++)r=p[i],this.emit("removeInitial",r);return this.checkTransactionEnd()},n.prototype.removeGraphInitial=function(e){var t;if(t=this.inports[e])return this.removeInitial(t.process,t.port)},n.prototype.toDOT=function(){var e,t,r,n,o,i,s,a,c,u,p,l,h,d,f,m;for(e=function(e){return e.replace(/\s*/g,"")},t=function(e){return e.replace(/\./g,"")},r="digraph {\n",o=0,u=(d=this.nodes).length;o<u;o++)r+="    "+e((h=d[o]).id)+" [label="+h.id+" shape=box]\n";for(i=a=0,p=(f=this.initializers).length;a<p;i=++a)r+="    data"+i+" [label=\"'"+("function"==typeof(s=f[i]).from.data?"Function":s.from.data)+"'\" shape=plaintext]\n",r+="    data"+i+" -> "+e(s.to.node)+"[headlabel="+t(s.to.port)+" labelfontcolor=blue labelfontsize=8.0]\n";for(c=0,l=(m=this.edges).length;c<l;c++)r+="    "+e((n=m[c]).from.node)+" -> "+e(n.to.node)+"[taillabel="+t(n.from.port)+" headlabel="+t(n.to.port)+" labelfontcolor=blue labelfontsize=8.0]\n";return r+="}"},n.prototype.toYUML=function(){var e,t,r,n,o,i,s,a,c;for(c=[],t=0,o=(s=this.initializers).length;t<o;t++)r=s[t],c.push("(start)["+r.to.port+"]->("+r.to.node+")");for(n=0,i=(a=this.edges).length;n<i;n++)e=a[n],c.push("("+e.from.node+")["+e.from.port+"]->("+e.to.node+")");return c.join(",")},n.prototype.toJSON=function(){var e,t,r,n,o,i,s,a,c,u,p,l,h,d,f,m,g,y,v,b,w,E,x,C,S,k,P,_,A,D;for(b in c={caseSensitive:this.caseSensitive,properties:{},inports:{},outports:{},groups:[],processes:{},connections:[]},this.name&&(c.properties.name=this.name),E=this.properties)D=E[b],c.properties[b]=D;for(w in x=this.inports)v=x[w],c.inports[w]=v;for(w in C=this.outports)v=C[w],c.outports[w]=v;for(i=0,l=(S=this.exports).length;i<l;i++)r=S[i],c.exports||(c.exports=[]),c.exports.push(r);for(a=0,h=(k=this.groups).length;a<h;a++)o={name:(n=k[a]).name,nodes:n.nodes},Object.keys(n.metadata).length&&(o.metadata=n.metadata),c.groups.push(o);for(u=0,d=(P=this.nodes).length;u<d;u++)y=P[u],c.processes[y.id]={component:y.component},y.metadata&&(c.processes[y.id].metadata=y.metadata);for(p=0,f=(_=this.edges).length;p<f;p++)e={src:{process:(t=_[p]).from.node,port:t.from.port,index:t.from.index},tgt:{process:t.to.node,port:t.to.port,index:t.to.index}},Object.keys(t.metadata).length&&(e.metadata=t.metadata),c.connections.push(e);for(g=0,m=(A=this.initializers).length;g<m;g++)s=A[g],c.connections.push({data:s.from.data,tgt:{process:s.to.node,port:s.to.port,index:s.to.index}});return c},n.prototype.save=function(e,t){var n;return s.isBrowser()?t(new Error("Saving graphs not supported on browser")):(n=JSON.stringify(this.toJSON(),null,4),r(11).writeFile(e+".json",n,"utf-8",function(r,n){if(r)throw r;return t(e)}))},n}(),t.Graph=n,t.createGraph=function(e,t){return new n(e,t)},t.loadJSON=function(e,t,r){var o,i,s,a,c,u,p,l,h,d,f,m,g,y,v,b,w,E,x,C,S,k,P,_,A,D,O,T;for(E in null==r&&(r={}),"string"==typeof e&&(e=JSON.parse(e)),e.properties||(e.properties={}),e.processes||(e.processes={}),e.connections||(e.connections=[]),o=e.caseSensitive||!1,(c=new n(e.properties.name,{caseSensitive:o})).startTransaction("loadJSON",r),w={},C=e.properties)T=C[E],"name"!==E&&(w[E]=T);for(l in c.setProperties(w),S=e.processes)(s=S[l]).metadata||(s.metadata={}),c.addNode(l,s.component,s.metadata);for(p=0,f=(k=e.connections).length;p<f;p++)r=(i=k[p]).metadata?i.metadata:{},void 0===i.data?"number"!=typeof i.src.index&&"number"!=typeof i.tgt.index?c.addEdge(i.src.process,c.getPortName(i.src.port),i.tgt.process,c.getPortName(i.tgt.port),r):c.addEdgeIndex(i.src.process,c.getPortName(i.src.port),i.src.index,i.tgt.process,c.getPortName(i.tgt.port),i.tgt.index,r):"number"==typeof i.tgt.index?c.addInitialIndex(i.data,i.tgt.process,c.getPortName(i.tgt.port),i.tgt.index,r):c.addInitial(i.data,i.tgt.process,c.getPortName(i.tgt.port),r);if(e.exports&&e.exports.length)for(h=0,m=(P=e.exports).length;h<m;h++){if((a=P[h]).private){if(2!==(O=a.private.split(".")).length)continue;for(l in b=O[0],y=O[1],e.processes)c.getPortName(l)===c.getPortName(b)&&(b=l)}else b=a.process,y=c.getPortName(a.port);c.addExport(a.public,b,y,a.metadata)}if(e.inports)for(x in _=e.inports)v=_[x],c.addInport(x,v.process,c.getPortName(v.port),v.metadata);if(e.outports)for(x in A=e.outports)v=A[x],c.addOutport(x,v.process,c.getPortName(v.port),v.metadata);if(e.groups)for(d=0,g=(D=e.groups).length;d<g;d++)u=D[d],c.addGroup(u.name,u.nodes,u.metadata||{});return c.endTransaction("loadJSON"),t(null,c)},t.loadFBP=function(e,n,o,i){var s,a;null==o&&(o={}),null==i&&(i=!1);try{s=r(78).parse(e,{caseSensitive:i})}catch(a){return n(a)}return t.loadJSON(s,n,o)},t.loadHTTP=function(e,t){var r;return(r=new XMLHttpRequest).onreadystatechange=function(){if(4===r.readyState)return 200!==r.status?t(new Error("Failed to load "+e+": HTTP "+r.status)):t(null,r.responseText)},r.open("GET",e,!0),r.send()},t.loadFile=function(e,n,o,i){if(null==o&&(o={}),null==i&&(i=!1),!s.isBrowser())return r(11).readFile(e,"utf-8",function(r,o){var s;return r?n(r):"fbp"===e.split(".").pop()?t.loadFBP(o,n,{},i):(s=JSON.parse(o),t.loadJSON(s,n,{}))});t.loadHTTP(e,function(r,i){var s;return r?n(r):"fbp"===e.split(".").pop()?t.loadFBP(i,n,o):(s=JSON.parse(i),t.loadJSON(s,n,o))})},a=function(e){var t,r,n,i,s,a,c,u,p,l,h,d,f,m,g,y,v,b,w,E,x,C,S,k;for(i=0,p=(v=o(e.groups).reverse()).length;i<p;i++)null!=(n=v[i])&&e.removeGroup(n.name);for(y in b=o(e.outports))b[y],e.removeOutport(y);for(y in w=o(e.inports))w[y],e.removeInport(y);for(a=0,l=(E=o(e.exports.reverse())).length;a<l;a++)r=E[a],e.removeExport(r.public);for(e.setProperties({}),c=0,h=(x=o(e.initializers).reverse()).length;c<h;c++)s=x[c],e.removeInitial(s.to.node,s.to.port);for(u=0,d=(C=o(e.edges).reverse()).length;u<d;u++)t=C[u],e.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);for(k=[],m=0,f=(S=o(e.nodes).reverse()).length;m<f;m++)g=S[m],k.push(e.removeNode(g.id));return k},i=function(e,t){var r,n,o,i,s,c,u,p,l,h,d,f,m,g,y,v,b,w,E,x,C,S,k,P,_;for(a(e),i=0,l=(w=t.nodes).length;i<l;i++)y=w[i],e.addNode(y.id,y.component,y.metadata);for(c=0,h=(E=t.edges).length;c<h;c++)r=E[c],e.addEdge(r.from.node,r.from.port,r.to.node,r.to.port,r.metadata);for(u=0,d=(x=t.initializers).length;u<d;u++)s=x[u],e.addInitial(s.from.data,s.to.node,s.to.port,s.metadata);for(p=0,f=(C=t.exports).length;p<f;p++)n=C[p],e.addExport(n.public,n.node,n.port,n.metadata);for(b in e.setProperties(t.properties),S=t.inports)v=S[b],e.addInport(b,v.process,v.port,v.metadata);for(b in k=t.outports)v=k[b],e.addOutport(b,v.process,v.port,v.metadata);for(_=[],g=0,m=(P=t.groups).length;g<m;g++)o=P[g],_.push(e.addGroup(o.name,o.nodes,o.metadata));return _},t.equivalent=function(e,t,r){return null==r&&(r={}),JSON.stringify(e)===JSON.stringify(t)},t.mergeResolveTheirs=i}).call(this)},function(e,t,r){(function(e){(function(){t.isBrowser=function(){return void 0===e||!e.execPath||!e.execPath.match(/node|iojs/)},t.deprecated=function(r){if(!t.isBrowser()){if(e.env.NOFLO_FATAL_DEPRECATED)throw new Error(r);return console.warn(r)}if(window.NOFLO_FATAL_DEPRECATED)throw new Error(r);console.warn(r)}}).call(this)}).call(this,r(2))},function(e,t,r){(function(){var e,n,o,i,s,a,c,u=function(e,t){for(var r in t)p.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty,l=function(e,t){return function(){return e.apply(t,arguments)}};e=r(8).EventEmitter,a=r(53),c=function(e){var t;switch(t=e.args,e.cmd){case"addNode":return t.id+"("+t.component+")";case"removeNode":return"DEL "+t.id+"("+t.component+")";case"renameNode":return"RENAME "+t.oldId+" "+t.newId;case"changeNode":return"META "+t.id;case"addEdge":return t.from.node+" "+t.from.port+" -> "+t.to.port+" "+t.to.node;case"removeEdge":return t.from.node+" "+t.from.port+" -X> "+t.to.port+" "+t.to.node;case"changeEdge":return"META "+t.from.node+" "+t.from.port+" -> "+t.to.port+" "+t.to.node;case"addInitial":return"'"+t.from.data+"' -> "+t.to.port+" "+t.to.node;case"removeInitial":return"'"+t.from.data+"' -X> "+t.to.port+" "+t.to.node;case"startTransaction":return">>> "+e.rev+": "+t.id;case"endTransaction":return"<<< "+e.rev+": "+t.id;case"changeProperties":return"PROPERTIES";case"addGroup":return"GROUP "+t.name;case"renameGroup":return"RENAME GROUP "+t.oldName+" "+t.newName;case"removeGroup":return"DEL GROUP "+t.name;case"changeGroup":return"META GROUP "+t.name;case"addInport":return"INPORT "+t.name;case"removeInport":return"DEL INPORT "+t.name;case"renameInport":return"RENAME INPORT "+t.oldId+" "+t.newId;case"changeInport":return"META INPORT "+t.name;case"addOutport":return"OUTPORT "+t.name;case"removeOutport":return"DEL OUTPORT "+t.name;case"renameOutport":return"RENAME OUTPORT "+t.oldId+" "+t.newId;case"changeOutport":return"META OUTPORT "+t.name;default:throw new Error("Unknown journal entry: "+e.cmd)}},s=function(e,t){var r,n,o;for(r in n={},e)o=e[r],n[r]=null;for(r in t)o=t[r],n[r]=o;return n},o=function(t){function r(e){this.graph=e,this.lastRevision=0}return u(r,e),r.prototype.lastRevision=0,r.prototype.putTransaction=function(e,t){return e>this.lastRevision&&(this.lastRevision=e),this.emit("transaction",e)},r.prototype.fetchTransaction=function(e,t){},r}(),i=function(e){function t(e){t.__super__.constructor.call(this,e),this.transactions=[]}return u(t,o),t.prototype.putTransaction=function(e,r){return t.__super__.putTransaction.call(this,e,r),this.transactions[e]=r},t.prototype.fetchTransaction=function(e){return this.transactions[e]},t}(),n=function(t){function n(e,t,r){var n,o,s,a,c,u,p,h,d,f,m,g,y,v,b,w,E,x,C,S,k;if(this.endTransaction=l(this.endTransaction,this),this.startTransaction=l(this.startTransaction,this),this.graph=e,this.entries=[],this.subscribed=!0,this.store=r||new i(this.graph),0===this.store.transactions.length){for(this.currentRevision=-1,this.startTransaction("initial",t),a=0,p=(v=this.graph.nodes).length;a<p;a++)y=v[a],this.appendCommand("addNode",y);for(u=0,h=(b=this.graph.edges).length;u<h;u++)n=b[u],this.appendCommand("addEdge",n);for(m=0,d=(w=this.graph.initializers).length;m<d;m++)s=w[m],this.appendCommand("addInitial",s);for(c in Object.keys(this.graph.properties).length>0&&this.appendCommand("changeProperties",this.graph.properties,{}),E=this.graph.inports)S=E[c],this.appendCommand("addInport",{name:c,port:S});for(c in x=this.graph.outports)S=x[c],this.appendCommand("addOutport",{name:c,port:S});for(g=0,f=(C=this.graph.groups).length;g<f;g++)o=C[g],this.appendCommand("addGroup",o);this.endTransaction("initial",t)}else this.currentRevision=this.store.lastRevision;this.graph.on("addNode",(k=this,function(e){return k.appendCommand("addNode",e)})),this.graph.on("removeNode",function(e){return function(t){return e.appendCommand("removeNode",t)}}(this)),this.graph.on("renameNode",function(e){return function(t,r){var n;return n={oldId:t,newId:r},e.appendCommand("renameNode",n)}}(this)),this.graph.on("changeNode",function(e){return function(t,r){return e.appendCommand("changeNode",{id:t.id,new:t.metadata,old:r})}}(this)),this.graph.on("addEdge",function(e){return function(t){return e.appendCommand("addEdge",t)}}(this)),this.graph.on("removeEdge",function(e){return function(t){return e.appendCommand("removeEdge",t)}}(this)),this.graph.on("changeEdge",function(e){return function(t,r){return e.appendCommand("changeEdge",{from:t.from,to:t.to,new:t.metadata,old:r})}}(this)),this.graph.on("addInitial",function(e){return function(t){return e.appendCommand("addInitial",t)}}(this)),this.graph.on("removeInitial",function(e){return function(t){return e.appendCommand("removeInitial",t)}}(this)),this.graph.on("changeProperties",function(e){return function(t,r){return e.appendCommand("changeProperties",{new:t,old:r})}}(this)),this.graph.on("addGroup",function(e){return function(t){return e.appendCommand("addGroup",t)}}(this)),this.graph.on("renameGroup",function(e){return function(t,r){return e.appendCommand("renameGroup",{oldName:t,newName:r})}}(this)),this.graph.on("removeGroup",function(e){return function(t){return e.appendCommand("removeGroup",t)}}(this)),this.graph.on("changeGroup",function(e){return function(t,r){return e.appendCommand("changeGroup",{name:t.name,new:t.metadata,old:r})}}(this)),this.graph.on("addExport",function(e){return function(t){return e.appendCommand("addExport",t)}}(this)),this.graph.on("removeExport",function(e){return function(t){return e.appendCommand("removeExport",t)}}(this)),this.graph.on("addInport",function(e){return function(t,r){return e.appendCommand("addInport",{name:t,port:r})}}(this)),this.graph.on("removeInport",function(e){return function(t,r){return e.appendCommand("removeInport",{name:t,port:r})}}(this)),this.graph.on("renameInport",function(e){return function(t,r){return e.appendCommand("renameInport",{oldId:t,newId:r})}}(this)),this.graph.on("changeInport",function(e){return function(t,r,n){return e.appendCommand("changeInport",{name:t,new:r.metadata,old:n})}}(this)),this.graph.on("addOutport",function(e){return function(t,r){return e.appendCommand("addOutport",{name:t,port:r})}}(this)),this.graph.on("removeOutport",function(e){return function(t,r){return e.appendCommand("removeOutport",{name:t,port:r})}}(this)),this.graph.on("renameOutport",function(e){return function(t,r){return e.appendCommand("renameOutport",{oldId:t,newId:r})}}(this)),this.graph.on("changeOutport",function(e){return function(t,r,n){return e.appendCommand("changeOutport",{name:t,new:r.metadata,old:n})}}(this)),this.graph.on("startTransaction",function(e){return function(t,r){return e.startTransaction(t,r)}}(this)),this.graph.on("endTransaction",function(e){return function(t,r){return e.endTransaction(t,r)}}(this))}return u(n,e),n.prototype.graph=null,n.prototype.entries=[],n.prototype.subscribed=!0,n.prototype.startTransaction=function(e,t){if(this.subscribed){if(this.entries.length>0)throw Error("Inconsistent @entries");return this.currentRevision++,this.appendCommand("startTransaction",{id:e,metadata:t},this.currentRevision)}},n.prototype.endTransaction=function(e,t){if(this.subscribed)return this.appendCommand("endTransaction",{id:e,metadata:t},this.currentRevision),this.store.putTransaction(this.currentRevision,this.entries),this.entries=[]},n.prototype.appendCommand=function(e,t,r){var n;if(this.subscribed)return n={cmd:e,args:a(t)},null!=r&&(n.rev=r),this.entries.push(n)},n.prototype.executeEntry=function(e){var t;switch(t=e.args,e.cmd){case"addNode":return this.graph.addNode(t.id,t.component);case"removeNode":return this.graph.removeNode(t.id);case"renameNode":return this.graph.renameNode(t.oldId,t.newId);case"changeNode":return this.graph.setNodeMetadata(t.id,s(t.old,t.new));case"addEdge":return this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"removeEdge":return this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"changeEdge":return this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,s(t.old,t.new));case"addInitial":return this.graph.addInitial(t.from.data,t.to.node,t.to.port);case"removeInitial":return this.graph.removeInitial(t.to.node,t.to.port);case"startTransaction":case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(t.new);case"addGroup":return this.graph.addGroup(t.name,t.nodes,t.metadata);case"renameGroup":return this.graph.renameGroup(t.oldName,t.newName);case"removeGroup":return this.graph.removeGroup(t.name);case"changeGroup":return this.graph.setGroupMetadata(t.name,s(t.old,t.new));case"addInport":return this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);case"removeInport":return this.graph.removeInport(t.name);case"renameInport":return this.graph.renameInport(t.oldId,t.newId);case"changeInport":return this.graph.setInportMetadata(t.name,s(t.old,t.new));case"addOutport":return this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata(t.name));case"removeOutport":return this.graph.removeOutport;case"renameOutport":return this.graph.renameOutport(t.oldId,t.newId);case"changeOutport":return this.graph.setOutportMetadata(t.name,s(t.old,t.new));default:throw new Error("Unknown journal entry: "+e.cmd)}},n.prototype.executeEntryInversed=function(e){var t;switch(t=e.args,e.cmd){case"addNode":return this.graph.removeNode(t.id);case"removeNode":return this.graph.addNode(t.id,t.component);case"renameNode":return this.graph.renameNode(t.newId,t.oldId);case"changeNode":return this.graph.setNodeMetadata(t.id,s(t.new,t.old));case"addEdge":return this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"removeEdge":return this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"changeEdge":return this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,s(t.new,t.old));case"addInitial":return this.graph.removeInitial(t.to.node,t.to.port);case"removeInitial":return this.graph.addInitial(t.from.data,t.to.node,t.to.port);case"startTransaction":case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(t.old);case"addGroup":return this.graph.removeGroup(t.name);case"renameGroup":return this.graph.renameGroup(t.newName,t.oldName);case"removeGroup":return this.graph.addGroup(t.name,t.nodes,t.metadata);case"changeGroup":return this.graph.setGroupMetadata(t.name,s(t.new,t.old));case"addInport":return this.graph.removeInport(t.name);case"removeInport":return this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);case"renameInport":return this.graph.renameInport(t.newId,t.oldId);case"changeInport":return this.graph.setInportMetadata(t.name,s(t.new,t.old));case"addOutport":return this.graph.removeOutport(t.name);case"removeOutport":return this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata);case"renameOutport":return this.graph.renameOutport(t.newId,t.oldId);case"changeOutport":return this.graph.setOutportMetadata(t.name,s(t.new,t.old));default:throw new Error("Unknown journal entry: "+e.cmd)}},n.prototype.moveToRevision=function(e){var t,r,n,o,i,s,a,c,u,p,l,h,d;if(e!==this.currentRevision){if(this.subscribed=!1,e>this.currentRevision)for(u=o=p=this.currentRevision+1,l=e;p<=l?o<=l:o>=l;u=p<=l?++o:--o)for(i=0,s=(h=this.store.fetchTransaction(u)).length;i<s;i++)r=h[i],this.executeEntry(r);else for(u=a=this.currentRevision,d=e+1;a>=d;u=a+=-1)for(n=c=(t=this.store.fetchTransaction(u)).length-1;c>=0;n=c+=-1)this.executeEntryInversed(t[n]);return this.currentRevision=e,this.subscribed=!0}},n.prototype.undo=function(){if(this.canUndo())return this.moveToRevision(this.currentRevision-1)},n.prototype.canUndo=function(){return this.currentRevision>0},n.prototype.redo=function(){if(this.canRedo())return this.moveToRevision(this.currentRevision+1)},n.prototype.canRedo=function(){return this.currentRevision<this.store.lastRevision},n.prototype.toPrettyString=function(e,t){var r,n,o,i,s,a,u,p,l;for(a=[],u=o=p=e|=0,l=t|=this.store.lastRevision;p<=l?o<l:o>l;u=p<=l?++o:--o)for(i=0,s=(r=this.store.fetchTransaction(u)).length;i<s;i++)n=r[i],a.push(c(n));return a.join("\n")},n.prototype.toJSON=function(e,t){var r,n,o,i,s,a,u,p;for(r=[],a=o=e|=0,u=t|=this.store.lastRevision;o<u;a=o+=1)for(i=0,s=(p=this.store.fetchTransaction(a)).length;i<s;i++)n=p[i],r.push(c(n));return r},n.prototype.save=function(e,t){var n;return n=JSON.stringify(this.toJSON(),null,4),r(11).writeFile(e+".json",n,"utf-8",function(r,n){if(r)throw r;return t(e)})},n}(),t.Journal=n,t.JournalStore=o,t.MemoryJournalStore=i}).call(this)},function(e,t){t.linear=function(e){return e},t.inQuad=function(e){return e*e},t.outQuad=function(e){return e*(2-e)},t.inOutQuad=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},t.inCube=function(e){return e*e*e},t.outCube=function(e){return--e*e*e+1},t.inOutCube=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},t.inQuart=function(e){return e*e*e*e},t.outQuart=function(e){return 1- --e*e*e*e},t.inOutQuart=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},t.inQuint=function(e){return e*e*e*e*e},t.outQuint=function(e){return--e*e*e*e*e+1},t.inOutQuint=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},t.inSine=function(e){return 1-Math.cos(e*Math.PI/2)},t.outSine=function(e){return Math.sin(e*Math.PI/2)},t.inOutSine=function(e){return.5*(1-Math.cos(Math.PI*e))},t.inExpo=function(e){return 0==e?0:Math.pow(1024,e-1)},t.outExpo=function(e){return 1==e?e:1-Math.pow(2,-10*e)},t.inOutExpo=function(e){return 0==e?0:1==e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},t.inCirc=function(e){return 1-Math.sqrt(1-e*e)},t.outCirc=function(e){return Math.sqrt(1- --e*e)},t.inOutCirc=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},t.inBack=function(e){var t=1.70158;return e*e*((t+1)*e-t)},t.outBack=function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},t.inOutBack=function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},t.inBounce=function(e){return 1-t.outBounce(1-e)},t.outBounce=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},t.inOutBounce=function(e){return e<.5?.5*t.inBounce(2*e):.5*t.outBounce(2*e-1)+.5},t["in-quad"]=t.inQuad,t["out-quad"]=t.outQuad,t["in-out-quad"]=t.inOutQuad,t["in-cube"]=t.inCube,t["out-cube"]=t.outCube,t["in-out-cube"]=t.inOutCube,t["in-quart"]=t.inQuart,t["out-quart"]=t.outQuart,t["in-out-quart"]=t.inOutQuart,t["in-quint"]=t.inQuint,t["out-quint"]=t.outQuint,t["in-out-quint"]=t.inOutQuint,t["in-sine"]=t.inSine,t["out-sine"]=t.outSine,t["in-out-sine"]=t.inOutSine,t["in-expo"]=t.inExpo,t["out-expo"]=t.outExpo,t["in-out-expo"]=t.inOutExpo,t["in-circ"]=t.inCirc,t["out-circ"]=t.outCirc,t["in-out-circ"]=t.inOutCirc,t["in-back"]=t.inBack,t["out-back"]=t.outBack,t["in-out-back"]=t.inOutBack,t["in-bounce"]=t.inBounce,t["out-bounce"]=t.outBounce,t["in-out-bounce"]=t.inOutBounce},function(e,t,r){"use strict";e.exports=function(){}},function(e,t,r){"use strict";var n=r(477),o=r(39),i=r(19),s=r(478),a=n.twoArgumentPooler,c=n.fourArgumentPooler,u=/\/+/g;function p(e){return(""+e).replace(u,"$&/")}function l(e,t){this.func=e,this.context=t,this.count=0}function h(e,t,r){var n=e.func,o=e.context;n.call(o,t,e.count++)}function d(e,t,r,n){this.result=e,this.keyPrefix=t,this.func=r,this.context=n,this.count=0}function f(e,t,r){var n=e.result,s=e.keyPrefix,a=e.func,c=e.context,u=a.call(c,t,e.count++);Array.isArray(u)?m(u,n,r,i.thatReturnsArgument):null!=u&&(o.isValidElement(u)&&(u=o.cloneAndReplaceKey(u,s+(!u.key||t&&t.key===u.key?"":p(u.key)+"/")+r)),n.push(u))}function m(e,t,r,n,o){var i="";null!=r&&(i=p(r)+"/");var a=d.getPooled(t,i,n,o);s(e,f,a),d.release(a)}function g(e,t,r){return null}l.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},n.addPoolingTo(l,a),d.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},n.addPoolingTo(d,c);var y={forEach:function(e,t,r){if(null==e)return e;var n=l.getPooled(t,r);s(e,h,n),l.release(n)},map:function(e,t,r){if(null==e)return e;var n=[];return m(e,n,null,t,r),n},mapIntoWithKeyPrefixInternal:m,count:function(e,t){return s(e,g,null)},toArray:function(e){var t=[];return m(e,t,null,i.thatReturnsArgument),t}};e.exports=y},function(e,t,r){"use strict";var n=r(48),o=(r(1),function(e){if(this.instancePool.length){var t=this.instancePool.pop();return this.call(t,e),t}return new this(e)}),i=function(e){e instanceof this||n("25"),e.destructor(),this.instancePool.length<this.poolSize&&this.instancePool.push(e)},s=o,a={addPoolingTo:function(e,t){var r=e;return r.instancePool=[],r.getPooled=t||s,r.poolSize||(r.poolSize=10),r.release=i,r},oneArgumentPooler:o,twoArgumentPooler:function(e,t){if(this.instancePool.length){var r=this.instancePool.pop();return this.call(r,e,t),r}return new this(e,t)},threeArgumentPooler:function(e,t,r){if(this.instancePool.length){var n=this.instancePool.pop();return this.call(n,e,t,r),n}return new this(e,t,r)},fourArgumentPooler:function(e,t,r,n){if(this.instancePool.length){var o=this.instancePool.pop();return this.call(o,e,t,r,n),o}return new this(e,t,r,n)}};e.exports=a},function(e,t,r){"use strict";var n=r(48),o=(r(22),r(155)),i=r(479),s=(r(1),r(480)),a=(r(4),"."),c=":";function u(e,t){return e&&"object"==typeof e&&null!=e.key?s.escape(e.key):t.toString(36)}e.exports=function(e,t,r){return null==e?0:function e(t,r,p,l){var h,d=typeof t;if("undefined"!==d&&"boolean"!==d||(t=null),null===t||"string"===d||"number"===d||"object"===d&&t.$$typeof===o)return p(l,t,""===r?a+u(t,0):r),1;var f=0,m=""===r?a:r+c;if(Array.isArray(t))for(var g=0;g<t.length;g++)f+=e(h=t[g],m+u(h,g),p,l);else{var y=i(t);if(y){var v,b=y.call(t);if(y!==t.entries)for(var w=0;!(v=b.next()).done;)f+=e(h=v.value,m+u(h,w++),p,l);else for(;!(v=b.next()).done;){var E=v.value;E&&(f+=e(h=E[1],m+s.escape(E[0])+c+u(h,0),p,l))}}else if("object"===d){var x=String(t);n("31","[object Object]"===x?"object with keys {"+Object.keys(t).join(", ")+"}":x,"")}}return f}(e,"",t,r)}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&Symbol.iterator,o="@@iterator";e.exports=function(e){var t=e&&(n&&e[n]||e[o]);if("function"==typeof t)return t}},function(e,t,r){"use strict";var n={escape:function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})},unescape:function(e){var t={"=0":"=","=2":":"};return(""+("."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1))).replace(/(=0|=2)/g,function(e){return t[e]})}};e.exports=n},function(e,t,r){"use strict";var n=r(39).createFactory,o={a:n("a"),abbr:n("abbr"),address:n("address"),area:n("area"),article:n("article"),aside:n("aside"),audio:n("audio"),b:n("b"),base:n("base"),bdi:n("bdi"),bdo:n("bdo"),big:n("big"),blockquote:n("blockquote"),body:n("body"),br:n("br"),button:n("button"),canvas:n("canvas"),caption:n("caption"),cite:n("cite"),code:n("code"),col:n("col"),colgroup:n("colgroup"),data:n("data"),datalist:n("datalist"),dd:n("dd"),del:n("del"),details:n("details"),dfn:n("dfn"),dialog:n("dialog"),div:n("div"),dl:n("dl"),dt:n("dt"),em:n("em"),embed:n("embed"),fieldset:n("fieldset"),figcaption:n("figcaption"),figure:n("figure"),footer:n("footer"),form:n("form"),h1:n("h1"),h2:n("h2"),h3:n("h3"),h4:n("h4"),h5:n("h5"),h6:n("h6"),head:n("head"),header:n("header"),hgroup:n("hgroup"),hr:n("hr"),html:n("html"),i:n("i"),iframe:n("iframe"),img:n("img"),input:n("input"),ins:n("ins"),kbd:n("kbd"),keygen:n("keygen"),label:n("label"),legend:n("legend"),li:n("li"),link:n("link"),main:n("main"),map:n("map"),mark:n("mark"),menu:n("menu"),menuitem:n("menuitem"),meta:n("meta"),meter:n("meter"),nav:n("nav"),noscript:n("noscript"),object:n("object"),ol:n("ol"),optgroup:n("optgroup"),option:n("option"),output:n("output"),p:n("p"),param:n("param"),picture:n("picture"),pre:n("pre"),progress:n("progress"),q:n("q"),rp:n("rp"),rt:n("rt"),ruby:n("ruby"),s:n("s"),samp:n("samp"),script:n("script"),section:n("section"),select:n("select"),small:n("small"),source:n("source"),span:n("span"),strong:n("strong"),style:n("style"),sub:n("sub"),summary:n("summary"),sup:n("sup"),table:n("table"),tbody:n("tbody"),td:n("td"),textarea:n("textarea"),tfoot:n("tfoot"),th:n("th"),thead:n("thead"),time:n("time"),title:n("title"),tr:n("tr"),track:n("track"),u:n("u"),ul:n("ul"),var:n("var"),video:n("video"),wbr:n("wbr"),circle:n("circle"),clipPath:n("clipPath"),defs:n("defs"),ellipse:n("ellipse"),g:n("g"),image:n("image"),line:n("line"),linearGradient:n("linearGradient"),mask:n("mask"),path:n("path"),pattern:n("pattern"),polygon:n("polygon"),polyline:n("polyline"),radialGradient:n("radialGradient"),rect:n("rect"),stop:n("stop"),svg:n("svg"),text:n("text"),tspan:n("tspan")};e.exports=o},function(e,t,r){"use strict";var n=r(39).isValidElement,o=r(156);e.exports=o(n)},function(e,t,r){"use strict";var n=r(484),o=r(5),i=r(486),s=r(487),a=Function.call.bind(Object.prototype.hasOwnProperty),c=function(){};function u(){return null}e.exports=function(e,t){var r="function"==typeof Symbol&&Symbol.iterator,p="@@iterator";var l="<<anonymous>>",h={array:g("array"),bool:g("boolean"),func:g("function"),number:g("number"),object:g("object"),string:g("string"),symbol:g("symbol"),any:m(u),arrayOf:function(e){return m(function(t,r,n,o,s){if("function"!=typeof e)return new f("Property `"+s+"` of component `"+n+"` has invalid PropType notation inside arrayOf.");var a=t[r];if(!Array.isArray(a))return new f("Invalid "+o+" `"+s+"` of type `"+v(a)+"` supplied to `"+n+"`, expected an array.");for(var c=0;c<a.length;c++){var u=e(a,c,n,o,s+"["+c+"]",i);if(u instanceof Error)return u}return null})},element:m(function(t,r,n,o,i){var s=t[r];return e(s)?null:new f("Invalid "+o+" `"+i+"` of type `"+v(s)+"` supplied to `"+n+"`, expected a single ReactElement.")}),elementType:m(function(e,t,r,o,i){var s=e[t];return n.isValidElementType(s)?null:new f("Invalid "+o+" `"+i+"` of type `"+v(s)+"` supplied to `"+r+"`, expected a single ReactElement type.")}),instanceOf:function(e){return m(function(t,r,n,o,i){if(!(t[r]instanceof e)){var s=e.name||l;return new f("Invalid "+o+" `"+i+"` of type `"+function(e){if(!e.constructor||!e.constructor.name)return l;return e.constructor.name}(t[r])+"` supplied to `"+n+"`, expected instance of `"+s+"`.")}return null})},node:m(function(e,t,r,n,o){return y(e[t])?null:new f("Invalid "+n+" `"+o+"` supplied to `"+r+"`, expected a ReactNode.")}),objectOf:function(e){return m(function(t,r,n,o,s){if("function"!=typeof e)return new f("Property `"+s+"` of component `"+n+"` has invalid PropType notation inside objectOf.");var c=t[r],u=v(c);if("object"!==u)return new f("Invalid "+o+" `"+s+"` of type `"+u+"` supplied to `"+n+"`, expected an object.");for(var p in c)if(a(c,p)){var l=e(c,p,n,o,s+"."+p,i);if(l instanceof Error)return l}return null})},oneOf:function(e){if(!Array.isArray(e))return u;return m(function(t,r,n,o,i){for(var s=t[r],a=0;a<e.length;a++)if(d(s,e[a]))return null;var c=JSON.stringify(e,function(e,t){return"symbol"===b(t)?String(t):t});return new f("Invalid "+o+" `"+i+"` of value `"+String(s)+"` supplied to `"+n+"`, expected one of "+c+".")})},oneOfType:function(e){if(!Array.isArray(e))return u;for(var t=0;t<e.length;t++){var r=e[t];if("function"!=typeof r)return c("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+w(r)+" at index "+t+"."),u}return m(function(t,r,n,o,s){for(var a=0;a<e.length;a++){if(null==(0,e[a])(t,r,n,o,s,i))return null}return new f("Invalid "+o+" `"+s+"` supplied to `"+n+"`.")})},shape:function(e){return m(function(t,r,n,o,s){var a=t[r],c=v(a);if("object"!==c)return new f("Invalid "+o+" `"+s+"` of type `"+c+"` supplied to `"+n+"`, expected `object`.");for(var u in e){var p=e[u];if(p){var l=p(a,u,n,o,s+"."+u,i);if(l)return l}}return null})},exact:function(e){return m(function(t,r,n,s,a){var c=t[r],u=v(c);if("object"!==u)return new f("Invalid "+s+" `"+a+"` of type `"+u+"` supplied to `"+n+"`, expected `object`.");var p=o({},t[r],e);for(var l in p){var h=e[l];if(!h)return new f("Invalid "+s+" `"+a+"` key `"+l+"` supplied to `"+n+"`.\nBad object: "+JSON.stringify(t[r],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var d=h(c,l,n,s,a+"."+l,i);if(d)return d}return null})}};function d(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function f(e){this.message=e,this.stack=""}function m(e){function r(r,n,o,s,a,c,u){if((s=s||l,c=c||o,u!==i)&&t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}return null==n[o]?r?null===n[o]?new f("The "+a+" `"+c+"` is marked as required in `"+s+"`, but its value is `null`."):new f("The "+a+" `"+c+"` is marked as required in `"+s+"`, but its value is `undefined`."):null:e(n,o,s,a,c)}var n=r.bind(null,!1);return n.isRequired=r.bind(null,!0),n}function g(e){return m(function(t,r,n,o,i,s){var a=t[r];return v(a)!==e?new f("Invalid "+o+" `"+i+"` of type `"+b(a)+"` supplied to `"+n+"`, expected `"+e+"`."):null})}function y(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(y);if(null===t||e(t))return!0;var n=function(e){var t=e&&(r&&e[r]||e[p]);if("function"==typeof t)return t}(t);if(!n)return!1;var o,i=n.call(t);if(n!==t.entries){for(;!(o=i.next()).done;)if(!y(o.value))return!1}else for(;!(o=i.next()).done;){var s=o.value;if(s&&!y(s[1]))return!1}return!0;default:return!1}}function v(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function b(e){if(null==e)return""+e;var t=v(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function w(e){var t=b(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return f.prototype=Error.prototype,h.checkPropTypes=s,h.resetWarningCache=s.resetWarningCache,h.PropTypes=h,h}},function(e,t,r){"use strict";e.exports=r(485)},function(e,t,r){"use strict";
/** @license React v16.9.0
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,o=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,c=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,p=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case l:case h:case s:case c:case a:case f:return e;default:switch(e=e&&e.$$typeof){case p:case d:case u:return e;default:return t}}case y:case g:case i:return t}}}function E(e){return w(e)===h}t.typeOf=w,t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=p,t.ContextProvider=u,t.Element=o,t.ForwardRef=d,t.Fragment=s,t.Lazy=y,t.Memo=g,t.Portal=i,t.Profiler=c,t.StrictMode=a,t.Suspense=f,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===h||e===c||e===a||e===f||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===g||e.$$typeof===u||e.$$typeof===p||e.$$typeof===d||e.$$typeof===v||e.$$typeof===b)},t.isAsyncMode=function(e){return E(e)||w(e)===l},t.isConcurrentMode=E,t.isContextConsumer=function(e){return w(e)===p},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===s},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===g},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===c},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===f}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){"use strict";function n(e,t,r,n,o){}n.resetWarningCache=function(){0},e.exports=n},function(e,t,r){"use strict";e.exports="15.6.2"},function(e,t,r){"use strict";var n=r(152).Component,o=r(39).isValidElement,i=r(153),s=r(157);e.exports=s(n,o,i)},function(e,t,r){"use strict";var n=r(48),o=r(39);r(1);e.exports=function(e){return o.isValidElement(e)||n("143"),e}},function(e,t,r){var n=r(7),o=r(13),i=r(10),s=r(107),a=r(568),c=r(184).ModalBG,u=r(76),p=window.unwrap?window.unwrap:function(e){return e},l={27:function(e){e.refs.graph&&e.refs.graph.cancelPreviewEdge()},46:function(e){var t=e.refs.graph.props.graph,r=e.refs.graph.state.selectedNodes,n=e.refs.graph.state.selectedEdges,o=e.props.menus;for(var i in r)if(r.hasOwnProperty(i)){var s=t.getNode(i);o.node.actions.delete(t,i,s)}n.map(function(e){o.edge.actions.delete(t,null,e)})},70:function(e){e.triggerFit()},83:function(e){var t=e.refs.graph.props.graph,r=e.refs.graph.state.selectedNodes;for(var n in r)if(r.hasOwnProperty(n)){var o=t.getNode(n);e.focusNode(o);break}}},h=[70,83,27];e.exports.register=function(e){var t=e.TheGraph;t.config.app={container:{className:"the-graph-app",name:"app"},canvas:{ref:"canvas",className:"app-canvas",style:{position:"absolute",top:0,left:0}},svg:{className:"app-svg",ref:"svg",style:{position:"absolute",top:0,left:0}},svgGroup:{className:"view"},graph:{ref:"graph"},tooltip:{ref:"tooltip"},modal:{className:"context"}},t.factories.app={createAppContainer:function(e,t){var r=["div",e];Array.isArray(t)&&(r=r.concat(t));return n.createElement.apply(n,r)},createAppCanvas:t.factories.createCanvas,createAppSvg:t.factories.createSvg,createAppSvgGroup:t.factories.createGroup,createAppGraph:function(e){return t.Graph(e)},createAppTooltip:function(e){return t.Tooltip(e)},createAppModalGroup:t.factories.createGroup,createAppModalBackground:function(e){return c(e)}};var r=[];n.Animate&&r.push(n.Animate),t.App=n.createFactory(i({displayName:"TheGraphApp",mixins:r,getDefaultProps:function(){return{width:null,height:null,readonly:!1,nodeIcons:{},minZoom:.15,maxZoom:15,offsetX:0,offsetY:0,menus:null,getMenuDef:null,onPanScale:null,onNodeSelection:null,onEdgeSelection:null}},getInitialState:function(){var e=u.findFit(this.props.graph,this.props.width,this.props.height,t.config.nodeSize);return{x:e.x,y:e.y,scale:e.scale,width:this.props.width,height:this.props.height,minZoom:this.props.minZoom,maxZoom:this.props.maxZoom,trackStartX:null,trackStartY:null,tooltip:"",tooltipX:0,tooltipY:0,tooltipVisible:!1,contextElement:null,contextType:null,offsetY:this.props.offsetY,offsetX:this.props.offsetX}},zoomFactor:0,zoomX:0,zoomY:0,onWheel:function(e){e.preventDefault(),this.zoomFactor||(this.zoomFactor=0),this.zoomFactor+=e.deltaY?e.deltaY:0-e.wheelDeltaY,this.zoomX=e.clientX,this.zoomY=e.clientY,requestAnimationFrame(this.scheduleWheelZoom)},scheduleWheelZoom:function(){if(!isNaN(this.zoomFactor)){var e=this.zoomFactor/-500;e=Math.min(.5,Math.max(-.5,e));var t=this.state.scale+this.state.scale*e;if(this.zoomFactor=0,t<this.state.minZoom?t=this.state.minZoom:t>this.state.maxZoom&&(t=this.state.maxZoom),t!==this.state.scale){var r=t/this.state.scale,n=this.state.x,o=this.state.y,i=this.zoomX,s=this.zoomY,a=r*(n-i)+i,c=r*(o-s)+s;this.setState({scale:t,x:a,y:c,tooltipVisible:!1})}}},lastScale:1,lastX:0,lastY:0,pinching:!1,onTransformStart:function(e){e.srcEvent.stopPropagation(),e.srcEvent.stopImmediatePropagation(),this.lastScale=1,this.lastX=e.center.x,this.lastY=e.center.y,this.pinching=!0},onTransform:function(e){e.srcEvent.stopPropagation(),e.srcEvent.stopImmediatePropagation();var t=this.state.scale,r=this.state.x,n=this.state.y,o=e.scale,i=o-this.lastScale+1;this.lastScale=o;var s=i*t;s=Math.max(s,this.props.minZoom);var a=e.center.x,c=e.center.y,u=i*(r-a)+a+(a-this.lastX),p=i*(n-c)+c+(c-this.lastY);this.lastX=a,this.lastY=c,this.setState({scale:s,x:u,y:p,tooltipVisible:!1})},onTransformEnd:function(e){e.srcEvent.stopPropagation(),e.srcEvent.stopImmediatePropagation(),this.pinching=!1},onTrackStart:function(e){var t=o.findDOMNode(this);t.addEventListener("panmove",this.onTrack),t.addEventListener("panend",this.onTrackEnd),this.setState({trackStartX:this.state.x,trackStartY:this.state.y})},onTrack:function(e){this.pinching||this.menuShown||this.setState({x:this.state.trackStartX+e.gesture.deltaX,y:this.state.trackStartY+e.gesture.deltaY})},onTrackEnd:function(e){e.stopPropagation();var t=o.findDOMNode(this);t.removeEventListener("panmove",this.onTrack),t.removeEventListener("panend",this.onTrackEnd),this.setState({trackStartX:null,trackStartY:null})},onPanScale:function(){this.props.onPanScale&&this.props.onPanScale(this.state.x,this.state.y,this.state.scale)},defaultGetMenuDef:function(e){if(e.type&&this.props.menus&&this.props.menus[e.type]){var t=this.props.menus[e.type];return t.callback?t.callback(t,e):t}return null},showContext:function(e){this.setState({contextMenu:e,tooltipVisible:!1})},hideContext:function(e){this.setState({contextMenu:null})},changeTooltip:function(e){var t=e.detail.tooltip,r=e.detail.x+10,n=6*t.length;r+n>this.props.width&&(r=e.detail.x-n-10),this.setState({tooltip:t,tooltipVisible:!0,tooltipX:r,tooltipY:e.detail.y+20})},hideTooltip:function(e){this.setState({tooltip:"",tooltipVisible:!1})},triggerFit:function(e){var r=u.findFit(this.props.graph,this.props.width,this.props.height,t.config.nodeSize);this.setState({x:r.x,y:r.y,scale:r.scale})},focusNode:function(e){var r=t.config.focusAnimationDuration,n=u.findNodeFit(e,this.state.width,this.state.height,t.config.nodeSize),o={x:-(this.state.x-this.state.width/2)/this.state.scale,y:-(this.state.y-this.state.height/2)/this.state.scale},i={x:e.metadata.x,y:e.metadata.y},s=u.findAreaFit(o,i,this.state.width,this.state.height,t.config.nodeSize),a=Math.abs(s.scale-this.state.scale),c=Math.abs(n.scale-s.scale),p=a+c;this.animate?this.animate({x:s.x,y:s.y,scale:s.scale},r*(a/p),"in-quint",function(){this.animate({x:n.x,y:n.y,scale:n.scale},r*(c/p),"out-quint")}.bind(this)):this.setState({x:n.x,y:n.y,scale:n.scale})},edgeStart:function(e){this.refs.graph.edgeStart(e),this.hideContext()},componentDidMount:function(){var e=o.findDOMNode(this.refs.svg);this.props.onNodeSelection&&e.addEventListener("tap",this.unselectAll);var t=new s.Manager(e,{domEvents:!0,inputClass:a.Input,recognizers:[[s.Tap,{}],[s.Press,{time:500}],[s.Pan,{direction:s.DIRECTION_ALL,threshold:5}],[s.Pinch,{}]]});e.addEventListener("panstart",this.onTrackStart),"ontouchstart"in document.documentElement&&t&&(t.on("pinchstart",this.onTransformStart),t.on("pinch",this.onTransform),t.on("pinchend",this.onTransformEnd)),"onwheel"in e?e.addEventListener("wheel",this.onWheel):"onmousewheel"in e&&e.addEventListener("mousewheel",this.onWheel),e.addEventListener("the-graph-tooltip",this.changeTooltip),e.addEventListener("the-graph-tooltip-hide",this.hideTooltip),e.addEventListener("the-graph-edge-start",this.edgeStart),e.addEventListener("contextmenu",this.onShowContext),this.mouseX=Math.floor(this.props.width/2),this.mouseY=Math.floor(this.props.height/2),document.addEventListener("keydown",this.keyDown),document.addEventListener("keyup",this.keyUp),bgCanvas=p(o.findDOMNode(this.refs.canvas)),this.bgContext=p(bgCanvas.getContext("2d")),this.componentDidUpdate(),setTimeout(function(){this.renderGraph()}.bind(this),500)},onShowContext:function(e){e.preventDefault(),e.stopPropagation(),e.preventTap&&e.preventTap();var t=e.x||e.clientX||0,r=e.y||e.clientY||0;e.touches&&e.touches.length&&(t=e.touches[0].clientX,r=e.touches[0].clientY),this.showContext({element:this,type:"main",x:t,y:r,graph:this.props.graph,itemKey:"graph",item:this.props.graph})},keyDown:function(e){(e.metaKey||e.ctrlKey)&&(t.metaKeyPressed=!0);var r=e.keyCode,n=l[r];if(n){var o=this.props.readonly;(!o||o&&h[r])&&n(this)}},keyUp:function(e){t.metaKeyPressed&&(t.metaKeyPressed=!1)},unselectAll:function(e){this.props.onNodeSelection(),this.props.onEdgeSelection()},renderGraph:function(){this.refs.graph.markDirty()},componentDidUpdate:function(e,t){this.renderCanvas(this.bgContext),t&&t.x===this.state.x&&t.y===this.state.y&&t.scale===this.state.scale||this.onPanScale()},renderCanvas:function(e){e.clearRect(0,0,this.state.width,this.state.height);for(var r=this.state.scale,n=t.config.nodeSize*r,o=this.state.x%n,i=this.state.y%n,s=Math.floor(this.state.width/n)+1,a=Math.floor(this.state.height/n)+1,c=Math.floor(this.state.x/n)+(this.state.x<0?1:0),u=Math.floor(this.state.y/n)+(this.state.y<0?1:0);a--;)for(var p=s;p--;){var l=Math.round(p*n+o),h=Math.round(a*n+i);(c-p)%3==0&&(u-a)%3==0?(e.fillStyle="white",e.fillRect(l,h,1,1)):r>.5&&(e.fillStyle="grey",e.fillRect(l,h,1,1))}},getContext:function(e,r,n){return t.Menu({menu:e,options:r,triggerHideContext:n,label:"Hello",graph:this.props.graph,node:this,ports:[],process:[],processKey:null,x:r.x,y:r.y,nodeWidth:this.props.width,nodeHeight:this.props.height,deltaX:0,deltaY:0,highlightPort:!1})},render:function(){var e=this.state.scale,r="matrix("+e+",0,0,"+e+","+this.state.x+","+this.state.y+")",n=e>t.zbpBig?"big":e>t.zbpNormal?"normal":"small",o=null,i=this.props.getMenuDef||this.defaultGetMenuDef;if(this.state.contextMenu){var s=this.state.contextMenu,a=i(s);a&&Object.keys(a).length&&(o=s.element.getContext(a,s,this.hideContext))}var c=null;if(o){var u={width:this.state.width,height:this.state.height,triggerHideContext:this.hideContext,children:o};c=[t.factories.app.createAppModalBackground(u)],this.menuShown=!0}else this.menuShown=!1;var p={graph:this.props.graph,scale:this.state.scale,app:this,library:this.props.library,nodeIcons:this.props.nodeIcons,onNodeSelection:this.props.onNodeSelection,onEdgeSelection:this.props.onEdgeSelection,showContext:this.showContext,allowEdgeStart:!this.props.readonly};p=t.merge(t.config.app.graph,p);var l=t.factories.app.createAppGraph.call(this,p),h=t.merge(t.config.app.svgGroup,{transform:r}),d=t.factories.app.createAppSvgGroup.call(this,h,[l]),f={x:this.state.tooltipX,y:this.state.tooltipY,visible:this.state.tooltipVisible,label:this.state.tooltip};f=t.merge(t.config.app.tooltip,f);var m=t.factories.app.createAppTooltip.call(this,f),g=t.merge(t.config.app.modal,{children:c}),y=[d,m,t.factories.app.createAppModalGroup.call(this,g)],v=t.merge(t.config.app.svg,{width:this.state.width,height:this.state.height}),b=t.factories.app.createAppSvg.call(this,v,y),w=t.merge(t.config.app.canvas,{width:this.state.width,height:this.state.height}),E=[t.factories.app.createAppCanvas.call(this,w),b],x=t.merge(t.config.app.container,{style:{width:this.state.width,height:this.state.height}});return x.className+=" "+n,t.factories.app.createAppContainer.call(this,x,E)}}))}},function(e,t,r){"use strict";var n=r(6),o=r(493),i=r(182),s=r(41),a=r(20),c=r(565),u=r(566),p=r(183),l=r(567);r(4);o.inject();var h={findDOMNode:u,render:i.render,unmountComponentAtNode:i.unmountComponentAtNode,version:c,unstable_batchedUpdates:a.batchedUpdates,unstable_renderSubtreeIntoContainer:l};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:n.getClosestInstanceFromNode,getNodeFromInstance:function(e){return e._renderedComponent&&(e=p(e)),e?n.getNodeFromInstance(e):null}},Mount:i,Reconciler:s}),e.exports=h},function(e,t,r){"use strict";var n=r(494),o=r(495),i=r(499),s=r(502),a=r(503),c=r(504),u=r(505),p=r(511),l=r(6),h=r(536),d=r(537),f=r(538),m=r(539),g=r(540),y=r(542),v=r(543),b=r(549),w=r(550),E=r(551),x=!1;e.exports={inject:function(){x||(x=!0,y.EventEmitter.injectReactEventListener(g),y.EventPluginHub.injectEventPluginOrder(s),y.EventPluginUtils.injectComponentTree(l),y.EventPluginUtils.injectTreeTraversal(d),y.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:E,EnterLeaveEventPlugin:a,ChangeEventPlugin:i,SelectEventPlugin:w,BeforeInputEventPlugin:o}),y.HostComponent.injectGenericComponentClass(p),y.HostComponent.injectTextComponentClass(f),y.DOMProperty.injectDOMPropertyConfig(n),y.DOMProperty.injectDOMPropertyConfig(c),y.DOMProperty.injectDOMPropertyConfig(b),y.EmptyComponent.injectEmptyComponentFactory(function(e){return new h(e)}),y.Updates.injectReconcileTransaction(v),y.Updates.injectBatchingStrategy(m),y.Component.injectEnvironment(u))}}},function(e,t,r){"use strict";e.exports={Properties:{"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},DOMAttributeNames:{},DOMPropertyNames:{}}},function(e,t,r){"use strict";var n=r(49),o=r(12),i=r(496),s=r(497),a=r(498),c=[9,13,27,32],u=229,p=o.canUseDOM&&"CompositionEvent"in window,l=null;o.canUseDOM&&"documentMode"in document&&(l=document.documentMode);var h,d=o.canUseDOM&&"TextEvent"in window&&!l&&!("object"==typeof(h=window.opera)&&"function"==typeof h.version&&parseInt(h.version(),10)<=12),f=o.canUseDOM&&(!p||l&&l>8&&l<=11);var m=32,g=String.fromCharCode(m),y={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}},v=!1;function b(e,t){switch(e){case"topKeyUp":return-1!==c.indexOf(t.keyCode);case"topKeyDown":return t.keyCode!==u;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function w(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}var E=null;function x(e,t,r,o){var a,c;if(p?a=function(e){switch(e){case"topCompositionStart":return y.compositionStart;case"topCompositionEnd":return y.compositionEnd;case"topCompositionUpdate":return y.compositionUpdate}}(e):E?b(e,r)&&(a=y.compositionEnd):function(e,t){return"topKeyDown"===e&&t.keyCode===u}(e,r)&&(a=y.compositionStart),!a)return null;f&&(E||a!==y.compositionStart?a===y.compositionEnd&&E&&(c=E.getData()):E=i.getPooled(o));var l=s.getPooled(a,t,r,o);if(c)l.data=c;else{var h=w(r);null!==h&&(l.data=h)}return n.accumulateTwoPhaseDispatches(l),l}function C(e,t,r,o){var s;if(!(s=d?function(e,t){switch(e){case"topCompositionEnd":return w(t);case"topKeyPress":return t.which!==m?null:(v=!0,g);case"topTextInput":var r=t.data;return r===g&&v?null:r;default:return null}}(e,r):function(e,t){if(E){if("topCompositionEnd"===e||!p&&b(e,t)){var r=E.getData();return i.release(E),E=null,r}return null}switch(e){case"topPaste":return null;case"topKeyPress":return t.which&&!function(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}(t)?String.fromCharCode(t.which):null;case"topCompositionEnd":return f?null:t.data;default:return null}}(e,r)))return null;var c=a.getPooled(y.beforeInput,t,r,o);return c.data=s,n.accumulateTwoPhaseDispatches(c),c}var S={eventTypes:y,extractEvents:function(e,t,r,n){return[x(e,t,r,n),C(e,t,r,n)]}};e.exports=S},function(e,t,r){"use strict";var n=r(5),o=r(32),i=r(162);function s(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}n(s.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[i()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,r=this._startText,n=r.length,o=this.getText(),i=o.length;for(e=0;e<n&&r[e]===o[e];e++);var s=n-e;for(t=1;t<=s&&r[n-t]===o[i-t];t++);var a=t>1?1-t:void 0;return this._fallbackText=o.slice(e,a),this._fallbackText}}),o.addPoolingTo(s),e.exports=s},function(e,t,r){"use strict";var n=r(23);function o(e,t,r,o){return n.call(this,e,t,r,o)}n.augmentClass(o,{data:null}),e.exports=o},function(e,t,r){"use strict";var n=r(23);function o(e,t,r,o){return n.call(this,e,t,r,o)}n.augmentClass(o,{data:null}),e.exports=o},function(e,t,r){"use strict";var n=r(50),o=r(49),i=r(12),s=r(6),a=r(20),c=r(23),u=r(165),p=r(93),l=r(94),h=r(166),d={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}};function f(e,t,r){var n=c.getPooled(d.change,e,t,r);return n.type="change",o.accumulateTwoPhaseDispatches(n),n}var m=null,g=null;var y=!1;function v(e){var t=f(g,e,p(e));a.batchedUpdates(b,t)}function b(e){n.enqueueEvents(e),n.processEventQueue(!1)}function w(){m&&(m.detachEvent("onchange",v),m=null,g=null)}function E(e,t){var r=u.updateValueIfChanged(e),n=!0===t.simulated&&T._allowSimulatedPassThrough;if(r||n)return e}function x(e,t){if("topChange"===e)return t}function C(e,t,r){"topFocus"===e?(w(),function(e,t){g=t,(m=e).attachEvent("onchange",v)}(t,r)):"topBlur"===e&&w()}i.canUseDOM&&(y=l("change")&&(!document.documentMode||document.documentMode>8));var S=!1;function k(){m&&(m.detachEvent("onpropertychange",P),m=null,g=null)}function P(e){"value"===e.propertyName&&E(g,e)&&v(e)}function _(e,t,r){"topFocus"===e?(k(),function(e,t){g=t,(m=e).attachEvent("onpropertychange",P)}(t,r)):"topBlur"===e&&k()}function A(e,t,r){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return E(g,r)}function D(e,t,r){if("topClick"===e)return E(t,r)}function O(e,t,r){if("topInput"===e||"topChange"===e)return E(t,r)}i.canUseDOM&&(S=l("input")&&(!document.documentMode||document.documentMode>9));var T={eventTypes:d,_allowSimulatedPassThrough:!0,_isInputEventSupported:S,extractEvents:function(e,t,r,n){var o,i,a,c,u=t?s.getNodeFromInstance(t):window;if("select"===(c=(a=u).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type?y?o=x:i=C:h(u)?S?o=O:(o=A,i=_):function(e){var t=e.nodeName;return t&&"input"===t.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}(u)&&(o=D),o){var p=o(e,t,r);if(p)return f(p,r,n)}i&&i(e,u,t),"topBlur"===e&&function(e,t){if(null!=e){var r=e._wrapperState||t._wrapperState;if(r&&r.controlled&&"number"===t.type){var n=""+t.value;t.getAttribute("value")!==n&&t.setAttribute("value",n)}}}(t,u)}};e.exports=T},function(e,t,r){"use strict";var n=r(501),o={};o.attachRefs=function(e,t){if(null!==t&&"object"==typeof t){var r=t.ref;null!=r&&function(e,t,r){"function"==typeof e?e(t.getPublicInstance()):n.addComponentAsRefTo(t,e,r)}(r,e,t._owner)}},o.shouldUpdateRefs=function(e,t){var r=null,n=null;null!==e&&"object"==typeof e&&(r=e.ref,n=e._owner);var o=null,i=null;return null!==t&&"object"==typeof t&&(o=t.ref,i=t._owner),r!==o||"string"==typeof o&&i!==n},o.detachRefs=function(e,t){if(null!==t&&"object"==typeof t){var r=t.ref;null!=r&&function(e,t,r){"function"==typeof e?e(null):n.removeComponentAsRefFrom(t,e,r)}(r,e,t._owner)}},e.exports=o},function(e,t,r){"use strict";var n=r(3);r(1);function o(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)}var i={addComponentAsRefTo:function(e,t,r){o(r)||n("119"),r.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,r){o(r)||n("120");var i=r.getPublicInstance();i&&i.refs[t]===e.getPublicInstance()&&r.detachRef(t)}};e.exports=i},function(e,t,r){"use strict";e.exports=["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"]},function(e,t,r){"use strict";var n=r(49),o=r(6),i=r(72),s={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},a={eventTypes:s,extractEvents:function(e,t,r,a){if("topMouseOver"===e&&(r.relatedTarget||r.fromElement))return null;if("topMouseOut"!==e&&"topMouseOver"!==e)return null;var c,u,p;if(a.window===a)c=a;else{var l=a.ownerDocument;c=l?l.defaultView||l.parentWindow:window}if("topMouseOut"===e){u=t;var h=r.relatedTarget||r.toElement;p=h?o.getClosestInstanceFromNode(h):null}else u=null,p=t;if(u===p)return null;var d=null==u?c:o.getNodeFromInstance(u),f=null==p?c:o.getNodeFromInstance(p),m=i.getPooled(s.mouseLeave,u,r,a);m.type="mouseleave",m.target=d,m.relatedTarget=f;var g=i.getPooled(s.mouseEnter,p,r,a);return g.type="mouseenter",g.target=f,g.relatedTarget=d,n.accumulateEnterLeaveDispatches(m,g,u,p),[m,g]}};e.exports=a},function(e,t,r){"use strict";var n=r(40),o=n.injection.MUST_USE_PROPERTY,i=n.injection.HAS_BOOLEAN_VALUE,s=n.injection.HAS_NUMERIC_VALUE,a=n.injection.HAS_POSITIVE_NUMERIC_VALUE,c=n.injection.HAS_OVERLOADED_BOOLEAN_VALUE,u={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+n.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:i,allowTransparency:0,alt:0,as:0,async:i,autoComplete:0,autoPlay:i,capture:i,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:o|i,cite:0,classID:0,className:0,cols:a,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:i,controlsList:0,coords:0,crossOrigin:0,data:0,dateTime:0,default:i,defer:i,dir:0,disabled:i,download:c,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:i,formTarget:0,frameBorder:0,headers:0,height:0,hidden:i,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:i,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:o|i,muted:o|i,name:0,nonce:0,noValidate:i,open:i,optimum:0,pattern:0,placeholder:0,playsInline:i,poster:0,preload:0,profile:0,radioGroup:0,readOnly:i,referrerPolicy:0,rel:0,required:i,reversed:i,role:0,rows:a,rowSpan:s,sandbox:0,scope:0,scoped:i,scrolling:0,seamless:i,selected:o|i,shape:0,size:a,sizes:0,span:a,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:s,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:i,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{},DOMMutationMethods:{value:function(e,t){if(null==t)return e.removeAttribute("value");"number"!==e.type||!1===e.hasAttribute("value")?e.setAttribute("value",""+t):e.validity&&!e.validity.badInput&&e.ownerDocument.activeElement!==e&&e.setAttribute("value",""+t)}}};e.exports=u},function(e,t,r){"use strict";var n=r(96),o={processChildrenUpdates:r(510).dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:n.dangerouslyReplaceNodeWithMarkup};e.exports=o},function(e,t,r){"use strict";var n=r(3),o=r(42),i=r(12),s=r(507),a=r(19),c=(r(1),{dangerouslyReplaceNodeWithMarkup:function(e,t){if(i.canUseDOM||n("56"),t||n("57"),"HTML"===e.nodeName&&n("58"),"string"==typeof t){var r=s(t,a)[0];e.parentNode.replaceChild(r,e)}else o.replaceChildWithTree(e,t)}});e.exports=c},function(e,t,r){"use strict";var n=r(12),o=r(508),i=r(509),s=r(1),a=n.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;e.exports=function(e,t){var r=a;a||s(!1);var n=function(e){var t=e.match(c);return t&&t[1].toLowerCase()}(e),u=n&&i(n);if(u){r.innerHTML=u[1]+e+u[2];for(var p=u[0];p--;)r=r.lastChild}else r.innerHTML=e;var l=r.getElementsByTagName("script");l.length&&(t||s(!1),o(l).forEach(t));for(var h=Array.from(r.childNodes);r.lastChild;)r.removeChild(r.lastChild);return h}},function(e,t,r){"use strict";var n=r(1);e.exports=function(e){return function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}(e)?Array.isArray(e)?e.slice():function(e){var t=e.length;if((Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e)&&n(!1),"number"!=typeof t&&n(!1),0===t||t-1 in e||n(!1),"function"==typeof e.callee&&n(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var r=Array(t),o=0;o<t;o++)r[o]=e[o];return r}(e):[e]}},function(e,t,r){"use strict";var n=r(12),o=r(1),i=n.canUseDOM?document.createElement("div"):null,s={},a=[1,'<select multiple="true">',"</select>"],c=[1,"<table>","</table>"],u=[3,"<table><tbody><tr>","</tr></tbody></table>"],p=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],l={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:a,option:a,caption:c,colgroup:c,tbody:c,tfoot:c,thead:c,td:u,th:u};["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"].forEach(function(e){l[e]=p,s[e]=!0}),e.exports=function(e){return i||o(!1),l.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||(i.innerHTML="*"===e?"<link />":"<"+e+"></"+e+">",s[e]=!i.firstChild),s[e]?l[e]:null}},function(e,t,r){"use strict";var n=r(96),o=r(6),i={dangerouslyProcessChildrenUpdates:function(e,t){var r=o.getNodeFromInstance(e);n.processUpdates(r,t)}};e.exports=i},function(e,t,r){"use strict";var n=r(3),o=r(5),i=r(512),s=r(513),a=r(42),c=r(97),u=r(40),p=r(171),l=r(50),h=r(90),d=r(75),f=r(159),m=r(6),g=r(523),y=r(525),v=r(172),b=r(526),w=(r(17),r(527)),E=r(534),x=(r(19),r(74)),C=(r(1),r(94),r(101),r(165)),S=(r(105),r(4),f),k=l.deleteListener,P=m.getNodeFromInstance,_=d.listenTo,A=h.registrationNameModules,D={string:!0,number:!0},O="__html",T={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},N=11;function I(e,t){t&&(H[e._tag]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&n("137",e._tag,e._currentElement._owner?" Check the render method of "+e._currentElement._owner.getName()+".":""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&n("60"),"object"==typeof t.dangerouslySetInnerHTML&&O in t.dangerouslySetInnerHTML||n("61")),null!=t.style&&"object"!=typeof t.style&&n("62",function(e){if(e){var t=e._currentElement._owner||null;if(t){var r=t.getName();if(r)return" This DOM node was rendered by `"+r+"`."}}return""}(e)))}function R(e,t,r,n){if(!(n instanceof E)){0;var o=e._hostContainerInfo,i=o._node&&o._node.nodeType===N?o._node:o._ownerDocument;_(t,i),n.getReactMountReady().enqueue(j,{inst:e,registrationName:t,listener:r})}}function j(){l.putListener(this.inst,this.registrationName,this.listener)}function F(){g.postMountWrapper(this)}function M(){b.postMountWrapper(this)}function L(){y.postMountWrapper(this)}var G={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"};function B(){C.track(this)}function U(){this._rootNodeID||n("63");var e=P(this);switch(e||n("64"),this._tag){case"iframe":case"object":this._wrapperState.listeners=[d.trapBubbledEvent("topLoad","load",e)];break;case"video":case"audio":for(var t in this._wrapperState.listeners=[],G)G.hasOwnProperty(t)&&this._wrapperState.listeners.push(d.trapBubbledEvent(t,G[t],e));break;case"source":this._wrapperState.listeners=[d.trapBubbledEvent("topError","error",e)];break;case"img":this._wrapperState.listeners=[d.trapBubbledEvent("topError","error",e),d.trapBubbledEvent("topLoad","load",e)];break;case"form":this._wrapperState.listeners=[d.trapBubbledEvent("topReset","reset",e),d.trapBubbledEvent("topSubmit","submit",e)];break;case"input":case"select":case"textarea":this._wrapperState.listeners=[d.trapBubbledEvent("topInvalid","invalid",e)]}}function $(){v.postUpdateWrapper(this)}var q={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},z={listing:!0,pre:!0,textarea:!0},H=o({menuitem:!0},q),V=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,X={},W={}.hasOwnProperty;function J(e,t){return e.indexOf("-")>=0||null!=t.is}var Y=1;function K(e){var t=e.type;!function(e){W.call(X,e)||(V.test(e)||n("65",e),X[e]=!0)}(t),this._currentElement=e,this._tag=t.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}K.displayName="ReactDOMComponent",K.Mixin={mountComponent:function(e,t,r,n){this._rootNodeID=Y++,this._domID=r._idCounter++,this._hostParent=t,this._hostContainerInfo=r;var o,s,u,l=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},e.getReactMountReady().enqueue(U,this);break;case"input":g.mountWrapper(this,l,t),l=g.getHostProps(this,l),e.getReactMountReady().enqueue(B,this),e.getReactMountReady().enqueue(U,this);break;case"option":y.mountWrapper(this,l,t),l=y.getHostProps(this,l);break;case"select":v.mountWrapper(this,l,t),l=v.getHostProps(this,l),e.getReactMountReady().enqueue(U,this);break;case"textarea":b.mountWrapper(this,l,t),l=b.getHostProps(this,l),e.getReactMountReady().enqueue(B,this),e.getReactMountReady().enqueue(U,this)}if(I(this,l),null!=t?(o=t._namespaceURI,s=t._tag):r._tag&&(o=r._namespaceURI,s=r._tag),(null==o||o===c.svg&&"foreignobject"===s)&&(o=c.html),o===c.html&&("svg"===this._tag?o=c.svg:"math"===this._tag&&(o=c.mathml)),this._namespaceURI=o,e.useCreateElement){var h,d=r._ownerDocument;if(o===c.html)if("script"===this._tag){var f=d.createElement("div"),w=this._currentElement.type;f.innerHTML="<"+w+"></"+w+">",h=f.removeChild(f.firstChild)}else h=l.is?d.createElement(this._currentElement.type,l.is):d.createElement(this._currentElement.type);else h=d.createElementNS(o,this._currentElement.type);m.precacheNode(this,h),this._flags|=S.hasCachedChildNodes,this._hostParent||p.setAttributeForRoot(h),this._updateDOMProperties(null,l,e);var E=a(h);this._createInitialChildren(e,l,n,E),u=E}else{var x=this._createOpenTagMarkupAndPutListeners(e,l),C=this._createContentMarkup(e,l,n);u=!C&&q[this._tag]?x+"/>":x+">"+C+"</"+this._currentElement.type+">"}switch(this._tag){case"input":e.getReactMountReady().enqueue(F,this),l.autoFocus&&e.getReactMountReady().enqueue(i.focusDOMComponent,this);break;case"textarea":e.getReactMountReady().enqueue(M,this),l.autoFocus&&e.getReactMountReady().enqueue(i.focusDOMComponent,this);break;case"select":case"button":l.autoFocus&&e.getReactMountReady().enqueue(i.focusDOMComponent,this);break;case"option":e.getReactMountReady().enqueue(L,this)}return u},_createOpenTagMarkupAndPutListeners:function(e,t){var r="<"+this._currentElement.type;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(null!=i)if(A.hasOwnProperty(n))i&&R(this,n,i,e);else{"style"===n&&(i&&(i=this._previousStyleCopy=o({},t.style)),i=s.createMarkupForStyles(i,this));var a=null;null!=this._tag&&J(this._tag,t)?T.hasOwnProperty(n)||(a=p.createMarkupForCustomAttribute(n,i)):a=p.createMarkupForProperty(n,i),a&&(r+=" "+a)}}return e.renderToStaticMarkup?r:(this._hostParent||(r+=" "+p.createMarkupForRoot()),r+=" "+p.createMarkupForID(this._domID))},_createContentMarkup:function(e,t,r){var n="",o=t.dangerouslySetInnerHTML;if(null!=o)null!=o.__html&&(n=o.__html);else{var i=D[typeof t.children]?t.children:null,s=null!=i?null:t.children;if(null!=i)n=x(i);else if(null!=s){n=this.mountChildren(s,e,r).join("")}}return z[this._tag]&&"\n"===n.charAt(0)?"\n"+n:n},_createInitialChildren:function(e,t,r,n){var o=t.dangerouslySetInnerHTML;if(null!=o)null!=o.__html&&a.queueHTML(n,o.__html);else{var i=D[typeof t.children]?t.children:null,s=null!=i?null:t.children;if(null!=i)""!==i&&a.queueText(n,i);else if(null!=s)for(var c=this.mountChildren(s,e,r),u=0;u<c.length;u++)a.queueChild(n,c[u])}},receiveComponent:function(e,t,r){var n=this._currentElement;this._currentElement=e,this.updateComponent(t,n,e,r)},updateComponent:function(e,t,r,n){var o=t.props,i=this._currentElement.props;switch(this._tag){case"input":o=g.getHostProps(this,o),i=g.getHostProps(this,i);break;case"option":o=y.getHostProps(this,o),i=y.getHostProps(this,i);break;case"select":o=v.getHostProps(this,o),i=v.getHostProps(this,i);break;case"textarea":o=b.getHostProps(this,o),i=b.getHostProps(this,i)}switch(I(this,i),this._updateDOMProperties(o,i,e),this._updateDOMChildren(o,i,e,n),this._tag){case"input":g.updateWrapper(this),C.updateValueIfChanged(this);break;case"textarea":b.updateWrapper(this);break;case"select":e.getReactMountReady().enqueue($,this)}},_updateDOMProperties:function(e,t,r){var n,i,a;for(n in e)if(!t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&null!=e[n])if("style"===n){var c=this._previousStyleCopy;for(i in c)c.hasOwnProperty(i)&&((a=a||{})[i]="");this._previousStyleCopy=null}else A.hasOwnProperty(n)?e[n]&&k(this,n):J(this._tag,e)?T.hasOwnProperty(n)||p.deleteValueForAttribute(P(this),n):(u.properties[n]||u.isCustomAttribute(n))&&p.deleteValueForProperty(P(this),n);for(n in t){var l=t[n],h="style"===n?this._previousStyleCopy:null!=e?e[n]:void 0;if(t.hasOwnProperty(n)&&l!==h&&(null!=l||null!=h))if("style"===n)if(l?l=this._previousStyleCopy=o({},l):this._previousStyleCopy=null,h){for(i in h)!h.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||((a=a||{})[i]="");for(i in l)l.hasOwnProperty(i)&&h[i]!==l[i]&&((a=a||{})[i]=l[i])}else a=l;else if(A.hasOwnProperty(n))l?R(this,n,l,r):h&&k(this,n);else if(J(this._tag,t))T.hasOwnProperty(n)||p.setValueForAttribute(P(this),n,l);else if(u.properties[n]||u.isCustomAttribute(n)){var d=P(this);null!=l?p.setValueForProperty(d,n,l):p.deleteValueForProperty(d,n)}}a&&s.setValueForStyles(P(this),a,this)},_updateDOMChildren:function(e,t,r,n){var o=D[typeof e.children]?e.children:null,i=D[typeof t.children]?t.children:null,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,a=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,c=null!=o?null:e.children,u=null!=i?null:t.children,p=null!=o||null!=s,l=null!=i||null!=a;null!=c&&null==u?this.updateChildren(null,r,n):p&&!l&&this.updateTextContent(""),null!=i?o!==i&&this.updateTextContent(""+i):null!=a?s!==a&&this.updateMarkup(""+a):null!=u&&this.updateChildren(u,r,n)},getHostNode:function(){return P(this)},unmountComponent:function(e){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var t=this._wrapperState.listeners;if(t)for(var r=0;r<t.length;r++)t[r].remove();break;case"input":case"textarea":C.stopTracking(this);break;case"html":case"head":case"body":n("66",this._tag)}this.unmountChildren(e),m.uncacheNode(this),l.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return P(this)}},o(K.prototype,K.Mixin,w.Mixin),e.exports=K},function(e,t,r){"use strict";var n=r(6),o=r(169),i={focusDOMComponent:function(){o(n.getNodeFromInstance(this))}};e.exports=i},function(e,t,r){"use strict";var n=r(170),o=r(12),i=(r(17),r(514),r(516)),s=r(517),a=r(519),c=(r(4),a(function(e){return s(e)})),u=!1,p="cssFloat";if(o.canUseDOM){var l=document.createElement("div").style;try{l.font=""}catch(e){u=!0}void 0===document.documentElement.style.cssFloat&&(p="styleFloat")}var h={createMarkupForStyles:function(e,t){var r="";for(var n in e)if(e.hasOwnProperty(n)){var o=0===n.indexOf("--"),s=e[n];0,null!=s&&(r+=c(n)+":",r+=i(n,s,t,o)+";")}return r||null},setValueForStyles:function(e,t,r){var o=e.style;for(var s in t)if(t.hasOwnProperty(s)){var a=0===s.indexOf("--");0;var c=i(s,t[s],r,a);if("float"!==s&&"cssFloat"!==s||(s=p),a)o.setProperty(s,c);else if(c)o[s]=c;else{var l=u&&n.shorthandPropertyExpansions[s];if(l)for(var h in l)o[h]="";else o[s]=""}}}};e.exports=h},function(e,t,r){"use strict";var n=r(515),o=/^-ms-/;e.exports=function(e){return n(e.replace(o,"ms-"))}},function(e,t,r){"use strict";var n=/-(.)/g;e.exports=function(e){return e.replace(n,function(e,t){return t.toUpperCase()})}},function(e,t,r){"use strict";var n=r(170),o=(r(4),n.isUnitlessNumber);e.exports=function(e,t,r,n){if(null==t||"boolean"==typeof t||""===t)return"";var i=isNaN(t);return n||i||0===t||o.hasOwnProperty(e)&&o[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}},function(e,t,r){"use strict";var n=r(518),o=/^ms-/;e.exports=function(e){return n(e).replace(o,"-ms-")}},function(e,t,r){"use strict";var n=/([A-Z])/g;e.exports=function(e){return e.replace(n,"-$1").toLowerCase()}},function(e,t,r){"use strict";e.exports=function(e){var t={};return function(r){return t.hasOwnProperty(r)||(t[r]=e.call(this,r)),t[r]}}},function(e,t,r){"use strict";var n=r(74);e.exports=function(e){return'"'+n(e)+'"'}},function(e,t,r){"use strict";var n=r(50);var o={handleTopLevel:function(e,t,r,o){!function(e){n.enqueueEvents(e),n.processEventQueue(!1)}(n.extractEvents(e,t,r,o))}};e.exports=o},function(e,t,r){"use strict";var n=r(12);function o(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r["ms"+e]="MS"+t,r["O"+e]="o"+t.toLowerCase(),r}var i={animationend:o("Animation","AnimationEnd"),animationiteration:o("Animation","AnimationIteration"),animationstart:o("Animation","AnimationStart"),transitionend:o("Transition","TransitionEnd")},s={},a={};n.canUseDOM&&(a=document.createElement("div").style,"AnimationEvent"in window||(delete i.animationend.animation,delete i.animationiteration.animation,delete i.animationstart.animation),"TransitionEvent"in window||delete i.transitionend.transition),e.exports=function(e){if(s[e])return s[e];if(!i[e])return e;var t=i[e];for(var r in t)if(t.hasOwnProperty(r)&&r in a)return s[e]=t[r];return""}},function(e,t,r){"use strict";var n=r(3),o=r(5),i=r(171),s=r(99),a=r(6),c=r(20);r(1),r(4);function u(){this._rootNodeID&&l.updateWrapper(this)}function p(e){return"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}var l={getHostProps:function(e,t){var r=s.getValue(t),n=s.getChecked(t);return o({type:void 0,step:void 0,min:void 0,max:void 0},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=r?r:e._wrapperState.initialValue,checked:null!=n?n:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var r=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:r,listeners:null,onChange:h.bind(e),controlled:p(t)}},updateWrapper:function(e){var t=e._currentElement.props,r=t.checked;null!=r&&i.setValueForProperty(a.getNodeFromInstance(e),"checked",r||!1);var n=a.getNodeFromInstance(e),o=s.getValue(t);if(null!=o)if(0===o&&""===n.value)n.value="0";else if("number"===t.type){var c=parseFloat(n.value,10)||0;(o!=c||o==c&&n.value!=o)&&(n.value=""+o)}else n.value!==""+o&&(n.value=""+o);else null==t.value&&null!=t.defaultValue&&n.defaultValue!==""+t.defaultValue&&(n.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(n.defaultChecked=!!t.defaultChecked)},postMountWrapper:function(e){var t=e._currentElement.props,r=a.getNodeFromInstance(e);switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":r.value="",r.value=r.defaultValue;break;default:r.value=r.value}var n=r.name;""!==n&&(r.name=""),r.defaultChecked=!r.defaultChecked,r.defaultChecked=!r.defaultChecked,""!==n&&(r.name=n)}};function h(e){var t=this._currentElement.props,r=s.executeOnChange(t,e);c.asap(u,this);var o=t.name;if("radio"===t.type&&null!=o){for(var i=a.getNodeFromInstance(this),p=i;p.parentNode;)p=p.parentNode;for(var l=p.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),h=0;h<l.length;h++){var d=l[h];if(d!==i&&d.form===i.form){var f=a.getInstanceFromNode(d);f||n("90"),c.asap(u,f)}}}return r}e.exports=l},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){"use strict";var n=r(5),o=r(38),i=r(6),s=r(172),a=(r(4),!1);function c(e){var t="";return o.Children.forEach(e,function(e){null!=e&&("string"==typeof e||"number"==typeof e?t+=e:a||(a=!0))}),t}var u={mountWrapper:function(e,t,r){var n=null;if(null!=r){var o=r;"optgroup"===o._tag&&(o=o._hostParent),null!=o&&"select"===o._tag&&(n=s.getSelectValueContext(o))}var i,a=null;if(null!=n)if(i=null!=t.value?t.value+"":c(t.children),a=!1,Array.isArray(n)){for(var u=0;u<n.length;u++)if(""+n[u]===i){a=!0;break}}else a=""+n===i;e._wrapperState={selected:a}},postMountWrapper:function(e){var t=e._currentElement.props;null!=t.value&&i.getNodeFromInstance(e).setAttribute("value",t.value)},getHostProps:function(e,t){var r=n({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(r.selected=e._wrapperState.selected);var o=c(t.children);return o&&(r.children=o),r}};e.exports=u},function(e,t,r){"use strict";var n=r(3),o=r(5),i=r(99),s=r(6),a=r(20);r(1),r(4);function c(){this._rootNodeID&&u.updateWrapper(this)}var u={getHostProps:function(e,t){return null!=t.dangerouslySetInnerHTML&&n("91"),o({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var r=i.getValue(t),o=r;if(null==r){var s=t.defaultValue,a=t.children;null!=a&&(null!=s&&n("92"),Array.isArray(a)&&(a.length<=1||n("93"),a=a[0]),s=""+a),null==s&&(s=""),o=s}e._wrapperState={initialValue:""+o,listeners:null,onChange:p.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,r=s.getNodeFromInstance(e),n=i.getValue(t);if(null!=n){var o=""+n;o!==r.value&&(r.value=o),null==t.defaultValue&&(r.defaultValue=o)}null!=t.defaultValue&&(r.defaultValue=t.defaultValue)},postMountWrapper:function(e){var t=s.getNodeFromInstance(e),r=t.textContent;r===e._wrapperState.initialValue&&(t.value=r)}};function p(e){var t=this._currentElement.props,r=i.executeOnChange(t,e);return a.asap(c,this),r}e.exports=u},function(e,t,r){"use strict";var n=r(3),o=r(100),i=(r(52),r(17),r(22),r(41)),s=r(528),a=(r(19),r(533));r(1);function c(e,t){return t&&(e=e||[]).push(t),e}function u(e,t){o.processChildrenUpdates(e,t)}var p={Mixin:{_reconcilerInstantiateChildren:function(e,t,r){return s.instantiateChildren(e,t,r)},_reconcilerUpdateChildren:function(e,t,r,n,o,i){var c;return c=a(t,0),s.updateChildren(e,c,r,n,o,this,this._hostContainerInfo,i,0),c},mountChildren:function(e,t,r){var n=this._reconcilerInstantiateChildren(e,t,r);this._renderedChildren=n;var o=[],s=0;for(var a in n)if(n.hasOwnProperty(a)){var c=n[a];0;var u=i.mountComponent(c,t,this,this._hostContainerInfo,r,0);c._mountIndex=s++,o.push(u)}return o},updateTextContent:function(e){var t,r=this._renderedChildren;for(var o in s.unmountChildren(r,!1),r)r.hasOwnProperty(o)&&n("118");u(this,[(t=e,{type:"TEXT_CONTENT",content:t,fromIndex:null,fromNode:null,toIndex:null,afterNode:null})])},updateMarkup:function(e){var t,r=this._renderedChildren;for(var o in s.unmountChildren(r,!1),r)r.hasOwnProperty(o)&&n("118");u(this,[(t=e,{type:"SET_MARKUP",content:t,fromIndex:null,fromNode:null,toIndex:null,afterNode:null})])},updateChildren:function(e,t,r){this._updateChildren(e,t,r)},_updateChildren:function(e,t,r){var n=this._renderedChildren,o={},s=[],a=this._reconcilerUpdateChildren(n,e,s,o,t,r);if(a||n){var p,l=null,h=0,d=0,f=0,m=null;for(p in a)if(a.hasOwnProperty(p)){var g=n&&n[p],y=a[p];g===y?(l=c(l,this.moveChild(g,m,h,d)),d=Math.max(g._mountIndex,d),g._mountIndex=h):(g&&(d=Math.max(g._mountIndex,d)),l=c(l,this._mountChildAtIndex(y,s[f],m,h,t,r)),f++),h++,m=i.getHostNode(y)}for(p in o)o.hasOwnProperty(p)&&(l=c(l,this._unmountChild(n[p],o[p])));l&&u(this,l),this._renderedChildren=a}},unmountChildren:function(e){var t=this._renderedChildren;s.unmountChildren(t,e),this._renderedChildren=null},moveChild:function(e,t,r,n){if(e._mountIndex<n)return function(e,t,r){return{type:"MOVE_EXISTING",content:null,fromIndex:e._mountIndex,fromNode:i.getHostNode(e),toIndex:r,afterNode:t}}(e,t,r)},createChild:function(e,t,r){return function(e,t,r){return{type:"INSERT_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:r,afterNode:t}}(r,t,e._mountIndex)},removeChild:function(e,t){return function(e,t){return{type:"REMOVE_NODE",content:null,fromIndex:e._mountIndex,fromNode:t,toIndex:null,afterNode:null}}(e,t)},_mountChildAtIndex:function(e,t,r,n,o,i){return e._mountIndex=n,this.createChild(e,r,t)},_unmountChild:function(e,t){var r=this.removeChild(e,t);return e._mountIndex=null,r}}};e.exports=p},function(e,t,r){"use strict";(function(t){var n=r(41),o=r(173),i=(r(103),r(102)),s=r(177);r(4);function a(e,t,r,n){var i=void 0===e[r];null!=t&&i&&(e[r]=o(t,!0))}void 0!==t&&t.env;var c={instantiateChildren:function(e,t,r,n){if(null==e)return null;var o={};return s(e,a,o),o},updateChildren:function(e,t,r,s,a,c,u,p,l){if(t||e){var h,d;for(h in t)if(t.hasOwnProperty(h)){var f=(d=e&&e[h])&&d._currentElement,m=t[h];if(null!=d&&i(f,m))n.receiveComponent(d,m,a,p),t[h]=d;else{d&&(s[h]=n.getHostNode(d),n.unmountComponent(d,!1));var g=o(m,!0);t[h]=g;var y=n.mountComponent(g,a,c,u,p,l);r.push(y)}}for(h in e)!e.hasOwnProperty(h)||t&&t.hasOwnProperty(h)||(d=e[h],s[h]=n.getHostNode(d),n.unmountComponent(d,!1))}},unmountChildren:function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];n.unmountComponent(o,t)}}};e.exports=c}).call(this,r(2))},function(e,t,r){"use strict";var n=r(3),o=r(5),i=r(38),s=r(100),a=r(22),c=r(92),u=r(52),p=(r(17),r(174)),l=r(41),h=r(69),d=(r(1),r(101)),f=r(102),m=(r(4),0),g=1,y=2;function v(e){}function b(e,t){0}v.prototype.render=function(){var e=u.get(this)._currentElement.type,t=e(this.props,this.context,this.updater);return b(e,t),t};var w=1,E={construct:function(e){this._currentElement=e,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(e,t,r,o){this._context=o,this._mountOrder=w++,this._hostParent=t,this._hostContainerInfo=r;var s,a=this._currentElement.props,c=this._processContext(o),p=this._currentElement.type,l=e.getUpdateQueue(),d=function(e){return!(!e.prototype||!e.prototype.isReactComponent)}(p),f=this._constructComponent(d,a,c,l);d||null!=f&&null!=f.render?!function(e){return!(!e.prototype||!e.prototype.isPureReactComponent)}(p)?this._compositeType=m:this._compositeType=g:(s=f,b(),null===f||!1===f||i.isValidElement(f)||n("105",p.displayName||p.name||"Component"),f=new v(p),this._compositeType=y),f.props=a,f.context=c,f.refs=h,f.updater=l,this._instance=f,u.set(f,this);var E,x=f.state;return void 0===x&&(f.state=x=null),("object"!=typeof x||Array.isArray(x))&&n("106",this.getName()||"ReactCompositeComponent"),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,E=f.unstable_handleError?this.performInitialMountWithErrorHandling(s,t,r,e,o):this.performInitialMount(s,t,r,e,o),f.componentDidMount&&e.getReactMountReady().enqueue(f.componentDidMount,f),E},_constructComponent:function(e,t,r,n){return this._constructComponentWithoutOwner(e,t,r,n)},_constructComponentWithoutOwner:function(e,t,r,n){var o=this._currentElement.type;return e?new o(t,r,n):o(t,r,n)},performInitialMountWithErrorHandling:function(e,t,r,n,o){var i,s=n.checkpoint();try{i=this.performInitialMount(e,t,r,n,o)}catch(a){n.rollback(s),this._instance.unstable_handleError(a),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),s=n.checkpoint(),this._renderedComponent.unmountComponent(!0),n.rollback(s),i=this.performInitialMount(e,t,r,n,o)}return i},performInitialMount:function(e,t,r,n,o){var i=this._instance;i.componentWillMount&&(i.componentWillMount(),this._pendingStateQueue&&(i.state=this._processPendingState(i.props,i.context))),void 0===e&&(e=this._renderValidatedComponent());var s=p.getType(e);this._renderedNodeType=s;var a=this._instantiateReactComponent(e,s!==p.EMPTY);return this._renderedComponent=a,l.mountComponent(a,n,t,r,this._processChildContext(o),0)},getHostNode:function(){return l.getHostNode(this._renderedComponent)},unmountComponent:function(e){if(this._renderedComponent){var t=this._instance;if(t.componentWillUnmount&&!t._calledComponentWillUnmount)if(t._calledComponentWillUnmount=!0,e){var r=this.getName()+".componentWillUnmount()";c.invokeGuardedCallback(r,t.componentWillUnmount.bind(t))}else t.componentWillUnmount();this._renderedComponent&&(l.unmountComponent(this._renderedComponent,e),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,u.remove(t)}},_maskContext:function(e){var t=this._currentElement.type.contextTypes;if(!t)return h;var r={};for(var n in t)r[n]=e[n];return r},_processContext:function(e){return this._maskContext(e)},_processChildContext:function(e){var t,r=this._currentElement.type,i=this._instance;if(i.getChildContext&&(t=i.getChildContext()),t){for(var s in"object"!=typeof r.childContextTypes&&n("107",this.getName()||"ReactCompositeComponent"),t)s in r.childContextTypes||n("108",this.getName()||"ReactCompositeComponent",s);return o({},e,t)}return e},_checkContextTypes:function(e,t,r){0},receiveComponent:function(e,t,r){var n=this._currentElement,o=this._context;this._pendingElement=null,this.updateComponent(t,n,e,o,r)},performUpdateIfNecessary:function(e){null!=this._pendingElement?l.receiveComponent(this,this._pendingElement,e,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(e,t,r,o,i){var s=this._instance;null==s&&n("136",this.getName()||"ReactCompositeComponent");var a,c=!1;this._context===i?a=s.context:(a=this._processContext(i),c=!0);var u=t.props,p=r.props;t!==r&&(c=!0),c&&s.componentWillReceiveProps&&s.componentWillReceiveProps(p,a);var l=this._processPendingState(p,a),h=!0;this._pendingForceUpdate||(s.shouldComponentUpdate?h=s.shouldComponentUpdate(p,l,a):this._compositeType===g&&(h=!d(u,p)||!d(s.state,l))),this._updateBatchNumber=null,h?(this._pendingForceUpdate=!1,this._performComponentUpdate(r,p,l,a,e,i)):(this._currentElement=r,this._context=i,s.props=p,s.state=l,s.context=a)},_processPendingState:function(e,t){var r=this._instance,n=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!n)return r.state;if(i&&1===n.length)return n[0];for(var s=o({},i?n[0]:r.state),a=i?1:0;a<n.length;a++){var c=n[a];o(s,"function"==typeof c?c.call(r,s,e,t):c)}return s},_performComponentUpdate:function(e,t,r,n,o,i){var s,a,c,u=this._instance,p=Boolean(u.componentDidUpdate);p&&(s=u.props,a=u.state,c=u.context),u.componentWillUpdate&&u.componentWillUpdate(t,r,n),this._currentElement=e,this._context=i,u.props=t,u.state=r,u.context=n,this._updateRenderedComponent(o,i),p&&o.getReactMountReady().enqueue(u.componentDidUpdate.bind(u,s,a,c),u)},_updateRenderedComponent:function(e,t){var r=this._renderedComponent,n=r._currentElement,o=this._renderValidatedComponent();if(f(n,o))l.receiveComponent(r,o,e,this._processChildContext(t));else{var i=l.getHostNode(r);l.unmountComponent(r,!1);var s=p.getType(o);this._renderedNodeType=s;var a=this._instantiateReactComponent(o,s!==p.EMPTY);this._renderedComponent=a;var c=l.mountComponent(a,e,this._hostParent,this._hostContainerInfo,this._processChildContext(t),0);this._replaceNodeWithMarkup(i,c,r)}},_replaceNodeWithMarkup:function(e,t,r){s.replaceNodeWithMarkup(e,t,r)},_renderValidatedComponentWithoutOwnerOrContext:function(){return this._instance.render()},_renderValidatedComponent:function(){var e;if(this._compositeType!==y){a.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{a.current=null}}else e=this._renderValidatedComponentWithoutOwnerOrContext();return null===e||!1===e||i.isValidElement(e)||n("109",this.getName()||"ReactCompositeComponent"),e},attachRef:function(e,t){var r=this.getPublicInstance();null==r&&n("110");var o=t.getPublicInstance();(r.refs===h?r.refs={}:r.refs)[e]=o},detachRef:function(e){delete this.getPublicInstance().refs[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return this._compositeType===y?null:e},_instantiateReactComponent:null};e.exports=E},function(e,t,r){"use strict";var n=1;e.exports=function(){return n++}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=n},function(e,t,r){"use strict";var n="function"==typeof Symbol&&Symbol.iterator,o="@@iterator";e.exports=function(e){var t=e&&(n&&e[n]||e[o]);if("function"==typeof t)return t}},function(e,t,r){"use strict";(function(t){r(103);var n=r(177);r(4);function o(e,t,r,n){if(e&&"object"==typeof e){var o=e;0,void 0===o[r]&&null!=t&&(o[r]=t)}}void 0!==t&&t.env,e.exports=function(e,t){if(null==e)return e;var r={};return n(e,o,r),r}}).call(this,r(2))},function(e,t,r){"use strict";var n=r(5),o=r(32),i=r(71),s=(r(17),r(535)),a=[];var c={enqueue:function(){}};function u(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.useCreateElement=!1,this.updateQueue=new s(this)}var p={getTransactionWrappers:function(){return a},getReactMountReady:function(){return c},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};n(u.prototype,i,p),o.addPoolingTo(u),e.exports=u},function(e,t,r){"use strict";var n=r(104);r(4);var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.transaction=t}return e.prototype.isMounted=function(e){return!1},e.prototype.enqueueCallback=function(e,t,r){this.transaction.isInTransaction()&&n.enqueueCallback(e,t,r)},e.prototype.enqueueForceUpdate=function(e){this.transaction.isInTransaction()&&n.enqueueForceUpdate(e)},e.prototype.enqueueReplaceState=function(e,t){this.transaction.isInTransaction()&&n.enqueueReplaceState(e,t)},e.prototype.enqueueSetState=function(e,t){this.transaction.isInTransaction()&&n.enqueueSetState(e,t)},e}();e.exports=o},function(e,t,r){"use strict";var n=r(5),o=r(42),i=r(6),s=function(e){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};n(s.prototype,{mountComponent:function(e,t,r,n){var s=r._idCounter++;this._domID=s,this._hostParent=t,this._hostContainerInfo=r;var a=" react-empty: "+this._domID+" ";if(e.useCreateElement){var c=r._ownerDocument.createComment(a);return i.precacheNode(this,c),o(c)}return e.renderToStaticMarkup?"":"\x3c!--"+a+"--\x3e"},receiveComponent:function(){},getHostNode:function(){return i.getNodeFromInstance(this)},unmountComponent:function(){i.uncacheNode(this)}}),e.exports=s},function(e,t,r){"use strict";var n=r(3);r(1);function o(e,t){"_hostNode"in e||n("33"),"_hostNode"in t||n("33");for(var r=0,o=e;o;o=o._hostParent)r++;for(var i=0,s=t;s;s=s._hostParent)i++;for(;r-i>0;)e=e._hostParent,r--;for(;i-r>0;)t=t._hostParent,i--;for(var a=r;a--;){if(e===t)return e;e=e._hostParent,t=t._hostParent}return null}e.exports={isAncestor:function(e,t){"_hostNode"in e||n("35"),"_hostNode"in t||n("35");for(;t;){if(t===e)return!0;t=t._hostParent}return!1},getLowestCommonAncestor:o,getParentInstance:function(e){return"_hostNode"in e||n("36"),e._hostParent},traverseTwoPhase:function(e,t,r){for(var n,o=[];e;)o.push(e),e=e._hostParent;for(n=o.length;n-- >0;)t(o[n],"captured",r);for(n=0;n<o.length;n++)t(o[n],"bubbled",r)},traverseEnterLeave:function(e,t,r,n,i){for(var s=e&&t?o(e,t):null,a=[];e&&e!==s;)a.push(e),e=e._hostParent;for(var c,u=[];t&&t!==s;)u.push(t),t=t._hostParent;for(c=0;c<a.length;c++)r(a[c],"bubbled",n);for(c=u.length;c-- >0;)r(u[c],"captured",i)}}},function(e,t,r){"use strict";var n=r(3),o=r(5),i=r(96),s=r(42),a=r(6),c=r(74),u=(r(1),r(105),function(e){this._currentElement=e,this._stringText=""+e,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});o(u.prototype,{mountComponent:function(e,t,r,n){var o=r._idCounter++,i=" react-text: "+o+" ";if(this._domID=o,this._hostParent=t,e.useCreateElement){var u=r._ownerDocument,p=u.createComment(i),l=u.createComment(" /react-text "),h=s(u.createDocumentFragment());return s.queueChild(h,s(p)),this._stringText&&s.queueChild(h,s(u.createTextNode(this._stringText))),s.queueChild(h,s(l)),a.precacheNode(this,p),this._closingComment=l,h}var d=c(this._stringText);return e.renderToStaticMarkup?d:"\x3c!--"+i+"--\x3e"+d+"\x3c!-- /react-text --\x3e"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var r=""+e;if(r!==this._stringText){this._stringText=r;var n=this.getHostNode();i.replaceDelimitedText(n[0],n[1],r)}}},getHostNode:function(){var e=this._commentNodes;if(e)return e;if(!this._closingComment)for(var t=a.getNodeFromInstance(this).nextSibling;;){if(null==t&&n("67",this._domID),8===t.nodeType&&" /react-text "===t.nodeValue){this._closingComment=t;break}t=t.nextSibling}return e=[this._hostNode,this._closingComment],this._commentNodes=e,e},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,a.uncacheNode(this)}}),e.exports=u},function(e,t,r){"use strict";var n=r(5),o=r(20),i=r(71),s=r(19),a={initialize:s,close:function(){l.isBatchingUpdates=!1}},c=[{initialize:s,close:o.flushBatchedUpdates.bind(o)},a];function u(){this.reinitializeTransaction()}n(u.prototype,i,{getTransactionWrappers:function(){return c}});var p=new u,l={isBatchingUpdates:!1,batchedUpdates:function(e,t,r,n,o,i){var s=l.isBatchingUpdates;return l.isBatchingUpdates=!0,s?e(t,r,n,o,i):p.perform(e,null,t,r,n,o,i)}};e.exports=l},function(e,t,r){"use strict";var n=r(5),o=r(179),i=r(12),s=r(32),a=r(6),c=r(20),u=r(93),p=r(541);function l(e){for(;e._hostParent;)e=e._hostParent;var t=a.getNodeFromInstance(e).parentNode;return a.getClosestInstanceFromNode(t)}function h(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function d(e){var t=u(e.nativeEvent),r=a.getClosestInstanceFromNode(t),n=r;do{e.ancestors.push(n),n=n&&l(n)}while(n);for(var o=0;o<e.ancestors.length;o++)r=e.ancestors[o],f._handleTopLevel(e.topLevelType,r,e.nativeEvent,u(e.nativeEvent))}n(h.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),s.addPoolingTo(h,s.twoArgumentPooler);var f={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:i.canUseDOM?window:null,setHandleTopLevel:function(e){f._handleTopLevel=e},setEnabled:function(e){f._enabled=!!e},isEnabled:function(){return f._enabled},trapBubbledEvent:function(e,t,r){return r?o.listen(r,t,f.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,r){return r?o.capture(r,t,f.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=function(e){e(p(window))}.bind(null,e);o.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(f._enabled){var r=h.getPooled(e,t);try{c.batchedUpdates(d,r)}finally{h.release(r)}}}};e.exports=f},function(e,t,r){"use strict";e.exports=function(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}},function(e,t,r){"use strict";var n=r(40),o=r(50),i=r(91),s=r(100),a=r(175),c=r(75),u=r(176),p=r(20),l={Component:s.injection,DOMProperty:n.injection,EmptyComponent:a.injection,EventPluginHub:o.injection,EventPluginUtils:i.injection,EventEmitter:c.injection,HostComponent:u.injection,Updates:p.injection};e.exports=l},function(e,t,r){"use strict";var n=r(5),o=r(163),i=r(32),s=r(75),a=r(180),c=(r(17),r(71)),u=r(104),p=[{initialize:a.getSelectionInformation,close:a.restoreSelection},{initialize:function(){var e=s.isEnabled();return s.setEnabled(!1),e},close:function(e){s.setEnabled(e)}},{initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}}];function l(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=o.getPooled(null),this.useCreateElement=e}var h={getTransactionWrappers:function(){return p},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return u},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(e){this.reactMountReady.rollback(e)},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null}};n(l.prototype,c,h),i.addPoolingTo(l),e.exports=l},function(e,t,r){"use strict";var n=r(12),o=r(545),i=r(162);function s(e,t,r,n){return e===r&&t===n}var a=n.canUseDOM&&"selection"in document&&!("getSelection"in window),c={getOffsets:a?function(e){var t=document.selection.createRange(),r=t.text.length,n=t.duplicate();n.moveToElementText(e),n.setEndPoint("EndToStart",t);var o=n.text.length;return{start:o,end:o+r}}:function(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var r=t.anchorNode,n=t.anchorOffset,o=t.focusNode,i=t.focusOffset,a=t.getRangeAt(0);try{a.startContainer.nodeType,a.endContainer.nodeType}catch(e){return null}var c=s(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)?0:a.toString().length,u=a.cloneRange();u.selectNodeContents(e),u.setEnd(a.startContainer,a.startOffset);var p=s(u.startContainer,u.startOffset,u.endContainer,u.endOffset)?0:u.toString().length,l=p+c,h=document.createRange();h.setStart(r,n),h.setEnd(o,i);var d=h.collapsed;return{start:d?l:p,end:d?p:l}},setOffsets:a?function(e,t){var r,n,o=document.selection.createRange().duplicate();void 0===t.end?n=r=t.start:t.start>t.end?(r=t.end,n=t.start):(r=t.start,n=t.end),o.moveToElementText(e),o.moveStart("character",r),o.setEndPoint("EndToStart",o),o.moveEnd("character",n-r),o.select()}:function(e,t){if(window.getSelection){var r=window.getSelection(),n=e[i()].length,s=Math.min(t.start,n),a=void 0===t.end?s:Math.min(t.end,n);if(!r.extend&&s>a){var c=a;a=s,s=c}var u=o(e,s),p=o(e,a);if(u&&p){var l=document.createRange();l.setStart(u.node,u.offset),r.removeAllRanges(),s>a?(r.addRange(l),r.extend(p.node,p.offset)):(l.setEnd(p.node,p.offset),r.addRange(l))}}}};e.exports=c},function(e,t,r){"use strict";function n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function o(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}e.exports=function(e,t){for(var r=n(e),i=0,s=0;r;){if(3===r.nodeType){if(s=i+r.textContent.length,i<=t&&s>=t)return{node:r,offset:t-i};i=s}r=n(o(r))}}},function(e,t,r){"use strict";var n=r(547);e.exports=function e(t,r){return!(!t||!r)&&(t===r||!n(t)&&(n(r)?e(t,r.parentNode):"contains"in t?t.contains(r):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(r))))}},function(e,t,r){"use strict";var n=r(548);e.exports=function(e){return n(e)&&3==e.nodeType}},function(e,t,r){"use strict";e.exports=function(e){var t=(e?e.ownerDocument||e:document).defaultView||window;return!(!e||!("function"==typeof t.Node?e instanceof t.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}},function(e,t,r){"use strict";var n="http://www.w3.org/1999/xlink",o="http://www.w3.org/XML/1998/namespace",i={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},s={Properties:{},DOMAttributeNamespaces:{xlinkActuate:n,xlinkArcrole:n,xlinkHref:n,xlinkRole:n,xlinkShow:n,xlinkTitle:n,xlinkType:n,xmlBase:o,xmlLang:o,xmlSpace:o},DOMAttributeNames:{}};Object.keys(i).forEach(function(e){s.Properties[e]=0,i[e]&&(s.DOMAttributeNames[e]=i[e])}),e.exports=s},function(e,t,r){"use strict";var n=r(49),o=r(12),i=r(6),s=r(180),a=r(23),c=r(181),u=r(166),p=r(101),l=o.canUseDOM&&"documentMode"in document&&document.documentMode<=11,h={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}},d=null,f=null,m=null,g=!1,y=!1;function v(e,t){if(g||null==d||d!==c())return null;var r=function(e){if("selectionStart"in e&&s.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var r=document.selection.createRange();return{parentElement:r.parentElement(),text:r.text,top:r.boundingTop,left:r.boundingLeft}}}(d);if(!m||!p(m,r)){m=r;var o=a.getPooled(h.select,f,e,t);return o.type="select",o.target=d,n.accumulateTwoPhaseDispatches(o),o}return null}var b={eventTypes:h,extractEvents:function(e,t,r,n){if(!y)return null;var o=t?i.getNodeFromInstance(t):window;switch(e){case"topFocus":(u(o)||"true"===o.contentEditable)&&(d=o,f=t,m=null);break;case"topBlur":d=null,f=null,m=null;break;case"topMouseDown":g=!0;break;case"topContextMenu":case"topMouseUp":return g=!1,v(r,n);case"topSelectionChange":if(l)break;case"topKeyDown":case"topKeyUp":return v(r,n)}return null},didPutListener:function(e,t,r){"onSelect"===t&&(y=!0)}};e.exports=b},function(e,t,r){"use strict";var n=r(3),o=r(179),i=r(49),s=r(6),a=r(552),c=r(553),u=r(23),p=r(554),l=r(555),h=r(72),d=r(557),f=r(558),m=r(559),g=r(51),y=r(560),v=r(19),b=r(106),w=(r(1),{}),E={};["abort","animationEnd","animationIteration","animationStart","blur","canPlay","canPlayThrough","click","contextMenu","copy","cut","doubleClick","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","focus","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","progress","rateChange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchMove","touchStart","transitionEnd","volumeChange","waiting","wheel"].forEach(function(e){var t=e[0].toUpperCase()+e.slice(1),r="on"+t,n="top"+t,o={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n]};w[e]=o,E[n]=o});var x={};function C(e){return"."+e._rootNodeID}function S(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}var k={eventTypes:w,extractEvents:function(e,t,r,o){var s,v=E[e];if(!v)return null;switch(e){case"topAbort":case"topCanPlay":case"topCanPlayThrough":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topVolumeChange":case"topWaiting":s=u;break;case"topKeyPress":if(0===b(r))return null;case"topKeyDown":case"topKeyUp":s=l;break;case"topBlur":case"topFocus":s=p;break;case"topClick":if(2===r.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":s=h;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":s=d;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":s=f;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":s=a;break;case"topTransitionEnd":s=m;break;case"topScroll":s=g;break;case"topWheel":s=y;break;case"topCopy":case"topCut":case"topPaste":s=c}s||n("86",e);var w=s.getPooled(v,t,r,o);return i.accumulateTwoPhaseDispatches(w),w},didPutListener:function(e,t,r){if("onClick"===t&&!S(e._tag)){var n=C(e),i=s.getNodeFromInstance(e);x[n]||(x[n]=o.listen(i,"click",v))}},willDeleteListener:function(e,t){if("onClick"===t&&!S(e._tag)){var r=C(e);x[r].remove(),delete x[r]}}};e.exports=k},function(e,t,r){"use strict";var n=r(23);function o(e,t,r,o){return n.call(this,e,t,r,o)}n.augmentClass(o,{animationName:null,elapsedTime:null,pseudoElement:null}),e.exports=o},function(e,t,r){"use strict";var n=r(23),o={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};function i(e,t,r,o){return n.call(this,e,t,r,o)}n.augmentClass(i,o),e.exports=i},function(e,t,r){"use strict";var n=r(51);function o(e,t,r,o){return n.call(this,e,t,r,o)}n.augmentClass(o,{relatedTarget:null}),e.exports=o},function(e,t,r){"use strict";var n=r(51),o=r(106),i={key:r(556),location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:r(95),charCode:function(e){return"keypress"===e.type?o(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?o(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};function s(e,t,r,o){return n.call(this,e,t,r,o)}n.augmentClass(s,i),e.exports=s},function(e,t,r){"use strict";var n=r(106),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=function(e){if(e.key){var t=o[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var r=n(e);return 13===r?"Enter":String.fromCharCode(r)}return"keydown"===e.type||"keyup"===e.type?i[e.keyCode]||"Unidentified":""}},function(e,t,r){"use strict";var n=r(72);function o(e,t,r,o){return n.call(this,e,t,r,o)}n.augmentClass(o,{dataTransfer:null}),e.exports=o},function(e,t,r){"use strict";var n=r(51),o={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:r(95)};function i(e,t,r,o){return n.call(this,e,t,r,o)}n.augmentClass(i,o),e.exports=i},function(e,t,r){"use strict";var n=r(23);function o(e,t,r,o){return n.call(this,e,t,r,o)}n.augmentClass(o,{propertyName:null,elapsedTime:null,pseudoElement:null}),e.exports=o},function(e,t,r){"use strict";var n=r(72);function o(e,t,r,o){return n.call(this,e,t,r,o)}n.augmentClass(o,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),e.exports=o},function(e,t,r){"use strict";r(105);var n=9;e.exports=function(e,t){return{_topLevelWrapper:e,_idCounter:1,_ownerDocument:t?t.nodeType===n?t:t.ownerDocument:null,_node:t,_tag:t?t.nodeName.toLowerCase():null,_namespaceURI:t?t.namespaceURI:null}}},function(e,t,r){"use strict";e.exports={useCreateElement:!0,useFiber:!1}},function(e,t,r){"use strict";var n=r(564),o=/\/?>/,i=/^<\!\-\-/,s={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=n(e);return i.test(e)?e:e.replace(o," "+s.CHECKSUM_ATTR_NAME+'="'+t+'"$&')},canReuseMarkup:function(e,t){var r=t.getAttribute(s.CHECKSUM_ATTR_NAME);return r=r&&parseInt(r,10),n(e)===r}};e.exports=s},function(e,t,r){"use strict";var n=65521;e.exports=function(e){for(var t=1,r=0,o=0,i=e.length,s=-4&i;o<s;){for(var a=Math.min(o+4096,s);o<a;o+=4)r+=(t+=e.charCodeAt(o))+(t+=e.charCodeAt(o+1))+(t+=e.charCodeAt(o+2))+(t+=e.charCodeAt(o+3));t%=n,r%=n}for(;o<i;o++)r+=t+=e.charCodeAt(o);return(t%=n)|(r%=n)<<16}},function(e,t,r){"use strict";e.exports="15.6.2"},function(e,t,r){"use strict";var n=r(3),o=(r(22),r(6)),i=r(52),s=r(183);r(1),r(4);e.exports=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=i.get(e);if(t)return(t=s(t))?o.getNodeFromInstance(t):null;"function"==typeof e.render?n("44"):n("45",Object.keys(e))}},function(e,t,r){"use strict";var n=r(182);e.exports=n.renderSubtreeIntoContainer},function(e,t,r){var n=r(107),o=["","webkit","Moz","MS","ms","o"];var i="ontouchstart"in window,s=void 0!==function(e,t){for(var r,n,i=t[0].toUpperCase()+t.slice(1),s=0;s<o.length;){if((n=(r=o[s])?r+i:t)in e)return n;s++}}(window,"PointerEvent"),a=i&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),c="pointerdown",u="pointermove pointerup pointercancel";function p(){this.evEl=c+" "+u,this.evWin="",n.Input.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}window.MSPointerEvent&&!window.PointerEvent&&(c="MSPointerDown",u="MSPointerMove MSPointerUp MSPointerCancel"),n.inherit(p,n.PointerEventInput,{}),p.prototype.constructor=function(){};var l="mousedown",h="mousemove mouseup";function d(){this.evEl=l+" "+h,this.evWin="",this.pressed=!1,n.Input.apply(this,arguments)}function f(){n.Input.apply(this,arguments);var e=this.handler.bind(this);this.touch=new n.TouchInput(this.manager,e),this.mouse=new d(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}n.inherit(d,n.MouseInput,{}),d.prototype.constructor=function(){},n.inherit(f,n.TouchMouseInput,{}),f.prototype.constructor=function(){};var m=null;m=s?p:a?n.TouchInput:i?f:d,e.exports={Input:m}},function(e,t,r){var n=r(7),o=r(13),i=r(10),s=r(76);e.exports.register=function(e){var t=e.TheGraph;t.config.graph={container:{},groupsGroup:{className:"groups"},edgesGroup:{className:"edges"},iipsGroup:{className:"iips"},nodesGroup:{className:"nodes"},inportsGroup:{className:"ex-inports"},outportsGroup:{className:"ex-outports"},node:{},iip:{},inportEdge:{},inportNode:{},outportEdge:{},outportNode:{},nodeGroup:{},selectionGroup:{key:"selectiongroup",isSelectionGroup:!0,label:"",description:""},edgePreview:{key:"edge-preview",label:""}},t.factories.graph={createGraphContainerGroup:t.factories.createGroup,createGraphGroupsGroup:t.factories.createGroup,createGraphEdgesGroup:t.factories.createGroup,createGraphIIPGroup:t.factories.createGroup,createGraphNodesGroup:t.factories.createGroup,createGraphInportsGroup:t.factories.createGroup,createGraphOutportsGroup:t.factories.createGroup,createGraphNode:function(e){return t.Node(e)},createGraphEdge:function(e){return t.Edge(e)},createGraphIIP:function(e){return t.IIP(e)},createGraphGroup:function(e){return t.Group(e)},createGraphEdgePreview:function(e){return t.Edge(e)}},t.Graph=n.createFactory(i({displayName:"TheGraphGraph",mixins:[],getDefaultProps:function(){return{library:{},graph:null,app:null,offsetX:0,offsetY:0,nodeIcons:{}}},getInitialState:function(){return{displaySelectionGroup:!0,edgePreview:null,edgePreviewX:0,edgePreviewY:0,forceSelection:!1,selectedNodes:[],errorNodes:[],selectedEdges:[],animatedEdges:[],offsetX:this.props.offsetX,offsetY:this.props.offsetY}},componentDidMount:function(){this.mounted=!0,this.subscribeGraph(null,this.props.graph),o.findDOMNode(this).addEventListener("the-graph-node-remove",this.removeNode)},componentWillUnmount:function(){this.mounted=!1},componentWillReceiveProps:function(e){this.subscribeGraph(this.props.graph,e.graph),this.markDirty()},subscribeGraph:function(e,t){e&&(e.removeListener("addEdge",this.resetPortRoute),e.removeListener("changeEdge",this.resetPortRoute),e.removeListener("removeEdge",this.resetPortRoute),e.removeListener("removeInitial",this.resetPortRoute),e.removeListener("changeNode",this.markDirty),e.removeListener("changeInport",this.markDirty),e.removeListener("changeOutport",this.markDirty),e.removeListener("endTransaction",this.markDirty)),t&&(t.on("addEdge",this.resetPortRoute),t.on("changeEdge",this.resetPortRoute),t.on("removeEdge",this.resetPortRoute),t.on("removeInitial",this.resetPortRoute),t.on("changeNode",this.markDirty),t.on("changeInport",this.markDirty),t.on("changeOutport",this.markDirty),t.on("endTransaction",this.markDirty))},edgePreview:null,edgeStart:function(e){var t,r=e.detail.port;if(this.state.edgePreview&&this.state.edgePreview.isIn!==e.detail.isIn){var n=this.state.edgePreview;return e.detail.isIn?n.to=r:n.from=r,this.addEdge(n),void this.cancelPreviewEdge()}(t=e.detail.isIn?{to:r}:{from:r}).isIn=e.detail.isIn,t.metadata={route:e.detail.route},t.type=e.detail.port.type;var i=o.findDOMNode(this.props.app);i.addEventListener("mousemove",this.renderPreviewEdge),i.addEventListener("panmove",this.renderPreviewEdge),i.addEventListener("tap",this.cancelPreviewEdge),this.setState({edgePreview:t})},cancelPreviewEdge:function(e){var t=o.findDOMNode(this.props.app);t.removeEventListener("mousemove",this.renderPreviewEdge),t.removeEventListener("panmove",this.renderPreviewEdge),t.removeEventListener("tap",this.cancelPreviewEdge),this.state.edgePreview&&(this.setState({edgePreview:null}),this.markDirty())},renderPreviewEdge:function(e){e.gesture&&(e=e.gesture.srcEvent);var t=e.x||e.clientX||0,r=e.y||e.clientY||0;e.touches&&e.touches.length&&(t=e.touches[0].clientX,r=e.touches[0].clientY),t-=this.props.app.state.offsetX||0,r-=this.props.app.state.offsetY||0;var n=this.props.app.state.scale;this.setState({edgePreviewX:(t-this.props.app.state.x)/n,edgePreviewY:(r-this.props.app.state.y)/n}),this.markDirty()},addEdge:function(e){this.props.graph.addEdge(e.from.process,e.from.port,e.to.process,e.to.port,e.metadata)},moveGroup:function(e,r,n){for(var o=this.props.graph,i=e.length,s=0;s<i;s++){var a=o.getNode(e[s]);if(a)if(void 0!==r)o.setNodeMetadata(a.id,{x:a.metadata.x+r,y:a.metadata.y+n});else{var c=t.config.nodeHeight/2;o.setNodeMetadata(a.id,{x:Math.round(a.metadata.x/c)*c,y:Math.round(a.metadata.y/c)*c})}}},getComponentInfo:function(e){return console.error("DEPRECATED: getComponentInfo() will be removed in next version of the-graph. Use 'library' in props instead"),this.props.library[e]},portInfo:{},getPorts:function(e,t,r){var n=e.getNode(t),o=this.portInfo[t];if(!o){var i={},s={};if(r&&this.props.library){var a,c,u,p=this.props.library[r];if(!p)return{inports:i,outports:s};for(a=0,u=p.outports.length;a<u;a++)(c=p.outports[a]).name&&(s[c.name]={label:c.name,type:c.type,x:n.metadata.width,y:n.metadata.height/(u+1)*(a+1)});for(a=0,u=p.inports.length;a<u;a++)(c=p.inports[a]).name&&(i[c.name]={label:c.name,type:c.type,x:0,y:n.metadata.height/(u+1)*(a+1)})}o={inports:i,outports:s},this.portInfo[t]=o}return o},getNodeOutport:function(e,r,n,o,i){var s=this.getPorts(e,r,i);s.outports[n]||(s.outports[n]={label:n,x:t.config.nodeWidth,y:t.config.nodeHeight/2},this.dirty=!0);var a=s.outports[n];return void 0!==o&&(a.route=o),a},getNodeInport:function(e,r,n,o,i){var s=this.getPorts(e,r,i);s.inports[n]||(s.inports[n]={label:n,x:0,y:t.config.nodeHeight/2},this.dirty=!0);var a=s.inports[n];return void 0!==o&&(a.route=o),a},resetPortRoute:function(e){if(e.from&&e.from.node){var t=this.portInfo[e.from.node];if(t){t.dirty=!0;var r=t.outports[e.from.port];r&&(r.route=null)}}if(e.to&&e.to.node){var n=this.portInfo[e.to.node];if(n){n.dirty=!0;var o=n.inports[e.to.port];o&&(o.route=null)}}},graphOutports:{},getGraphOutport:function(e){var r=this.graphOutports[e];return r||((r={inports:{},outports:{}}).inports[e]={label:e,type:"all",route:5,x:0,y:t.config.nodeHeight/2},this.graphOutports[e]=r),r},graphInports:{},getGraphInport:function(e){var r=this.graphInports[e];return r||((r={inports:{},outports:{}}).outports[e]={label:e,type:"all",route:2,x:t.config.nodeWidth,y:t.config.nodeHeight/2},this.graphInports[e]=r),r},setSelectedNodes:function(e){this.setState({selectedNodes:e}),this.markDirty()},setErrorNodes:function(e){this.setState({errorNodes:e}),this.markDirty()},setSelectedEdges:function(e){this.setState({selectedEdges:e}),this.markDirty()},setAnimatedEdges:function(e){this.setState({animatedEdges:e}),this.markDirty()},updateIcon:function(e,t){console.error("DEPRECATED: updateIcon() will be removed in next version of the-graph. Pass nodeIcons through props instead"),this.props.nodeIcons[e]=t,this.markDirty()},dirty:!1,libraryDirty:!1,markDirty:function(e){e&&e.libraryDirty&&(this.libraryDirty=!0),window.requestAnimationFrame(this.triggerRender)},triggerRender:function(e){this.mounted&&(this.dirty||(this.dirty=!0,this.forceUpdate()))},shouldComponentUpdate:function(){return this.dirty},render:function(){this.dirty=!1;var e=this,r=this.props.graph,n=(this.props.library,[]);this.libraryDirty&&(this.libraryDirty=!1,this.portInfo={});var o=null;this.state.edgePreview&&this.state.edgePreview.type&&(o={type:this.state.edgePreview.type,isIn:!this.state.edgePreview.isIn});var i=r.nodes.map(function(i){var s=e.props.library[i.component];if(!s)throw new Error("Component "+i.component+" is not in library");var a=i.id;if(i.metadata||(i.metadata={}),void 0===i.metadata.x&&(i.metadata.x=0),void 0===i.metadata.y&&(i.metadata.y=0),void 0===i.metadata.width&&(i.metadata.width=t.config.nodeWidth),i.metadata.height=t.config.nodeHeight,t.config.autoSizeNode&&s){var c=Math.max(s.inports.length,s.outports.length);if(c>t.config.maxPortCount){var u=c-t.config.maxPortCount;i.metadata.height=t.config.nodeHeight+u*t.config.nodeHeightIncrement}}i.metadata.label&&""!==i.metadata.label||(i.metadata.label=a);var p="cog",l="";e.props.nodeIcons[a]?p=e.props.nodeIcons[a]:s&&s.icon?p=s.icon:s&&s.iconsvg&&(l=s.iconsvg);var h=!0===e.state.selectedNodes[a];h&&n.push(a);var d={key:a,nodeID:a,x:i.metadata.x,y:i.metadata.y,label:i.metadata.label,sublabel:i.metadata.sublabel||i.component,width:i.metadata.width,height:i.metadata.height,app:e.props.app,graphView:e,graph:r,node:i,icon:p,iconsvg:l,ports:e.getPorts(r,a,i.component),onNodeSelection:e.props.onNodeSelection,selected:h,error:!0===e.state.errorNodes[a],showContext:e.props.showContext,highlightPort:o,allowEdgeStart:e.props.allowEdgeStart};return d=t.merge(t.config.graph.node,d),t.factories.graph.createGraphNode.call(this,d)}),a=r.edges.map(function(n){var o=r.getNode(n.from.node),i=r.getNode(n.to.node);if(o&&i){var s=0;n.metadata&&n.metadata.route&&(s=n.metadata.route);var a=e.getNodeOutport(r,n.from.node,n.from.port,s,o.component),c=e.getNodeInport(r,n.to.node,n.to.port,s,i.component),u=o.metadata.label+"() "+n.from.port.toUpperCase()+(n.from.hasOwnProperty("index")?"["+n.from.index+"]":"")+" -> "+n.to.port.toUpperCase()+(n.to.hasOwnProperty("index")?"["+n.to.index+"]":"")+" "+i.metadata.label+"()",p=n.from.node+"() "+n.from.port.toUpperCase()+(n.from.hasOwnProperty("index")?"["+n.from.index+"]":"")+" -> "+n.to.port.toUpperCase()+(n.to.hasOwnProperty("index")?"["+n.to.index+"]":"")+" "+n.to.node+"()",l={key:p,edgeID:p,graph:r,edge:n,app:e.props.app,sX:o.metadata.x+o.metadata.width,sY:o.metadata.y+a.y,tX:i.metadata.x,tY:i.metadata.y+c.y,label:u,route:s,onEdgeSelection:e.props.onEdgeSelection,selected:-1!==e.state.selectedEdges.indexOf(n),animated:-1!==e.state.animatedEdges.indexOf(n),showContext:e.props.showContext};return l=t.merge(t.config.graph.edge,l),t.factories.graph.createGraphEdge.call(this,l)}}),c=r.initializers.map(function(n){var o=r.getNode(n.to.node);if(o){var i=e.getNodeInport(r,n.to.node,n.to.port,0,o.component),s=o.metadata.x,a=o.metadata.y+i.y,c=n.from.data,u=typeof c,p={graph:r,label:!0===c||!1===c||"number"===u||"string"===u?c:u,x:s,y:a};return p=t.merge(t.config.graph.iip,p),t.factories.graph.createGraphIIP.call(this,p)}}),u=Object.keys(r.inports).map(function(n){var o=r.inports[n],i=n,s=o.process,c=o.port;o.metadata||(o.metadata={x:0,y:0});var u=o.metadata;u.x||(u.x=0),u.y||(u.y=0),u.width||(u.width=t.config.nodeWidth),u.height||(u.height=t.config.nodeHeight);var p=e.portInfo[s];if(p){var l=p.inports[c];if(l){var h=r.getNode(s);if(h){var d={key:"inport.node."+n,export:o,exportKey:n,x:u.x,y:u.y,width:u.width,height:u.height,label:i,app:e.props.app,graphView:e,graph:r,node:{},ports:e.getGraphInport(n),isIn:!0,icon:u.icon?u.icon:"sign-in",showContext:e.props.showContext};d=t.merge(t.config.graph.inportNode,d);var f={key:"inport.edge."+n,export:o,exportKey:n,graph:r,app:e.props.app,edge:{},route:u.route?u.route:2,isIn:!0,label:"export in "+i.toUpperCase()+" -> "+c.toUpperCase()+" "+h.metadata.label,sX:d.x+t.config.nodeWidth,sY:d.y+t.config.nodeHeight/2,tX:h.metadata.x+l.x,tY:h.metadata.y+l.y,showContext:e.props.showContext,allowEdgeStart:e.props.allowEdgeStart};return f=t.merge(t.config.graph.inportEdge,f),a.unshift(t.factories.graph.createGraphEdge.call(this,f)),t.factories.graph.createGraphNode.call(this,d)}console.warn("Node "+s+" not found for graph inport "+i)}else console.warn("Port "+s+"."+c+" not found for graph inport "+i)}else console.warn("Node "+s+" not found for graph inport "+i)}),p=Object.keys(r.outports).map(function(n){var o=r.outports[n],i=n,s=o.process,c=o.port;o.metadata||(o.metadata={x:0,y:0});var u=o.metadata;u.x||(u.x=0),u.y||(u.y=0),u.width||(u.width=t.config.nodeWidth),u.height||(u.height=t.config.nodeHeight);var p=e.portInfo[s];if(p){var l=p.outports[c];if(l){var h=r.getNode(s);if(h){var d={key:"outport.node."+n,export:o,exportKey:n,x:u.x,y:u.y,width:u.width,height:u.height,label:i,app:e.props.app,graphView:e,graph:r,node:{},ports:e.getGraphOutport(n),isIn:!1,icon:u.icon?u.icon:"sign-out",showContext:e.props.showContext};d=t.merge(t.config.graph.outportNode,d);var f={key:"outport.edge."+n,export:o,exportKey:n,graph:r,app:e.props.app,edge:{},route:u.route?u.route:4,isIn:!1,label:h.metadata.label+" "+c.toUpperCase()+" -> "+i.toUpperCase()+" export out",sX:h.metadata.x+l.x,sY:h.metadata.y+l.y,tX:d.x,tY:d.y+t.config.nodeHeight/2,showContext:e.props.showContext,allowEdgeStart:e.props.allowEdgeStart};return f=t.merge(t.config.graph.outportEdge,f),a.unshift(t.factories.graph.createGraphEdge.call(this,f)),t.factories.graph.createGraphNode.call(this,d)}console.warn("Node "+s+" not found for graph outport "+i)}else console.warn("Port "+s+"."+c+" not found for graph outport "+i)}else console.warn("Node "+s+" not found for graph outport "+i)}),l=r.groups.map(function(n){if(!(n.nodes.length<1)){var o=s.findMinMax(r,n.nodes);if(o){var i={key:"group."+n.name,graph:r,item:n,app:e.props.app,minX:o.minX,minY:o.minY,maxX:o.maxX,maxY:o.maxY,scale:e.props.scale,label:n.name,nodes:n.nodes,description:n.metadata.description,color:n.metadata.color,triggerMoveGroup:e.moveGroup,showContext:e.props.showContext};return i=t.merge(t.config.graph.nodeGroup,i),t.factories.graph.createGraphGroup.call(this,i)}}});if(this.state.displaySelectionGroup&&n.length>=2){var h=s.findMinMax(r,n);if(h){var d={name:"selection",nodes:n,metadata:{color:1}},f={graph:r,app:e.props.app,item:d,minX:h.minX,minY:h.minY,maxX:h.maxX,maxY:h.maxY,scale:e.props.scale,color:d.metadata.color,triggerMoveGroup:e.moveGroup,showContext:e.props.showContext};f=t.merge(t.config.graph.selectionGroup,f);var m=t.factories.graph.createGraphGroup.call(this,f);l.push(m)}}var g=this.state.edgePreview;if(g){var y;if(g.from){var v=r.getNode(g.from.process),b=this.getNodeOutport(r,g.from.process,g.from.port);y={sX:v.metadata.x+v.metadata.width,sY:v.metadata.y+b.y,tX:this.state.edgePreviewX,tY:this.state.edgePreviewY,route:g.metadata.route}}else{var w=r.getNode(g.to.process),E=this.getNodeInport(r,g.to.process,g.to.port);y={sX:this.state.edgePreviewX,sY:this.state.edgePreviewY,tX:w.metadata.x,tY:w.metadata.y+E.y,route:g.metadata.route}}y=t.merge(t.config.graph.edgePreview,y);var x=t.factories.graph.createGraphEdgePreview.call(this,y);a.push(x)}var C=t.merge(t.config.graph.groupsGroup,{children:l}),S=t.factories.graph.createGraphGroupsGroup.call(this,C),k=t.merge(t.config.graph.edgesGroup,{children:a}),P=t.factories.graph.createGraphEdgesGroup.call(this,k),_=t.merge(t.config.graph.iipsGroup,{children:c}),A=t.factories.graph.createGraphIIPGroup.call(this,_),D=t.merge(t.config.graph.nodesGroup,{children:i}),O=t.factories.graph.createGraphNodesGroup.call(this,D),T=t.merge(t.config.graph.inportsGroup,{children:u}),N=t.factories.graph.createGraphInportsGroup.call(this,T),I=t.merge(t.config.graph.outportsGroup,{children:p}),R=[S,P,A,O,N,t.factories.graph.createGraphGroupsGroup.call(this,I)],j=this.state.forceSelection||n.length>0?" selection":"",F=t.merge(t.config.graph.container,{className:"graph"+j});return t.factories.graph.createGraphContainerGroup.call(this,F,R)}}))}},function(e,t,r){var n=r(7),o=r(13),i=r(10),s=r(77).Tooltip;e.exports.register=function(e){var t=e.TheGraph;function r(e,t,r,n,o){var i=n*e*2/3,s=e/2;return{className:o,height:1.1*e,width:i,rx:s,ry:s,x:t-=i/2,y:r-=e/2}}t.config.node={snap:t.config.nodeSize,container:{},background:{className:"node-bg"},border:{className:"node-border drag",rx:t.config.nodeRadius,ry:t.config.nodeRadius},innerRect:{className:"node-rect drag",x:3,y:3,rx:t.config.nodeRadius-2,ry:t.config.nodeRadius-2},icon:{ref:"icon",className:"icon node-icon drag"},iconsvg:{className:"icon node-icon drag"},inports:{className:"inports"},outports:{className:"outports"},labelBackground:{className:"node-label-bg"},labelRect:{className:"text-bg-rect"},labelText:{className:"node-label"},sublabelBackground:{className:"node-sublabel-bg"},sublabelRect:{className:"text-bg-rect"},sublabelText:{className:"node-sublabel"}},t.factories.node={createNodeGroup:t.factories.createGroup,createNodeBackgroundRect:t.factories.createRect,createNodeBorderRect:t.factories.createRect,createNodeInnerRect:t.factories.createRect,createNodeIconText:t.factories.createText,createNodeIconSVG:t.factories.createImg,createNodeInportsGroup:t.factories.createGroup,createNodeOutportsGroup:t.factories.createGroup,createNodeLabelGroup:t.factories.createGroup,createNodeLabelRect:t.factories.createRect,createNodeLabelText:t.factories.createText,createNodeSublabelGroup:t.factories.createGroup,createNodeSublabelRect:t.factories.createRect,createNodeSublabelText:t.factories.createText,createNodePort:function(e){return t.Port(e)}},t.Node=n.createFactory(i({displayName:"TheGraphNode",mixins:[s],getInitialState:function(){return{moving:!1,lastTrackX:null,lastTrackY:null}},componentDidMount:function(){var e=o.findDOMNode(this);e.addEventListener("panstart",this.onTrackStart),this.props.onNodeSelection&&e.addEventListener("tap",this.onNodeSelection),this.props.showContext&&(e.addEventListener("contextmenu",this.showContext),e.addEventListener("press",this.showContext))},onNodeSelection:function(e){e.stopPropagation();var r=t.metaKeyPressed||"touch"===e.pointerType;this.props.onNodeSelection(this.props.nodeID,this.props.node,r)},onTrackStart:function(e){if(e.stopPropagation(),!this.props.app.menuShown&&!this.props.app.pinching){var t=o.findDOMNode(this);t.addEventListener("panmove",this.onTrack),t.addEventListener("panend",this.onTrackEnd),t.addEventListener("pancancel",this.onTrackEnd),this.props.export?this.props.graph.startTransaction("moveexport"):(!0===this.state.moving&&(this.setState({moving:!1}),this.setState({lastTrackX:null,lastTrackY:null}),this.props.graph.endTransaction("movenode")),this.props.graph.startTransaction("movenode")),this.setState({moving:!0}),this.setState({lastTrackX:0,lastTrackY:0})}},onTrack:function(e){e.stopPropagation();var t=e.gesture.deltaX,r=e.gesture.deltaY,n=t-this.state.lastTrackX,o=r-this.state.lastTrackY;this.setState({lastTrackX:t,lastTrackY:r});var i=this.props.app.state.scale,s=Math.round(n/i),a=Math.round(o/i);if(this.props.export){var c={x:this.props.export.metadata.x+s,y:this.props.export.metadata.y+a};this.props.isIn?this.props.graph.setInportMetadata(this.props.exportKey,c):this.props.graph.setOutportMetadata(this.props.exportKey,c)}else this.props.graph.setNodeMetadata(this.props.nodeID,{x:this.props.node.metadata.x+s,y:this.props.node.metadata.y+a})},onTrackEnd:function(e){e.stopPropagation(),this.setState({moving:!1}),this.setState({lastTrackX:null,lastTrackY:null});var r=o.findDOMNode(this);r.removeEventListener("panmove",this.onTrack),r.removeEventListener("panend",this.onTrackEnd),r.removeEventListener("pancanel",this.onTrackEnd);var n=t.config.node.snap/2;if(this.props.export){var i={x:Math.round(this.props.export.metadata.x/n)*n,y:Math.round(this.props.export.metadata.y/n)*n};this.props.isIn?this.props.graph.setInportMetadata(this.props.exportKey,i):this.props.graph.setOutportMetadata(this.props.exportKey,i)}else this.props.graph.setNodeMetadata(this.props.nodeID,{x:Math.round(this.props.node.metadata.x/n)*n,y:Math.round(this.props.node.metadata.y/n)*n});this.props.export?this.props.graph.endTransaction("moveexport"):this.props.graph.endTransaction("movenode")},showContext:function(e){e.preventDefault(),e.stopPropagation(),e.preventTap&&e.preventTap(),e.gesture&&(e=e.gesture.srcEvent);var t=e.x||e.clientX||0,r=e.y||e.clientY||0;e.touches&&e.touches.length&&(t=e.touches[0].clientX,r=e.touches[0].clientY),this.props.showContext({element:this,type:this.props.export?this.props.isIn?"graphInport":"graphOutport":"node",x:t,y:r,graph:this.props.graph,itemKey:this.props.export?this.props.exportKey:this.props.nodeID,item:this.props.export?this.props.export:this.props.node})},getContext:function(e,r,n){if(this.props.export)return t.Menu({menu:e,options:r,triggerHideContext:n,label:this.props.exportKey});var o=r.x,i=r.y,s=this.props.app.state.scale,a=this.props.app.state.x,c=this.props.app.state.y,u=(this.props.x+this.props.width/2)*s+a-o,p=(this.props.y+this.props.height/2)*s+c-i,l=this.props.ports,h=this.props.nodeID,d=this.props.highlightPort;return this.props.graphView.state.edgePreview?this.props.graphView.state.edgePreview.isIn?t.NodeMenuPorts({ports:l.outports,triggerHideContext:n,isIn:!1,scale:s,processKey:h,deltaX:u,deltaY:p,translateX:o,translateY:i,nodeWidth:this.props.width,nodeHeight:this.props.height,highlightPort:d}):t.NodeMenuPorts({ports:l.inports,triggerHideContext:n,isIn:!0,scale:s,processKey:h,deltaX:u,deltaY:p,translateX:o,translateY:i,nodeWidth:this.props.width,nodeHeight:this.props.height,highlightPort:d}):t.NodeMenu({menu:e,options:r,triggerHideContext:n,label:this.props.label,graph:this.props.graph,graphView:this.props.graphView,node:this,icon:this.props.icon,ports:l,process:this.props.node,processKey:h,x:o,y:i,nodeWidth:this.props.width,nodeHeight:this.props.height,deltaX:u,deltaY:p,highlightPort:d})},getTooltipTrigger:function(){return o.findDOMNode(this)},shouldShowTooltip:function(){return this.props.app.state.scale<t.zbpNormal},shouldComponentUpdate:function(e,t){return e.x!==this.props.x||e.y!==this.props.y||e.icon!==this.props.icon||e.label!==this.props.label||e.sublabel!==this.props.sublabel||e.ports!==this.props.ports||e.selected!==this.props.selected||e.error!==this.props.error||e.highlightPort!==this.props.highlightPort||!0===e.ports.dirty},render:function(){this.props.ports.dirty&&(this.props.ports.dirty=!1);var e=this.props.label,n=this.props.sublabel;n&&n!==e||(n="");var o,i=this.props.x,s=this.props.y,a=this.props.width,c=this.props.height,u=this.props.nodeID,p=this.props.app,l=this.props.graph,h=this.props.node,d=void 0!==this.props.export,f=this.props.showContext,m=this.props.highlightPort,g=this.props.ports.inports;(o=Object.keys(g)).length;var y=o.map(function(e){var r=g[e],n={app:p,graph:l,node:h,key:u+".in."+r.label,label:r.label,processKey:u,isIn:!0,isExport:d,nodeX:i,nodeY:s,nodeWidth:a,nodeHeight:c,x:r.x,y:r.y,port:{process:u,port:r.label,type:r.type},highlightPort:m,route:r.route,showContext:f,allowEdgeStart:this.props.allowEdgeStart};return t.factories.node.createNodePort(n)}.bind(this)),v=this.props.ports.outports;(o=Object.keys(v)).length;var b,w=o.map(function(e){var r=v[e],n={app:p,graph:l,node:h,key:u+".out."+r.label,label:r.label,processKey:u,isIn:!1,isExport:d,nodeX:i,nodeY:s,nodeWidth:a,nodeHeight:c,x:r.x,y:r.y,port:{process:u,port:r.label,type:r.type},highlightPort:m,route:r.route,showContext:f,allowEdgeStart:this.props.allowEdgeStart};return t.factories.node.createNodePort(n)}.bind(this)),E=t.FONT_AWESOME[this.props.icon];if(E||(E=t.FONT_AWESOME.cog),this.props.iconsvg&&""!==this.props.iconsvg){var x=t.merge(t.config.node.iconsvg,{src:this.props.iconsvg,x:t.config.nodeRadius-4,y:t.config.nodeRadius-4,width:this.props.width-10,height:this.props.height-10});b=t.factories.node.createNodeIconSVG.call(this,x)}else{var C=t.merge(t.config.node.icon,{x:this.props.width/2,y:this.props.height/2,children:E});b=t.factories.node.createNodeIconText.call(this,C)}var S=t.merge(t.config.node.background,{width:this.props.width,height:this.props.height+25}),k=t.factories.node.createNodeBackgroundRect.call(this,S),P=t.merge(t.config.node.border,{width:this.props.width,height:this.props.height}),_=t.factories.node.createNodeBorderRect.call(this,P),A=t.merge(t.config.node.innerRect,{width:this.props.width-6,height:this.props.height-6}),D=t.factories.node.createNodeInnerRect.call(this,A),O=t.merge(t.config.node.inports,{children:y}),T=t.factories.node.createNodeInportsGroup.call(this,O),N=t.merge(t.config.node.outports,{children:w}),I=t.factories.node.createNodeOutportsGroup.call(this,N),R=t.merge(t.config.node.labelText,{x:this.props.width/2,y:this.props.height+15,children:e}),j=t.factories.node.createNodeLabelText.call(this,R),F=r(14,this.props.width/2,this.props.height+15,e.length,t.config.node.labelRect.className);F=t.merge(t.config.node.labelRect,F);var M=t.factories.node.createNodeLabelRect.call(this,F),L=t.factories.node.createNodeLabelGroup.call(this,t.config.node.labelBackground,[M,j]),G=t.merge(t.config.node.sublabelText,{x:this.props.width/2,y:this.props.height+30,children:n}),B=t.factories.node.createNodeSublabelText.call(this,G),U=r(9,this.props.width/2,this.props.height+30,n.length,t.config.node.sublabelRect.className);U=t.merge(t.config.node.sublabelRect,U);var $=t.factories.node.createNodeSublabelRect.call(this,U),q=t.factories.node.createNodeSublabelGroup.call(this,t.config.node.sublabelBackground,[$,B]),z=this.props.app.state.scale,H={r:12*this.props.width/z,className:"eventcatcher"},V=t.factories.createCircle(H),X=[k,_,D,b,T,I,L,q];this.state.moving&&X.push(V);var W={className:"node drag"+(this.props.selected?" selected":"")+(this.props.error?" error":""),name:this.props.nodeID,key:this.props.nodeID,title:e,transform:"translate("+i+","+s+")"};return W=t.merge(t.config.node.container,W),t.factories.node.createNodeGroup.call(this,W,X)}}))}},function(e,t,r){var n=r(7),o=r(13),i=r(10);e.exports.register=function(e){var t=e.TheGraph;function r(e){return t.NodeMenuPorts(e)}t.config.nodeMenu={container:{className:"context-node"},inports:{},outports:{},menu:{x:0,y:0}},t.factories.nodeMenu={createNodeMenuGroup:t.factories.createGroup,createNodeMenuInports:r,createNodeMenuOutports:r,createNodeMenuMenu:function(e){return t.Menu(e)}},t.NodeMenu=n.createFactory(i({displayName:"TheGraphNodeMenu",radius:72,stopPropagation:function(e){e.stopPropagation()},componentDidMount:function(){o.findDOMNode(this).addEventListener("contextmenu",function(e){e.stopPropagation(),e.preventDefault()},!1)},render:function(){var e=this.props.node.props.app.state.scale,r=this.props.ports,n=this.props.deltaX,o=this.props.deltaY,i={ports:r.inports,isIn:!0,scale:e,processKey:this.props.processKey,deltaX:n,deltaY:o,nodeWidth:this.props.nodeWidth,nodeHeight:this.props.nodeHeight,highlightPort:this.props.highlightPort};i=t.merge(t.config.nodeMenu.inports,i);var s=t.factories.nodeMenu.createNodeMenuInports.call(this,i),a={ports:r.outports,isIn:!1,scale:e,processKey:this.props.processKey,deltaX:n,deltaY:o,nodeWidth:this.props.nodeWidth,nodeHeight:this.props.nodeHeight,highlightPort:this.props.highlightPort};a=t.merge(t.config.nodeMenu.outports,a);var c=t.factories.nodeMenu.createNodeMenuOutports.call(this,a),u={menu:this.props.menu,options:this.props.options,triggerHideContext:this.props.triggerHideContext,icon:this.props.icon,label:this.props.label};u=t.merge(t.config.nodeMenu.menu,u);var p=[s,c,t.factories.nodeMenu.createNodeMenuMenu.call(this,u)],l={transform:"translate("+this.props.x+","+this.props.y+")",children:p};return l=t.merge(t.config.nodeMenu.container,l),t.factories.nodeMenu.createNodeMenuGroup.call(this,l)}}))}},function(e,t,r){var n=r(7),o=r(13),i=r(10);e.exports.register=function(e){var t=e.TheGraph;t.config.nodeMenuPort={container:{},backgroundRect:{rx:t.config.nodeRadius,ry:t.config.nodeRadius,height:t.contextPortSize-1},circle:{r:10},text:{}},t.factories.nodeMenuPort={createNodeMenuPortGroup:t.factories.createGroup,createNodeMenuBackgroundRect:t.factories.createRect,createNodeMenuPortCircle:t.factories.createCircle,createNodeMenuPortText:t.factories.createText},t.NodeMenuPort=n.createFactory(i({displayName:"TheGraphNodeMenuPort",componentDidMount:function(){o.findDOMNode(this).addEventListener("tap",this.edgeStart)},edgeStart:function(e){e.stopPropagation();var t={process:this.props.processKey,port:this.props.label,type:this.props.port.type},r=new CustomEvent("the-graph-edge-start",{detail:{isIn:this.props.isIn,port:t,route:this.props.route},bubbles:!0});o.findDOMNode(this).dispatchEvent(r)},render:function(){var e=this.props.label.length,r=e>12?8*e+40:120,n=this.props.highlightPort,o={className:"context-port-bg"+(n&&n.isIn===this.props.isIn&&n.type===this.props.port.type?" highlight":""),x:this.props.x+(this.props.isIn?-r:0),y:this.props.y-t.contextPortSize/2,width:r};o=t.merge(t.config.nodeMenuPort.backgroundRect,o);var i=t.factories.nodeMenuPort.createNodeMenuBackgroundRect.call(this,o),s={className:"context-port-hole stroke route"+this.props.route,cx:this.props.x,cy:this.props.y};s=t.merge(t.config.nodeMenuPort.circle,s);var a=t.factories.nodeMenuPort.createNodeMenuPortCircle.call(this,s),c={className:"context-port-label fill route"+this.props.route,x:this.props.x+(this.props.isIn?-20:20),y:this.props.y,children:this.props.label.replace(/(.*)\/(.*)(_.*)\.(.*)/,"$2.$4")};c=t.merge(t.config.nodeMenuPort.text,c);var u=[i,a,t.factories.nodeMenuPort.createNodeMenuPortText.call(this,c)],p=t.merge(t.config.nodeMenuPort.container,{className:"context-port click context-port-"+(this.props.isIn?"in":"out")});return t.factories.nodeMenuPort.createNodeMenuPortGroup.call(this,p,u)}}))}},function(e,t,r){var n=r(7),o=r(10);e.exports.register=function(e){var t=e.TheGraph;t.config.nodeMenuPorts={container:{},linesGroup:{className:"context-ports-lines"},portsGroup:{className:"context-ports-ports"},portPath:{className:"context-port-path"},nodeMenuPort:{}},t.factories.menuPorts={createNodeMenuPortsGroup:t.factories.createGroup,createNodeMenuPortsLinesGroup:t.factories.createGroup,createNodeMenuPortsPortsGroup:t.factories.createGroup,createNodeMenuPortsPortPath:t.factories.createPath,createNodeMenuPortsNodeMenuPort:function(e){return t.NodeMenuPort(e)}},t.NodeMenuPorts=n.createFactory(o({displayName:"TheGraphNodeMenuPorts",render:function(){for(var e=[],r=[],n=this.props.scale,o=this.props.ports,i=this.props.deltaX,s=this.props.deltaY,a=Object.keys(this.props.ports),c=a.length*t.contextPortSize,u=a.length,p=0;p<u;p++){var l=a[p],h=o[l],d=this.props.isIn?-100:100,f=0-c/2+p*t.contextPortSize+t.contextPortSize/2,m=(h.x-this.props.nodeWidth/2)*n+i,g=(h.y-this.props.nodeHeight/2)*n+s,y=t.merge(t.config.nodeMenuPorts.portPath,{d:["M",m,g,"L",d,f].join(" ")}),v=t.factories.menuPorts.createNodeMenuPortsPortPath.call(this,y),b={label:l,port:h,processKey:this.props.processKey,isIn:this.props.isIn,x:d,y:f,route:h.route,highlightPort:this.props.highlightPort};b=t.merge(t.config.nodeMenuPorts.nodeMenuPort,b);var w=t.factories.menuPorts.createNodeMenuPortsNodeMenuPort.call(this,b);r.push(v),e.push(w)}var E="";void 0!==this.props.translateX&&(E="translate("+this.props.translateX+","+this.props.translateY+")");var x=t.merge(t.config.nodeMenuPorts.linesGroup,{children:r}),C=t.factories.menuPorts.createNodeMenuPortsLinesGroup.call(this,x),S=t.merge(t.config.nodeMenuPorts.portsGroup,{children:e}),k=[C,t.factories.menuPorts.createNodeMenuPortsGroup.call(this,S)],P={className:"context-ports context-ports-"+(this.props.isIn?"in":"out"),transform:E};return P=t.merge(t.config.nodeMenuPorts.container,P),t.factories.menuPorts.createNodeMenuPortsGroup.call(this,P,k)}}))}},function(e,t,r){var n=r(7),o=r(13),i=r(10),s=r(77).Tooltip,a=r(108);e.exports.register=function(e){var t=e.TheGraph;t.config.port={container:{className:"port arrow"},backgroundCircle:{className:"port-circle-bg"},arc:{className:"port-arc"},innerCircle:{ref:"circleSmall"},text:{ref:"label",className:"port-label drag"}},t.factories.port={createPortGroup:t.factories.createGroup,createPortBackgroundCircle:t.factories.createCircle,createPortArc:t.factories.createPath,createPortInnerCircle:t.factories.createCircle,createPortLabelText:t.factories.createText},t.Port=n.createFactory(i({displayName:"TheGraphPort",mixins:[s],componentDidMount:function(){var e=o.findDOMNode(this);e.addEventListener("tap",this.edgeStart),e.addEventListener("panstart",this.edgeStart),e.addEventListener("panend",this.triggerDropOnTarget),e.addEventListener("the-graph-edge-drop",this.edgeStart),this.props.showContext&&(e.addEventListener("contextmenu",this.showContext),e.addEventListener("press",this.showContext))},getTooltipTrigger:function(){return o.findDOMNode(this)},shouldShowTooltip:function(){return this.props.app.state.scale<t.zbpBig||this.props.label.length>8},showContext:function(e){if(!(this.props.isExport||e&&e.target===o.findDOMNode(this.refs.label))){e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventTap&&e.preventTap(),e.gesture&&(e=e.gesture.srcEvent);var t=e.x||e.clientX||0,r=e.y||e.clientY||0;e.touches&&e.touches.length&&(t=e.touches[0].clientX,r=e.touches[0].clientY),this.props.showContext({element:this,type:this.props.isIn?"nodeInport":"nodeOutport",x:t,y:r,graph:this.props.graph,itemKey:this.props.label,item:this.props.port})}},getContext:function(e,r,n){return t.Menu({menu:e,options:r,label:this.props.label,triggerHideContext:n})},edgeStart:function(e){if(!this.props.isExport&&this.props.allowEdgeStart&&(!e||e.target!==o.findDOMNode(this.refs.label))){e.stopPropagation&&e.stopPropagation();var t=new CustomEvent("the-graph-edge-start",{detail:{isIn:this.props.isIn,port:this.props.port,route:this.props.route},bubbles:!0});o.findDOMNode(this).dispatchEvent(t)}},triggerDropOnTarget:function(e){if(e.relatedTarget){var t=new CustomEvent("the-graph-edge-drop",{detail:null,bubbles:!0});e.relatedTarget.dispatchEvent(t)}},render:function(){var e;this.props.label.length>7&&(e={fontSize:30/(4*this.props.label.length)*6+"px"});var r=4,n=this.props.highlightPort,o=a.inport,i=a.outport;!n||n.isIn!==this.props.isIn||n.type!==this.props.port.type&&"any"!==this.props.port.type||(r=6,o=a.inportBig,i=a.outportBig);var s=t.merge(t.config.port.backgroundCircle,{r:r+1}),c=t.factories.port.createPortBackgroundCircle.call(this,s),u=t.merge(t.config.port.arc,{d:this.props.isIn?o:i}),p=t.factories.port.createPortArc.call(this,u),l={className:"port-circle-small fill route"+this.props.route,r:r-1.5};l=t.merge(t.config.port.innerCircle,l);var h=t.factories.port.createPortInnerCircle.call(this,l),d={x:this.props.isIn?5:-5,style:e,children:this.props.label};d=t.merge(t.config.port.text,d);var f=[c,p,h,t.factories.port.createPortLabelText.call(this,d)],m=t.merge(t.config.port.container,{title:this.props.label,transform:"translate("+this.props.x+","+this.props.y+")"});return t.factories.port.createPortGroup.call(this,m,f)}})),t.Port.defaultProps={allowEdgeStart:!0}}},function(e,t,r){var n=r(7),o=r(13),i=r(10),s=r(77).Tooltip;e.exports.register=function(e){var t=e.TheGraph;t.config.edge={curve:t.config.nodeSize,container:{className:"edge"},backgroundPath:{className:"edge-bg"},foregroundPath:{ref:"route",className:"edge-fg stroke route"},touchPath:{className:"edge-touch",ref:"touch"}},t.factories.edge={createEdgeGroup:t.factories.createGroup,createEdgeBackgroundPath:t.factories.createPath,createEdgeForegroundPath:t.factories.createPath,createEdgeTouchPath:t.factories.createPath,createEdgePathArray:function(e,t,r,n,o,i,s,a){return["M",e,t,"C",r,n,o,i,s,a]},createArrow:t.factories.createPolygon};var r=t.config.edge.curve,a=function(e,t,r,n,o,i,s,a,c){var u=1-e,p=n*e+i*u,l=o*e+s*u;return[((t*e+n*u)*e+p*u)*e+(p*e+(i*e+a*u)*u)*u,((r*e+o*u)*e+l*u)*e+(l*e+(s*e+c*u)*u)*u]};t.Edge=n.createFactory(i({displayName:"TheGraphEdge",mixins:[s],componentWillMount:function(){},componentDidMount:function(){var e=o.findDOMNode(this);this.props.onEdgeSelection&&e.addEventListener("tap",this.onEdgeSelection),this.props.showContext&&(e.addEventListener("contextmenu",this.showContext),e.addEventListener("press",this.showContext))},onEdgeSelection:function(e){e.stopPropagation();var r=t.metaKeyPressed||"touch"===e.pointerType;this.props.onEdgeSelection(this.props.edgeID,this.props.edge,r)},showContext:function(e){e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventTap&&e.preventTap(),e.gesture&&(e=e.gesture.srcEvent);var t=e.x||e.clientX||0,r=e.y||e.clientY||0;e.touches&&e.touches.length&&(t=e.touches[0].clientX,r=e.touches[0].clientY),this.props.showContext({element:this,type:this.props.export?this.props.isIn?"graphInport":"graphOutport":"edge",x:t,y:r,graph:this.props.graph,itemKey:this.props.export?this.props.exportKey:null,item:this.props.export?this.props.export:this.props.edge})},getContext:function(e,r,n){return t.Menu({menu:e,options:r,triggerHideContext:n,label:this.props.label,iconColor:this.props.route})},shouldComponentUpdate:function(e,t){return e.sX!==this.props.sX||e.sY!==this.props.sY||e.tX!==this.props.tX||e.tY!==this.props.tY||e.selected!==this.props.selected||e.animated!==this.props.animated||e.route!==this.props.route},getTooltipTrigger:function(){return o.findDOMNode(this.refs.touch)},shouldShowTooltip:function(){return!0},render:function(){var e,n,o,i,s=this.props.sX,c=this.props.sY,u=this.props.tX,p=this.props.tY;if(u-5<s){var l=(s-u)*r/200;Math.abs(p-c)<t.config.nodeSize/2?(e=s+l,n=c-l,o=u-l,i=p-l):(e=s+l,n=c+(p>c?l:-l),o=u-l,i=p+(p>c?-l:l))}else n=c,o=e=s+(u-s)/2,i=p;var h=t.factories.edge.createEdgePathArray(s,c,e,n,o,i,u,p);h=h.join(" ");var d=t.merge(t.config.edge.backgroundPath,{d:h}),f=t.factories.edge.createEdgeBackgroundPath(d),m=t.config.edge.foregroundPath.className+this.props.route,g=t.merge(t.config.edge.foregroundPath,{d:h,className:m}),y=t.factories.edge.createEdgeForegroundPath(g),v=t.merge(t.config.edge.touchPath,{d:h}),b=t.factories.edge.createEdgeTouchPath(v),w={className:"edge"+(this.props.selected?" selected":"")+(this.props.animated?" animated":""),title:this.props.label};w=t.merge(t.config.edge.container,w);var E=a(.5,s,c,e,n,o,i,u,p),x=function(t){return a(.5+t,s,c,e,n,o,i,u,p)},C=x(.01),S=x(-.01),k=1*(C[1]-S[1])/(C[0]-S[0]),P=E[1]-k*E[0],_=function(e,t,r,n,o,i){var s=e+o/Math.sqrt(1+r*r);return[s,Math.abs(r)===1/0?t+(i||1)*o:r*s+n]},A=12;C[0]>S[0]&&(A*=-1);var D=function(e,t,r,n){var o=-1/r,i=t-o*e;return[_(e,t,o,i,n/2),_(e,t,o,i,n/-2)]}((E=_(E[0],E[1],k,P,-1*A/2))[0],E[1],k,.9*A),O=C[1]>S[1]?-1:1,T=_(E[0],E[1],k,P,A,O);D.push(T);var N=D.map(function(e){return e.join(",")}).join(" "),I=t.factories.edge.createArrow({points:N,className:"arrow-bg"}),R=t.factories.edge.createArrow({points:N,className:"arrow fill route"+this.props.route});return t.factories.edge.createEdgeGroup(w,[f,I,y,b,R])}}))}},function(e,t,r){var n=r(7),o=r(10),i=r(185);e.exports.register=function(e){var t=e.TheGraph;t.config.iip={container:{className:"iip"},path:{className:"iip-path"},text:{className:"iip-info",height:5,halign:"right"}},t.factories.iip={createIIPContainer:t.factories.createGroup,createIIPPath:t.factories.createPath,createIIPText:function(e){return i(e)}};t.IIP=n.createFactory(o({displayName:"TheGraphIIP",shouldComponentUpdate:function(e,t){return e.x!==this.props.x||e.y!==this.props.y||e.label!==this.props.label},render:function(){var e=this.props.x,r=this.props.y,n=["M",e,r,"L",e-10,r].join(" "),o=this.props.label+"";o.length>12&&(o=o.slice(0,9)+"...");var i=t.merge(t.config.iip.path,{d:n}),s=t.factories.iip.createIIPPath.call(this,i),a=t.merge(t.config.iip.text,{x:e-10,y:r,text:o}),c=[s,t.factories.iip.createIIPText.call(this,a)],u=t.merge(t.config.iip.container,{title:this.props.label});return t.factories.iip.createIIPContainer.call(this,u,c)}}))}},function(e,t,r){var n=r(7),o=r(13),i=r(10);e.exports.register=function(e){var t=e.TheGraph;t.config.group={container:{className:"group"},boxRect:{rx:t.config.nodeRadius,ry:t.config.nodeRadius},labelText:{className:"group-label"},descriptionText:{className:"group-description"}},t.factories.group={createGroupGroup:t.factories.createGroup,createGroupBoxRect:t.factories.createRect,createGroupLabelText:t.factories.createText,createGroupDescriptionText:t.factories.createText},t.Group=n.createFactory(i({displayName:"TheGraphGroup",getInitialState:function(){return{moving:!1,lastTrackX:null,lastTrackY:null}},componentDidMount:function(){o.findDOMNode(this.refs.events).addEventListener("panstart",this.onTrackStart);var e=o.findDOMNode(this);this.props.showContext&&(e.addEventListener("contextmenu",this.showContext),e.addEventListener("press",this.showContext))},showContext:function(e){e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventTap&&e.preventTap(),e.gesture&&(e=e.gesture.srcEvent);var t=e.x||e.clientX||0,r=e.y||e.clientY||0;e.touches&&e.touches.length&&(t=e.touches[0].clientX,r=e.touches[0].clientY),this.props.showContext({element:this,type:this.props.isSelectionGroup?"selection":"group",x:t,y:r,graph:this.props.graph,itemKey:this.props.label,item:this.props.item})},getContext:function(e,r,n){return t.Menu({menu:e,options:r,label:this.props.label,triggerHideContext:n})},onTrackStart:function(e){e.stopPropagation(),this.setState({moving:!0}),this.setState({lastTrackX:0,lastTrackY:0});var t=o.findDOMNode(this.refs.events);t.addEventListener("panmove",this.onTrack),t.addEventListener("panend",this.onTrackEnd),this.props.graph.startTransaction("movegroup")},onTrack:function(e){e.stopPropagation();var t=e.gesture.deltaX,r=e.gesture.deltaY,n=t-this.state.lastTrackX,o=r-this.state.lastTrackY,i=Math.round(n/this.props.scale),s=Math.round(o/this.props.scale);this.setState({lastTrackX:t,lastTrackY:r}),this.props.triggerMoveGroup(this.props.item.nodes,i,s)},onTrackEnd:function(e){this.setState({moving:!1}),e.stopPropagation(),this.props.triggerMoveGroup(this.props.item.nodes);var t=o.findDOMNode(this.refs.events);t.addEventListener("panmove",this.onTrack),t.addEventListener("panend",this.onTrackEnd),this.setState({lastTrackX:null,lastTrackY:null}),this.props.graph.endTransaction("movegroup")},render:function(){var e=this.props.minX-t.config.nodeWidth/2,r=this.props.minY-t.config.nodeHeight/2,n=this.props.color?this.props.color:0,o=this.props.isSelectionGroup?" selection drag":"",i={x:e,y:r,width:this.props.maxX-e+.5*t.config.nodeWidth,height:this.props.maxY-r+.75*t.config.nodeHeight,className:"group-box color"+n+o};i=t.merge(t.config.group.boxRect,i);var s=t.factories.group.createGroupBoxRect.call(this,i),a={x:e+t.config.nodeRadius,y:r+9,children:this.props.label};a=t.merge(t.config.group.labelText,a);var c=t.factories.group.createGroupLabelText.call(this,a),u={x:e+t.config.nodeRadius,y:r+24,children:this.props.description};u=t.merge(t.config.group.descriptionText,u);var p=t.factories.group.createGroupDescriptionText.call(this,u),l={className:"eventcatcher drag",ref:"events"};if(this.props.isSelectionGroup?(l.x=i.x,l.y=i.y,l.width=i.width,l.height=i.height):(l.x=i.x,l.y=i.y,l.width=24*this.props.label.length*.75,l.height=48),this.state.moving){l.width+=2e3,l.height+=2e3,l.x-=1e3,l.y-=1e3}var h=[s,c,p,t.factories.createRect(l)],d=t.merge(t.config.group.container,{});return t.factories.group.createGroupGroup.call(this,d,h)}}))}},function(e,t,r){var n=r(7),o=r(13),i=r(10),s=r(108),a=r(70),c=r(186),u=r(68),p={radius:72,positions:{n4IconX:0,n4IconY:-52,n4LabelX:0,n4LabelY:-35,s4IconX:0,s4IconY:52,s4LabelX:0,s4LabelY:35,e4IconX:45,e4IconY:-5,e4LabelX:45,e4LabelY:15,w4IconX:-45,w4IconY:-5,w4LabelX:-45,w4LabelY:15},container:{className:"context-menu"},arcPath:{className:"context-arc context-node-info-bg"},sliceIconText:{className:"icon context-icon context-node-info-icon"},sliceLabelText:{className:"context-arc-label"},sliceIconLabelText:{className:"context-arc-icon-label"},circleXPath:{className:"context-circle-x",d:"M -51 -51 L 51 51 M -51 51 L 51 -51"},outlineCircle:{className:"context-circle"},labelText:{className:"context-node-label"},iconRect:{className:"context-node-rect",x:-24,y:-24,width:48,height:48,rx:8,ry:8}},l={createMenuGroup:u.createGroup,createMenuSlice:function(e){var t=e.direction,r=a(p.arcPath,{d:s[t]}),n=[l.createMenuSliceArcPath(r)];if(this.props.menu[t]){var o=this.props.menu[t];if(o.icon){var i={x:p.positions[t+"IconX"],y:p.positions[t+"IconY"],children:c[o.icon]};i=a(p.sliceIconText,i),n.push(l.createMenuSliceIconText.call(this,i))}if(o.label){var u={x:p.positions[t+"IconX"],y:p.positions[t+"IconY"],children:o.label};u=a(p.sliceLabelText,u),n.push(l.createMenuSliceLabelText.call(this,u))}if(o.iconLabel){var h={x:p.positions[t+"LabelX"],y:p.positions[t+"LabelY"],children:o.iconLabel};h=a(p.sliceIconLabelText,h),n.push(l.createMenuSliceIconLabelText.call(this,h))}}var d={ref:t,className:"context-slice context-node-info"+(this.state[t+"tappable"]?" click":""),children:n};return d=a(p.container,d),l.createMenuGroup.call(this,d)},createMenuSliceArcPath:u.createPath,createMenuSliceText:u.createText,createMenuSliceIconText:u.createText,createMenuSliceLabelText:u.createText,createMenuSliceIconLabelText:u.createText,createMenuCircleXPath:u.createPath,createMenuOutlineCircle:u.createCircle,createMenuLabelText:u.createText,createMenuMiddleIconRect:u.createRect,createMenuMiddleIconText:u.createText};var h=n.createFactory(i({displayName:"TheGraphMenu",radius:p.radius,getInitialState:function(){return{n4tappable:this.props.menu.n4&&this.props.menu.n4.action,s4tappable:this.props.menu.s4&&this.props.menu.s4.action,e4tappable:this.props.menu.e4&&this.props.menu.e4.action,w4tappable:this.props.menu.w4&&this.props.menu.w4.action}},onTapN4:function(){var e=this.props.options;this.props.menu.n4.action(e.graph,e.itemKey,e.item),this.props.triggerHideContext()},onTapS4:function(){var e=this.props.options;this.props.menu.s4.action(e.graph,e.itemKey,e.item),this.props.triggerHideContext()},onTapE4:function(){var e=this.props.options;this.props.menu.e4.action(e.graph,e.itemKey,e.item),this.props.triggerHideContext()},onTapW4:function(){var e=this.props.options;this.props.menu.w4.action(e.graph,e.itemKey,e.item),this.props.triggerHideContext()},componentDidMount:function(){this.state.n4tappable&&this.refs.n4.addEventListener("tap",this.onTapN4),this.state.s4tappable&&this.refs.s4.addEventListener("tap",this.onTapS4),this.state.e4tappable&&this.refs.e4.addEventListener("tap",this.onTapE4),this.state.w4tappable&&this.refs.w4.addEventListener("tap",this.onTapW4),o.findDOMNode(this).addEventListener("contextmenu",function(e){e&&(e.stopPropagation(),e.preventDefault())},!1)},getPosition:function(){return{x:void 0!==this.props.x?this.props.x:this.props.options.x||0,y:void 0!==this.props.y?this.props.y:this.props.options.y||0}},render:function(){var e=this.props.menu,t=(this.props.options,this.getPosition()),r=a(p.circleXPath,{}),n=a(p.outlineCircle,{r:this.radius}),o=[l.createMenuSlice.call(this,{direction:"n4"}),l.createMenuSlice.call(this,{direction:"s4"}),l.createMenuSlice.call(this,{direction:"e4"}),l.createMenuSlice.call(this,{direction:"w4"}),l.createMenuCircleXPath.call(this,r),l.createMenuOutlineCircle.call(this,n)];if(this.props.label||e.icon){var i={x:0,y:0-this.radius-15,children:this.props.label?this.props.label:e.label};i=a(p.labelText,i),o.push(l.createMenuLabelText.call(this,i))}if(this.props.icon||e.icon){var s=void 0!==this.props.iconColor?this.props.iconColor:e.iconColor,u="";s&&(u=" fill route"+s);var h=a(p.iconRect,{}),d=l.createMenuMiddleIconRect.call(this,h),f={className:"icon context-node-icon"+u,children:c[this.props.icon?this.props.icon:e.icon]};f=a(p.iconText,f);var m=l.createMenuMiddleIconText.call(this,f);o.push(d,m)}var g={transform:"translate("+t.x+","+t.y+")",children:o};return g=a(p.container,g),l.createMenuGroup.call(this,g)}}));e.exports={Menu:h,config:p,factories:l}},function(e,t,r){var n=r(7),o=r(10),i=r(68),s=r(70),a={container:{},rect:{className:"tooltip-bg",x:0,y:-7,rx:3,ry:3,height:16},text:{className:"tooltip-label",ref:"label"}},c={createTooltipGroup:i.createGroup,createTooltipRect:i.createRect,createTooltipText:i.createText},u=n.createFactory(o({displayName:"TheGraphTooltip",render:function(){var e=s(a.rect,{width:6*this.props.label.length}),t=c.createTooltipRect.call(this,e),r=s(a.text,{children:this.props.label}),n=[t,c.createTooltipText.call(this,r)],o={className:"tooltip"+(this.props.visible?"":" hidden"),transform:"translate("+this.props.x+","+this.props.y+")"};return o=s(a.container,o),c.createTooltipGroup.call(this,o,n)}}));e.exports={config:a,factories:c,Tooltip:u}},function(e,t,r){var n=r(7),o=r(10),i=r(107),s=r(187);function a(e,t,r){e.clearRect(0,0,r.width,r.height),e.fillStyle=r.outsideFill;var n=Math.round((r.viewrectangle[0]/r.scale-r.thumbrectangle[0])*r.thumbscale),o=Math.round((r.viewrectangle[1]/r.scale-r.thumbrectangle[1])*r.thumbscale),i=Math.round(r.viewrectangle[2]*r.thumbscale/r.scale),s=Math.round(r.viewrectangle[3]*r.thumbscale/r.scale),a=!1;return n<0&&o<0&&i>r.width-n&&s>r.height-o?{hide:a=!0}:(a=!1,n<0?(i+=n,n=0,t.style.borderLeftColor=r.viewBoxBorder2):(t.style.borderLeftColor=r.viewBoxBorder,e.fillRect(0,0,n,r.height)),o<0?(s+=o,o=0,t.style.borderTopColor=r.viewBoxBorder2):(t.style.borderTopColor=r.viewBoxBorder,e.fillRect(n,0,i,o)),i>r.width-n?(i=r.width-n,t.style.borderRightColor=r.viewBoxBorder2):(t.style.borderRightColor=r.viewBoxBorder,e.fillRect(n+i,0,r.width-(n+i),r.height)),s>r.height-o?(s=r.height-o,t.style.borderBottomColor=r.viewBoxBorder2):(t.style.borderBottomColor=r.viewBoxBorder,e.fillRect(n,o+s,i,r.height-(o+s))),t.style.left=n+"px",t.style.top=o+"px",t.style.width=i+"px",t.style.height=s+"px",{hide:a})}var c=o({propTypes:{},getDefaultProps:function(){return{width:200,height:150,hidden:!1,backgroundColor:"hsla(184, 8%, 75%, 0.9)",outsideFill:"hsla(0, 0%, 0%, 0.4)",nodeSize:60,nodeLineWidth:1,viewrectangle:[0,0,0,0],viewscale:1,viewBoxBorder:"hsla(190, 100%, 80%, 0.4)",viewBoxBorder2:"hsla( 10,  60%, 32%, 0.3)",viewBoxBorderStyle:"dotted",graph:null}},getInitialState:function(){return{thumbscale:1,currentPan:[0,0]}},render:function(){var e=this.props,t={position:"absolute",top:0,left:0},r={height:e.height,width:e.width,overflow:"hidden",cursor:"move",backgroundColor:e.backgroundColor},o={key:"thumb",ref:this._refThumbCanvas,width:e.width,height:e.height,style:t},i={key:"viewbox",ref:this._refViewboxCanvas,width:e.width,height:e.height,style:t},s={key:"viewboxdiv",ref:this._refViewboxElement,style:{position:"absolute",top:0,left:0,width:e.width,height:e.height,borderStyle:"dotted",borderWidth:1}};return n.createElement("div",{key:"nav",style:r,ref:this._refTopElement},[n.createElement("div",s),n.createElement("canvas",i),n.createElement("canvas",o)])},componentDidUpdate:function(){this._updatePan(),this._renderElements()},componentDidMount:function(){this._updatePan(),this._renderElements(),this._setupEvents()},_refThumbCanvas:function(e){this._thumbContext=e.getContext("2d")},_refViewboxCanvas:function(e){this._viewboxContext=e.getContext("2d")},_refViewboxElement:function(e){this._viewboxElement=e},_refTopElement:function(e){this._topElement=e},_renderElements:function(){var e=function(e,t){var r={};for(var n in t)r[n]=t[n];return r.graph=null,r.lineWidth=t.nodeLineWidth,s.render(e,t.graph,r)}(this._thumbContext,this.props);!function(e,t,r,n){var o={};for(var i in n)o[i]=n[i];o.graph=null,o.scale=n.viewscale;var s=r.rectangle[2],c=r.rectangle[3];o.thumbscale=s>c?n.width/s:n.height/c,o.thumbrectangle=r.rectangle,a(e,t,o)}(this._viewboxContext,this._viewboxElement,e,this.props)},_updatePan:function(){this.state.currentPan=[-this.props.viewrectangle[0],-this.props.viewrectangle[1]]},_setupEvents:function(){this.hammer=new i.Manager(this._topElement,{recognizers:[[i.Tap],[i.Pan,{direction:i.DIRECTION_ALL}]]}),this.hammer.on("tap",function(e){this.props.onTap&&this.props.onTap(null,e)}.bind(this)),this.hammer.on("panmove",function(e){if(this.props.onPanTo){var t=this.state.currentPan[0],r=this.state.currentPan[1],n=this.state.thumbscale/this.props.viewscale;t-=e.deltaX/n,r-=e.deltaY/n;var o={x:Math.round(t),y:Math.round(r)};this.state.currentPan[0]=o.x,this.state.currentPan[1]=o.y,this.props.onPanTo(o,e)}}.bind(this))}});e.exports={render:a,calculateStyleFromTheme:function(e){var t={};return"dark"===e?(t.viewBoxBorder="hsla(190, 100%, 80%, 0.4)",t.viewBoxBorder2="hsla( 10,  60%, 32%, 0.3)",t.outsideFill="hsla(0, 0%, 0%, 0.4)",t.backgroundColor="hsla(0, 0%, 0%, 0.9)"):(t.viewBoxBorder="hsla(190, 100%, 20%, 0.8)",t.viewBoxBorder2="hsla( 10,  60%, 80%, 0.8)",t.outsideFill="hsla(0, 0%, 100%, 0.4)",t.backgroundColor="hsla(0, 0%, 100%, 0.9)"),t},Component:c}},function(e,t){e.exports={applyToGraph:function(e,t,r){console.error("DEPRECATED: TheGraph.autolayout.applyAutolayout() will be removed in next version");var n,o,i=t.children.slice();for(n=0,o=i.length;n<o;n++){var s=i[n],a=e.getNode(s.id);if(s.children){var c,u=s.children;for(c in u){var p=u[c];p.id&&e.setNodeMetadata(p.id,{x:Math.round((s.x+p.x)/r.snap)*r.snap,y:Math.round((s.y+p.y)/r.snap)*r.snap})}}if(a)e.setNodeMetadata(s.id,{x:Math.round(s.x/r.snap)*r.snap,y:Math.round(s.y/r.snap)*r.snap});else{var l=s.id.split(":::"),h=l[0],d=l[1];"inport"===h&&e.inports[d]?e.setInportMetadata(d,{x:Math.round(s.x/r.snap)*r.snap,y:Math.round(s.y/r.snap)*r.snap}):"outport"===h&&e.outports[d]&&e.setOutportMetadata(d,{x:Math.round(s.x/r.snap)*r.snap,y:Math.round(s.y/r.snap)*r.snap})}}}}},function(e,t){function r(e){var t=[];return e.nodes.forEach(function(r){var n={name:r.component,icon:"cog",description:"",inports:[],outports:[]};Object.keys(e.inports).forEach(function(t){var o=e.inports[t];if(o.process===r.id){for(var i=0;i<n.inports.length;i++)if(n.inports[i].name===o.port)return;n.inports.push({name:o.port,type:"all"})}}),Object.keys(e.outports).forEach(function(t){var o=e.outports[t];if(o.process===r.id){for(var i=0;i<n.outports.length;i++)if(n.outports[i].name===o.port)return;n.outports.push({name:o.port,type:"all"})}}),e.initializers.forEach(function(e){if(e.to.node===r.id){for(var t=0;t<n.inports.length;t++)if(n.inports[t].name===e.to.port)return;n.inports.push({name:e.to.port,type:"all"})}}),e.edges.forEach(function(e){var t;if(e.from.node===r.id){for(t=0;t<n.outports.length;t++)if(n.outports[t].name===e.from.port)return;n.outports.push({name:e.from.port,type:"all"})}if(e.to.node===r.id){for(t=0;t<n.inports.length;t++)if(n.inports[t].name===e.to.port)return;n.inports.push({name:e.to.port,type:"all"})}}),t.push(n)}),t}e.exports={mergeComponentDefinition:function(e,t){if(e===t)return t;var r,n,o,i,s,a=e.inports,c=t.inports;if(a!==c)for(r=0,o=a.length;r<o;r++){var u=a[r];for(s=!1,n=0,i=c.length;n<i;n++){var p=c[n];u.name===p.name&&(s=!0)}s||c.push(u)}var l=e.outports,h=t.outports;if(l!==h)for(r=0,o=l.length;r<o;r++){var d=l[r];for(s=!1,n=0,i=h.length;n<i;n++){var f=h[n];d.name===f.name&&(s=!0)}s||h.push(d)}return"cog"!==t.icon?e.icon=t.icon:t.icon=e.icon,t.iconsvg=e.iconsvg,t},componentsFromGraph:r,libraryFromGraph:function(e){var t={};return r(e).forEach(function(e){t[e.name]=e}),t}}},function(e,t,r){var n=r(188);e.exports={getDefaultMenus:function(e){console.error("DEPRECATED: TheGraph.menus.getDefaultMenus() will be removed in next version. Specify menus prop manually");var t={icon:"paste",iconLabel:"paste",action:function(e,t,r){var o=n.paste(e);this.selectedNodes=o.nodes,this.selectedEdges=[]}.bind(e)},r={delete:function(e,t,r){e.removeNode(t);for(var n=[],o=0,i=this.selectedNodes.length;o<i;o++){var s=this.selectedNodes[o];s!==r&&n.push(s)}this.selectedNodes=n}.bind(e),copy:function(e,t,r){n.copy(e,[t])}},o={delete:function(e,t,r){e.removeEdge(r.from.node,r.from.port,r.to.node,r.to.port);for(var n=[],o=0,i=this.selectedEdges.length;o<i;o++){var s=this.selectedEdges[o];s!==r&&n.push(s)}this.selectedEdges=n}.bind(e)};return{main:{icon:"sitemap",e4:t},edge:{actions:o,icon:"long-arrow-right",s4:{icon:"trash-o",iconLabel:"delete",action:o.delete}},node:{actions:r,s4:{icon:"trash-o",iconLabel:"delete",action:r.delete},w4:{icon:"copy",iconLabel:"copy",action:r.copy}},nodeInport:{w4:{icon:"sign-in",iconLabel:"export",action:function(e,t,r){var n=r.port;"start"===n&&(n="start1"),"graph"===n&&(n="graph1");for(var o=0;e.inports[n];)o++,n=r.port+o;var i=e.getNode(r.process),s={x:i.metadata.x-144,y:i.metadata.y};e.addInport(n,r.process,r.port,s)}}},nodeOutport:{e4:{icon:"sign-out",iconLabel:"export",action:function(e,t,r){for(var n=r.port,o=0;e.outports[n];)o++,n=r.port+o;var i=e.getNode(r.process),s={x:i.metadata.x+144,y:i.metadata.y};e.addOutport(n,r.process,r.port,s)}}},graphInport:{icon:"sign-in",iconColor:2,n4:{label:"inport"},s4:{icon:"trash-o",iconLabel:"delete",action:function(e,t,r){e.removeInport(t)}}},graphOutport:{icon:"sign-out",iconColor:5,n4:{label:"outport"},s4:{icon:"trash-o",iconLabel:"delete",action:function(e,t,r){e.removeOutport(t)}}},group:{icon:"th",s4:{icon:"trash-o",iconLabel:"ungroup",action:function(e,t,r){e.removeGroup(t)}},e4:t},selection:{icon:"th",w4:{icon:"copy",iconLabel:"copy",action:function(e,t,r){n.copy(e,r.nodes)}},e4:t}}}}},function(e,t,r){var n=r(7),o=r(13),i=r(76),s=null;function a(e){var t=getComputedStyle(e);[].forEach(function(r){var n=t.getPropertyValue(r);n&&e.setAttribute(r,n)}),["fill","stroke","stroke-width","opacity","text-anchor","font-size","visibility"].forEach(function(r){var n=t.getPropertyValue(r);n&&(e.style[r]=n)})}e.exports={graphToDOM:function(e,t){t.library||(t.library=function(e){var t={},r={};function n(e,t){0==e.filter(function(e){return e.name==t}).length&&e.push({name:t,type:"all"})}function o(e,o){Object.keys(e).forEach(function(i){var s=e[i],a=t[r[s.process]];n(o?a.inports:a.outports,s.port)})}return e.nodes.forEach(function(e){var n=e.component;r[e.id]=n,t[n]={name:n,description:n,icon:null,inports:[],outports:[]}}),e.edges.forEach(function(e){var o=r[e.to.node];if(n(t[o].inports,e.to.port),e.from){var i=r[e.from.node];n(t[i].outports,e.from.port)}}),o(e.inports,!0),o(e.outports,!1),t}(e)),t.theme||(t.theme="the-graph-dark"),t.width||(t.width=1200),t.margin||(t.margin=72);var r=i.findFit(e,t.width,100*t.width,t.margin),a=r.graphWidth/r.graphHeight;t.height||(t.height=t.width/a),console.log("f",a,t.height,JSON.stringify(r));var c={readonly:!0,width:t.width,height:t.height,graph:e,library:t.library},u=document.createElement("div");u.className=t.theme,u.width=c.width,u.height=c.height;var p=document.body;!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(p),p.appendChild(u);var l=n.createElement(s,c);return o.render(l,u),u.children[0]},exportImage:function(e,t,r){t||(t={}),t.format||(t.format="png"),void 0===t.background&&(t.background=!0),void 0===t.quality&&(t.quality=.9);var n=e.getElementsByTagName("svg")[0],o=e.getElementsByTagName("canvas")[0];if("svg"!=n.tagName.toLowerCase())return r(new Error("renderImage input must be SVG, got "+n.tagName));var i=function(e){for(var t=e.getElementsByTagName("*"),r=0;r<t.length;r++)a(t[r]);return e}(n),s=(new XMLSerializer).serializeToString(i);if("svg"==t.format)return r(null,s);var c=window.URL||window.webkitURL||window,u=new Image,p=new Blob([s],{type:"image/svg+xml"}),l=c.createObjectURL(p),h=document.createElement("canvas");h.width=n.getAttribute("width"),h.height=n.getAttribute("height");var d=h.getContext("2d");if(t.background){var f=getComputedStyle(e)["background-color"];d.fillStyle=f,d.fillRect(0,0,h.width,h.height),d.drawImage(o,0,0)}u.onerror=function(e){return r(e)},u.onload=function(){d.drawImage(u,0,0),c.revokeObjectURL(l);var e=h.toDataURL("image/"+t.format,t.quality);return r(null,e)},u.src=l},register:function(e){s=e.TheGraph.App}}},function(e,t,r){e.exports={postMessage:r(109),iframe:r(606),opener:r(607)}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c,u,p,l,h,d,f;l=r(0),c=r(8).EventEmitter,f=function(e,t,r){var n;switch(n=l.internalSocket.createSocket(),e.attach(n),t){case"begingroup":n.beginGroup(r);break;case"endgroup":n.endGroup(r);break;case"data":n.send(r)}return e.detach(n)},p=function(e,t,r){var n,o,i;if(e.graph&&(null!=(o=r?e.graph.inports[t]:e.graph.outports[t])?o.process:void 0)&&(n=null!=(i=e.getNode(o.process))?i.component:void 0))return r?n.inPorts[o.port]:n.outPorts[o.port]},h=function(e,t,r,n){var o,i,s,a;return o={id:e,type:"all",description:null!=(s=t.metadata)?s.description:void 0,addressable:!1,required:!1},(i=p(r,e,n))?(o.type=i.getDataType()||"all",("function"==typeof i.getSchema?i.getSchema():void 0)&&(o.schema=i.getSchema()),o.description=(null!=(a=t.metadata)?a.description:void 0)||i.getDescription()||"",o.addressable=i.isAddressable(),o.required=i.isRequired(),o):o},d=function(e,t){var r,n,o,i,s;if(n={graph:e,inPorts:[],outPorts:[]},!(null!=t?t.graph:void 0))return n;for(o in i=t.graph.inports)r=i[o],n.inPorts.push(h(o,r,t,!0));for(o in s=t.graph.outports)r=s[o],n.outPorts.push(h(o,r,t,!1));return n},u=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=i(this,s(t).call(this))).transport=e,r.outputSockets={},r.mainGraph=null,r.transport.network.on("addnetwork",function(e,t){return r.subscribeExportedPorts(t,e,!0),r.subscribeOutPorts(t,e),r.sendPorts(t,e),e.isStarted()&&r.subscribeOutdata(t,e,!0),e.on("start",function(){return r.subscribeOutdata(t,e,!0)})}),r.transport.network.on("removenetwork",function(e,t){return r.subscribeOutdata(t,e,!1),r.subscribeOutPorts(t,e),r.subscribeExportedPorts(t,e.graph,!1),r.sendPorts(t,null)}),r}var r,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,c),r=t,(n=[{key:"send",value:function(e,t,r){return this.transport.send("runtime",e,t,r)}},{key:"sendAll",value:function(e,t){return this.transport.sendAll("runtime",e,t)}},{key:"sendError",value:function(e,t){return this.send("error",new Error(e),t)}},{key:"receive",value:function(e,t,r){var n=this;switch(e){case"getruntime":return this.getRuntime(t,r);case"packet":return this.sendPacket(t,function(e){e?n.sendError(e.message,r):n.send("packetsent",{port:t.port,event:t.event,graph:t.graph,payload:t.payload},r)});default:return this.send("error",new Error("runtime:".concat(e," not supported")),r)}}},{key:"getRuntime",value:function(e,t){var r,n,o,i,s,a,c,u=this;for(n in(c=this.transport.options.type)||(c=l.isBrowser()?"noflo-browser":"noflo-nodejs"),i=(r=this.transport.options.capabilities).filter(function(t){return u.transport.canDo(t,e.secret)}),e={type:c,version:this.transport.version,capabilities:i,allCapabilities:r},this.mainGraph&&(e.graph=this.mainGraph),this.transport.options.id&&(e.id=this.transport.options.id),this.transport.options.label&&(e.label=this.transport.options.label),this.transport.options.namespace&&(e.namespace=this.transport.options.namespace),this.transport.options.repository&&(e.repository=this.transport.options.repository),this.transport.options.repositoryVersion&&(e.repositoryVersion=this.transport.options.repositoryVersion),this.send("runtime",e,t),a=[],s=this.transport.network.networks)o=s[n],a.push(this.sendPorts(n,o,t));return a}},{key:"sendPorts",value:function(e,t,r){var n;return n=d(e,t),this.emit("ports",n),r?this.send("ports",n,r):this.sendAll("ports",n)}},{key:"setMainGraph",value:function(e){return this.mainGraph=e}},{key:"subscribeExportedPorts",value:function(e,t,r){var n,o,i,s,a,c,u,p,l=this;for(p=function(){return l.sendPorts(e,t)},i=0,a=(o=["addInport","addOutport","removeInport","removeOutport"]).length;i<a;i++)n=o[i],t.graph.removeListener(n,p);if(r){for(u=[],s=0,c=o.length;s<c;s++)n=o[s],u.push(t.graph.on(n,p));return u}}},{key:"subscribeOutPorts",value:function(e,t,r){var n,o,i,s=this;if(i=function(){return s.subscribeOutdata(e,t,!1)},o=function(){return s.subscribeOutdata(e,t,!0)},(n=t.graph).removeListener("addOutport",o),n.removeListener("removeOutport",i),r)return n.on("addOutport",o),n.on("removeOutport",i)}},{key:"subscribeOutdata",value:function(e,t,r){var n,o,i,s,a,c,u=this;for(a in this.outputSockets[e]||(this.outputSockets[e]={}),o=this.outputSockets[e])for(c=o[a],i=0,s=events.length;i<s;i++)n=events[i],c.removeAllListeners(n);if(o={},r)return Object.keys(t.graph.outports).forEach(function(r){var i,s;if(s=t.graph.outports[r],c=l.internalSocket.createSocket(),o[r]=c,!(null!=(i=t.processes[s.process].component)?i.outPorts[s.port]:void 0))throw new Error("Exported outport ".concat(s.port," in node ").concat(s.process," not found"));return i.outPorts[s.port].attach(c),c.on("ip",function(t){switch(t.type){case"openBracket":n="begingroup";break;case"closeBracket":n="endgroup";break;default:n=t.type}return u.emit("packet",{port:r,event:n,graph:e,payload:t.data}),u.sendAll("packet",{port:r,event:n,graph:e,payload:t.data})})})}},{key:"sendPacket",value:function(e,t){var r,n;return(r=this.transport.network.networks[e.graph])?(n=p(r.network,e.port,!0))?(f(n,e.event,e.payload),t()):t(new Error("Cannot find internal port for ".concat(e.port))):t(new Error("Cannot find network for graph ".concat(e.graph)))}}])&&o(r.prototype,n),u&&o(r,u),t}(),e.exports=u},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c,u,p;p=r(0),c=r(8).EventEmitter,u=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=i(this,s(t).call(this))).transport=e,r.graphs={},r}var r,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,c),r=t,(n=[{key:"send",value:function(e,t,r){return this.transport.send("graph",e,t,r)}},{key:"sendAll",value:function(e,t){return this.transport.sendAll("graph",e,t)}},{key:"receive",value:function(e,t,r){var n;if("clear"===e||(n=this.resolveGraph(t,r)))switch(e){case"clear":return this.initGraph(t,r);case"addnode":return this.addNode(n,t,r);case"removenode":return this.removeNode(n,t,r);case"renamenode":return this.renameNode(n,t,r);case"changenode":return this.changeNode(n,t,r);case"addedge":return this.addEdge(n,t,r);case"removeedge":return this.removeEdge(n,t,r);case"changeedge":return this.changeEdge(n,t,r);case"addinitial":return this.addInitial(n,t,r);case"removeinitial":return this.removeInitial(n,t,r);case"addinport":return this.addInport(n,t,r);case"removeinport":return this.removeInport(n,t,r);case"renameinport":return this.renameInport(n,t,r);case"addoutport":return this.addOutport(n,t,r);case"removeoutport":return this.removeOutport(n,t,r);case"renameoutport":return this.renameOutport(n,t,r);case"addgroup":return this.addGroup(n,t,r);case"removegroup":return this.removeGroup(n,t,r);case"renamegroup":return this.renameGroup(n,t,r);case"changegroup":return this.changeGroup(n,t,r);default:return this.send("error",new Error("graph:".concat(e," not supported")),r)}}},{key:"resolveGraph",value:function(e,t){if(e.graph){if(this.graphs[e.graph])return this.graphs[e.graph];this.send("error",new Error("Requested graph not found"),t)}else this.send("error",new Error("No graph specified"),t)}},{key:"getLoader",value:function(e){return this.transport.component.getLoader(e,this.transport.options)}},{key:"sendGraph",value:function(e,t,r){var n;return n={graph:e,description:t.toJSON()},this.send("graph",n,r)}},{key:"initGraph",value:function(e,t){var r,n;if(e.id)return e.name||(e.name="NoFlo runtime"),n=new p.Graph(e.name),r=e.id,e.library&&(e.library=e.library.replace("noflo-",""),n.properties.library=e.library,r="".concat(e.library,"/").concat(r)),e.icon&&(n.properties.icon=e.icon),e.description&&(n.properties.description=e.description),n.baseDir=this.transport.options.baseDir,this.subscribeGraph(e.id,n,t),e.main?this.transport.runtime.setMainGraph(r,n,t):this.transport.component.registerGraph(r,n,t),this.graphs[e.id]=n,this.sendAll("clear",{id:e.id,name:e.name,library:e.library,main:e.main,icon:e.icon,description:e.description},t);this.send("error",new Error("No graph ID provided"),t)}},{key:"registerGraph",value:function(e,t){return"default/main"===e&&this.transport.runtime.setMainGraph(e,t),this.subscribeGraph(e,t,""),this.graphs[e]=t}},{key:"subscribeGraph",value:function(e,t,r){var n=this;return t.on("addNode",function(t){return t.graph=e,n.sendAll("addnode",t,r)}),t.on("removeNode",function(t){var o;return o={id:t.id,graph:e},n.sendAll("removenode",o,r)}),t.on("renameNode",function(t,o){return n.sendAll("renamenode",{from:t,to:o,graph:e},r)}),t.on("changeNode",function(t,o){return n.sendAll("changenode",{id:t.id,metadata:t.metadata,graph:e},r)}),t.on("addEdge",function(t){var o;return"number"!=typeof t.from.index&&delete t.from.index,"number"!=typeof t.to.index&&delete t.to.index,o={src:t.from,tgt:t.to,metadata:t.metadata,graph:e},n.sendAll("addedge",o,r)}),t.on("removeEdge",function(t){var o;return o={src:t.from,tgt:t.to,graph:e},n.sendAll("removeedge",o,r)}),t.on("changeEdge",function(t){var o;return o={src:t.from,tgt:t.to,metadata:t.metadata,graph:e},n.sendAll("changeedge",o,r)}),t.on("addInitial",function(t){var o;return o={src:t.from,tgt:t.to,metadata:t.metadata,graph:e},n.sendAll("addinitial",o,r)}),t.on("removeInitial",function(t){var o;return o={src:t.from,tgt:t.to,graph:e},n.sendAll("removeinitial",o,r)}),t.on("addGroup",function(t){var o;return o={name:t.name,nodes:t.nodes,metadata:t.metadata,graph:e},n.sendAll("addgroup",o,r)}),t.on("removeGroup",function(t){var o;return o={name:t.name,graph:e},n.sendAll("removegroup",o,r)}),t.on("renameGroup",function(t,o){var i;return i={from:t,to:o,graph:e},n.sendAll("renamegroup",i,r)}),t.on("changeGroup",function(t){var o;return o={name:t.name,metadata:t.metadata,graph:e},n.sendAll("changegroup",o,r)}),t.on("addInport",function(t,o){var i;return i={public:t,node:o.process,port:o.port,metadata:o.metadata,graph:e},n.sendAll("addinport",i,r)}),t.on("addOutport",function(t,o){var i;return i={public:t,node:o.process,port:o.port,metadata:o.metadata,graph:e},n.sendAll("addoutport",i,r)}),t.on("removeInport",function(t,o){var i;return i={public:t,graph:e},n.sendAll("removeinport",i,r)}),t.on("removeOutport",function(t,o){var i;return i={public:t,graph:e},n.sendAll("removeoutport",i,r)}),t.on("renameInport",function(t,o){var i;return i={from:t,to:o,graph:e},n.sendAll("renameinport",i,r)}),t.on("renameOutport",function(t,o){var i;return i={from:t,to:o,graph:e},n.sendAll("renameoutport",i,r)}),t.on("endTransaction",function(){return n.emit("updated",{name:e,graph:t})})}},{key:"addNode",value:function(e,t,r){if(t.id||t.component)return e.addNode(t.id,t.component,t.metadata);this.send("error",new Error("No ID or component supplied"),r)}},{key:"removeNode",value:function(e,t,r){if(t.id)return e.removeNode(t.id);this.send("error",new Error("No ID supplied"),r)}},{key:"renameNode",value:function(e,t,r){if(t.from||t.to)return e.renameNode(t.from,t.to);this.send("error",new Error("No from or to supplied"),r)}},{key:"changeNode",value:function(e,t,r){if(t.id||t.metadata)return e.setNodeMetadata(t.id,t.metadata);this.send("error",new Error("No id or metadata supplied"),r)}},{key:"addEdge",value:function(e,t,r){if(t.src||t.tgt){if("number"!=typeof t.src.index&&"number"!=typeof t.tgt.index||!e.addEdgeIndex)return e.addEdge(t.src.node,t.src.port,t.tgt.node,t.tgt.port,t.metadata);e.addEdgeIndex(t.src.node,t.src.port,t.src.index,t.tgt.node,t.tgt.port,t.tgt.index,t.metadata)}else this.send("error",new Error("No src or tgt supplied"),r)}},{key:"removeEdge",value:function(e,t,r){if(t.src||t.tgt)return e.removeEdge(t.src.node,t.src.port,t.tgt.node,t.tgt.port);this.send("error",new Error("No src or tgt supplied"),r)}},{key:"changeEdge",value:function(e,t,r){if(t.src||t.tgt)return e.setEdgeMetadata(t.src.node,t.src.port,t.tgt.node,t.tgt.port,t.metadata);this.send("error",new Error("No src or tgt supplied"),r)}},{key:"addInitial",value:function(e,t,r){if(t.src||t.tgt){if(!e.addInitialIndex||"number"!=typeof t.tgt.index)return e.addInitial(t.src.data,t.tgt.node,t.tgt.port,t.metadata);e.addInitialIndex(t.src.data,t.tgt.node,t.tgt.port,t.tgt.index,t.metadata)}else this.send("error",new Error("No src or tgt supplied"),r)}},{key:"removeInitial",value:function(e,t,r){if(t.tgt)return e.removeInitial(t.tgt.node,t.tgt.port);this.send("error",new Error("No tgt supplied"),r)}},{key:"addInport",value:function(e,t,r){if(t.public||t.node||t.port)return e.addInport(t.public,t.node,t.port,t.metadata);this.send("error",new Error("Missing exported inport information"),r)}},{key:"removeInport",value:function(e,t,r){if(t.public)return e.removeInport(t.public);this.send("error",new Error("Missing exported inport name"),r)}},{key:"renameInport",value:function(e,t,r){if(t.from||t.to)return e.renameInport(t.from,t.to);this.send("error",new Error("No from or to supplied"),r)}},{key:"addOutport",value:function(e,t,r){if(t.public||t.node||t.port)return e.addOutport(t.public,t.node,t.port,t.metadata);this.send("error",new Error("Missing exported outport information"),r)}},{key:"removeOutport",value:function(e,t,r){if(t.public)return e.removeOutport(t.public);this.send("error",new Error("Missing exported outport name"),r)}},{key:"renameOutport",value:function(e,t,r){if(t.from||t.to)return e.renameOutport(t.from,t.to);this.send("error",new Error("No from or to supplied"),r)}},{key:"addGroup",value:function(e,t,r){if(t.name||t.nodes||t.metadata)return e.addGroup(t.name,t.nodes,t.metadata);this.send("error",new Error("No name or nodes or metadata supplied"),r)}},{key:"removeGroup",value:function(e,t,r){if(t.name)return e.removeGroup(t.name);this.send("error",new Error("No name supplied"),r)}},{key:"renameGroup",value:function(e,t,r){if(t.from||t.to)return e.renameGroup(t.from,t.to);this.send("error",new Error("No from or to supplied"),r)}},{key:"changeGroup",value:function(e,t,r){if(t.name||t.metadata)return e.setEdgeMetadata(t.name,t.metadata);this.send("error",new Error("No name or metadata supplied"),r)}}])&&o(r.prototype,n),u&&o(r,u),t}(),e.exports=u},function(e,t,r){(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c,u,p,l,h,d,f,m;f=r(0),c=r(8).EventEmitter,m=function(e,r){var n,o,i,s;if(n={id:e.id,graph:r},e.socket.from&&(n.src={node:e.socket.from.process.id,port:e.socket.from.port}),e.socket.to&&(n.tgt={node:e.socket.to.process.id,port:e.socket.to.port}),e.subgraph&&(n.subgraph=e.subgraph),void 0!==e.group&&(n.group=e.group),e.datatype&&(n.type=e.datatype),e.schema&&(n.schema=e.schema),void 0!==e.data){if(f.isBrowser()||t.isBuffer(e.data)&&(e.data=e.data.slice(0,20)),(null!=(o=e.data)?o.toJSON:void 0)&&(n.data=e.data.toJSON()),null!=(i=e.data)?i.toString:void 0){if(n.data=e.data.toString(),"[object Object]"===n.data)try{n.data=JSON.parse(JSON.stringify(e.data))}catch(e){}}else n.data=e.data;(null!=(s=e.metadata)?s.secure:void 0)&&(n.data="DATA")}return n},h=function(e){return e?e.process+"("+e.port+")":""},l=function(e){return h(e.src)+" -> "+h(e.tgt)},p=function(e){return e?e.process.id+"("+e.port+")":""},d=function(e){return p(e.from)+" -> "+p(e.to)},u=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=i(this,s(t).call(this))).transport=e,r.networks={},r}var r,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,c),r=t,(n=[{key:"send",value:function(e,t,r){return this.transport.send("network",e,t,r)}},{key:"sendAll",value:function(e,t){return this.transport.sendAll("network",e,t)}},{key:"receive",value:function(e,t,r){var n;if(n=this.resolveGraph(t,r))switch(e){case"start":return this.startNetwork(n,t,r);case"stop":return this.stopNetwork(n,t,r);case"edges":return this.updateEdgesFilter(n,t,r);case"debug":return this.debugNetwork(n,t,r);case"getstatus":return this.getStatus(n,t,r);default:return this.send("error",new Error("network:".concat(e," not supported")),r)}}},{key:"resolveGraph",value:function(e,t){if(e.graph){if(this.transport.graph.graphs[e.graph])return this.transport.graph.graphs[e.graph];this.send("error",new Error("Requested graph not found"),t)}else this.send("error",new Error("No graph specified"),t)}},{key:"updateEdgesFilter",value:function(e,t,r){var n,o,i,s,a,c;for((s=this.networks[t.graph])?s.filters={}:(s={network:null,filters:{}},this.networks[t.graph]=s),o=0,i=(a=t.edges).length;o<i;o++)n=a[o],c=l(n),s.filters[c]=!0;return this.send("edges",{graph:t.graph,edges:t.edges},r)}},{key:"eventFiltered",value:function(e,t){var r;return!this.transport.options.filterData||(r=d(t.socket),this.networks[e].filters[r])}},{key:"initNetwork",value:function(e,t,r,n){var o,i,s=this;if(!this.networks[t]||!this.networks[t].network)return e.componentLoader=this.transport.component.getLoader(e.baseDir,this.transport.options),(i=JSON.parse(JSON.stringify(this.transport.options))).delay=!0,f.createNetwork(e,function(e,o){return e?n(e):(s.networks[t]&&s.networks[t].network?s.networks[t].network=o:s.networks[t]={network:o,filters:{}},s.emit("addnetwork",o,t,s.networks),s.subscribeNetwork(o,t,r),o.connect(n))},i);(o=this.networks[t].network).stop(function(i){return i?n(i):(delete s.networks[t],s.emit("removenetwork",o,t,s.networks),s.initNetwork(e,t,r,n))})}},{key:"subscribeNetwork",value:function(e,t,r){var n=this;return e.on("start",function(o){return n.sendAll("started",{time:o.start,graph:t,running:e.isRunning(),started:e.isStarted()},r)}),e.on("end",function(o){return n.sendAll("stopped",{time:new Date,uptime:o.uptime,graph:t,running:e.isRunning(),started:e.isStarted()},r)}),e.on("icon",function(e){return e.graph=t,n.sendAll("icon",e,r)}),e.on("ip",function(e){var o;if(n.eventFiltered(t,e)){switch(o={id:e.id,socket:e.socket,subgraph:e.subgraph,metadata:e.metadata},e.type){case"openBracket":o.type="begingroup",o.group=e.data||"";break;case"data":o.type="data",o.data=e.data,o.datatype=e.datatype,o.schema=e.schema;break;case"closeBracket":o.type="endgroup",o.group=e.data||""}return n.sendAll(o.type,m(o,t),r)}}),e.on("process-error",function(e){var o,i,s,a,c;if(i=e.error.message,e.error.stack)for(o=e.error.stack.split("\n"),s=a=0,c=Math.min(o.length,3);0<=c?a<=c:a>=c;s=0<=c?++a:--a)i+="\n".concat(o[s]);return n.sendAll("processerror",{id:e.id,error:i,graph:t},r)})}},{key:"_startNetwork",value:function(e,t,r,n){var o,i,s=this;return o=function(e){return e.start(function(e){return n(e)})},(i=this.networks[t])&&i.network?o(i.network):this.initNetwork(e,t,r,function(e){return e?n(e):(i=s.networks[t],o(i.network))})}},{key:"startNetwork",value:function(e,t,r){var n=this;return this.networks[t.graph],this._startNetwork(e,t.graph,r,function(e){e&&n.send("error",e,r)})}},{key:"stopNetwork",value:function(e,t,r){var n,o=this;if(this.networks[t.graph])if(n=this.networks[t.graph].network){if(!n.isStarted())return this.send("stopped",{time:new Date,graph:t.graph,running:n.isRunning(),started:n.isStarted()},r);this.networks[t.graph].network.stop(function(e){e?o.send("error",e,r):o.send("stopped",{time:new Date,graph:t.graph,running:n.isRunning(),started:n.isStarted()},r)})}else this.send("error",new Error("Network ".concat(t.graph," not found")),r);else this.send("error",new Error("Network ".concat(t.graph," not found")),r)}},{key:"debugNetwork",value:function(e,t,r){var n;this.networks[t.graph]&&(n=this.networks[t.graph].network)?(n.setDebug(t.enable),this.send("setdebug",{enable:t.enable})):this.send("error",new Error("Network ".concat(t.graph," not found")),r)}},{key:"getStatus",value:function(e,t,r){var n;if(this.networks[t.graph]){if(n=this.networks[t.graph].network)return this.send("status",{graph:t.graph,running:n.isRunning(),started:n.isStarted()},r);this.send("error",new Error("Network ".concat(t.graph," not found")),r)}else this.send("error",new Error("Network ".concat(t.graph," not found")),r)}}])&&o(r.prototype,n),u&&o(r,u),t}(),e.exports=u}).call(this,r(54).Buffer)},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c,u,p,l,h;l=r(0),p=r(590),u=r(8).EventEmitter,h=r(591),c=function(){var e=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=i(this,s(t).call(this))).transport=e,r}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,u),r=t,(n=[{key:"send",value:function(e,t,r){return this.transport.send("component",e,t,r)}},{key:"receive",value:function(e,t,r){switch(e){case"list":return this.listComponents(t,r);case"getsource":return this.getSource(t,r);case"source":return this.setSource(t,r);default:return this.send("error",new Error("component:".concat(e," not supported")),r)}}},{key:"getLoader",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.loaders[e]||(this.loaders[e]=new l.ComponentLoader(e,t)),this.loaders[e]}},{key:"listComponents",value:function(e,t){var r,n,o=this;return r=this.transport.options.baseDir,(n=this.getLoader(r,this.transport.options)).listComponents(function(e,r){var i,s;if(!e)return i=Object.keys(r),s=0,i.forEach(function(e){return o.processComponent(n,e,t,function(e){if(!(++s<i.length))return o.send("componentsready",s,t)})});o.send("error",e,t)})}},{key:"getSource",value:function(e,t){var r,n=this;return r=this.transport.options.baseDir,this.getLoader(r,this.transport.options).getSource(e.name,function(r,o){var i,s;return r?null==(i=n.transport.graph.graphs[e.name])?void n.send("error",r,t):(s=h.parseName(e.name),n.send("source",{name:s.name,library:s.library,code:JSON.stringify(i.toJSON()),language:"json"},t)):n.send("source",o,t)})}},{key:"setSource",value:function(e,t){var r,n,o=this;return r=this.transport.options.baseDir,(n=this.getLoader(r,this.transport.options)).setSource(e.library,e.name,e.code,e.language,function(r){if(!r)return o.emit("updated",{name:e.name,library:e.library,code:e.code,language:e.language}),o.processComponent(n,n.normalizeName(e.library,e.name),t);o.send("error",r,t)})}},{key:"processComponent",value:function(e,t,r,n){var o=this;return n||(n=function(){}),e.load(t,function(e,i){if(!i){if(e instanceof Error)return o.send("error",e,r),n(e);i=e}if(i.isReady())return o.sendComponent(t,i,r),n(null);i.once("ready",function(){return o.sendComponent(t,i,r),n(null)})},!0)}},{key:"processPort",value:function(e,t){var r,n;return r={id:e,type:t.getDataType?t.getDataType():"all"},("function"==typeof t.getSchema?t.getSchema():void 0)&&(r.schema=t.getSchema()),t.isRequired&&(r.required=t.isRequired()),t.isAddressable&&(r.addressable=t.isAddressable()),t.getDescription&&(r.description=t.getDescription()),(null!=(n=t.options)?n.values:void 0)&&(r.values=t.options.values),("function"==typeof t.hasDefault?t.hasDefault():void 0)&&(r.default=t.options.default),r}},{key:"sendComponent",value:function(e,t,r){var n,o,i,s,a,c,u;for(a in o=[],i=[],c=t.inPorts)(s=c[a])&&"function"!=typeof s&&s.canAttach&&o.push(this.processPort(a,s));for(a in u=t.outPorts)(s=u[a])&&"function"!=typeof s&&s.canAttach&&i.push(this.processPort(a,s));return n=t.getIcon?t.getIcon():"gear",this.send("component",{name:e,description:t.description,subgraph:t.isSubgraph(),icon:n,inPorts:o,outPorts:i},r)}},{key:"registerGraph",value:function(e,t,r){var n,o,i=this;return o=p(function(){return i.processComponent(n,e,r)},10),(n=this.getLoader(t.baseDir,this.transport.options)).listComponents(function(s,a){if(!s)return n.registerComponent("",e,t),o();i.send("error",s,r)}),t.on("addNode",o),t.on("removeNode",o),t.on("renameNode",o),t.on("addEdge",o),t.on("removeEdge",o),t.on("addInitial",o),t.on("removeInitial",o),t.on("addInport",o),t.on("removeInport",o),t.on("renameInport",o),t.on("addOutport",o),t.on("removeOutport",o),t.on("renameOutport",o)}}])&&o(r.prototype,n),c&&o(r,c),t}();return e.prototype.loaders={},e}.call(this),e.exports=c},function(e,t){function r(e,t,r){var n,o,i,s,a;function c(){var u=Date.now()-s;u<t&&u>=0?n=setTimeout(c,t-u):(n=null,r||(a=e.apply(i,o),i=o=null))}null==t&&(t=100);var u=function(){i=this,o=arguments,s=Date.now();var u=r&&!n;return n||(n=setTimeout(c,t)),u&&(a=e.apply(i,o),i=o=null),a};return u.clear=function(){n&&(clearTimeout(n),n=null)},u.flush=function(){n&&(a=e.apply(i,o),i=o=null,clearTimeout(n),n=null)},u}r.debounce=r,e.exports=r},function(e,t){t.parseName=function(e){var t;return-1===e.indexOf("/")?{library:null,name:e}:{library:(t=e.split("/"))[0],name:t[1]}}},function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var s,a,c,u,p,l,h,d,f;d=r(0),u=r(14)("noflo-runtime-base:trace"),l=JSON.stringify;try{l=r(593)}catch(e){p=e,console.log("WARN: failed to load json-stringify-safe, circular objects may cause fail.\n".concat(p.message))}c=function(e){var t;return t=l(e),JSON.parse(t)},s=function(){function e(){n(this,e),this.events=[]}return i(e,[{key:"add",value:function(e){return this.events.push(e)}},{key:"getAll",value:function(e,t){var r,n,o;for(r=0,n=(o=this.events).length;r<n;r++)e(p=o[r]);return t(null)}}]),e}(),f=function(e,t,r,n){var o,i,s,a,c,u,p,l,h;for(u in i={},p=e.graph.outports)for(a=p[u],h=d.internalSocket.createSocket(),i[u]=h,e.processes[a.process].component.outPorts[a.port].attach(h),l=function(e){return function(r){var o;return o={id:"EXPORT: ".concat(t," ").concat(u.toUpperCase()," ->"),payload:r,socket:{to:{process:{id:t},port:u}}},n(e,o)}},s=0,c=r.length;s<c;s++)o=r[s],h.on(o,l(o));return i},h=function(e,t,r){var n,o,i,s,a,l,h,d;switch(u("event",e,t,"'".concat(r.id,"'")),d=r.socket,h=function(e){try{return e.group=r.group.toString()}catch(t){return u("group serialization error",p=t),e.error=p.message}},o=(n={protocol:"network",command:t,payload:{time:(new Date).toISOString(),graph:e,error:null,src:{node:null!=(i=d.from)?i.process.id:void 0,port:null!=(s=d.from)?s.port:void 0},tgt:{node:null!=(a=d.to)?a.process.id:void 0,port:null!=(l=d.to)?l.port:void 0},id:void 0,subgraph:void 0}}).payload,t){case"connect":case"disconnect":break;case"begingroup":case"endgroup":h(n.payload);break;case"data":try{o.data=c(r.data)}catch(e){u("data serialization error",p=e),o.error=p.message}break;default:throw new Error("trace: Unknown event type ".concat(t))}return u("event done",e,t,"'".concat(r.id,"'")),n},a=function(){function e(t){n(this,e),this.options=t,this.buffer=new s,this.header={graphs:{}}}return i(e,[{key:"attach",value:function(e){var t,r,n=this;return r=e.graph.name||e.graph.properties.name||"default",u("attach",r),(t=["connect","begingroup","data","endgroup","disconnect"]).forEach(function(t){return e.on(t,function(e){var o;return o=h(r,t,e),n.buffer.add(o)})}),f(e,r,t,function(e,t){var o;return o=h(r,e,t),n.buffer.add(o)}),this.header.graphs[r]=e.graph.toJSON()}},{key:"detach",value:function(e){}},{key:"dumpString",value:function(e){var t,r,n=this;return r=[],t=function(e){return r.push(e)},this.buffer.getAll(t,function(t){var o;return o={header:n.header,events:r},e(t,JSON.stringify(o,null,2))})}},{key:"dumpFile",value:function(e,t){var n,o,i,s=this;return n=r(11),i=r(594),o=function(t){return n.open(e,"w",function(r,n){return t(r,{path:e,fd:n})})},e||(o=function(e){return i.open({suffix:".json"},e)}),o(function(e,r){var o,i,a,c;return e?t(e):(o=0,a=function(e,t){return n.write(r.fd,e,{encoding:"utf-8"},t)},c=function(e){var t;return t=o?",":"",o+=1,t+=JSON.stringify(e,null,2),a(t,function(e){})},u("streaming to file",r.path),i=JSON.stringify(s.header,null,2),a('{\n "header": '.concat(i,'\n, "events":\n['),function(e){return s.buffer.getAll(c,function(e){return e?t(e):(u("streamed ".concat(o," events")),a("]\n }",function(e){return u("completed stream",r.path),t(e,r.path)}))})}))})}}]),e}(),e.exports.Tracer=a},function(e,t){function r(e,t){var r=[],n=[];return null==t&&(t=function(e,t){return r[0]===t?"[Circular ~]":"[Circular ~."+n.slice(0,r.indexOf(t)).join(".")+"]"}),function(o,i){if(r.length>0){var s=r.indexOf(this);~s?r.splice(s+1):r.push(this),~s?n.splice(s,1/0,o):n.push(o),~r.indexOf(i)&&(i=t.call(this,o,i))}else r.push(i);return null==e?i:e.call(this,o,i)}}(e.exports=function(e,t,n,o){return JSON.stringify(e,r(t,o),n)}).getSerialize=r},function(e,t,r){(function(n){var o=r(11),i=r(15),s=r(595),a=r(596),c=r(604),u=a.sync,p=s.O_CREAT|s.O_TRUNC|s.O_RDWR|s.O_EXCL,l=function(e,r){var o=h(e,r),s=new Date,a=[o.prefix,s.getFullYear(),s.getMonth(),s.getDate(),"-",n.pid,"-",(4294967296*Math.random()+1).toString(36),o.suffix].join("");return i.join(o.dir||t.dir,a)},h=function(e,t){var r={prefix:null,suffix:null};if(e)switch(typeof e){case"string":r.prefix=e;break;case"object":r=e;break;default:throw new Error("Unknown affix declaration: "+r)}else r.prefix=t;return r},d=!1,f=!1,m=[],g=[];function y(e){if(!d)return!1;b(),m.push(e)}function v(e){if(!d)return!1;b(),g.push(e)}function b(){if(!d)return!1;f||(n.addListener("exit",w),f=!0)}function w(){return!!d&&{files:function(){if(!d)return!1;for(var e,t=0;void 0!==(e=m.shift());)u(e),t++;return t}(),dirs:function(){if(!d)return!1;for(var e,t=0;void 0!==(e=g.shift());)u(e),t++;return t}()}}t.dir=i.resolve(c.tmpdir()),t.track=function(t){return d=!1!==t,e.exports},t.mkdir=function(e,t){var r=l(e,"d-");o.mkdir(r,parseInt("0700",8),function(e){e||v(r),t&&t(e,r)})},t.mkdirSync=function(e){var t=l(e,"d-");return o.mkdirSync(t,parseInt("0700",8)),v(t),t},t.open=function(e,t){var r=l(e,"f-");o.open(r,p,parseInt("0600",8),function(e,n){e||y(r),t&&t(e,{path:r,fd:n})})},t.openSync=function(e){var t=l(e,"f-"),r=o.openSync(t,p,parseInt("0600",8));return y(t),{path:t,fd:r}},t.path=l,t.cleanup=function(e){d?function(e){if(d){var t=0,r=m.length;if(r)for(var n,o=function(n){if(r){if(n)return e&&e(n),void(r=0);t++,!--r&&e&&e(null,t)}};void 0!==(n=m.shift());)a(n,o);else e&&e(null,t)}else e&&e(new Error("not tracking"))}(function(t,r){t?e&&e(t,{files:r}):function(e){if(d){var t=g.length;if(t)for(var r,n=function(r){if(t){if(r)return e&&e(r,0),void(t=0);!--t&&e&&e(null,0)}};void 0!==(r=g.shift());)a(r,n);else e&&e(null,0)}else e&&e(new Error("not tracking"))}(function(t,n){e&&e(t,{files:r,dirs:n})})}):e&&e(new Error("not tracking"))},t.cleanupSync=w,t.createWriteStream=function(e){var t=l(e,"s-"),r=o.createWriteStream(t,{flags:p,mode:parseInt("0600",8)});return y(t),r}}).call(this,r(2))},function(e){e.exports=JSON.parse('{"O_RDONLY":0,"O_WRONLY":1,"O_RDWR":2,"S_IFMT":61440,"S_IFREG":32768,"S_IFDIR":16384,"S_IFCHR":8192,"S_IFBLK":24576,"S_IFIFO":4096,"S_IFLNK":40960,"S_IFSOCK":49152,"O_CREAT":512,"O_EXCL":2048,"O_NOCTTY":131072,"O_TRUNC":1024,"O_APPEND":8,"O_DIRECTORY":1048576,"O_NOFOLLOW":256,"O_SYNC":128,"O_SYMLINK":2097152,"O_NONBLOCK":4,"S_IRWXU":448,"S_IRUSR":256,"S_IWUSR":128,"S_IXUSR":64,"S_IRWXG":56,"S_IRGRP":32,"S_IWGRP":16,"S_IXGRP":8,"S_IRWXO":7,"S_IROTH":4,"S_IWOTH":2,"S_IXOTH":1,"E2BIG":7,"EACCES":13,"EADDRINUSE":48,"EADDRNOTAVAIL":49,"EAFNOSUPPORT":47,"EAGAIN":35,"EALREADY":37,"EBADF":9,"EBADMSG":94,"EBUSY":16,"ECANCELED":89,"ECHILD":10,"ECONNABORTED":53,"ECONNREFUSED":61,"ECONNRESET":54,"EDEADLK":11,"EDESTADDRREQ":39,"EDOM":33,"EDQUOT":69,"EEXIST":17,"EFAULT":14,"EFBIG":27,"EHOSTUNREACH":65,"EIDRM":90,"EILSEQ":92,"EINPROGRESS":36,"EINTR":4,"EINVAL":22,"EIO":5,"EISCONN":56,"EISDIR":21,"ELOOP":62,"EMFILE":24,"EMLINK":31,"EMSGSIZE":40,"EMULTIHOP":95,"ENAMETOOLONG":63,"ENETDOWN":50,"ENETRESET":52,"ENETUNREACH":51,"ENFILE":23,"ENOBUFS":55,"ENODATA":96,"ENODEV":19,"ENOENT":2,"ENOEXEC":8,"ENOLCK":77,"ENOLINK":97,"ENOMEM":12,"ENOMSG":91,"ENOPROTOOPT":42,"ENOSPC":28,"ENOSR":98,"ENOSTR":99,"ENOSYS":78,"ENOTCONN":57,"ENOTDIR":20,"ENOTEMPTY":66,"ENOTSOCK":38,"ENOTSUP":45,"ENOTTY":25,"ENXIO":6,"EOPNOTSUPP":102,"EOVERFLOW":84,"EPERM":1,"EPIPE":32,"EPROTO":100,"EPROTONOSUPPORT":43,"EPROTOTYPE":41,"ERANGE":34,"EROFS":30,"ESPIPE":29,"ESRCH":3,"ESTALE":70,"ETIME":101,"ETIMEDOUT":60,"ETXTBSY":26,"EWOULDBLOCK":35,"EXDEV":18,"SIGHUP":1,"SIGINT":2,"SIGQUIT":3,"SIGILL":4,"SIGTRAP":5,"SIGABRT":6,"SIGIOT":6,"SIGBUS":10,"SIGFPE":8,"SIGKILL":9,"SIGUSR1":30,"SIGSEGV":11,"SIGUSR2":31,"SIGPIPE":13,"SIGALRM":14,"SIGTERM":15,"SIGCHLD":20,"SIGCONT":19,"SIGSTOP":17,"SIGTSTP":18,"SIGTTIN":21,"SIGTTOU":22,"SIGURG":16,"SIGXCPU":24,"SIGXFSZ":25,"SIGVTALRM":26,"SIGPROF":27,"SIGWINCH":28,"SIGIO":23,"SIGSYS":12,"SSL_OP_ALL":2147486719,"SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION":262144,"SSL_OP_CIPHER_SERVER_PREFERENCE":4194304,"SSL_OP_CISCO_ANYCONNECT":32768,"SSL_OP_COOKIE_EXCHANGE":8192,"SSL_OP_CRYPTOPRO_TLSEXT_BUG":2147483648,"SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS":2048,"SSL_OP_EPHEMERAL_RSA":0,"SSL_OP_LEGACY_SERVER_CONNECT":4,"SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER":32,"SSL_OP_MICROSOFT_SESS_ID_BUG":1,"SSL_OP_MSIE_SSLV2_RSA_PADDING":0,"SSL_OP_NETSCAPE_CA_DN_BUG":536870912,"SSL_OP_NETSCAPE_CHALLENGE_BUG":2,"SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG":1073741824,"SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG":8,"SSL_OP_NO_COMPRESSION":131072,"SSL_OP_NO_QUERY_MTU":4096,"SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION":65536,"SSL_OP_NO_SSLv2":16777216,"SSL_OP_NO_SSLv3":33554432,"SSL_OP_NO_TICKET":16384,"SSL_OP_NO_TLSv1":67108864,"SSL_OP_NO_TLSv1_1":268435456,"SSL_OP_NO_TLSv1_2":134217728,"SSL_OP_PKCS1_CHECK_1":0,"SSL_OP_PKCS1_CHECK_2":0,"SSL_OP_SINGLE_DH_USE":1048576,"SSL_OP_SINGLE_ECDH_USE":524288,"SSL_OP_SSLEAY_080_CLIENT_DH_BUG":128,"SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG":0,"SSL_OP_TLS_BLOCK_PADDING_BUG":512,"SSL_OP_TLS_D5_BUG":256,"SSL_OP_TLS_ROLLBACK_BUG":8388608,"ENGINE_METHOD_DSA":2,"ENGINE_METHOD_DH":4,"ENGINE_METHOD_RAND":8,"ENGINE_METHOD_ECDH":16,"ENGINE_METHOD_ECDSA":32,"ENGINE_METHOD_CIPHERS":64,"ENGINE_METHOD_DIGESTS":128,"ENGINE_METHOD_STORE":256,"ENGINE_METHOD_PKEY_METHS":512,"ENGINE_METHOD_PKEY_ASN1_METHS":1024,"ENGINE_METHOD_ALL":65535,"ENGINE_METHOD_NONE":0,"DH_CHECK_P_NOT_SAFE_PRIME":2,"DH_CHECK_P_NOT_PRIME":1,"DH_UNABLE_TO_CHECK_GENERATOR":4,"DH_NOT_SUITABLE_GENERATOR":8,"NPN_ENABLED":1,"RSA_PKCS1_PADDING":1,"RSA_SSLV23_PADDING":2,"RSA_NO_PADDING":3,"RSA_PKCS1_OAEP_PADDING":4,"RSA_X931_PADDING":5,"RSA_PKCS1_PSS_PADDING":6,"POINT_CONVERSION_COMPRESSED":2,"POINT_CONVERSION_UNCOMPRESSED":4,"POINT_CONVERSION_HYBRID":6,"F_OK":0,"R_OK":4,"W_OK":2,"X_OK":1,"UV_UDP_REUSEADDR":4}')},function(e,t,r){(function(t){e.exports=h,h.sync=y;var n=r(110),o=r(15),i=r(11),s=r(190),a=parseInt("666",8),c={nosort:!0,silent:!0},u=0,p="win32"===t.platform;function l(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(function(t){e[t]=e[t]||i[t],e[t+="Sync"]=e[t]||i[t]}),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,!1===e.glob&&(e.disableGlob=!0),e.disableGlob=e.disableGlob||!1,e.glob=e.glob||c}function h(e,t,r){"function"==typeof t&&(r=t,t={}),n(e,"rimraf: missing path"),n.equal(typeof e,"string","rimraf: path should be a string"),n.equal(typeof r,"function","rimraf: callback function required"),n(t,"rimraf: invalid options argument provided"),n.equal(typeof t,"object","rimraf: options should be object"),l(t);var o=0,i=null,a=0;if(t.disableGlob||!s.hasMagic(e))return c(null,[e]);function c(e,n){return e?r(e):0===(a=n.length)?r():void n.forEach(function(e){d(e,t,function n(s){if(s){if(("EBUSY"===s.code||"ENOTEMPTY"===s.code||"EPERM"===s.code)&&o<t.maxBusyTries)return o++,setTimeout(function(){d(e,t,n)},100*o);if("EMFILE"===s.code&&u<t.emfileWait)return setTimeout(function(){d(e,t,n)},u++);"ENOENT"===s.code&&(s=null)}u=0,function(e){i=i||e,0==--a&&r(i)}(s)})})}t.lstat(e,function(r,n){if(!r)return c(null,[e]);s(e,t.glob,c)})}function d(e,t,r){n(e),n(t),n("function"==typeof r),t.lstat(e,function(n,o){return n&&"ENOENT"===n.code?r(null):(n&&"EPERM"===n.code&&p&&f(e,t,n,r),o&&o.isDirectory()?g(e,t,n,r):void t.unlink(e,function(n){if(n){if("ENOENT"===n.code)return r(null);if("EPERM"===n.code)return p?f(e,t,n,r):g(e,t,n,r);if("EISDIR"===n.code)return g(e,t,n,r)}return r(n)}))})}function f(e,t,r,o){n(e),n(t),n("function"==typeof o),r&&n(r instanceof Error),t.chmod(e,a,function(n){n?o("ENOENT"===n.code?null:r):t.stat(e,function(n,i){n?o("ENOENT"===n.code?null:r):i.isDirectory()?g(e,t,r,o):t.unlink(e,o)})})}function m(e,t,r){n(e),n(t),r&&n(r instanceof Error);try{t.chmodSync(e,a)}catch(e){if("ENOENT"===e.code)return;throw r}try{var o=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw r}o.isDirectory()?v(e,t,r):t.unlinkSync(e)}function g(e,t,r,i){n(e),n(t),r&&n(r instanceof Error),n("function"==typeof i),t.rmdir(e,function(s){!s||"ENOTEMPTY"!==s.code&&"EEXIST"!==s.code&&"EPERM"!==s.code?s&&"ENOTDIR"===s.code?i(r):i(s):function(e,t,r){n(e),n(t),n("function"==typeof r),t.readdir(e,function(n,i){if(n)return r(n);var s,a=i.length;if(0===a)return t.rmdir(e,r);i.forEach(function(n){h(o.join(e,n),t,function(n){if(!s)return n?r(s=n):void(0==--a&&t.rmdir(e,r))})})})}(e,t,i)})}function y(e,t){var r;if(l(t=t||{}),n(e,"rimraf: missing path"),n.equal(typeof e,"string","rimraf: path should be a string"),n(t,"rimraf: missing options"),n.equal(typeof t,"object","rimraf: options should be object"),t.disableGlob||!s.hasMagic(e))r=[e];else try{t.lstatSync(e),r=[e]}catch(n){r=s.sync(e,t.glob)}if(r.length)for(var o=0;o<r.length;o++){e=r[o];try{var i=t.lstatSync(e)}catch(r){if("ENOENT"===r.code)return;"EPERM"===r.code&&p&&m(e,t,r)}try{i&&i.isDirectory()?v(e,t,null):t.unlinkSync(e)}catch(r){if("ENOENT"===r.code)return;if("EPERM"===r.code)return p?m(e,t,r):v(e,t,r);if("EISDIR"!==r.code)throw r;v(e,t,r)}}}function v(e,t,r){n(e),n(t),r&&n(r instanceof Error);try{t.rmdirSync(e)}catch(i){if("ENOENT"===i.code)return;if("ENOTDIR"===i.code)throw r;"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code||function(e,t){n(e),n(t),t.readdirSync(e).forEach(function(r){y(o.join(e,r),t)});var r=p?100:1,i=0;for(;;){var s=!0;try{var a=t.rmdirSync(e,t);return s=!1,a}finally{if(++i<r&&s)continue}}}(e,t)}}}).call(this,r(2))},function(e,t,r){(function(e){var n=r(15),o="win32"===e.platform,i=r(11),s=e.env.NODE_DEBUG&&/fs/.test(e.env.NODE_DEBUG);function a(t){return"function"==typeof t?t:function(){var t;if(s){var r=new Error;t=function(e){e&&(r.message=e.message,n(e=r))}}else t=n;return t;function n(t){if(t){if(e.throwDeprecation)throw t;if(!e.noDeprecation){var r="fs: missing callback "+(t.stack||t.message);e.traceDeprecation?console.trace(r):console.error(r)}}}}()}n.normalize;if(o)var c=/(.*?)(?:[\/\\]+|$)/g;else c=/(.*?)(?:[\/]+|$)/g;if(o)var u=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else u=/^[\/]*/;t.realpathSync=function(e,t){if(e=n.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var r,s,a,p,l=e,h={},d={};function f(){var t=u.exec(e);r=t[0].length,s=t[0],a=t[0],p="",o&&!d[a]&&(i.lstatSync(a),d[a]=!0)}for(f();r<e.length;){c.lastIndex=r;var m=c.exec(e);if(p=s,s+=m[0],a=p+m[1],r=c.lastIndex,!(d[a]||t&&t[a]===a)){var g;if(t&&Object.prototype.hasOwnProperty.call(t,a))g=t[a];else{var y=i.lstatSync(a);if(!y.isSymbolicLink()){d[a]=!0,t&&(t[a]=a);continue}var v=null;if(!o){var b=y.dev.toString(32)+":"+y.ino.toString(32);h.hasOwnProperty(b)&&(v=h[b])}null===v&&(i.statSync(a),v=i.readlinkSync(a)),g=n.resolve(p,v),t&&(t[a]=g),o||(h[b]=v)}e=n.resolve(g,e.slice(r)),f()}}return t&&(t[l]=e),e},t.realpath=function(t,r,s){if("function"!=typeof s&&(s=a(r),r=null),t=n.resolve(t),r&&Object.prototype.hasOwnProperty.call(r,t))return e.nextTick(s.bind(null,null,r[t]));var p,l,h,d,f=t,m={},g={};function y(){var r=u.exec(t);p=r[0].length,l=r[0],h=r[0],d="",o&&!g[h]?i.lstat(h,function(e){if(e)return s(e);g[h]=!0,v()}):e.nextTick(v)}function v(){if(p>=t.length)return r&&(r[f]=t),s(null,t);c.lastIndex=p;var n=c.exec(t);return d=l,l+=n[0],h=d+n[1],p=c.lastIndex,g[h]||r&&r[h]===h?e.nextTick(v):r&&Object.prototype.hasOwnProperty.call(r,h)?E(r[h]):i.lstat(h,b)}function b(t,n){if(t)return s(t);if(!n.isSymbolicLink())return g[h]=!0,r&&(r[h]=h),e.nextTick(v);if(!o){var a=n.dev.toString(32)+":"+n.ino.toString(32);if(m.hasOwnProperty(a))return w(null,m[a],h)}i.stat(h,function(e){if(e)return s(e);i.readlink(h,function(e,t){o||(m[a]=t),w(e,t)})})}function w(e,t,o){if(e)return s(e);var i=n.resolve(d,t);r&&(r[o]=i),E(i)}function E(e){t=n.resolve(e,t.slice(p)),y()}y()}}).call(this,r(2))},function(e,t,r){var n=r(599),o=r(600);e.exports=function(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return function e(t,r){var i=[];var s=o("{","}",t);if(!s||/\$$/.test(s.pre))return[t];var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body);var u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body);var l=c||u;var g=s.body.indexOf(",")>=0;if(!l&&!g)return s.post.match(/,.*\}/)?(t=s.pre+"{"+s.body+a+s.post,e(t)):[t];var y;if(l)y=s.body.split(/\.\./);else if(1===(y=function e(t){if(!t)return[""];var r=[];var n=o("{","}",t);if(!n)return t.split(",");var i=n.pre;var s=n.body;var a=n.post;var c=i.split(",");c[c.length-1]+="{"+s+"}";var u=e(a);a.length&&(c[c.length-1]+=u.shift(),c.push.apply(c,u));r.push.apply(r,c);return r}(s.body)).length&&1===(y=e(y[0],!1).map(h)).length){var v=s.post.length?e(s.post,!1):[""];return v.map(function(e){return s.pre+y[0]+e})}var b=s.pre;var v=s.post.length?e(s.post,!1):[""];var w;if(l){var E=p(y[0]),x=p(y[1]),C=Math.max(y[0].length,y[1].length),S=3==y.length?Math.abs(p(y[2])):1,k=f,P=x<E;P&&(S*=-1,k=m);var _=y.some(d);w=[];for(var A=E;k(A,x);A+=S){var D;if(u)"\\"===(D=String.fromCharCode(A))&&(D="");else if(D=String(A),_){var O=C-D.length;if(O>0){var T=new Array(O+1).join("0");D=A<0?"-"+T+D.slice(1):T+D}}w.push(D)}}else w=n(y,function(t){return e(t,!1)});for(var N=0;N<w.length;N++)for(var I=0;I<v.length;I++){var R=b+w[N]+v[I];(!r||l||R)&&i.push(R)}return i}(function(e){return e.split("\\\\").join(i).split("\\{").join(s).split("\\}").join(a).split("\\,").join(c).split("\\.").join(u)}(e),!0).map(l)};var i="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",u="\0PERIOD"+Math.random()+"\0";function p(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function l(e){return e.split(i).join("\\").split(s).join("{").split(a).join("}").split(c).join(",").split(u).join(".")}function h(e){return"{"+e+"}"}function d(e){return/^-?0\d/.test(e)}function f(e,t){return e<=t}function m(e,t){return e>=t}},function(e,t){e.exports=function(e,t){for(var n=[],o=0;o<e.length;o++){var i=t(e[o],o);r(i)?n.push.apply(n,i):n.push(i)}return n};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function n(e,t,r){e instanceof RegExp&&(e=o(e,r)),t instanceof RegExp&&(t=o(t,r));var n=i(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function o(e,t){var r=t.match(e);return r?r[0]:null}function i(e,t,r){var n,o,i,s,a,c=r.indexOf(e),u=r.indexOf(t,c+1),p=c;if(c>=0&&u>0){for(n=[],i=r.length;p>=0&&!a;)p==c?(n.push(p),c=r.indexOf(e,p+1)):1==n.length?a=[n.pop(),u]:((o=n.pop())<i&&(i=o,s=u),u=r.indexOf(t,p+1)),p=c<u&&c>=0?c:u;n.length&&(a=[i,s])}return a}e.exports=n,n.range=i},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},function(e,t,r){(function(t){e.exports=f,f.GlobSync=m;var n=r(11),o=r(191),i=r(111),s=(i.Minimatch,r(190).Glob,r(61),r(15)),a=r(110),c=r(112),u=r(192),p=(u.alphasort,u.alphasorti,u.setopts),l=u.ownProp,h=u.childrenIgnored,d=u.isIgnored;function f(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new m(e,t).found}function m(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof m))return new m(e,t);if(p(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}m.prototype._finish=function(){if(a(this instanceof m),this.realpath){var e=this;this.matches.forEach(function(t,r){var n=e.matches[r]=Object.create(null);for(var i in t)try{i=e._makeAbs(i),n[o.realpathSync(i,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;n[e._makeAbs(i)]=!0}})}u.finish(this)},m.prototype._process=function(e,t,r){a(this instanceof m);for(var n,o=0;"string"==typeof e[o];)o++;switch(o){case e.length:return void this._processSimple(e.join("/"),t);case 0:n=null;break;default:n=e.slice(0,o).join("/")}var s,u=e.slice(o);null===n?s=".":c(n)||c(e.join("/"))?(n&&c(n)||(n="/"+n),s=n):s=n;var p=this._makeAbs(s);h(this,s)||(u[0]===i.GLOBSTAR?this._processGlobStar(n,s,p,u,t,r):this._processReaddir(n,s,p,u,t,r))},m.prototype._processReaddir=function(e,t,r,n,o,i){var a=this._readdir(r,i);if(a){for(var c=n[0],u=!!this.minimatch.negate,p=c._glob,l=this.dot||"."===p.charAt(0),h=[],d=0;d<a.length;d++){if("."!==(g=a[d]).charAt(0)||l)(u&&!e?!g.match(c):g.match(c))&&h.push(g)}var f=h.length;if(0!==f)if(1!==n.length||this.mark||this.stat){n.shift();for(d=0;d<f;d++){var m;g=h[d];m=e?[e,g]:[g],this._process(m.concat(n),o,i)}}else{this.matches[o]||(this.matches[o]=Object.create(null));for(var d=0;d<f;d++){var g=h[d];e&&(g="/"!==e.slice(-1)?e+"/"+g:e+g),"/"!==g.charAt(0)||this.nomount||(g=s.join(this.root,g)),this._emitMatch(o,g)}}}},m.prototype._emitMatch=function(e,t){if(!d(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},m.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r;try{r=n.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var o=r&&r.isSymbolicLink();return this.symlinks[e]=o,o||!r||r.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},m.prototype._readdir=function(e,t){if(t&&!l(this.symlinks,e))return this._readdirInGlobStar(e);if(l(this.cache,e)){var r=this.cache[e];if(!r||"FILE"===r)return null;if(Array.isArray(r))return r}try{return this._readdirEntries(e,n.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},m.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var n=t[r];n="/"===e?e+n:e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,t},m.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=t.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},m.prototype._processGlobStar=function(e,t,r,n,o,i){var s=this._readdir(r,i);if(s){var a=n.slice(1),c=e?[e]:[],u=c.concat(a);this._process(u,o,!1);var p=s.length;if(!this.symlinks[r]||!i)for(var l=0;l<p;l++){if("."!==s[l].charAt(0)||this.dot){var h=c.concat(s[l],a);this._process(h,o,!0);var d=c.concat(s[l],n);this._process(d,o,!0)}}}},m.prototype._processSimple=function(e,r){var n=this._stat(e);if(this.matches[r]||(this.matches[r]=Object.create(null)),n){if(e&&c(e)&&!this.nomount){var o=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=s.join(this.root,e):(e=s.resolve(this.root,e),o&&(e+="/"))}"win32"===t.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(r,e)}},m.prototype._stat=function(e){var t=this._makeAbs(e),r="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&l(this.cache,t)){var o=this.cache[t];if(Array.isArray(o)&&(o="DIR"),!r||"DIR"===o)return o;if(r&&"FILE"===o)return!1}var i=this.statCache[t];if(!i){var s;try{s=n.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{i=n.statSync(t)}catch(e){i=s}else i=s}this.statCache[t]=i;o=!0;return i&&(o=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||o,(!r||"FILE"!==o)&&o},m.prototype._mark=function(e){return u.mark(this,e)},m.prototype._makeAbs=function(e){return u.makeAbs(this,e)}}).call(this,r(2))},function(e,t,r){(function(t){var n=r(193),o=Object.create(null),i=r(194);function s(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n]=e[n];return r}e.exports=n(function(e,r){return o[e]?(o[e].push(r),null):(o[e]=[r],function(e){return i(function r(){var n=o[e],i=n.length,a=s(arguments);try{for(var c=0;c<i;c++)n[c].apply(null,a)}finally{n.length>i?(n.splice(0,i),t.nextTick(function(){r.apply(null,a)})):delete o[e]}})}(e))})}).call(this,r(2))},function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},function(e,t,r){(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l,h,d,f;l=r(189),f=r(8).EventEmitter,d=function(e){function t(e){var r;return o(this,t),(r=a(this,c(t).call(this,e))).clients=[],r}return u(t,l),s(t,[{key:"_connect",value:function(e){var t=this;return this.clients.push(e),e.on("send",function(r){return t._receive(r,{client:e})})}},{key:"_disconnect",value:function(e){if(-1!==this.clients.indexOf(e))return this.clients.splice(this.clients.indexOf(e),1),e.removeAllListeners("send")}},{key:"_receive",value:function(e,t){return this.receive(e.protocol,e.command,e.payload,t)}},{key:"send",value:function(e,t,r,n){var o;if(n.client)return o={protocol:e,command:t,payload:r},n.client._receive(o)}},{key:"sendAll",value:function(e,t,r){var n,o,i,s,a,c;for(s={protocol:e,command:t,payload:r},c=[],o=0,i=(a=this.clients).length;o<i;o++)n=a[o],c.push(n._receive(s));return c}}]),t}(),h=function(e){function t(e,r){var n;return o(this,t),(n=a(this,c(t).call(this))).name=r,n.runtime=e,n.name||(n.name="Unnamed client"),n}return u(t,f),s(t,[{key:"connect",value:function(){return this.runtime._connect(this)}},{key:"disconnect",value:function(){return this.runtime._disconnect(this)}},{key:"send",value:function(e,t,r){var n;return n={protocol:e,command:t,payload:r},this.emit("send",n)}},{key:"_receive",value:function(e){var t=this;return setTimeout(function(){return t.emit("message",e)},1)}}]),t}(),t.Client=h,t.Runtime=d}).call(this,r(2))},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=r(109),c=r(195),u=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=o(this,i(t).call(this,e))).setClient(window.parent),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,a),t}();e.exports=function(e){var t=c.normalizeOptions(e),r=new u(t);return c.subscribe(window,function(e,t){"iframe"!==e.protocol||"setcontent"!==e.command?r.receive(e.protocol,e.command,e.payload,{href:t.origin}):document.body.innerHTML=e.payload}),r}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=r(109),u=r(195),p=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=i(this,s(t).call(this,e)),r&&r.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),n.openClient(r.getAttribute("href"))}),n}var r,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,c),r=t,(n=[{key:"openClient",value:function(e){var t=this,r=window.open(e,"_blank");if(!r)throw new Error("Unable to open client window at '".concat(e,"'"));this.context={href:"*"};var n=function(e){var t=e.data;"string"==typeof e.data&&(t=JSON.parse(e.data)),t.protocol&&t.command&&this.receive(t.protocol,t.command,t.payload,this.context)}.bind(this),o=setInterval(function(){r&&!r.closed||(t.setClient(null),window.removeEventListener("message",n),clearInterval(o))},1e3);this.setClient(r),window.addEventListener("message",n)}}])&&o(r.prototype,n),u&&o(r,u),t}();e.exports=function(e,t){var r=u.normalizeOptions(e);return new p(r,t)}},function(e,t,r){const n=r(0);t.IDBJournalStore=class extends n.journal.JournalStore{constructor(e,t){super(e),this.db=t,this.transactions=[]}genKey(e){return`${this.graph.properties.id}_${e}`}putTransaction(e,t){return super.putTransaction(e,t),this.db.transaction(["journals"],"readwrite").objectStore("journals").add({id:this.genKey(e),graph:this.graph.properties.id,revId:e,entries:t}),this.transactions[e]=t,super.putTransaction(e,t)}fetchTransaction(e){return this.transactions[e]}init(e){this.db.transaction(["journals"]).objectStore("journals").index("graph").openCursor().onsuccess=t=>{const r=t.target.result;return r?(this.transactions[r.value.revId]=r.value.entries,r.value.revId>this.lastRevision&&(this.lastRevision=r.value.revId),r.continue()):e()}}}},function(e,t,r){const n=r(610),o=r(611),i=r(612),s=r(613),a=r(614),c={pink2web:r(615),msgflo:n,sndflo:o,imgflo:i,noflo:s,javafbp:a,microflo:r(616)};c["noflo-browser"]=c.noflo,c["noflo-gnome"]=c.noflo,c["noflo-nodejs"]=c.noflo,e.exports=c},function(e,t){e.exports={runtimetypes:{msgflo:{shortname:"MsgFlo Message Queuing",icon:"cubes",description:"Message queue orchestration",helpurl:"https://msgflo.org/docs/usage/"}},preferredlanguage:"python",componenttemplates:{python:"#!/usr/bin/env python\nimport msgflo\n\nclass <%= name %>(msgflo.Participant):\n  def __init__(self, role):\n    d = {\n      'component': '<%= namespace %>/<%= name %>',\n      'label': '<%= description %>',\n      'icon': '<%= icon %>',\n      'inports': [\n        { 'id': 'in', 'type': 'any' },\n      ],\n      'outports': [\n        { 'id': 'out', 'type': 'any' },\n      ],\n    }\n    msgflo.Participant.__init__(self, d, role)\n\n  def process(self, inport, msg):\n    self.send('out', msg.data)\n    self.ack(msg)\n\nif __name__ == '__main__':\n  msgflo.main(<%= name %>)\n",coffeescript:"# To work in msgflo-nodejs source tree\ntry\n  msgflo = require 'msgflo-nodejs'\ncatch e\n  msgflo = require '..'\n\n<%= name %> = (client, role) ->\n\n  definition =\n    component: '<%= namespace %>/<%= name %>'\n    icon: '<%= icon %>'\n    label: '<%= description %>'\n    inports: [\n      id: 'in'\n      type: 'any'\n    ]\n    outports: [\n      id: 'out'\n      type: 'any'\n    ]\n  process = (inport, indata, callback) ->\n    return callback 'out', null, indata\n  return new msgflo.participant.Participant client, definition, process, role\n\nmodule.exports = <%= name %>\n",javascript:"try {\n  var msgflo = require('msgflo-nodejs');\n} catch (error) {\n  var e = error;\n  var msgflo = require('..');\n}\n\nvar <%= name %> = function(client, role) {\n  var definition = {\n    component: '<%= namespace %>/<%= name %>',\n    icon: '<%= icon %>',\n    label: '<%= description %>',\n    inports: [\n      {\n        id: 'in',\n        type: 'any'\n      }\n    ],\n    outports: [\n      {\n        id: 'out',\n        type: 'any'\n      }\n    ]\n  };\n  var process = function(inport, indata, callback) {\n    return callback('out', null, indata);\n  };\n  return new msgflo.participant.Participant(client, definition, process, role);\n};\n\nmodule.exports = <%= name %>;\n",yaml:"# Declare MsgFlo participant on behalf of code which does not send discovery message by itself\ncomponent: '<%= namespace %>/<%= name %>'\nlabel: '<%= description %>'\nicon: '<%= icon %>'\ninports:\n  open:\n    queue: /bitraf/door/#ROLE/open\n    type: object\noutports: {}\n"},examples:{}}},function(e,t){e.exports={runtimetypes:{sndflo:{shortname:"SndFlo Sound Synthesis",icon:"music",description:"Create sound using SuperCollider",helpurl:"https://github.com/jonnor/sndflo#readme"}},componenttemplates:{supercollider:'SynthDef("MyFilter", {\n    arg in=SndFloLibrary.silentIn, out=SndFloLibrary.silentOut, freq=4400;\n    Out.ar(out, BLowPass.ar(In.ar(in), freq))\n},\n    metadata: (\n        description: "my filter",\n        specs: (\n            freq: ControlSpec(20, 20000, \\exp, 0.1, 2200, "Hz")\n        )\n    )\n)\n'},examples:{}}},function(e,t){e.exports={runtimetypes:{imgflo:{shortname:"ImgFlo Image Manipulation",icon:"picture-o",description:"Process images using GEGL",helpurl:"https://github.com/jonnor/imgflo#readme"}},componenttemplates:{c:'/* This file is an image processing operation for GEGL */\n\n#ifdef GEGL_PROPERTIES\n    // Dummy prop, for testing\n    property_double (x, "X", 0.0)\n        ui_range (0.0, 1024.0)\n        ui_meta ("unit", "pixel-coordinate")\n#else\n\n#define GEGL_OP_POINT_FILTER\n#include "gegl-op.h"\n\n#ifndef IMGFLO_OP_NAME\n#define IMGFLO_OP_NAME(orig) orig\n#endif\n\nstatic void prepare(GeglOperation *operation)\n{\n    const Babl *format = babl_format("YA float");\n    gegl_operation_set_format(operation, "input", format);\n    gegl_operation_set_format(operation, "output", format);\n}\n\ngboolean\nprocess(GeglOperation *op, void *in_buf, void *out_buf, glong samples,\n        const GeglRectangle *roi, gint level)\n{\n    float *in = in_buf;\n    float *out = out_buf;\n    while (samples--) {\n        *out++ = *in++;\n        *out++ = *in++;\n    }\n    return TRUE;\n}\n\nstatic void\ngegl_op_class_init (GeglOpClass *klass)\n{\n  GeglOperationClass *operation_class = GEGL_OPERATION_CLASS(klass);\n  GeglOperationPointFilterClass *point_filter_class = GEGL_OPERATION_POINT_FILTER_CLASS(klass);\n  point_filter_class->process = process;\n  operation_class->prepare = prepare;\n  gegl_operation_class_set_keys (operation_class,\n      "name",        IMGFLO_OP_NAME("myop2"),\n      "title",       "imgflo: Dynamic Flowhub",\n      "categories" , "dev",\n      "description", "First GEGL op written in Flowhub 22",\n  NULL);\n}\n\n#endif\n'},examples:{}}},function(e,t){e.exports={runtimetypes:{"noflo-browser":{shortname:"NoFlo for Browser",icon:"html5",description:"Build client-side browser applications",helpurl:"https://github.com/noflo/noflo-browser-app#readme"},"noflo-nodejs":{shortname:"NoFlo for Node.js",icon:"cloud",description:"Build network applications",helpurl:"https://github.com/noflo/noflo-nodejs#readme"},"noflo-gnome":{shortname:"NoFlo for GNOME",icon:"desktop",description:"Build GNOME desktop applications",helpurl:"https://github.com/noflo/noflo-gnome#readme"}},preferredlanguage:"es2015",componenttemplates:{javascript:"var noflo = require('noflo');\n\nexports.getComponent = function() {\n  var c = new noflo.Component();\n  c.description = '<%= description %>';\n  c.icon = '<%= icon %>';\n  c.inPorts.add('in', {\n    datatype: 'all',\n    description: 'Packet to forward'\n  });\n  c.outPorts.add('out', {\n    datatype: 'all'\n  });\n  c.process(function (input, output) {\n    // Check preconditions on input data\n    if (!input.hasData('in')) {\n      return;\n    }\n    // Read packets we need to process\n    var data = input.getData('in');\n    // Process data and send output\n    output.send({\n      out: data\n    });\n    // Deactivate\n    output.done();\n  });\n  return c;\n};\n",coffeescript:"noflo = require 'noflo'\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = '<%= description %>'\n  c.icon = '<%= icon %>'\n  c.inPorts.add 'in',\n    datatype: 'all'\n    description: 'Packet to forward'\n  c.outPorts.add 'out',\n    datatype: 'all'\n  c.process (input, output) ->\n    # Check preconditions on input data\n    return unless input.hasData 'in'\n    # Read packets we need to process\n    data = input.getData 'in'\n    # Process data and send output\n    output.send\n      out: data\n    # Deactivate\n    output.done()\n",es2015:"const noflo = require('noflo');\n\nexports.getComponent = () => {\n  const c = new noflo.Component();\n  c.description = '<%= description %>';\n  c.icon = '<%= icon %>';\n  c.inPorts.add('in', {\n    datatype: 'all',\n    description: 'Packet to forward'\n  });\n  c.outPorts.add('out', {\n    datatype: 'all'\n  });\n  c.process((input, output) => {\n    // Check preconditions on input data\n    if (!input.hasData('in')) {\n      return;\n    }\n    // Read packets we need to process\n    const data = input.getData('in');\n    // Process data and send output\n    output.send({\n      out: data\n    });\n    // Deactivate\n    output.done();\n  });\n  return c;\n};\n"},examples:{clock:{label:"Animated clock",id:"86a28c01d66cd8bf672f4e0a3e1ba851"},camtopalette:{label:"Cam to palette",id:"efd306b5846c236998a63c535ceebed1",ssl:!0},canvas:{label:"Canvas pattern",id:"dc0414ecf989b4b130b119e948653350"},counter:{label:"Click counter",id:"38471e33458d644e907f4637434f5bbf"},draganddrop:{label:"Drag-and-drop physics",id:"026a7bc8f1b482f56ad336c9d72dd72f"},delaunaymasks:{label:"Delaunay masks",id:"d6c1fa7b4b9d437564e954f338d970b9",ssl:!0},reacttodo:{label:"React TODO list",id:"c111454c9fd2f74d37d1e8a4e739adfd"},webaudio:{label:"Web Audio",id:"6724a6eb8a1aaf351866e7a43c3ecd43"}}}},function(e,t){e.exports={runtimetypes:{javafbp:{shortname:"JavaFBP",icon:"android",description:"Program Java and Android applications",helpurl:"https://github.com/jonnor/javafbp-runtime#readme"}},componenttemplates:{java:"// TODO\n"},examples:{}}},function(e,t){e.exports={runtimetypes:{pink2web:{shortname:"Pink2Web",icon:"project-diagram",description:"Industrial Automation platform",helpurl:"https://github.com/niclash/pink2web#readme"}},preferredlanguage:"pony",componenttemplates:{pony:"// TODO\n"},examples:{}}},function(e,t){e.exports={runtimetypes:{microflo:{shortname:"MicroFlo Microcontroller Programming",icon:"lightbulb-o",description:"Program microcontrollers like Arduino",helpurl:"https://github.com/jonnor/microflo#readme"}},componenttemplates:{"c++":"// TODO\n"},examples:{}}},function(e,t){t.getIcon=(e,t="")=>{const r=null!=window.TheGraph?window.TheGraph.FONT_AWESOME:void 0;return r?r[e]?r[e]:t?r[t]:t:e},t.getIcons=()=>{const e=null!=window.TheGraph?window.TheGraph.FONT_AWESOME:void 0;return e||{}}}]);
//# sourceMappingURL=noflo-ui.min.js.map